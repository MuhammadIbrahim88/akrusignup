var VE=Object.defineProperty;var c=(ee,h)=>VE(ee,"name",{value:h,configurable:!0});(()=>{var __webpack_modules__={6232:(ee,h,H)=>{"use strict";const E=H(8641),O=H(8692),B=H(1474),K=H(5870),Y=c((M,w={})=>{let R=[];if(Array.isArray(M))for(let A of M){let x=Y.create(A,w);Array.isArray(x)?R.push(...x):R.push(x)}else R=[].concat(Y.create(M,w));return w&&w.expand===!0&&w.nodupes===!0&&(R=[...new Set(R)]),R},"braces");Y.parse=(M,w={})=>K(M,w),Y.stringify=(M,w={})=>E(typeof M=="string"?Y.parse(M,w):M,w),Y.compile=(M,w={})=>(typeof M=="string"&&(M=Y.parse(M,w)),O(M,w)),Y.expand=(M,w={})=>{typeof M=="string"&&(M=Y.parse(M,w));let R=B(M,w);return w.noempty===!0&&(R=R.filter(Boolean)),w.nodupes===!0&&(R=[...new Set(R)]),R},Y.create=(M,w={})=>M===""||M.length<3?[M]:w.expand!==!0?Y.compile(M,w):Y.expand(M,w),ee.exports=Y},8692:(ee,h,H)=>{"use strict";const E=H(1516),O=H(3596),B=c((K,Y={})=>{let M=c((w,R={})=>{let A=O.isInvalidBrace(R),x=w.invalid===!0&&Y.escapeInvalid===!0,D=A===!0||x===!0,j=Y.escapeInvalid===!0?"\\":"",N="";if(w.isOpen===!0||w.isClose===!0)return j+w.value;if(w.type==="open")return D?j+w.value:"(";if(w.type==="close")return D?j+w.value:")";if(w.type==="comma")return w.prev.type==="comma"?"":D?w.value:"|";if(w.value)return w.value;if(w.nodes&&w.ranges>0){let X=O.reduce(w.nodes),ve=E(...X,{...Y,wrap:!1,toRegex:!0});if(ve.length!==0)return X.length>1&&ve.length>1?`(${ve})`:ve}if(w.nodes)for(let X of w.nodes)N+=M(X,w);return N},"walk");return M(K)},"compile");ee.exports=B},7007:ee=>{"use strict";ee.exports={MAX_LENGTH:1024*64,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
`,CHAR_NO_BREAK_SPACE:"\xA0",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"}},1474:(ee,h,H)=>{"use strict";const E=H(1516),O=H(8641),B=H(3596),K=c((M="",w="",R=!1)=>{let A=[];if(M=[].concat(M),w=[].concat(w),!w.length)return M;if(!M.length)return R?B.flatten(w).map(x=>`{${x}}`):w;for(let x of M)if(Array.isArray(x))for(let D of x)A.push(K(D,w,R));else for(let D of w)R===!0&&typeof D=="string"&&(D=`{${D}}`),A.push(Array.isArray(D)?K(x,D,R):x+D);return B.flatten(A)},"append"),Y=c((M,w={})=>{let R=w.rangeLimit===void 0?1e3:w.rangeLimit,A=c((x,D={})=>{x.queue=[];let j=D,N=D.queue;for(;j.type!=="brace"&&j.type!=="root"&&j.parent;)j=j.parent,N=j.queue;if(x.invalid||x.dollar){N.push(K(N.pop(),O(x,w)));return}if(x.type==="brace"&&x.invalid!==!0&&x.nodes.length===2){N.push(K(N.pop(),["{}"]));return}if(x.nodes&&x.ranges>0){let z=B.reduce(x.nodes);if(B.exceedsLimit(...z,w.step,R))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let q=E(...z,w);q.length===0&&(q=O(x,w)),N.push(K(N.pop(),q)),x.nodes=[];return}let X=B.encloseBrace(x),ve=x.queue,de=x;for(;de.type!=="brace"&&de.type!=="root"&&de.parent;)de=de.parent,ve=de.queue;for(let z=0;z<x.nodes.length;z++){let q=x.nodes[z];if(q.type==="comma"&&x.type==="brace"){z===1&&ve.push(""),ve.push("");continue}if(q.type==="close"){N.push(K(N.pop(),ve,X));continue}if(q.value&&q.type!=="open"){ve.push(K(ve.pop(),q.value));continue}q.nodes&&A(q,x)}return ve},"walk");return B.flatten(A(M))},"expand");ee.exports=Y},5870:(ee,h,H)=>{"use strict";const E=H(8641),{MAX_LENGTH:O,CHAR_BACKSLASH:B,CHAR_BACKTICK:K,CHAR_COMMA:Y,CHAR_DOT:M,CHAR_LEFT_PARENTHESES:w,CHAR_RIGHT_PARENTHESES:R,CHAR_LEFT_CURLY_BRACE:A,CHAR_RIGHT_CURLY_BRACE:x,CHAR_LEFT_SQUARE_BRACKET:D,CHAR_RIGHT_SQUARE_BRACKET:j,CHAR_DOUBLE_QUOTE:N,CHAR_SINGLE_QUOTE:X,CHAR_NO_BREAK_SPACE:ve,CHAR_ZERO_WIDTH_NOBREAK_SPACE:de}=H(7007),z=c((q,re={})=>{if(typeof q!="string")throw new TypeError("Expected a string");let I=re||{},W=typeof I.maxLength=="number"?Math.min(O,I.maxLength):O;if(q.length>W)throw new SyntaxError(`Input length (${q.length}), exceeds max characters (${W})`);let G={type:"root",input:q,nodes:[]},he=[G],le=G,oe=G,ye=0,Ie=q.length,He=0,je=0,Re,Ye={};const ze=c(()=>q[He++],"advance"),Ke=c(Le=>{if(Le.type==="text"&&oe.type==="dot"&&(oe.type="text"),oe&&oe.type==="text"&&Le.type==="text"){oe.value+=Le.value;return}return le.nodes.push(Le),Le.parent=le,Le.prev=oe,oe=Le,Le},"push");for(Ke({type:"bos"});He<Ie;)if(le=he[he.length-1],Re=ze(),!(Re===de||Re===ve)){if(Re===B){Ke({type:"text",value:(re.keepEscaping?Re:"")+ze()});continue}if(Re===j){Ke({type:"text",value:"\\"+Re});continue}if(Re===D){ye++;let Le=!0,Xe;for(;He<Ie&&(Xe=ze());){if(Re+=Xe,Xe===D){ye++;continue}if(Xe===B){Re+=ze();continue}if(Xe===j&&(ye--,ye===0))break}Ke({type:"text",value:Re});continue}if(Re===w){le=Ke({type:"paren",nodes:[]}),he.push(le),Ke({type:"text",value:Re});continue}if(Re===R){if(le.type!=="paren"){Ke({type:"text",value:Re});continue}le=he.pop(),Ke({type:"text",value:Re}),le=he[he.length-1];continue}if(Re===N||Re===X||Re===K){let Le=Re,Xe;for(re.keepQuotes!==!0&&(Re="");He<Ie&&(Xe=ze());){if(Xe===B){Re+=Xe+ze();continue}if(Xe===Le){re.keepQuotes===!0&&(Re+=Xe);break}Re+=Xe}Ke({type:"text",value:Re});continue}if(Re===A){je++;let Le=oe.value&&oe.value.slice(-1)==="$"||le.dollar===!0;le=Ke({type:"brace",open:!0,close:!1,dollar:Le,depth:je,commas:0,ranges:0,nodes:[]}),he.push(le),Ke({type:"open",value:Re});continue}if(Re===x){if(le.type!=="brace"){Ke({type:"text",value:Re});continue}let Le="close";le=he.pop(),le.close=!0,Ke({type:Le,value:Re}),je--,le=he[he.length-1];continue}if(Re===Y&&je>0){if(le.ranges>0){le.ranges=0;let Le=le.nodes.shift();le.nodes=[Le,{type:"text",value:E(le)}]}Ke({type:"comma",value:Re}),le.commas++;continue}if(Re===M&&je>0&&le.commas===0){let Le=le.nodes;if(je===0||Le.length===0){Ke({type:"text",value:Re});continue}if(oe.type==="dot"){if(le.range=[],oe.value+=Re,oe.type="range",le.nodes.length!==3&&le.nodes.length!==5){le.invalid=!0,le.ranges=0,oe.type="text";continue}le.ranges++,le.args=[];continue}if(oe.type==="range"){Le.pop();let Xe=Le[Le.length-1];Xe.value+=oe.value+Re,oe=Xe,le.ranges--;continue}Ke({type:"dot",value:Re});continue}Ke({type:"text",value:Re})}do if(le=he.pop(),le.type!=="root"){le.nodes.forEach(st=>{st.nodes||(st.type==="open"&&(st.isOpen=!0),st.type==="close"&&(st.isClose=!0),st.nodes||(st.type="text"),st.invalid=!0)});let Le=he[he.length-1],Xe=Le.nodes.indexOf(le);Le.nodes.splice(Xe,1,...le.nodes)}while(he.length>0);return Ke({type:"eos"}),G},"parse");ee.exports=z},8641:(ee,h,H)=>{"use strict";const E=H(3596);ee.exports=(O,B={})=>{let K=c((Y,M={})=>{let w=B.escapeInvalid&&E.isInvalidBrace(M),R=Y.invalid===!0&&B.escapeInvalid===!0,A="";if(Y.value)return(w||R)&&E.isOpenOrClose(Y)?"\\"+Y.value:Y.value;if(Y.value)return Y.value;if(Y.nodes)for(let x of Y.nodes)A+=K(x);return A},"stringify");return K(O)}},3596:(ee,h)=>{"use strict";h.isInteger=H=>typeof H=="number"?Number.isInteger(H):typeof H=="string"&&H.trim()!==""?Number.isInteger(Number(H)):!1,h.find=(H,E)=>H.nodes.find(O=>O.type===E),h.exceedsLimit=(H,E,O=1,B)=>B===!1||!h.isInteger(H)||!h.isInteger(E)?!1:(Number(E)-Number(H))/Number(O)>=B,h.escapeNode=(H,E=0,O)=>{let B=H.nodes[E];!B||(O&&B.type===O||B.type==="open"||B.type==="close")&&B.escaped!==!0&&(B.value="\\"+B.value,B.escaped=!0)},h.encloseBrace=H=>H.type!=="brace"?!1:H.commas>>0+H.ranges>>0==0?(H.invalid=!0,!0):!1,h.isInvalidBrace=H=>H.type!=="brace"?!1:H.invalid===!0||H.dollar?!0:H.commas>>0+H.ranges>>0==0||H.open!==!0||H.close!==!0?(H.invalid=!0,!0):!1,h.isOpenOrClose=H=>H.type==="open"||H.type==="close"?!0:H.open===!0||H.close===!0,h.reduce=H=>H.reduce((E,O)=>(O.type==="text"&&E.push(O.value),O.type==="range"&&(O.type="text"),E),[]),h.flatten=(...H)=>{const E=[],O=c(B=>{for(let K=0;K<B.length;K++){let Y=B[K];Array.isArray(Y)?O(Y,E):Y!==void 0&&E.push(Y)}return E},"flat");return O(H),E}},1516:(ee,h,H)=>{"use strict";/*!
 * fill-range <https://github.com/jonschlinkert/fill-range>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Licensed under the MIT License.
 */const E=H(6529),O=H(2999),B=c(I=>I!==null&&typeof I=="object"&&!Array.isArray(I),"isObject"),K=c(I=>W=>I===!0?Number(W):String(W),"transform"),Y=c(I=>typeof I=="number"||typeof I=="string"&&I!=="","isValidValue"),M=c(I=>Number.isInteger(+I),"isNumber"),w=c(I=>{let W=`${I}`,G=-1;if(W[0]==="-"&&(W=W.slice(1)),W==="0")return!1;for(;W[++G]==="0";);return G>0},"zeros"),R=c((I,W,G)=>typeof I=="string"||typeof W=="string"?!0:G.stringify===!0,"stringify"),A=c((I,W,G)=>{if(W>0){let he=I[0]==="-"?"-":"";he&&(I=I.slice(1)),I=he+I.padStart(he?W-1:W,"0")}return G===!1?String(I):I},"pad"),x=c((I,W)=>{let G=I[0]==="-"?"-":"";for(G&&(I=I.slice(1),W--);I.length<W;)I="0"+I;return G?"-"+I:I},"toMaxLen"),D=c((I,W)=>{I.negatives.sort((ye,Ie)=>ye<Ie?-1:ye>Ie?1:0),I.positives.sort((ye,Ie)=>ye<Ie?-1:ye>Ie?1:0);let G=W.capture?"":"?:",he="",le="",oe;return I.positives.length&&(he=I.positives.join("|")),I.negatives.length&&(le=`-(${G}${I.negatives.join("|")})`),he&&le?oe=`${he}|${le}`:oe=he||le,W.wrap?`(${G}${oe})`:oe},"toSequence"),j=c((I,W,G,he)=>{if(G)return O(I,W,{wrap:!1,...he});let le=String.fromCharCode(I);if(I===W)return le;let oe=String.fromCharCode(W);return`[${le}-${oe}]`},"toRange"),N=c((I,W,G)=>{if(Array.isArray(I)){let he=G.wrap===!0,le=G.capture?"":"?:";return he?`(${le}${I.join("|")})`:I.join("|")}return O(I,W,G)},"toRegex"),X=c((...I)=>new RangeError("Invalid range arguments: "+E.inspect(...I)),"rangeError"),ve=c((I,W,G)=>{if(G.strictRanges===!0)throw X([I,W]);return[]},"invalidRange"),de=c((I,W)=>{if(W.strictRanges===!0)throw new TypeError(`Expected step "${I}" to be a number`);return[]},"invalidStep"),z=c((I,W,G=1,he={})=>{let le=Number(I),oe=Number(W);if(!Number.isInteger(le)||!Number.isInteger(oe)){if(he.strictRanges===!0)throw X([I,W]);return[]}le===0&&(le=0),oe===0&&(oe=0);let ye=le>oe,Ie=String(I),He=String(W),je=String(G);G=Math.max(Math.abs(G),1);let Re=w(Ie)||w(He)||w(je),Ye=Re?Math.max(Ie.length,He.length,je.length):0,ze=Re===!1&&R(I,W,he)===!1,Ke=he.transform||K(ze);if(he.toRegex&&G===1)return j(x(I,Ye),x(W,Ye),!0,he);let Le={negatives:[],positives:[]},Xe=c(ae=>Le[ae<0?"negatives":"positives"].push(Math.abs(ae)),"push"),st=[],V=0;for(;ye?le>=oe:le<=oe;)he.toRegex===!0&&G>1?Xe(le):st.push(A(Ke(le,V),Ye,ze)),le=ye?le-G:le+G,V++;return he.toRegex===!0?G>1?D(Le,he):N(st,null,{wrap:!1,...he}):st},"fillNumbers"),q=c((I,W,G=1,he={})=>{if(!M(I)&&I.length>1||!M(W)&&W.length>1)return ve(I,W,he);let le=he.transform||(ze=>String.fromCharCode(ze)),oe=`${I}`.charCodeAt(0),ye=`${W}`.charCodeAt(0),Ie=oe>ye,He=Math.min(oe,ye),je=Math.max(oe,ye);if(he.toRegex&&G===1)return j(He,je,!1,he);let Re=[],Ye=0;for(;Ie?oe>=ye:oe<=ye;)Re.push(le(oe,Ye)),oe=Ie?oe-G:oe+G,Ye++;return he.toRegex===!0?N(Re,null,{wrap:!1,options:he}):Re},"fillLetters"),re=c((I,W,G,he={})=>{if(W==null&&Y(I))return[I];if(!Y(I)||!Y(W))return ve(I,W,he);if(typeof G=="function")return re(I,W,1,{transform:G});if(B(G))return re(I,W,0,G);let le={...he};return le.capture===!0&&(le.wrap=!0),G=G||le.step||1,M(G)?M(I)&&M(W)?z(I,W,G,le):q(I,W,Math.max(Math.abs(G),1),le):G!=null&&!B(G)?de(G,le):re(I,W,1,G)},"fill");ee.exports=re},3338:ee=>{"use strict";/*!
 * is-number <https://github.com/jonschlinkert/is-number>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Released under the MIT License.
 */ee.exports=function(h){return typeof h=="number"?h-h==0:typeof h=="string"&&h.trim()!==""?Number.isFinite?Number.isFinite(+h):isFinite(+h):!1}},919:(ee,h,H)=>{"use strict";const E=H(6391),O=H(6232),B=H(6796),K=H(292),Y=c(w=>w===""||w==="./","isEmptyString"),M=c((w,R,A)=>{R=[].concat(R),w=[].concat(w);let x=new Set,D=new Set,j=new Set,N=0,X=c(z=>{j.add(z.output),A&&A.onResult&&A.onResult(z)},"onResult");for(let z=0;z<R.length;z++){let q=B(String(R[z]),{...A,onResult:X},!0),re=q.state.negated||q.state.negatedExtglob;re&&N++;for(let I of w){let W=q(I,!0);!(re?!W.isMatch:W.isMatch)||(re?x.add(W.output):(x.delete(W.output),D.add(W.output)))}}let de=(N===R.length?[...j]:[...D]).filter(z=>!x.has(z));if(A&&de.length===0){if(A.failglob===!0)throw new Error(`No matches found for "${R.join(", ")}"`);if(A.nonull===!0||A.nullglob===!0)return A.unescape?R.map(z=>z.replace(/\\/g,"")):R}return de},"micromatch");M.match=M,M.matcher=(w,R)=>B(w,R),M.isMatch=(w,R,A)=>B(R,A)(w),M.any=M.isMatch,M.not=(w,R,A={})=>{R=[].concat(R).map(String);let x=new Set,D=[],N=M(w,R,{...A,onResult:c(X=>{A.onResult&&A.onResult(X),D.push(X.output)},"onResult")});for(let X of D)N.includes(X)||x.add(X);return[...x]},M.contains=(w,R,A)=>{if(typeof w!="string")throw new TypeError(`Expected a string: "${E.inspect(w)}"`);if(Array.isArray(R))return R.some(x=>M.contains(w,x,A));if(typeof R=="string"){if(Y(w)||Y(R))return!1;if(w.includes(R)||w.startsWith("./")&&w.slice(2).includes(R))return!0}return M.isMatch(w,R,{...A,contains:!0})},M.matchKeys=(w,R,A)=>{if(!K.isObject(w))throw new TypeError("Expected the first argument to be an object");let x=M(Object.keys(w),R,A),D={};for(let j of x)D[j]=w[j];return D},M.some=(w,R,A)=>{let x=[].concat(w);for(let D of[].concat(R)){let j=B(String(D),A);if(x.some(N=>j(N)))return!0}return!1},M.every=(w,R,A)=>{let x=[].concat(w);for(let D of[].concat(R)){let j=B(String(D),A);if(!x.every(N=>j(N)))return!1}return!0},M.all=(w,R,A)=>{if(typeof w!="string")throw new TypeError(`Expected a string: "${E.inspect(w)}"`);return[].concat(R).every(x=>B(x,A)(w))},M.capture=(w,R,A)=>{let x=K.isWindows(A),j=B.makeRe(String(w),{...A,capture:!0}).exec(x?K.toPosixSlashes(R):R);if(j)return j.slice(1).map(N=>N===void 0?"":N)},M.makeRe=(...w)=>B.makeRe(...w),M.scan=(...w)=>B.scan(...w),M.parse=(w,R)=>{let A=[];for(let x of[].concat(w||[]))for(let D of O(String(x),R))A.push(B.parse(D,R));return A},M.braces=(w,R)=>{if(typeof w!="string")throw new TypeError("Expected a string");return R&&R.nobrace===!0||!/\{.*\}/.test(w)?[w]:O(w,R)},M.braceExpand=(w,R)=>{if(typeof w!="string")throw new TypeError("Expected a string");return M.braces(w,{...R,expand:!0})},ee.exports=M},6796:(ee,h,H)=>{"use strict";ee.exports=H(5761)},3889:(ee,h,H)=>{"use strict";const E=H(6470),O="\\\\/",B=`[^${O}]`,K="\\.",Y="\\+",M="\\?",w="\\/",R="(?=.)",A="[^/]",x=`(?:${w}|$)`,D=`(?:^|${w})`,j=`${K}{1,2}${x}`,N=`(?!${K})`,X=`(?!${D}${j})`,ve=`(?!${K}{0,1}${x})`,de=`(?!${j})`,z=`[^.${w}]`,q=`${A}*?`,re={DOT_LITERAL:K,PLUS_LITERAL:Y,QMARK_LITERAL:M,SLASH_LITERAL:w,ONE_CHAR:R,QMARK:A,END_ANCHOR:x,DOTS_SLASH:j,NO_DOT:N,NO_DOTS:X,NO_DOT_SLASH:ve,NO_DOTS_SLASH:de,QMARK_NO_DOT:z,STAR:q,START_ANCHOR:D},I={...re,SLASH_LITERAL:`[${O}]`,QMARK:B,STAR:`${B}*?`,DOTS_SLASH:`${K}{1,2}(?:[${O}]|$)`,NO_DOT:`(?!${K})`,NO_DOTS:`(?!(?:^|[${O}])${K}{1,2}(?:[${O}]|$))`,NO_DOT_SLASH:`(?!${K}{0,1}(?:[${O}]|$))`,NO_DOTS_SLASH:`(?!${K}{1,2}(?:[${O}]|$))`,QMARK_NO_DOT:`[^.${O}]`,START_ANCHOR:`(?:^|[${O}])`,END_ANCHOR:`(?:[${O}]|$)`},W={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};ee.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:W,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:E.sep,extglobChars(G){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${G.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(G){return G===!0?I:re}}},3969:(ee,h,H)=>{"use strict";const E=H(3889),O=H(292),{MAX_LENGTH:B,POSIX_REGEX_SOURCE:K,REGEX_NON_SPECIAL_CHARS:Y,REGEX_SPECIAL_CHARS_BACKREF:M,REPLACEMENTS:w}=E,R=c((D,j)=>{if(typeof j.expandRange=="function")return j.expandRange(...D,j);D.sort();const N=`[${D.join("-")}]`;try{new RegExp(N)}catch(X){return D.map(ve=>O.escapeRegex(ve)).join("..")}return N},"expandRange"),A=c((D,j)=>`Missing ${D}: "${j}" - use "\\\\${j}" to match literal characters`,"syntaxError"),x=c((D,j)=>{if(typeof D!="string")throw new TypeError("Expected a string");D=w[D]||D;const N={...j},X=typeof N.maxLength=="number"?Math.min(B,N.maxLength):B;let ve=D.length;if(ve>X)throw new SyntaxError(`Input length: ${ve}, exceeds maximum allowed length: ${X}`);const de={type:"bos",value:"",output:N.prepend||""},z=[de],q=N.capture?"":"?:",re=O.isWindows(j),I=E.globChars(re),W=E.extglobChars(I),{DOT_LITERAL:G,PLUS_LITERAL:he,SLASH_LITERAL:le,ONE_CHAR:oe,DOTS_SLASH:ye,NO_DOT:Ie,NO_DOT_SLASH:He,NO_DOTS_SLASH:je,QMARK:Re,QMARK_NO_DOT:Ye,STAR:ze,START_ANCHOR:Ke}=I,Le=c(Be=>`(${q}(?:(?!${Ke}${Be.dot?ye:G}).)*?)`,"globstar"),Xe=N.dot?"":Ie,st=N.dot?Re:Ye;let V=N.bash===!0?Le(N):ze;N.capture&&(V=`(${V})`),typeof N.noext=="boolean"&&(N.noextglob=N.noext);const ae={input:D,index:-1,start:0,dot:N.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:z};D=O.removePrefix(D,ae),ve=D.length;const _t=[],Ze=[],at=[];let Z=de,pe;const Me=c(()=>ae.index===ve-1,"eos"),rt=ae.peek=(Be=1)=>D[ae.index+Be],qe=ae.advance=()=>D[++ae.index]||"",ot=c(()=>D.slice(ae.index+1),"remaining"),Rt=c((Be="",ke=0)=>{ae.consumed+=Be,ae.index+=ke},"consume"),xt=c(Be=>{ae.output+=Be.output!=null?Be.output:Be.value,Rt(Be.value)},"append"),zr=c(()=>{let Be=1;for(;rt()==="!"&&(rt(2)!=="("||rt(3)==="?");)qe(),ae.start++,Be++;return Be%2==0?!1:(ae.negated=!0,ae.start++,!0)},"negate"),_r=c(Be=>{ae[Be]++,at.push(Be)},"increment"),rr=c(Be=>{ae[Be]--,at.pop()},"decrement"),et=c(Be=>{if(Z.type==="globstar"){const ke=ae.braces>0&&(Be.type==="comma"||Be.type==="brace"),Te=Be.extglob===!0||_t.length&&(Be.type==="pipe"||Be.type==="paren");Be.type!=="slash"&&Be.type!=="paren"&&!ke&&!Te&&(ae.output=ae.output.slice(0,-Z.output.length),Z.type="star",Z.value="*",Z.output=V,ae.output+=Z.output)}if(_t.length&&Be.type!=="paren"&&(_t[_t.length-1].inner+=Be.value),(Be.value||Be.output)&&xt(Be),Z&&Z.type==="text"&&Be.type==="text"){Z.value+=Be.value,Z.output=(Z.output||"")+Be.value;return}Be.prev=Z,z.push(Be),Z=Be},"push"),Ot=c((Be,ke)=>{const Te={...W[ke],conditions:1,inner:""};Te.prev=Z,Te.parens=ae.parens,Te.output=ae.output;const dt=(N.capture?"(":"")+Te.open;_r("parens"),et({type:Be,value:ke,output:ae.output?"":oe}),et({type:"paren",extglob:!0,value:qe(),output:dt}),_t.push(Te)},"extglobOpen"),An=c(Be=>{let ke=Be.close+(N.capture?")":""),Te;if(Be.type==="negate"){let dt=V;if(Be.inner&&Be.inner.length>1&&Be.inner.includes("/")&&(dt=Le(N)),(dt!==V||Me()||/^\)+$/.test(ot()))&&(ke=Be.close=`)$))${dt}`),Be.inner.includes("*")&&(Te=ot())&&/^\.[^\\/.]+$/.test(Te)){const Mt=x(Te,{...j,fastpaths:!1}).output;ke=Be.close=`)${Mt})${dt})`}Be.prev.type==="bos"&&(ae.negatedExtglob=!0)}et({type:"paren",extglob:!0,value:pe,output:ke}),rr("parens")},"extglobClose");if(N.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(D)){let Be=!1,ke=D.replace(M,(Te,dt,Mt,ft,Lt,T)=>ft==="\\"?(Be=!0,Te):ft==="?"?dt?dt+ft+(Lt?Re.repeat(Lt.length):""):T===0?st+(Lt?Re.repeat(Lt.length):""):Re.repeat(Mt.length):ft==="."?G.repeat(Mt.length):ft==="*"?dt?dt+ft+(Lt?V:""):V:dt?Te:`\\${Te}`);return Be===!0&&(N.unescape===!0?ke=ke.replace(/\\/g,""):ke=ke.replace(/\\+/g,Te=>Te.length%2==0?"\\\\":Te?"\\":"")),ke===D&&N.contains===!0?(ae.output=D,ae):(ae.output=O.wrapOutput(ke,ae,j),ae)}for(;!Me();){if(pe=qe(),pe==="\0")continue;if(pe==="\\"){const Te=rt();if(Te==="/"&&N.bash!==!0||Te==="."||Te===";")continue;if(!Te){pe+="\\",et({type:"text",value:pe});continue}const dt=/^\\+/.exec(ot());let Mt=0;if(dt&&dt[0].length>2&&(Mt=dt[0].length,ae.index+=Mt,Mt%2!=0&&(pe+="\\")),N.unescape===!0?pe=qe():pe+=qe(),ae.brackets===0){et({type:"text",value:pe});continue}}if(ae.brackets>0&&(pe!=="]"||Z.value==="["||Z.value==="[^")){if(N.posix!==!1&&pe===":"){const Te=Z.value.slice(1);if(Te.includes("[")&&(Z.posix=!0,Te.includes(":"))){const dt=Z.value.lastIndexOf("["),Mt=Z.value.slice(0,dt),ft=Z.value.slice(dt+2),Lt=K[ft];if(Lt){Z.value=Mt+Lt,ae.backtrack=!0,qe(),!de.output&&z.indexOf(Z)===1&&(de.output=oe);continue}}}(pe==="["&&rt()!==":"||pe==="-"&&rt()==="]")&&(pe=`\\${pe}`),pe==="]"&&(Z.value==="["||Z.value==="[^")&&(pe=`\\${pe}`),N.posix===!0&&pe==="!"&&Z.value==="["&&(pe="^"),Z.value+=pe,xt({value:pe});continue}if(ae.quotes===1&&pe!=='"'){pe=O.escapeRegex(pe),Z.value+=pe,xt({value:pe});continue}if(pe==='"'){ae.quotes=ae.quotes===1?0:1,N.keepQuotes===!0&&et({type:"text",value:pe});continue}if(pe==="("){_r("parens"),et({type:"paren",value:pe});continue}if(pe===")"){if(ae.parens===0&&N.strictBrackets===!0)throw new SyntaxError(A("opening","("));const Te=_t[_t.length-1];if(Te&&ae.parens===Te.parens+1){An(_t.pop());continue}et({type:"paren",value:pe,output:ae.parens?")":"\\)"}),rr("parens");continue}if(pe==="["){if(N.nobracket===!0||!ot().includes("]")){if(N.nobracket!==!0&&N.strictBrackets===!0)throw new SyntaxError(A("closing","]"));pe=`\\${pe}`}else _r("brackets");et({type:"bracket",value:pe});continue}if(pe==="]"){if(N.nobracket===!0||Z&&Z.type==="bracket"&&Z.value.length===1){et({type:"text",value:pe,output:`\\${pe}`});continue}if(ae.brackets===0){if(N.strictBrackets===!0)throw new SyntaxError(A("opening","["));et({type:"text",value:pe,output:`\\${pe}`});continue}rr("brackets");const Te=Z.value.slice(1);if(Z.posix!==!0&&Te[0]==="^"&&!Te.includes("/")&&(pe=`/${pe}`),Z.value+=pe,xt({value:pe}),N.literalBrackets===!1||O.hasRegexChars(Te))continue;const dt=O.escapeRegex(Z.value);if(ae.output=ae.output.slice(0,-Z.value.length),N.literalBrackets===!0){ae.output+=dt,Z.value=dt;continue}Z.value=`(${q}${dt}|${Z.value})`,ae.output+=Z.value;continue}if(pe==="{"&&N.nobrace!==!0){_r("braces");const Te={type:"brace",value:pe,output:"(",outputIndex:ae.output.length,tokensIndex:ae.tokens.length};Ze.push(Te),et(Te);continue}if(pe==="}"){const Te=Ze[Ze.length-1];if(N.nobrace===!0||!Te){et({type:"text",value:pe,output:pe});continue}let dt=")";if(Te.dots===!0){const Mt=z.slice(),ft=[];for(let Lt=Mt.length-1;Lt>=0&&(z.pop(),Mt[Lt].type!=="brace");Lt--)Mt[Lt].type!=="dots"&&ft.unshift(Mt[Lt].value);dt=R(ft,N),ae.backtrack=!0}if(Te.comma!==!0&&Te.dots!==!0){const Mt=ae.output.slice(0,Te.outputIndex),ft=ae.tokens.slice(Te.tokensIndex);Te.value=Te.output="\\{",pe=dt="\\}",ae.output=Mt;for(const Lt of ft)ae.output+=Lt.output||Lt.value}et({type:"brace",value:pe,output:dt}),rr("braces"),Ze.pop();continue}if(pe==="|"){_t.length>0&&_t[_t.length-1].conditions++,et({type:"text",value:pe});continue}if(pe===","){let Te=pe;const dt=Ze[Ze.length-1];dt&&at[at.length-1]==="braces"&&(dt.comma=!0,Te="|"),et({type:"comma",value:pe,output:Te});continue}if(pe==="/"){if(Z.type==="dot"&&ae.index===ae.start+1){ae.start=ae.index+1,ae.consumed="",ae.output="",z.pop(),Z=de;continue}et({type:"slash",value:pe,output:le});continue}if(pe==="."){if(ae.braces>0&&Z.type==="dot"){Z.value==="."&&(Z.output=G);const Te=Ze[Ze.length-1];Z.type="dots",Z.output+=pe,Z.value+=pe,Te.dots=!0;continue}if(ae.braces+ae.parens===0&&Z.type!=="bos"&&Z.type!=="slash"){et({type:"text",value:pe,output:G});continue}et({type:"dot",value:pe,output:G});continue}if(pe==="?"){if(!(Z&&Z.value==="(")&&N.noextglob!==!0&&rt()==="("&&rt(2)!=="?"){Ot("qmark",pe);continue}if(Z&&Z.type==="paren"){const dt=rt();let Mt=pe;if(dt==="<"&&!O.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(Z.value==="("&&!/[!=<:]/.test(dt)||dt==="<"&&!/<([!=]|\w+>)/.test(ot()))&&(Mt=`\\${pe}`),et({type:"text",value:pe,output:Mt});continue}if(N.dot!==!0&&(Z.type==="slash"||Z.type==="bos")){et({type:"qmark",value:pe,output:Ye});continue}et({type:"qmark",value:pe,output:Re});continue}if(pe==="!"){if(N.noextglob!==!0&&rt()==="("&&(rt(2)!=="?"||!/[!=<:]/.test(rt(3)))){Ot("negate",pe);continue}if(N.nonegate!==!0&&ae.index===0){zr();continue}}if(pe==="+"){if(N.noextglob!==!0&&rt()==="("&&rt(2)!=="?"){Ot("plus",pe);continue}if(Z&&Z.value==="("||N.regex===!1){et({type:"plus",value:pe,output:he});continue}if(Z&&(Z.type==="bracket"||Z.type==="paren"||Z.type==="brace")||ae.parens>0){et({type:"plus",value:pe});continue}et({type:"plus",value:he});continue}if(pe==="@"){if(N.noextglob!==!0&&rt()==="("&&rt(2)!=="?"){et({type:"at",extglob:!0,value:pe,output:""});continue}et({type:"text",value:pe});continue}if(pe!=="*"){(pe==="$"||pe==="^")&&(pe=`\\${pe}`);const Te=Y.exec(ot());Te&&(pe+=Te[0],ae.index+=Te[0].length),et({type:"text",value:pe});continue}if(Z&&(Z.type==="globstar"||Z.star===!0)){Z.type="star",Z.star=!0,Z.value+=pe,Z.output=V,ae.backtrack=!0,ae.globstar=!0,Rt(pe);continue}let Be=ot();if(N.noextglob!==!0&&/^\([^?]/.test(Be)){Ot("star",pe);continue}if(Z.type==="star"){if(N.noglobstar===!0){Rt(pe);continue}const Te=Z.prev,dt=Te.prev,Mt=Te.type==="slash"||Te.type==="bos",ft=dt&&(dt.type==="star"||dt.type==="globstar");if(N.bash===!0&&(!Mt||Be[0]&&Be[0]!=="/")){et({type:"star",value:pe,output:""});continue}const Lt=ae.braces>0&&(Te.type==="comma"||Te.type==="brace"),T=_t.length&&(Te.type==="pipe"||Te.type==="paren");if(!Mt&&Te.type!=="paren"&&!Lt&&!T){et({type:"star",value:pe,output:""});continue}for(;Be.slice(0,3)==="/**";){const m=D[ae.index+4];if(m&&m!=="/")break;Be=Be.slice(3),Rt("/**",3)}if(Te.type==="bos"&&Me()){Z.type="globstar",Z.value+=pe,Z.output=Le(N),ae.output=Z.output,ae.globstar=!0,Rt(pe);continue}if(Te.type==="slash"&&Te.prev.type!=="bos"&&!ft&&Me()){ae.output=ae.output.slice(0,-(Te.output+Z.output).length),Te.output=`(?:${Te.output}`,Z.type="globstar",Z.output=Le(N)+(N.strictSlashes?")":"|$)"),Z.value+=pe,ae.globstar=!0,ae.output+=Te.output+Z.output,Rt(pe);continue}if(Te.type==="slash"&&Te.prev.type!=="bos"&&Be[0]==="/"){const m=Be[1]!==void 0?"|$":"";ae.output=ae.output.slice(0,-(Te.output+Z.output).length),Te.output=`(?:${Te.output}`,Z.type="globstar",Z.output=`${Le(N)}${le}|${le}${m})`,Z.value+=pe,ae.output+=Te.output+Z.output,ae.globstar=!0,Rt(pe+qe()),et({type:"slash",value:"/",output:""});continue}if(Te.type==="bos"&&Be[0]==="/"){Z.type="globstar",Z.value+=pe,Z.output=`(?:^|${le}|${Le(N)}${le})`,ae.output=Z.output,ae.globstar=!0,Rt(pe+qe()),et({type:"slash",value:"/",output:""});continue}ae.output=ae.output.slice(0,-Z.output.length),Z.type="globstar",Z.output=Le(N),Z.value+=pe,ae.output+=Z.output,ae.globstar=!0,Rt(pe);continue}const ke={type:"star",value:pe,output:V};if(N.bash===!0){ke.output=".*?",(Z.type==="bos"||Z.type==="slash")&&(ke.output=Xe+ke.output),et(ke);continue}if(Z&&(Z.type==="bracket"||Z.type==="paren")&&N.regex===!0){ke.output=pe,et(ke);continue}(ae.index===ae.start||Z.type==="slash"||Z.type==="dot")&&(Z.type==="dot"?(ae.output+=He,Z.output+=He):N.dot===!0?(ae.output+=je,Z.output+=je):(ae.output+=Xe,Z.output+=Xe),rt()!=="*"&&(ae.output+=oe,Z.output+=oe)),et(ke)}for(;ae.brackets>0;){if(N.strictBrackets===!0)throw new SyntaxError(A("closing","]"));ae.output=O.escapeLast(ae.output,"["),rr("brackets")}for(;ae.parens>0;){if(N.strictBrackets===!0)throw new SyntaxError(A("closing",")"));ae.output=O.escapeLast(ae.output,"("),rr("parens")}for(;ae.braces>0;){if(N.strictBrackets===!0)throw new SyntaxError(A("closing","}"));ae.output=O.escapeLast(ae.output,"{"),rr("braces")}if(N.strictSlashes!==!0&&(Z.type==="star"||Z.type==="bracket")&&et({type:"maybe_slash",value:"",output:`${le}?`}),ae.backtrack===!0){ae.output="";for(const Be of ae.tokens)ae.output+=Be.output!=null?Be.output:Be.value,Be.suffix&&(ae.output+=Be.suffix)}return ae},"parse");x.fastpaths=(D,j)=>{const N={...j},X=typeof N.maxLength=="number"?Math.min(B,N.maxLength):B,ve=D.length;if(ve>X)throw new SyntaxError(`Input length: ${ve}, exceeds maximum allowed length: ${X}`);D=w[D]||D;const de=O.isWindows(j),{DOT_LITERAL:z,SLASH_LITERAL:q,ONE_CHAR:re,DOTS_SLASH:I,NO_DOT:W,NO_DOTS:G,NO_DOTS_SLASH:he,STAR:le,START_ANCHOR:oe}=E.globChars(de),ye=N.dot?G:W,Ie=N.dot?he:W,He=N.capture?"":"?:",je={negated:!1,prefix:""};let Re=N.bash===!0?".*?":le;N.capture&&(Re=`(${Re})`);const Ye=c(Xe=>Xe.noglobstar===!0?Re:`(${He}(?:(?!${oe}${Xe.dot?I:z}).)*?)`,"globstar"),ze=c(Xe=>{switch(Xe){case"*":return`${ye}${re}${Re}`;case".*":return`${z}${re}${Re}`;case"*.*":return`${ye}${Re}${z}${re}${Re}`;case"*/*":return`${ye}${Re}${q}${re}${Ie}${Re}`;case"**":return ye+Ye(N);case"**/*":return`(?:${ye}${Ye(N)}${q})?${Ie}${re}${Re}`;case"**/*.*":return`(?:${ye}${Ye(N)}${q})?${Ie}${Re}${z}${re}${Re}`;case"**/.*":return`(?:${ye}${Ye(N)}${q})?${z}${re}${Re}`;default:{const st=/^(.*?)\.(\w+)$/.exec(Xe);if(!st)return;const V=ze(st[1]);return V?V+z+st[2]:void 0}}},"create"),Ke=O.removePrefix(D,je);let Le=ze(Ke);return Le&&N.strictSlashes!==!0&&(Le+=`${q}?`),Le},ee.exports=x},5761:(ee,h,H)=>{"use strict";const E=H(6470),O=H(9826),B=H(3969),K=H(292),Y=H(3889),M=c(R=>R&&typeof R=="object"&&!Array.isArray(R),"isObject"),w=c((R,A,x=!1)=>{if(Array.isArray(R)){const q=R.map(I=>w(I,A,x));return c(I=>{for(const W of q){const G=W(I);if(G)return G}return!1},"arrayMatcher")}const D=M(R)&&R.tokens&&R.input;if(R===""||typeof R!="string"&&!D)throw new TypeError("Expected pattern to be a non-empty string");const j=A||{},N=K.isWindows(A),X=D?w.compileRe(R,A):w.makeRe(R,A,!1,!0),ve=X.state;delete X.state;let de=c(()=>!1,"isIgnored");if(j.ignore){const q={...A,ignore:null,onMatch:null,onResult:null};de=w(j.ignore,q,x)}const z=c((q,re=!1)=>{const{isMatch:I,match:W,output:G}=w.test(q,X,A,{glob:R,posix:N}),he={glob:R,state:ve,regex:X,posix:N,input:q,output:G,match:W,isMatch:I};return typeof j.onResult=="function"&&j.onResult(he),I===!1?(he.isMatch=!1,re?he:!1):de(q)?(typeof j.onIgnore=="function"&&j.onIgnore(he),he.isMatch=!1,re?he:!1):(typeof j.onMatch=="function"&&j.onMatch(he),re?he:!0)},"matcher");return x&&(z.state=ve),z},"picomatch");w.test=(R,A,x,{glob:D,posix:j}={})=>{if(typeof R!="string")throw new TypeError("Expected input to be a string");if(R==="")return{isMatch:!1,output:""};const N=x||{},X=N.format||(j?K.toPosixSlashes:null);let ve=R===D,de=ve&&X?X(R):R;return ve===!1&&(de=X?X(R):R,ve=de===D),(ve===!1||N.capture===!0)&&(N.matchBase===!0||N.basename===!0?ve=w.matchBase(R,A,x,j):ve=A.exec(de)),{isMatch:Boolean(ve),match:ve,output:de}},w.matchBase=(R,A,x,D=K.isWindows(x))=>(A instanceof RegExp?A:w.makeRe(A,x)).test(E.basename(R)),w.isMatch=(R,A,x)=>w(A,x)(R),w.parse=(R,A)=>Array.isArray(R)?R.map(x=>w.parse(x,A)):B(R,{...A,fastpaths:!1}),w.scan=(R,A)=>O(R,A),w.compileRe=(R,A,x=!1,D=!1)=>{if(x===!0)return R.output;const j=A||{},N=j.contains?"":"^",X=j.contains?"":"$";let ve=`${N}(?:${R.output})${X}`;R&&R.negated===!0&&(ve=`^(?!${ve}).*$`);const de=w.toRegex(ve,A);return D===!0&&(de.state=R),de},w.makeRe=(R,A={},x=!1,D=!1)=>{if(!R||typeof R!="string")throw new TypeError("Expected a non-empty string");let j={negated:!1,fastpaths:!0};return A.fastpaths!==!1&&(R[0]==="."||R[0]==="*")&&(j.output=B.fastpaths(R,A)),j.output||(j=B(R,A)),w.compileRe(j,A,x,D)},w.toRegex=(R,A)=>{try{const x=A||{};return new RegExp(R,x.flags||(x.nocase?"i":""))}catch(x){if(A&&A.debug===!0)throw x;return/$^/}},w.constants=Y,ee.exports=w},9826:(ee,h,H)=>{"use strict";const E=H(292),{CHAR_ASTERISK:O,CHAR_AT:B,CHAR_BACKWARD_SLASH:K,CHAR_COMMA:Y,CHAR_DOT:M,CHAR_EXCLAMATION_MARK:w,CHAR_FORWARD_SLASH:R,CHAR_LEFT_CURLY_BRACE:A,CHAR_LEFT_PARENTHESES:x,CHAR_LEFT_SQUARE_BRACKET:D,CHAR_PLUS:j,CHAR_QUESTION_MARK:N,CHAR_RIGHT_CURLY_BRACE:X,CHAR_RIGHT_PARENTHESES:ve,CHAR_RIGHT_SQUARE_BRACKET:de}=H(3889),z=c(I=>I===R||I===K,"isPathSeparator"),q=c(I=>{I.isPrefix!==!0&&(I.depth=I.isGlobstar?1/0:1)},"depth"),re=c((I,W)=>{const G=W||{},he=I.length-1,le=G.parts===!0||G.scanToEnd===!0,oe=[],ye=[],Ie=[];let He=I,je=-1,Re=0,Ye=0,ze=!1,Ke=!1,Le=!1,Xe=!1,st=!1,V=!1,ae=!1,_t=!1,Ze=!1,at=!1,Z=0,pe,Me,rt={value:"",depth:0,isGlob:!1};const qe=c(()=>je>=he,"eos"),ot=c(()=>He.charCodeAt(je+1),"peek"),Rt=c(()=>(pe=Me,He.charCodeAt(++je)),"advance");for(;je<he;){Me=Rt();let et;if(Me===K){ae=rt.backslashes=!0,Me=Rt(),Me===A&&(V=!0);continue}if(V===!0||Me===A){for(Z++;qe()!==!0&&(Me=Rt());){if(Me===K){ae=rt.backslashes=!0,Rt();continue}if(Me===A){Z++;continue}if(V!==!0&&Me===M&&(Me=Rt())===M){if(ze=rt.isBrace=!0,Le=rt.isGlob=!0,at=!0,le===!0)continue;break}if(V!==!0&&Me===Y){if(ze=rt.isBrace=!0,Le=rt.isGlob=!0,at=!0,le===!0)continue;break}if(Me===X&&(Z--,Z===0)){V=!1,ze=rt.isBrace=!0,at=!0;break}}if(le===!0)continue;break}if(Me===R){if(oe.push(je),ye.push(rt),rt={value:"",depth:0,isGlob:!1},at===!0)continue;if(pe===M&&je===Re+1){Re+=2;continue}Ye=je+1;continue}if(G.noext!==!0&&(Me===j||Me===B||Me===O||Me===N||Me===w)===!0&&ot()===x){if(Le=rt.isGlob=!0,Xe=rt.isExtglob=!0,at=!0,Me===w&&je===Re&&(Ze=!0),le===!0){for(;qe()!==!0&&(Me=Rt());){if(Me===K){ae=rt.backslashes=!0,Me=Rt();continue}if(Me===ve){Le=rt.isGlob=!0,at=!0;break}}continue}break}if(Me===O){if(pe===O&&(st=rt.isGlobstar=!0),Le=rt.isGlob=!0,at=!0,le===!0)continue;break}if(Me===N){if(Le=rt.isGlob=!0,at=!0,le===!0)continue;break}if(Me===D){for(;qe()!==!0&&(et=Rt());){if(et===K){ae=rt.backslashes=!0,Rt();continue}if(et===de){Ke=rt.isBracket=!0,Le=rt.isGlob=!0,at=!0;break}}if(le===!0)continue;break}if(G.nonegate!==!0&&Me===w&&je===Re){_t=rt.negated=!0,Re++;continue}if(G.noparen!==!0&&Me===x){if(Le=rt.isGlob=!0,le===!0){for(;qe()!==!0&&(Me=Rt());){if(Me===x){ae=rt.backslashes=!0,Me=Rt();continue}if(Me===ve){at=!0;break}}continue}break}if(Le===!0){if(at=!0,le===!0)continue;break}}G.noext===!0&&(Xe=!1,Le=!1);let xt=He,zr="",_r="";Re>0&&(zr=He.slice(0,Re),He=He.slice(Re),Ye-=Re),xt&&Le===!0&&Ye>0?(xt=He.slice(0,Ye),_r=He.slice(Ye)):Le===!0?(xt="",_r=He):xt=He,xt&&xt!==""&&xt!=="/"&&xt!==He&&z(xt.charCodeAt(xt.length-1))&&(xt=xt.slice(0,-1)),G.unescape===!0&&(_r&&(_r=E.removeBackslashes(_r)),xt&&ae===!0&&(xt=E.removeBackslashes(xt)));const rr={prefix:zr,input:I,start:Re,base:xt,glob:_r,isBrace:ze,isBracket:Ke,isGlob:Le,isExtglob:Xe,isGlobstar:st,negated:_t,negatedExtglob:Ze};if(G.tokens===!0&&(rr.maxDepth=0,z(Me)||ye.push(rt),rr.tokens=ye),G.parts===!0||G.tokens===!0){let et;for(let Ot=0;Ot<oe.length;Ot++){const An=et?et+1:Re,Be=oe[Ot],ke=I.slice(An,Be);G.tokens&&(Ot===0&&Re!==0?(ye[Ot].isPrefix=!0,ye[Ot].value=zr):ye[Ot].value=ke,q(ye[Ot]),rr.maxDepth+=ye[Ot].depth),(Ot!==0||ke!=="")&&Ie.push(ke),et=Be}if(et&&et+1<I.length){const Ot=I.slice(et+1);Ie.push(Ot),G.tokens&&(ye[ye.length-1].value=Ot,q(ye[ye.length-1]),rr.maxDepth+=ye[ye.length-1].depth)}rr.slashes=oe,rr.parts=Ie}return rr},"scan");ee.exports=re},292:(ee,h,H)=>{"use strict";var E=H(6038);const O=H(6470),B=E.platform==="win32",{REGEX_BACKSLASH:K,REGEX_REMOVE_BACKSLASH:Y,REGEX_SPECIAL_CHARS:M,REGEX_SPECIAL_CHARS_GLOBAL:w}=H(3889);h.isObject=R=>R!==null&&typeof R=="object"&&!Array.isArray(R),h.hasRegexChars=R=>M.test(R),h.isRegexChar=R=>R.length===1&&h.hasRegexChars(R),h.escapeRegex=R=>R.replace(w,"\\$1"),h.toPosixSlashes=R=>R.replace(K,"/"),h.removeBackslashes=R=>R.replace(Y,A=>A==="\\"?"":A),h.supportsLookbehinds=()=>{const R=E.version.slice(1).split(".").map(Number);return R.length===3&&R[0]>=9||R[0]===8&&R[1]>=10},h.isWindows=R=>R&&typeof R.windows=="boolean"?R.windows:B===!0||O.sep==="\\",h.escapeLast=(R,A,x)=>{const D=R.lastIndexOf(A,x);return D===-1?R:R[D-1]==="\\"?h.escapeLast(R,A,D-1):`${R.slice(0,D)}\\${R.slice(D)}`},h.removePrefix=(R,A={})=>{let x=R;return x.startsWith("./")&&(x=x.slice(2),A.prefix="./"),x},h.wrapOutput=(R,A={},x={})=>{const D=x.contains?"":"^",j=x.contains?"":"$";let N=`${D}(?:${R})${j}`;return A.negated===!0&&(N=`(?:^(?!${N}).*$)`),N}},6038:ee=>{var h=ee.exports={},H,E;function O(){throw new Error("setTimeout has not been defined")}c(O,"defaultSetTimout");function B(){throw new Error("clearTimeout has not been defined")}c(B,"defaultClearTimeout"),function(){try{typeof setTimeout=="function"?H=setTimeout:H=O}catch(X){H=O}try{typeof clearTimeout=="function"?E=clearTimeout:E=B}catch(X){E=B}}();function K(X){if(H===setTimeout)return setTimeout(X,0);if((H===O||!H)&&setTimeout)return H=setTimeout,setTimeout(X,0);try{return H(X,0)}catch(ve){try{return H.call(null,X,0)}catch(de){return H.call(this,X,0)}}}c(K,"runTimeout");function Y(X){if(E===clearTimeout)return clearTimeout(X);if((E===B||!E)&&clearTimeout)return E=clearTimeout,clearTimeout(X);try{return E(X)}catch(ve){try{return E.call(null,X)}catch(de){return E.call(this,X)}}}c(Y,"runClearTimeout");var M=[],w=!1,R,A=-1;function x(){!w||!R||(w=!1,R.length?M=R.concat(M):A=-1,M.length&&D())}c(x,"cleanUpNextTick");function D(){if(!w){var X=K(x);w=!0;for(var ve=M.length;ve;){for(R=M,M=[];++A<ve;)R&&R[A].run();A=-1,ve=M.length}R=null,w=!1,Y(X)}}c(D,"drainQueue"),h.nextTick=function(X){var ve=new Array(arguments.length-1);if(arguments.length>1)for(var de=1;de<arguments.length;de++)ve[de-1]=arguments[de];M.push(new j(X,ve)),M.length===1&&!w&&K(D)};function j(X,ve){this.fun=X,this.array=ve}c(j,"Item"),j.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={};function N(){}c(N,"noop"),h.on=N,h.addListener=N,h.once=N,h.off=N,h.removeListener=N,h.removeAllListeners=N,h.emit=N,h.prependListener=N,h.prependOnceListener=N,h.listeners=function(X){return[]},h.binding=function(X){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(X){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},2999:(ee,h,H)=>{"use strict";/*!
 * to-regex-range <https://github.com/micromatch/to-regex-range>
 *
 * Copyright (c) 2015-present, Jon Schlinkert.
 * Released under the MIT License.
 */const E=H(3338),O=c((z,q,re)=>{if(E(z)===!1)throw new TypeError("toRegexRange: expected the first argument to be a number");if(q===void 0||z===q)return String(z);if(E(q)===!1)throw new TypeError("toRegexRange: expected the second argument to be a number.");let I={relaxZeros:!0,...re};typeof I.strictZeros=="boolean"&&(I.relaxZeros=I.strictZeros===!1);let W=String(I.relaxZeros),G=String(I.shorthand),he=String(I.capture),le=String(I.wrap),oe=z+":"+q+"="+W+G+he+le;if(O.cache.hasOwnProperty(oe))return O.cache[oe].result;let ye=Math.min(z,q),Ie=Math.max(z,q);if(Math.abs(ye-Ie)===1){let ze=z+"|"+q;return I.capture?`(${ze})`:I.wrap===!1?ze:`(?:${ze})`}let He=ve(z)||ve(q),je={min:z,max:q,a:ye,b:Ie},Re=[],Ye=[];if(He&&(je.isPadded=He,je.maxLen=String(je.max).length),ye<0){let ze=Ie<0?Math.abs(Ie):1;Ye=M(ze,Math.abs(ye),je,I),ye=je.a=0}return Ie>=0&&(Re=M(ye,Ie,je,I)),je.negatives=Ye,je.positives=Re,je.result=B(Ye,Re,I),I.capture===!0?je.result=`(${je.result})`:I.wrap!==!1&&Re.length+Ye.length>1&&(je.result=`(?:${je.result})`),O.cache[oe]=je,je.result},"toRegexRange");function B(z,q,re){let I=w(z,q,"-",!1,re)||[],W=w(q,z,"",!1,re)||[],G=w(z,q,"-?",!0,re)||[];return I.concat(G).concat(W).join("|")}c(B,"collatePatterns");function K(z,q){let re=1,I=1,W=D(z,re),G=new Set([q]);for(;z<=W&&W<=q;)G.add(W),re+=1,W=D(z,re);for(W=j(q+1,I)-1;z<W&&W<=q;)G.add(W),I+=1,W=j(q+1,I)-1;return G=[...G],G.sort(A),G}c(K,"splitToRanges");function Y(z,q,re){if(z===q)return{pattern:z,count:[],digits:0};let I=R(z,q),W=I.length,G="",he=0;for(let le=0;le<W;le++){let[oe,ye]=I[le];oe===ye?G+=oe:oe!=="0"||ye!=="9"?G+=X(oe,ye,re):he++}return he&&(G+=re.shorthand===!0?"\\d":"[0-9]"),{pattern:G,count:[he],digits:W}}c(Y,"rangeToPattern");function M(z,q,re,I){let W=K(z,q),G=[],he=z,le;for(let oe=0;oe<W.length;oe++){let ye=W[oe],Ie=Y(String(he),String(ye),I),He="";if(!re.isPadded&&le&&le.pattern===Ie.pattern){le.count.length>1&&le.count.pop(),le.count.push(Ie.count[0]),le.string=le.pattern+N(le.count),he=ye+1;continue}re.isPadded&&(He=de(ye,re,I)),Ie.string=He+Ie.pattern+N(Ie.count),G.push(Ie),he=ye+1,le=Ie}return G}c(M,"splitToPatterns");function w(z,q,re,I,W){let G=[];for(let he of z){let{string:le}=he;!I&&!x(q,"string",le)&&G.push(re+le),I&&x(q,"string",le)&&G.push(re+le)}return G}c(w,"filterPatterns");function R(z,q){let re=[];for(let I=0;I<z.length;I++)re.push([z[I],q[I]]);return re}c(R,"zip");function A(z,q){return z>q?1:q>z?-1:0}c(A,"compare");function x(z,q,re){return z.some(I=>I[q]===re)}c(x,"contains");function D(z,q){return Number(String(z).slice(0,-q)+"9".repeat(q))}c(D,"countNines");function j(z,q){return z-z%Math.pow(10,q)}c(j,"countZeros");function N(z){let[q=0,re=""]=z;return re||q>1?`{${q+(re?","+re:"")}}`:""}c(N,"toQuantifier");function X(z,q,re){return`[${z}${q-z==1?"":"-"}${q}]`}c(X,"toCharacterClass");function ve(z){return/^-?(0+)\d/.test(z)}c(ve,"hasPadding");function de(z,q,re){if(!q.isPadded)return z;let I=Math.abs(q.maxLen-String(z).length),W=re.relaxZeros!==!1;switch(I){case 0:return"";case 1:return W?"0?":"0";case 2:return W?"0{0,2}":"00";default:return W?`0{0,${I}}`:`0{${I}}`}}c(de,"padZeros"),O.cache={},O.clearCache=()=>O.cache={},ee.exports=O},9742:(ee,h)=>{"use strict";h.byteLength=w,h.toByteArray=A,h.fromByteArray=j;for(var H=[],E=[],O=typeof Uint8Array!="undefined"?Uint8Array:Array,B="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",K=0,Y=B.length;K<Y;++K)H[K]=B[K],E[B.charCodeAt(K)]=K;E["-".charCodeAt(0)]=62,E["_".charCodeAt(0)]=63;function M(N){var X=N.length;if(X%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var ve=N.indexOf("=");ve===-1&&(ve=X);var de=ve===X?0:4-ve%4;return[ve,de]}c(M,"getLens");function w(N){var X=M(N),ve=X[0],de=X[1];return(ve+de)*3/4-de}c(w,"byteLength");function R(N,X,ve){return(X+ve)*3/4-ve}c(R,"_byteLength");function A(N){var X,ve=M(N),de=ve[0],z=ve[1],q=new O(R(N,de,z)),re=0,I=z>0?de-4:de,W;for(W=0;W<I;W+=4)X=E[N.charCodeAt(W)]<<18|E[N.charCodeAt(W+1)]<<12|E[N.charCodeAt(W+2)]<<6|E[N.charCodeAt(W+3)],q[re++]=X>>16&255,q[re++]=X>>8&255,q[re++]=X&255;return z===2&&(X=E[N.charCodeAt(W)]<<2|E[N.charCodeAt(W+1)]>>4,q[re++]=X&255),z===1&&(X=E[N.charCodeAt(W)]<<10|E[N.charCodeAt(W+1)]<<4|E[N.charCodeAt(W+2)]>>2,q[re++]=X>>8&255,q[re++]=X&255),q}c(A,"toByteArray");function x(N){return H[N>>18&63]+H[N>>12&63]+H[N>>6&63]+H[N&63]}c(x,"tripletToBase64");function D(N,X,ve){for(var de,z=[],q=X;q<ve;q+=3)de=(N[q]<<16&16711680)+(N[q+1]<<8&65280)+(N[q+2]&255),z.push(x(de));return z.join("")}c(D,"encodeChunk");function j(N){for(var X,ve=N.length,de=ve%3,z=[],q=16383,re=0,I=ve-de;re<I;re+=q)z.push(D(N,re,re+q>I?I:re+q));return de===1?(X=N[ve-1],z.push(H[X>>2]+H[X<<4&63]+"==")):de===2&&(X=(N[ve-2]<<8)+N[ve-1],z.push(H[X>>10]+H[X>>4&63]+H[X<<2&63]+"=")),z.join("")}c(j,"fromByteArray")},5186:(ee,h,H)=>{var E=H(3698),O=H(2505),B=H(6417),K=Function.bind,Y=K.bind(K);function M(D,j,N){var X=Y(B,null).apply(null,N?[j,N]:[j]);D.api={remove:X},D.remove=X,["before","error","after","wrap"].forEach(function(ve){var de=N?[j,ve,N]:[j,ve];D[ve]=D.api[ve]=Y(O,null).apply(null,de)})}c(M,"bindApi");function w(){var D="h",j={registry:{}},N=E.bind(null,j,D);return M(N,j,D),N}c(w,"HookSingular");function R(){var D={registry:{}},j=E.bind(null,D);return M(j,D),j}c(R,"HookCollection");var A=!1;function x(){return A||(console.warn('[before-after-hook]: "Hook()" repurposing warning, use "Hook.Collection()". Read more: https://git.io/upgrade-before-after-hook-to-1.4'),A=!0),R()}c(x,"Hook"),x.Singular=w.bind(),x.Collection=R.bind(),ee.exports=x,ee.exports.Hook=x,ee.exports.Singular=x.Singular,ee.exports.Collection=x.Collection},2505:ee=>{ee.exports=h;function h(H,E,O,B){var K=B;H.registry[O]||(H.registry[O]=[]),E==="before"&&(B=c(function(Y,M){return Promise.resolve().then(K.bind(null,M)).then(Y.bind(null,M))},"hook")),E==="after"&&(B=c(function(Y,M){var w;return Promise.resolve().then(Y.bind(null,M)).then(function(R){return w=R,K(w,M)}).then(function(){return w})},"hook")),E==="error"&&(B=c(function(Y,M){return Promise.resolve().then(Y.bind(null,M)).catch(function(w){return K(w,M)})},"hook")),H.registry[O].push({hook:B,orig:K})}c(h,"addHook")},3698:ee=>{ee.exports=h;function h(H,E,O,B){if(typeof O!="function")throw new Error("method for before hook must be a function");return B||(B={}),Array.isArray(E)?E.reverse().reduce(function(K,Y){return h.bind(null,H,Y,K,B)},O)():Promise.resolve().then(function(){return H.registry[E]?H.registry[E].reduce(function(K,Y){return Y.hook.bind(null,K,B)},O)():O(B)})}c(h,"register")},6417:ee=>{ee.exports=h;function h(H,E,O){if(!!H.registry[E]){var B=H.registry[E].map(function(K){return K.orig}).indexOf(O);B!==-1&&H.registry[E].splice(B,1)}}c(h,"removeHook")},8764:(ee,h,H)=>{"use strict";/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */const E=H(9742),O=H(645),B=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;h.Buffer=w,h.SlowBuffer=q,h.INSPECT_MAX_BYTES=50;const K=2147483647;h.kMaxLength=K,w.TYPED_ARRAY_SUPPORT=Y(),!w.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Y(){try{const T=new Uint8Array(1),m={foo:function(){return 42}};return Object.setPrototypeOf(m,Uint8Array.prototype),Object.setPrototypeOf(T,m),T.foo()===42}catch(T){return!1}}c(Y,"typedArraySupport"),Object.defineProperty(w.prototype,"parent",{enumerable:!0,get:function(){if(!!w.isBuffer(this))return this.buffer}}),Object.defineProperty(w.prototype,"offset",{enumerable:!0,get:function(){if(!!w.isBuffer(this))return this.byteOffset}});function M(T){if(T>K)throw new RangeError('The value "'+T+'" is invalid for option "size"');const m=new Uint8Array(T);return Object.setPrototypeOf(m,w.prototype),m}c(M,"createBuffer");function w(T,m,v){if(typeof T=="number"){if(typeof m=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return D(T)}return R(T,m,v)}c(w,"Buffer"),w.poolSize=8192;function R(T,m,v){if(typeof T=="string")return j(T,m);if(ArrayBuffer.isView(T))return X(T);if(T==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof T);if(Te(T,ArrayBuffer)||T&&Te(T.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(Te(T,SharedArrayBuffer)||T&&Te(T.buffer,SharedArrayBuffer)))return ve(T,m,v);if(typeof T=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const P=T.valueOf&&T.valueOf();if(P!=null&&P!==T)return w.from(P,m,v);const J=de(T);if(J)return J;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof T[Symbol.toPrimitive]=="function")return w.from(T[Symbol.toPrimitive]("string"),m,v);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof T)}c(R,"from"),w.from=function(T,m,v){return R(T,m,v)},Object.setPrototypeOf(w.prototype,Uint8Array.prototype),Object.setPrototypeOf(w,Uint8Array);function A(T){if(typeof T!="number")throw new TypeError('"size" argument must be of type number');if(T<0)throw new RangeError('The value "'+T+'" is invalid for option "size"')}c(A,"assertSize");function x(T,m,v){return A(T),T<=0?M(T):m!==void 0?typeof v=="string"?M(T).fill(m,v):M(T).fill(m):M(T)}c(x,"alloc"),w.alloc=function(T,m,v){return x(T,m,v)};function D(T){return A(T),M(T<0?0:z(T)|0)}c(D,"allocUnsafe"),w.allocUnsafe=function(T){return D(T)},w.allocUnsafeSlow=function(T){return D(T)};function j(T,m){if((typeof m!="string"||m==="")&&(m="utf8"),!w.isEncoding(m))throw new TypeError("Unknown encoding: "+m);const v=re(T,m)|0;let P=M(v);const J=P.write(T,m);return J!==v&&(P=P.slice(0,J)),P}c(j,"fromString");function N(T){const m=T.length<0?0:z(T.length)|0,v=M(m);for(let P=0;P<m;P+=1)v[P]=T[P]&255;return v}c(N,"fromArrayLike");function X(T){if(Te(T,Uint8Array)){const m=new Uint8Array(T);return ve(m.buffer,m.byteOffset,m.byteLength)}return N(T)}c(X,"fromArrayView");function ve(T,m,v){if(m<0||T.byteLength<m)throw new RangeError('"offset" is outside of buffer bounds');if(T.byteLength<m+(v||0))throw new RangeError('"length" is outside of buffer bounds');let P;return m===void 0&&v===void 0?P=new Uint8Array(T):v===void 0?P=new Uint8Array(T,m):P=new Uint8Array(T,m,v),Object.setPrototypeOf(P,w.prototype),P}c(ve,"fromArrayBuffer");function de(T){if(w.isBuffer(T)){const m=z(T.length)|0,v=M(m);return v.length===0||T.copy(v,0,0,m),v}if(T.length!==void 0)return typeof T.length!="number"||dt(T.length)?M(0):N(T);if(T.type==="Buffer"&&Array.isArray(T.data))return N(T.data)}c(de,"fromObject");function z(T){if(T>=K)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+K.toString(16)+" bytes");return T|0}c(z,"checked");function q(T){return+T!=T&&(T=0),w.alloc(+T)}c(q,"SlowBuffer"),w.isBuffer=c(function(m){return m!=null&&m._isBuffer===!0&&m!==w.prototype},"isBuffer"),w.compare=c(function(m,v){if(Te(m,Uint8Array)&&(m=w.from(m,m.offset,m.byteLength)),Te(v,Uint8Array)&&(v=w.from(v,v.offset,v.byteLength)),!w.isBuffer(m)||!w.isBuffer(v))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(m===v)return 0;let P=m.length,J=v.length;for(let ue=0,be=Math.min(P,J);ue<be;++ue)if(m[ue]!==v[ue]){P=m[ue],J=v[ue];break}return P<J?-1:J<P?1:0},"compare"),w.isEncoding=c(function(m){switch(String(m).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},"isEncoding"),w.concat=c(function(m,v){if(!Array.isArray(m))throw new TypeError('"list" argument must be an Array of Buffers');if(m.length===0)return w.alloc(0);let P;if(v===void 0)for(v=0,P=0;P<m.length;++P)v+=m[P].length;const J=w.allocUnsafe(v);let ue=0;for(P=0;P<m.length;++P){let be=m[P];if(Te(be,Uint8Array))ue+be.length>J.length?(w.isBuffer(be)||(be=w.from(be)),be.copy(J,ue)):Uint8Array.prototype.set.call(J,be,ue);else if(w.isBuffer(be))be.copy(J,ue);else throw new TypeError('"list" argument must be an Array of Buffers');ue+=be.length}return J},"concat");function re(T,m){if(w.isBuffer(T))return T.length;if(ArrayBuffer.isView(T)||Te(T,ArrayBuffer))return T.byteLength;if(typeof T!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof T);const v=T.length,P=arguments.length>2&&arguments[2]===!0;if(!P&&v===0)return 0;let J=!1;for(;;)switch(m){case"ascii":case"latin1":case"binary":return v;case"utf8":case"utf-8":return et(T).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v*2;case"hex":return v>>>1;case"base64":return Be(T).length;default:if(J)return P?-1:et(T).length;m=(""+m).toLowerCase(),J=!0}}c(re,"byteLength"),w.byteLength=re;function I(T,m,v){let P=!1;if((m===void 0||m<0)&&(m=0),m>this.length||((v===void 0||v>this.length)&&(v=this.length),v<=0)||(v>>>=0,m>>>=0,v<=m))return"";for(T||(T="utf8");;)switch(T){case"hex":return Xe(this,m,v);case"utf8":case"utf-8":return Re(this,m,v);case"ascii":return Ke(this,m,v);case"latin1":case"binary":return Le(this,m,v);case"base64":return je(this,m,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return st(this,m,v);default:if(P)throw new TypeError("Unknown encoding: "+T);T=(T+"").toLowerCase(),P=!0}}c(I,"slowToString"),w.prototype._isBuffer=!0;function W(T,m,v){const P=T[m];T[m]=T[v],T[v]=P}c(W,"swap"),w.prototype.swap16=c(function(){const m=this.length;if(m%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let v=0;v<m;v+=2)W(this,v,v+1);return this},"swap16"),w.prototype.swap32=c(function(){const m=this.length;if(m%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let v=0;v<m;v+=4)W(this,v,v+3),W(this,v+1,v+2);return this},"swap32"),w.prototype.swap64=c(function(){const m=this.length;if(m%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let v=0;v<m;v+=8)W(this,v,v+7),W(this,v+1,v+6),W(this,v+2,v+5),W(this,v+3,v+4);return this},"swap64"),w.prototype.toString=c(function(){const m=this.length;return m===0?"":arguments.length===0?Re(this,0,m):I.apply(this,arguments)},"toString"),w.prototype.toLocaleString=w.prototype.toString,w.prototype.equals=c(function(m){if(!w.isBuffer(m))throw new TypeError("Argument must be a Buffer");return this===m?!0:w.compare(this,m)===0},"equals"),w.prototype.inspect=c(function(){let m="";const v=h.INSPECT_MAX_BYTES;return m=this.toString("hex",0,v).replace(/(.{2})/g,"$1 ").trim(),this.length>v&&(m+=" ... "),"<Buffer "+m+">"},"inspect"),B&&(w.prototype[B]=w.prototype.inspect),w.prototype.compare=c(function(m,v,P,J,ue){if(Te(m,Uint8Array)&&(m=w.from(m,m.offset,m.byteLength)),!w.isBuffer(m))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof m);if(v===void 0&&(v=0),P===void 0&&(P=m?m.length:0),J===void 0&&(J=0),ue===void 0&&(ue=this.length),v<0||P>m.length||J<0||ue>this.length)throw new RangeError("out of range index");if(J>=ue&&v>=P)return 0;if(J>=ue)return-1;if(v>=P)return 1;if(v>>>=0,P>>>=0,J>>>=0,ue>>>=0,this===m)return 0;let be=ue-J,ct=P-v;const Dt=Math.min(be,ct),It=this.slice(J,ue),Nt=m.slice(v,P);for(let gt=0;gt<Dt;++gt)if(It[gt]!==Nt[gt]){be=It[gt],ct=Nt[gt];break}return be<ct?-1:ct<be?1:0},"compare");function G(T,m,v,P,J){if(T.length===0)return-1;if(typeof v=="string"?(P=v,v=0):v>2147483647?v=2147483647:v<-2147483648&&(v=-2147483648),v=+v,dt(v)&&(v=J?0:T.length-1),v<0&&(v=T.length+v),v>=T.length){if(J)return-1;v=T.length-1}else if(v<0)if(J)v=0;else return-1;if(typeof m=="string"&&(m=w.from(m,P)),w.isBuffer(m))return m.length===0?-1:he(T,m,v,P,J);if(typeof m=="number")return m=m&255,typeof Uint8Array.prototype.indexOf=="function"?J?Uint8Array.prototype.indexOf.call(T,m,v):Uint8Array.prototype.lastIndexOf.call(T,m,v):he(T,[m],v,P,J);throw new TypeError("val must be string, number or Buffer")}c(G,"bidirectionalIndexOf");function he(T,m,v,P,J){let ue=1,be=T.length,ct=m.length;if(P!==void 0&&(P=String(P).toLowerCase(),P==="ucs2"||P==="ucs-2"||P==="utf16le"||P==="utf-16le")){if(T.length<2||m.length<2)return-1;ue=2,be/=2,ct/=2,v/=2}function Dt(Nt,gt){return ue===1?Nt[gt]:Nt.readUInt16BE(gt*ue)}c(Dt,"read");let It;if(J){let Nt=-1;for(It=v;It<be;It++)if(Dt(T,It)===Dt(m,Nt===-1?0:It-Nt)){if(Nt===-1&&(Nt=It),It-Nt+1===ct)return Nt*ue}else Nt!==-1&&(It-=It-Nt),Nt=-1}else for(v+ct>be&&(v=be-ct),It=v;It>=0;It--){let Nt=!0;for(let gt=0;gt<ct;gt++)if(Dt(T,It+gt)!==Dt(m,gt)){Nt=!1;break}if(Nt)return It}return-1}c(he,"arrayIndexOf"),w.prototype.includes=c(function(m,v,P){return this.indexOf(m,v,P)!==-1},"includes"),w.prototype.indexOf=c(function(m,v,P){return G(this,m,v,P,!0)},"indexOf"),w.prototype.lastIndexOf=c(function(m,v,P){return G(this,m,v,P,!1)},"lastIndexOf");function le(T,m,v,P){v=Number(v)||0;const J=T.length-v;P?(P=Number(P),P>J&&(P=J)):P=J;const ue=m.length;P>ue/2&&(P=ue/2);let be;for(be=0;be<P;++be){const ct=parseInt(m.substr(be*2,2),16);if(dt(ct))return be;T[v+be]=ct}return be}c(le,"hexWrite");function oe(T,m,v,P){return ke(et(m,T.length-v),T,v,P)}c(oe,"utf8Write");function ye(T,m,v,P){return ke(Ot(m),T,v,P)}c(ye,"asciiWrite");function Ie(T,m,v,P){return ke(Be(m),T,v,P)}c(Ie,"base64Write");function He(T,m,v,P){return ke(An(m,T.length-v),T,v,P)}c(He,"ucs2Write"),w.prototype.write=c(function(m,v,P,J){if(v===void 0)J="utf8",P=this.length,v=0;else if(P===void 0&&typeof v=="string")J=v,P=this.length,v=0;else if(isFinite(v))v=v>>>0,isFinite(P)?(P=P>>>0,J===void 0&&(J="utf8")):(J=P,P=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ue=this.length-v;if((P===void 0||P>ue)&&(P=ue),m.length>0&&(P<0||v<0)||v>this.length)throw new RangeError("Attempt to write outside buffer bounds");J||(J="utf8");let be=!1;for(;;)switch(J){case"hex":return le(this,m,v,P);case"utf8":case"utf-8":return oe(this,m,v,P);case"ascii":case"latin1":case"binary":return ye(this,m,v,P);case"base64":return Ie(this,m,v,P);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return He(this,m,v,P);default:if(be)throw new TypeError("Unknown encoding: "+J);J=(""+J).toLowerCase(),be=!0}},"write"),w.prototype.toJSON=c(function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},"toJSON");function je(T,m,v){return m===0&&v===T.length?E.fromByteArray(T):E.fromByteArray(T.slice(m,v))}c(je,"base64Slice");function Re(T,m,v){v=Math.min(T.length,v);const P=[];let J=m;for(;J<v;){const ue=T[J];let be=null,ct=ue>239?4:ue>223?3:ue>191?2:1;if(J+ct<=v){let Dt,It,Nt,gt;switch(ct){case 1:ue<128&&(be=ue);break;case 2:Dt=T[J+1],(Dt&192)==128&&(gt=(ue&31)<<6|Dt&63,gt>127&&(be=gt));break;case 3:Dt=T[J+1],It=T[J+2],(Dt&192)==128&&(It&192)==128&&(gt=(ue&15)<<12|(Dt&63)<<6|It&63,gt>2047&&(gt<55296||gt>57343)&&(be=gt));break;case 4:Dt=T[J+1],It=T[J+2],Nt=T[J+3],(Dt&192)==128&&(It&192)==128&&(Nt&192)==128&&(gt=(ue&15)<<18|(Dt&63)<<12|(It&63)<<6|Nt&63,gt>65535&&gt<1114112&&(be=gt))}}be===null?(be=65533,ct=1):be>65535&&(be-=65536,P.push(be>>>10&1023|55296),be=56320|be&1023),P.push(be),J+=ct}return ze(P)}c(Re,"utf8Slice");const Ye=4096;function ze(T){const m=T.length;if(m<=Ye)return String.fromCharCode.apply(String,T);let v="",P=0;for(;P<m;)v+=String.fromCharCode.apply(String,T.slice(P,P+=Ye));return v}c(ze,"decodeCodePointsArray");function Ke(T,m,v){let P="";v=Math.min(T.length,v);for(let J=m;J<v;++J)P+=String.fromCharCode(T[J]&127);return P}c(Ke,"asciiSlice");function Le(T,m,v){let P="";v=Math.min(T.length,v);for(let J=m;J<v;++J)P+=String.fromCharCode(T[J]);return P}c(Le,"latin1Slice");function Xe(T,m,v){const P=T.length;(!m||m<0)&&(m=0),(!v||v<0||v>P)&&(v=P);let J="";for(let ue=m;ue<v;++ue)J+=Mt[T[ue]];return J}c(Xe,"hexSlice");function st(T,m,v){const P=T.slice(m,v);let J="";for(let ue=0;ue<P.length-1;ue+=2)J+=String.fromCharCode(P[ue]+P[ue+1]*256);return J}c(st,"utf16leSlice"),w.prototype.slice=c(function(m,v){const P=this.length;m=~~m,v=v===void 0?P:~~v,m<0?(m+=P,m<0&&(m=0)):m>P&&(m=P),v<0?(v+=P,v<0&&(v=0)):v>P&&(v=P),v<m&&(v=m);const J=this.subarray(m,v);return Object.setPrototypeOf(J,w.prototype),J},"slice");function V(T,m,v){if(T%1!=0||T<0)throw new RangeError("offset is not uint");if(T+m>v)throw new RangeError("Trying to access beyond buffer length")}c(V,"checkOffset"),w.prototype.readUintLE=w.prototype.readUIntLE=c(function(m,v,P){m=m>>>0,v=v>>>0,P||V(m,v,this.length);let J=this[m],ue=1,be=0;for(;++be<v&&(ue*=256);)J+=this[m+be]*ue;return J},"readUIntLE"),w.prototype.readUintBE=w.prototype.readUIntBE=c(function(m,v,P){m=m>>>0,v=v>>>0,P||V(m,v,this.length);let J=this[m+--v],ue=1;for(;v>0&&(ue*=256);)J+=this[m+--v]*ue;return J},"readUIntBE"),w.prototype.readUint8=w.prototype.readUInt8=c(function(m,v){return m=m>>>0,v||V(m,1,this.length),this[m]},"readUInt8"),w.prototype.readUint16LE=w.prototype.readUInt16LE=c(function(m,v){return m=m>>>0,v||V(m,2,this.length),this[m]|this[m+1]<<8},"readUInt16LE"),w.prototype.readUint16BE=w.prototype.readUInt16BE=c(function(m,v){return m=m>>>0,v||V(m,2,this.length),this[m]<<8|this[m+1]},"readUInt16BE"),w.prototype.readUint32LE=w.prototype.readUInt32LE=c(function(m,v){return m=m>>>0,v||V(m,4,this.length),(this[m]|this[m+1]<<8|this[m+2]<<16)+this[m+3]*16777216},"readUInt32LE"),w.prototype.readUint32BE=w.prototype.readUInt32BE=c(function(m,v){return m=m>>>0,v||V(m,4,this.length),this[m]*16777216+(this[m+1]<<16|this[m+2]<<8|this[m+3])},"readUInt32BE"),w.prototype.readBigUInt64LE=ft(c(function(m){m=m>>>0,xt(m,"offset");const v=this[m],P=this[m+7];(v===void 0||P===void 0)&&zr(m,this.length-8);const J=v+this[++m]*2**8+this[++m]*2**16+this[++m]*2**24,ue=this[++m]+this[++m]*2**8+this[++m]*2**16+P*2**24;return BigInt(J)+(BigInt(ue)<<BigInt(32))},"readBigUInt64LE")),w.prototype.readBigUInt64BE=ft(c(function(m){m=m>>>0,xt(m,"offset");const v=this[m],P=this[m+7];(v===void 0||P===void 0)&&zr(m,this.length-8);const J=v*2**24+this[++m]*2**16+this[++m]*2**8+this[++m],ue=this[++m]*2**24+this[++m]*2**16+this[++m]*2**8+P;return(BigInt(J)<<BigInt(32))+BigInt(ue)},"readBigUInt64BE")),w.prototype.readIntLE=c(function(m,v,P){m=m>>>0,v=v>>>0,P||V(m,v,this.length);let J=this[m],ue=1,be=0;for(;++be<v&&(ue*=256);)J+=this[m+be]*ue;return ue*=128,J>=ue&&(J-=Math.pow(2,8*v)),J},"readIntLE"),w.prototype.readIntBE=c(function(m,v,P){m=m>>>0,v=v>>>0,P||V(m,v,this.length);let J=v,ue=1,be=this[m+--J];for(;J>0&&(ue*=256);)be+=this[m+--J]*ue;return ue*=128,be>=ue&&(be-=Math.pow(2,8*v)),be},"readIntBE"),w.prototype.readInt8=c(function(m,v){return m=m>>>0,v||V(m,1,this.length),this[m]&128?(255-this[m]+1)*-1:this[m]},"readInt8"),w.prototype.readInt16LE=c(function(m,v){m=m>>>0,v||V(m,2,this.length);const P=this[m]|this[m+1]<<8;return P&32768?P|4294901760:P},"readInt16LE"),w.prototype.readInt16BE=c(function(m,v){m=m>>>0,v||V(m,2,this.length);const P=this[m+1]|this[m]<<8;return P&32768?P|4294901760:P},"readInt16BE"),w.prototype.readInt32LE=c(function(m,v){return m=m>>>0,v||V(m,4,this.length),this[m]|this[m+1]<<8|this[m+2]<<16|this[m+3]<<24},"readInt32LE"),w.prototype.readInt32BE=c(function(m,v){return m=m>>>0,v||V(m,4,this.length),this[m]<<24|this[m+1]<<16|this[m+2]<<8|this[m+3]},"readInt32BE"),w.prototype.readBigInt64LE=ft(c(function(m){m=m>>>0,xt(m,"offset");const v=this[m],P=this[m+7];(v===void 0||P===void 0)&&zr(m,this.length-8);const J=this[m+4]+this[m+5]*2**8+this[m+6]*2**16+(P<<24);return(BigInt(J)<<BigInt(32))+BigInt(v+this[++m]*2**8+this[++m]*2**16+this[++m]*2**24)},"readBigInt64LE")),w.prototype.readBigInt64BE=ft(c(function(m){m=m>>>0,xt(m,"offset");const v=this[m],P=this[m+7];(v===void 0||P===void 0)&&zr(m,this.length-8);const J=(v<<24)+this[++m]*2**16+this[++m]*2**8+this[++m];return(BigInt(J)<<BigInt(32))+BigInt(this[++m]*2**24+this[++m]*2**16+this[++m]*2**8+P)},"readBigInt64BE")),w.prototype.readFloatLE=c(function(m,v){return m=m>>>0,v||V(m,4,this.length),O.read(this,m,!0,23,4)},"readFloatLE"),w.prototype.readFloatBE=c(function(m,v){return m=m>>>0,v||V(m,4,this.length),O.read(this,m,!1,23,4)},"readFloatBE"),w.prototype.readDoubleLE=c(function(m,v){return m=m>>>0,v||V(m,8,this.length),O.read(this,m,!0,52,8)},"readDoubleLE"),w.prototype.readDoubleBE=c(function(m,v){return m=m>>>0,v||V(m,8,this.length),O.read(this,m,!1,52,8)},"readDoubleBE");function ae(T,m,v,P,J,ue){if(!w.isBuffer(T))throw new TypeError('"buffer" argument must be a Buffer instance');if(m>J||m<ue)throw new RangeError('"value" argument is out of bounds');if(v+P>T.length)throw new RangeError("Index out of range")}c(ae,"checkInt"),w.prototype.writeUintLE=w.prototype.writeUIntLE=c(function(m,v,P,J){if(m=+m,v=v>>>0,P=P>>>0,!J){const ct=Math.pow(2,8*P)-1;ae(this,m,v,P,ct,0)}let ue=1,be=0;for(this[v]=m&255;++be<P&&(ue*=256);)this[v+be]=m/ue&255;return v+P},"writeUIntLE"),w.prototype.writeUintBE=w.prototype.writeUIntBE=c(function(m,v,P,J){if(m=+m,v=v>>>0,P=P>>>0,!J){const ct=Math.pow(2,8*P)-1;ae(this,m,v,P,ct,0)}let ue=P-1,be=1;for(this[v+ue]=m&255;--ue>=0&&(be*=256);)this[v+ue]=m/be&255;return v+P},"writeUIntBE"),w.prototype.writeUint8=w.prototype.writeUInt8=c(function(m,v,P){return m=+m,v=v>>>0,P||ae(this,m,v,1,255,0),this[v]=m&255,v+1},"writeUInt8"),w.prototype.writeUint16LE=w.prototype.writeUInt16LE=c(function(m,v,P){return m=+m,v=v>>>0,P||ae(this,m,v,2,65535,0),this[v]=m&255,this[v+1]=m>>>8,v+2},"writeUInt16LE"),w.prototype.writeUint16BE=w.prototype.writeUInt16BE=c(function(m,v,P){return m=+m,v=v>>>0,P||ae(this,m,v,2,65535,0),this[v]=m>>>8,this[v+1]=m&255,v+2},"writeUInt16BE"),w.prototype.writeUint32LE=w.prototype.writeUInt32LE=c(function(m,v,P){return m=+m,v=v>>>0,P||ae(this,m,v,4,4294967295,0),this[v+3]=m>>>24,this[v+2]=m>>>16,this[v+1]=m>>>8,this[v]=m&255,v+4},"writeUInt32LE"),w.prototype.writeUint32BE=w.prototype.writeUInt32BE=c(function(m,v,P){return m=+m,v=v>>>0,P||ae(this,m,v,4,4294967295,0),this[v]=m>>>24,this[v+1]=m>>>16,this[v+2]=m>>>8,this[v+3]=m&255,v+4},"writeUInt32BE");function _t(T,m,v,P,J){Rt(m,P,J,T,v,7);let ue=Number(m&BigInt(4294967295));T[v++]=ue,ue=ue>>8,T[v++]=ue,ue=ue>>8,T[v++]=ue,ue=ue>>8,T[v++]=ue;let be=Number(m>>BigInt(32)&BigInt(4294967295));return T[v++]=be,be=be>>8,T[v++]=be,be=be>>8,T[v++]=be,be=be>>8,T[v++]=be,v}c(_t,"wrtBigUInt64LE");function Ze(T,m,v,P,J){Rt(m,P,J,T,v,7);let ue=Number(m&BigInt(4294967295));T[v+7]=ue,ue=ue>>8,T[v+6]=ue,ue=ue>>8,T[v+5]=ue,ue=ue>>8,T[v+4]=ue;let be=Number(m>>BigInt(32)&BigInt(4294967295));return T[v+3]=be,be=be>>8,T[v+2]=be,be=be>>8,T[v+1]=be,be=be>>8,T[v]=be,v+8}c(Ze,"wrtBigUInt64BE"),w.prototype.writeBigUInt64LE=ft(c(function(m,v=0){return _t(this,m,v,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64LE")),w.prototype.writeBigUInt64BE=ft(c(function(m,v=0){return Ze(this,m,v,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64BE")),w.prototype.writeIntLE=c(function(m,v,P,J){if(m=+m,v=v>>>0,!J){const Dt=Math.pow(2,8*P-1);ae(this,m,v,P,Dt-1,-Dt)}let ue=0,be=1,ct=0;for(this[v]=m&255;++ue<P&&(be*=256);)m<0&&ct===0&&this[v+ue-1]!==0&&(ct=1),this[v+ue]=(m/be>>0)-ct&255;return v+P},"writeIntLE"),w.prototype.writeIntBE=c(function(m,v,P,J){if(m=+m,v=v>>>0,!J){const Dt=Math.pow(2,8*P-1);ae(this,m,v,P,Dt-1,-Dt)}let ue=P-1,be=1,ct=0;for(this[v+ue]=m&255;--ue>=0&&(be*=256);)m<0&&ct===0&&this[v+ue+1]!==0&&(ct=1),this[v+ue]=(m/be>>0)-ct&255;return v+P},"writeIntBE"),w.prototype.writeInt8=c(function(m,v,P){return m=+m,v=v>>>0,P||ae(this,m,v,1,127,-128),m<0&&(m=255+m+1),this[v]=m&255,v+1},"writeInt8"),w.prototype.writeInt16LE=c(function(m,v,P){return m=+m,v=v>>>0,P||ae(this,m,v,2,32767,-32768),this[v]=m&255,this[v+1]=m>>>8,v+2},"writeInt16LE"),w.prototype.writeInt16BE=c(function(m,v,P){return m=+m,v=v>>>0,P||ae(this,m,v,2,32767,-32768),this[v]=m>>>8,this[v+1]=m&255,v+2},"writeInt16BE"),w.prototype.writeInt32LE=c(function(m,v,P){return m=+m,v=v>>>0,P||ae(this,m,v,4,2147483647,-2147483648),this[v]=m&255,this[v+1]=m>>>8,this[v+2]=m>>>16,this[v+3]=m>>>24,v+4},"writeInt32LE"),w.prototype.writeInt32BE=c(function(m,v,P){return m=+m,v=v>>>0,P||ae(this,m,v,4,2147483647,-2147483648),m<0&&(m=4294967295+m+1),this[v]=m>>>24,this[v+1]=m>>>16,this[v+2]=m>>>8,this[v+3]=m&255,v+4},"writeInt32BE"),w.prototype.writeBigInt64LE=ft(c(function(m,v=0){return _t(this,m,v,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64LE")),w.prototype.writeBigInt64BE=ft(c(function(m,v=0){return Ze(this,m,v,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64BE"));function at(T,m,v,P,J,ue){if(v+P>T.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("Index out of range")}c(at,"checkIEEE754");function Z(T,m,v,P,J){return m=+m,v=v>>>0,J||at(T,m,v,4,34028234663852886e22,-34028234663852886e22),O.write(T,m,v,P,23,4),v+4}c(Z,"writeFloat"),w.prototype.writeFloatLE=c(function(m,v,P){return Z(this,m,v,!0,P)},"writeFloatLE"),w.prototype.writeFloatBE=c(function(m,v,P){return Z(this,m,v,!1,P)},"writeFloatBE");function pe(T,m,v,P,J){return m=+m,v=v>>>0,J||at(T,m,v,8,17976931348623157e292,-17976931348623157e292),O.write(T,m,v,P,52,8),v+8}c(pe,"writeDouble"),w.prototype.writeDoubleLE=c(function(m,v,P){return pe(this,m,v,!0,P)},"writeDoubleLE"),w.prototype.writeDoubleBE=c(function(m,v,P){return pe(this,m,v,!1,P)},"writeDoubleBE"),w.prototype.copy=c(function(m,v,P,J){if(!w.isBuffer(m))throw new TypeError("argument should be a Buffer");if(P||(P=0),!J&&J!==0&&(J=this.length),v>=m.length&&(v=m.length),v||(v=0),J>0&&J<P&&(J=P),J===P||m.length===0||this.length===0)return 0;if(v<0)throw new RangeError("targetStart out of bounds");if(P<0||P>=this.length)throw new RangeError("Index out of range");if(J<0)throw new RangeError("sourceEnd out of bounds");J>this.length&&(J=this.length),m.length-v<J-P&&(J=m.length-v+P);const ue=J-P;return this===m&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(v,P,J):Uint8Array.prototype.set.call(m,this.subarray(P,J),v),ue},"copy"),w.prototype.fill=c(function(m,v,P,J){if(typeof m=="string"){if(typeof v=="string"?(J=v,v=0,P=this.length):typeof P=="string"&&(J=P,P=this.length),J!==void 0&&typeof J!="string")throw new TypeError("encoding must be a string");if(typeof J=="string"&&!w.isEncoding(J))throw new TypeError("Unknown encoding: "+J);if(m.length===1){const be=m.charCodeAt(0);(J==="utf8"&&be<128||J==="latin1")&&(m=be)}}else typeof m=="number"?m=m&255:typeof m=="boolean"&&(m=Number(m));if(v<0||this.length<v||this.length<P)throw new RangeError("Out of range index");if(P<=v)return this;v=v>>>0,P=P===void 0?this.length:P>>>0,m||(m=0);let ue;if(typeof m=="number")for(ue=v;ue<P;++ue)this[ue]=m;else{const be=w.isBuffer(m)?m:w.from(m,J),ct=be.length;if(ct===0)throw new TypeError('The value "'+m+'" is invalid for argument "value"');for(ue=0;ue<P-v;++ue)this[ue+v]=be[ue%ct]}return this},"fill");const Me={};function rt(T,m,v){Me[T]=c(class extends v{constructor(){super();Object.defineProperty(this,"message",{value:m.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${T}]`,this.stack,delete this.name}get code(){return T}set code(J){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:J,writable:!0})}toString(){return`${this.name} [${T}]: ${this.message}`}},"NodeError")}c(rt,"E"),rt("ERR_BUFFER_OUT_OF_BOUNDS",function(T){return T?`${T} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),rt("ERR_INVALID_ARG_TYPE",function(T,m){return`The "${T}" argument must be of type number. Received type ${typeof m}`},TypeError),rt("ERR_OUT_OF_RANGE",function(T,m,v){let P=`The value of "${T}" is out of range.`,J=v;return Number.isInteger(v)&&Math.abs(v)>2**32?J=qe(String(v)):typeof v=="bigint"&&(J=String(v),(v>BigInt(2)**BigInt(32)||v<-(BigInt(2)**BigInt(32)))&&(J=qe(J)),J+="n"),P+=` It must be ${m}. Received ${J}`,P},RangeError);function qe(T){let m="",v=T.length;const P=T[0]==="-"?1:0;for(;v>=P+4;v-=3)m=`_${T.slice(v-3,v)}${m}`;return`${T.slice(0,v)}${m}`}c(qe,"addNumericalSeparator");function ot(T,m,v){xt(m,"offset"),(T[m]===void 0||T[m+v]===void 0)&&zr(m,T.length-(v+1))}c(ot,"checkBounds");function Rt(T,m,v,P,J,ue){if(T>v||T<m){const be=typeof m=="bigint"?"n":"";let ct;throw ue>3?m===0||m===BigInt(0)?ct=`>= 0${be} and < 2${be} ** ${(ue+1)*8}${be}`:ct=`>= -(2${be} ** ${(ue+1)*8-1}${be}) and < 2 ** ${(ue+1)*8-1}${be}`:ct=`>= ${m}${be} and <= ${v}${be}`,new Me.ERR_OUT_OF_RANGE("value",ct,T)}ot(P,J,ue)}c(Rt,"checkIntBI");function xt(T,m){if(typeof T!="number")throw new Me.ERR_INVALID_ARG_TYPE(m,"number",T)}c(xt,"validateNumber");function zr(T,m,v){throw Math.floor(T)!==T?(xt(T,v),new Me.ERR_OUT_OF_RANGE(v||"offset","an integer",T)):m<0?new Me.ERR_BUFFER_OUT_OF_BOUNDS:new Me.ERR_OUT_OF_RANGE(v||"offset",`>= ${v?1:0} and <= ${m}`,T)}c(zr,"boundsError");const _r=/[^+/0-9A-Za-z-_]/g;function rr(T){if(T=T.split("=")[0],T=T.trim().replace(_r,""),T.length<2)return"";for(;T.length%4!=0;)T=T+"=";return T}c(rr,"base64clean");function et(T,m){m=m||1/0;let v;const P=T.length;let J=null;const ue=[];for(let be=0;be<P;++be){if(v=T.charCodeAt(be),v>55295&&v<57344){if(!J){if(v>56319){(m-=3)>-1&&ue.push(239,191,189);continue}else if(be+1===P){(m-=3)>-1&&ue.push(239,191,189);continue}J=v;continue}if(v<56320){(m-=3)>-1&&ue.push(239,191,189),J=v;continue}v=(J-55296<<10|v-56320)+65536}else J&&(m-=3)>-1&&ue.push(239,191,189);if(J=null,v<128){if((m-=1)<0)break;ue.push(v)}else if(v<2048){if((m-=2)<0)break;ue.push(v>>6|192,v&63|128)}else if(v<65536){if((m-=3)<0)break;ue.push(v>>12|224,v>>6&63|128,v&63|128)}else if(v<1114112){if((m-=4)<0)break;ue.push(v>>18|240,v>>12&63|128,v>>6&63|128,v&63|128)}else throw new Error("Invalid code point")}return ue}c(et,"utf8ToBytes");function Ot(T){const m=[];for(let v=0;v<T.length;++v)m.push(T.charCodeAt(v)&255);return m}c(Ot,"asciiToBytes");function An(T,m){let v,P,J;const ue=[];for(let be=0;be<T.length&&!((m-=2)<0);++be)v=T.charCodeAt(be),P=v>>8,J=v%256,ue.push(J),ue.push(P);return ue}c(An,"utf16leToBytes");function Be(T){return E.toByteArray(rr(T))}c(Be,"base64ToBytes");function ke(T,m,v,P){let J;for(J=0;J<P&&!(J+v>=m.length||J>=T.length);++J)m[J+v]=T[J];return J}c(ke,"blitBuffer");function Te(T,m){return T instanceof m||T!=null&&T.constructor!=null&&T.constructor.name!=null&&T.constructor.name===m.name}c(Te,"isInstance");function dt(T){return T!==T}c(dt,"numberIsNaN");const Mt=function(){const T="0123456789abcdef",m=new Array(256);for(let v=0;v<16;++v){const P=v*16;for(let J=0;J<16;++J)m[P+J]=T[v]+T[J]}return m}();function ft(T){return typeof BigInt=="undefined"?Lt:T}c(ft,"defineBigIntMethod");function Lt(){throw new Error("BigInt not supported")}c(Lt,"BufferBigIntNotDefined")},1:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__(8764).Buffer;const Token=__webpack_require__(3416),strtok3=__webpack_require__(5849),{stringToBytes,tarHeaderChecksumMatches,uint32SyncSafeToken}=__webpack_require__(6188),supported=__webpack_require__(9898),minimumBytes=4100;async function fromStream(ee){const h=await strtok3.fromStream(ee);try{return await fromTokenizer(h)}finally{await h.close()}}c(fromStream,"fromStream");async function fromBuffer(ee){if(!(ee instanceof Uint8Array||ee instanceof ArrayBuffer||Buffer.isBuffer(ee)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof ee}\``);const h=ee instanceof Buffer?ee:Buffer.from(ee);if(!(h&&h.length>1))return;const H=strtok3.fromBuffer(h);return fromTokenizer(H)}c(fromBuffer,"fromBuffer");function _check(ee,h,H){H={offset:0,...H};for(const[E,O]of h.entries())if(H.mask){if(O!==(H.mask[E]&ee[E+H.offset]))return!1}else if(O!==ee[E+H.offset])return!1;return!0}c(_check,"_check");async function fromTokenizer(ee){try{return _fromTokenizer(ee)}catch(h){if(!(h instanceof strtok3.EndOfStreamError))throw h}}c(fromTokenizer,"fromTokenizer");async function _fromTokenizer(ee){let h=Buffer.alloc(minimumBytes);const H=12,E=c((B,K)=>_check(h,B,K),"check"),O=c((B,K)=>E(stringToBytes(B),K),"checkString");if(ee.fileInfo.size||(ee.fileInfo.size=Number.MAX_SAFE_INTEGER),await ee.peekBuffer(h,{length:H,mayBeLess:!0}),E([66,77]))return{ext:"bmp",mime:"image/bmp"};if(E([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(E([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(E([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(E([37,33]))return await ee.peekBuffer(h,{length:24,mayBeLess:!0}),O("PS-Adobe-",{offset:2})&&O(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(E([31,160])||E([31,157]))return{ext:"Z",mime:"application/x-compress"};if(E([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(E([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(E([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(E([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(O("ID3")){await ee.ignore(6);const B=await ee.readToken(uint32SyncSafeToken);return ee.position+B>ee.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(await ee.ignore(B),fromTokenizer(ee))}if(O("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((h[0]===67||h[0]===70)&&E([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(E([71,73,70]))return{ext:"gif",mime:"image/gif"};if(O("FLIF"))return{ext:"flif",mime:"image/flif"};if(O("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(O("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(O("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(O("FORM"))return{ext:"aif",mime:"audio/aiff"};if(O("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(E([80,75,3,4])){try{for(;ee.position+30<ee.fileInfo.size;){await ee.readBuffer(h,{length:30});const B={compressedSize:h.readUInt32LE(18),uncompressedSize:h.readUInt32LE(22),filenameLength:h.readUInt16LE(26),extraFieldLength:h.readUInt16LE(28)};if(B.filename=await ee.readToken(new Token.StringType(B.filenameLength,"utf-8")),await ee.ignore(B.extraFieldLength),B.filename==="META-INF/mozilla.rsa")return{ext:"xpi",mime:"application/x-xpinstall"};if(B.filename.endsWith(".rels")||B.filename.endsWith(".xml"))switch(B.filename.split("/")[0]){case"_rels":break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};default:break}if(B.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if(B.filename.startsWith("3D/")&&B.filename.endsWith(".model"))return{ext:"3mf",mime:"model/3mf"};if(B.filename==="mimetype"&&B.compressedSize===B.uncompressedSize)switch(await ee.readToken(new Token.StringType(B.compressedSize,"utf-8"))){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};default:}if(B.compressedSize===0){let K=-1;for(;K<0&&ee.position<ee.fileInfo.size;)await ee.peekBuffer(h,{mayBeLess:!0}),K=h.indexOf("504B0304",0,"hex"),await ee.ignore(K>=0?K:h.length)}else await ee.ignore(B.compressedSize)}}catch(B){if(!(B instanceof strtok3.EndOfStreamError))throw B}return{ext:"zip",mime:"application/zip"}}if(O("OggS")){await ee.ignore(28);const B=Buffer.alloc(8);return await ee.readBuffer(B),_check(B,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/opus"}:_check(B,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:_check(B,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:_check(B,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:_check(B,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:_check(B,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(E([80,75])&&(h[2]===3||h[2]===5||h[2]===7)&&(h[3]===4||h[3]===6||h[3]===8))return{ext:"zip",mime:"application/zip"};if(O("ftyp",{offset:4})&&(h[8]&96)!=0){const B=h.toString("binary",8,12).replace("\0"," ").trim();switch(B){case"avif":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return B.startsWith("3g")?B.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(O("MThd"))return{ext:"mid",mime:"audio/midi"};if(O("wOFF")&&(E([0,1,0,0],{offset:4})||O("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(O("wOF2")&&(E([0,1,0,0],{offset:4})||O("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(E([212,195,178,161])||E([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(O("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(O("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(O("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(E([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(O("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(O("%PDF")){await ee.ignore(1350);const B=10*1024*1024,K=Buffer.alloc(Math.min(B,ee.fileInfo.size));return await ee.readBuffer(K,{mayBeLess:!0}),K.includes(Buffer.from("AIPrivateData"))?{ext:"ai",mime:"application/postscript"}:{ext:"pdf",mime:"application/pdf"}}if(E([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(E([73,73,42,0]))return O("CR",{offset:8})?{ext:"cr2",mime:"image/x-canon-cr2"}:E([28,0,254,0],{offset:8})||E([31,0,11,0],{offset:8})?{ext:"nef",mime:"image/x-nikon-nef"}:E([8,0,0,0],{offset:4})&&(E([45,0,254,0],{offset:8})||E([39,0,254,0],{offset:8}))?{ext:"dng",mime:"image/x-adobe-dng"}:(h=Buffer.alloc(24),await ee.peekBuffer(h),(E([16,251,134,1],{offset:4})||E([8,0,0,0],{offset:4}))&&E([0,254,0,4,0,1,0,0,0,1,0,0,0,3,1],{offset:9})?{ext:"arw",mime:"image/x-sony-arw"}:{ext:"tif",mime:"image/tiff"});if(E([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(O("MAC "))return{ext:"ape",mime:"audio/ape"};if(E([26,69,223,163])){async function B(){const R=await ee.peekNumber(Token.UINT8);let A=128,x=0;for(;(R&A)==0;)++x,A>>=1;const D=Buffer.alloc(x+1);return await ee.readBuffer(D),D}c(B,"readField");async function K(){const R=await B(),A=await B();A[0]^=128>>A.length-1;const x=Math.min(6,A.length);return{id:R.readUIntBE(0,R.length),len:A.readUIntBE(A.length-x,x)}}c(K,"readElement");async function Y(R,A){for(;A>0;){const x=await K();if(x.id===17026)return ee.readToken(new Token.StringType(x.len,"utf-8"));await ee.ignore(x.len),--A}}c(Y,"readChildren");const M=await K();switch(await Y(1,M.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(E([82,73,70,70])){if(E([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(E([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(E([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(O("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(E([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(O("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(O("MSCF")||O("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(E([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(E([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(E([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(E([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(O("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(O("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(E([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(O("IMPM"))return{ext:"it",mime:"audio/x-it"};if(O("-lh0-",{offset:2})||O("-lh1-",{offset:2})||O("-lh2-",{offset:2})||O("-lh3-",{offset:2})||O("-lh4-",{offset:2})||O("-lh5-",{offset:2})||O("-lh6-",{offset:2})||O("-lh7-",{offset:2})||O("-lzs-",{offset:2})||O("-lz4-",{offset:2})||O("-lz5-",{offset:2})||O("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(E([0,0,1,186])){if(E([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(E([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(O("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(E([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(O("<?xml "))return{ext:"xml",mime:"application/xml"};if(E([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(E([82,97,114,33,26,7])&&(h[6]===0||h[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(O("solid "))return{ext:"stl",mime:"model/stl"};if(O("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(O("!<arch>"))return await ee.ignore(8),await ee.readToken(new Token.StringType(13,"ascii"))==="debian-binary"?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"};if(E([137,80,78,71,13,10,26,10])){await ee.ignore(8);async function B(){return{length:await ee.readToken(Token.INT32_BE),type:await ee.readToken(new Token.StringType(4,"binary"))}}c(B,"readChunkHeader");do{const K=await B();if(K.length<0)return;switch(K.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await ee.ignore(K.length+4)}}while(ee.position+8<ee.fileInfo.size);return{ext:"png",mime:"image/png"}}if(E([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(E([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(E([102,114,101,101],{offset:4})||E([109,100,97,116],{offset:4})||E([109,111,111,118],{offset:4})||E([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(E([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(O("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(E([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(E([48,38,178,117,142,102,207,17,166,217])){async function B(){const K=Buffer.alloc(16);return await ee.readBuffer(K),{id:K,size:Number(await ee.readToken(Token.UINT64_LE))}}for(c(B,"readHeader"),await ee.ignore(30);ee.position+24<ee.fileInfo.size;){const K=await B();let Y=K.size-24;if(_check(K.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){const M=Buffer.alloc(16);if(Y-=await ee.readBuffer(M),_check(M,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(_check(M,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await ee.ignore(Y)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(E([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((E([126,16,4])||E([126,24,4]))&&E([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(E([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(E([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await ee.ignore(20),await ee.readToken(new Token.StringType(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(E([255,10])||E([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(E([0,0,1,186])||E([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(E([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(E([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(E([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(E([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await ee.peekBuffer(h,{length:Math.min(256,ee.fileInfo.size),mayBeLess:!0}),O("BEGIN:")){if(O("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(O("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(O("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(O("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(O("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(E([4,0,0,0])&&h.length>=16){const B=h.readUInt32LE(12);if(B>12&&h.length>=B+16)try{const K=h.slice(16,B+16).toString();if(JSON.parse(K).files)return{ext:"asar",mime:"application/x-asar"}}catch(K){}}if(E([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(O("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(E([71],{offset:4})&&(E([71],{offset:192})||E([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(E([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(E([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(E([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(E([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(E([76,80],{offset:34})&&(E([0,0,1],{offset:8})||E([1,0,2],{offset:8})||E([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(E([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await ee.peekBuffer(h,{length:Math.min(512,ee.fileInfo.size),mayBeLess:!0}),tarHeaderChecksumMatches(h))return{ext:"tar",mime:"application/x-tar"};if(E([255,254,255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0]))return{ext:"skp",mime:"application/vnd.sketchup.skp"};if(O("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};if(h.length>=2&&E([255,224],{offset:0,mask:[255,224]})){if(E([16],{offset:1,mask:[22]}))return E([8],{offset:1,mask:[8]})?{ext:"aac",mime:"audio/aac"}:{ext:"aac",mime:"audio/aac"};if(E([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(E([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(E([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}c(_fromTokenizer,"_fromTokenizer");const stream=c(readableStream=>new Promise((resolve,reject)=>{const stream=eval("require")("stream");readableStream.on("error",reject),readableStream.once("readable",async()=>{const ee=new stream.PassThrough;let h;stream.pipeline?h=stream.pipeline(readableStream,ee,()=>{}):h=readableStream.pipe(ee);const H=readableStream.read(minimumBytes)||readableStream.read()||Buffer.alloc(0);try{const E=await fromBuffer(H);ee.fileType=E}catch(E){reject(E)}resolve(h)})}),"stream"),fileType={fromStream,fromTokenizer,fromBuffer,stream};Object.defineProperty(fileType,"extensions",{get(){return new Set(supported.extensions)}}),Object.defineProperty(fileType,"mimeTypes",{get(){return new Set(supported.mimeTypes)}}),module.exports=fileType},7769:(ee,h,H)=>{"use strict";const E=H(6597),O=H(1);async function B(Y){const M=await E.fromFile(Y);try{return await O.fromTokenizer(M)}finally{await M.close()}}c(B,"fromFile");const K={fromFile:B};Object.assign(K,O),Object.defineProperty(K,"extensions",{get(){return O.extensions}}),Object.defineProperty(K,"mimeTypes",{get(){return O.mimeTypes}}),ee.exports=K},9898:ee=>{"use strict";ee.exports={extensions:["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf"],mimeTypes:["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/vnd.wave","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","audio/opus","video/ogg","audio/ogg","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd"]}},6188:(ee,h)=>{"use strict";h.stringToBytes=H=>[...H].map(E=>E.charCodeAt(0)),h.tarHeaderChecksumMatches=(H,E=0)=>{const O=parseInt(H.toString("utf8",148,154).replace(/\0.*$/,"").trim(),8);if(isNaN(O))return!1;let B=8*32;for(let K=E;K<E+148;K++)B+=H[K];for(let K=E+156;K<E+512;K++)B+=H[K];return O===B},h.uint32SyncSafeToken={get:(H,E)=>H[E+3]&127|H[E+2]<<7|H[E+1]<<14|H[E]<<21,len:4}},7360:function(ee,h){var H,E,O;(function(B,K){E=[],H=K,O=typeof H=="function"?H.apply(h,E):H,O!==void 0&&(ee.exports=O)})(this,c(function(){function K(z){var q={single:function(re,I,W){if(!re||(X(re)||(re=q.getPreparedSearch(re)),!I))return null;X(I)||(I=q.getPrepared(I));var G=W&&W.allowTypo!==void 0?W.allowTypo:z&&z.allowTypo!==void 0?z.allowTypo:!0,he=G?q.algorithm:q.algorithmNoTypo;return he(re,I,re[0])},go:function(re,I,W){if(!re)return R;re=q.prepareSearch(re);var G=re[0],he=W&&W.threshold||z&&z.threshold||-9007199254740991,le=W&&W.limit||z&&z.limit||9007199254740991,oe=W&&W.allowTypo!==void 0?W.allowTypo:z&&z.allowTypo!==void 0?z.allowTypo:!0,ye=oe?q.algorithm:q.algorithmNoTypo,Ie=0,He=0,je=I.length;if(W&&W.keys)for(var Re=W.scoreFn||j,Ye=W.keys,ze=Ye.length,Ke=je-1;Ke>=0;--Ke){for(var Le=I[Ke],Xe=new Array(ze),st=ze-1;st>=0;--st){var V=Ye[st],ae=N(Le,V);if(!ae){Xe[st]=null;continue}X(ae)||(ae=q.getPrepared(ae)),Xe[st]=ye(re,ae,G)}Xe.obj=Le;var _t=Re(Xe);_t!==null&&(_t<he||(Xe.score=_t,Ie<le?(de.add(Xe),++Ie):(++He,_t>de.peek().score&&de.replaceTop(Xe))))}else if(W&&W.key)for(var V=W.key,Ke=je-1;Ke>=0;--Ke){var Le=I[Ke],ae=N(Le,V);if(!!ae){X(ae)||(ae=q.getPrepared(ae));var Ze=ye(re,ae,G);Ze!==null&&(Ze.score<he||(Ze={target:Ze.target,_targetLowerCodes:null,_nextBeginningIndexes:null,score:Ze.score,indexes:Ze.indexes,obj:Le},Ie<le?(de.add(Ze),++Ie):(++He,Ze.score>de.peek().score&&de.replaceTop(Ze))))}}else for(var Ke=je-1;Ke>=0;--Ke){var ae=I[Ke];if(!!ae){X(ae)||(ae=q.getPrepared(ae));var Ze=ye(re,ae,G);Ze!==null&&(Ze.score<he||(Ie<le?(de.add(Ze),++Ie):(++He,Ze.score>de.peek().score&&de.replaceTop(Ze))))}}if(Ie===0)return R;for(var at=new Array(Ie),Ke=Ie-1;Ke>=0;--Ke)at[Ke]=de.poll();return at.total=Ie+He,at},goAsync:function(re,I,W){var G=!1,he=new Promise(function(le,oe){if(!re)return le(R);re=q.prepareSearch(re);var ye=re[0],Ie=ve(),He=I.length-1,je=W&&W.threshold||z&&z.threshold||-9007199254740991,Re=W&&W.limit||z&&z.limit||9007199254740991,Ye=W&&W.allowTypo!==void 0?W.allowTypo:z&&z.allowTypo!==void 0?z.allowTypo:!0,ze=Ye?q.algorithm:q.algorithmNoTypo,Ke=0,Le=0;function Xe(){if(G)return oe("canceled");var st=Date.now();if(W&&W.keys)for(var V=W.scoreFn||j,ae=W.keys,_t=ae.length;He>=0;--He){for(var Ze=I[He],at=new Array(_t),Z=_t-1;Z>=0;--Z){var pe=ae[Z],Me=N(Ze,pe);if(!Me){at[Z]=null;continue}X(Me)||(Me=q.getPrepared(Me)),at[Z]=ze(re,Me,ye)}at.obj=Ze;var rt=V(at);if(rt!==null&&!(rt<je)&&(at.score=rt,Ke<Re?(Ie.add(at),++Ke):(++Le,rt>Ie.peek().score&&Ie.replaceTop(at)),He%1e3==0&&Date.now()-st>=10)){Y?setImmediate(Xe):setTimeout(Xe);return}}else if(W&&W.key)for(var pe=W.key;He>=0;--He){var Ze=I[He],Me=N(Ze,pe);if(!!Me){X(Me)||(Me=q.getPrepared(Me));var qe=ze(re,Me,ye);if(qe!==null&&!(qe.score<je)&&(qe={target:qe.target,_targetLowerCodes:null,_nextBeginningIndexes:null,score:qe.score,indexes:qe.indexes,obj:Ze},Ke<Re?(Ie.add(qe),++Ke):(++Le,qe.score>Ie.peek().score&&Ie.replaceTop(qe)),He%1e3==0&&Date.now()-st>=10)){Y?setImmediate(Xe):setTimeout(Xe);return}}}else for(;He>=0;--He){var Me=I[He];if(!!Me){X(Me)||(Me=q.getPrepared(Me));var qe=ze(re,Me,ye);if(qe!==null&&!(qe.score<je)&&(Ke<Re?(Ie.add(qe),++Ke):(++Le,qe.score>Ie.peek().score&&Ie.replaceTop(qe)),He%1e3==0&&Date.now()-st>=10)){Y?setImmediate(Xe):setTimeout(Xe);return}}}if(Ke===0)return le(R);for(var ot=new Array(Ke),Rt=Ke-1;Rt>=0;--Rt)ot[Rt]=Ie.poll();ot.total=Ke+Le,le(ot)}c(Xe,"step"),Y?setImmediate(Xe):Xe()});return he.cancel=function(){G=!0},he},highlight:function(re,I,W){if(re===null)return null;I===void 0&&(I="<b>"),W===void 0&&(W="</b>");for(var G="",he=0,le=!1,oe=re.target,ye=oe.length,Ie=re.indexes,He=0;He<ye;++He){var je=oe[He];if(Ie[he]===He){if(++he,le||(le=!0,G+=I),he===Ie.length){G+=je+W+oe.substr(He+1);break}}else le&&(le=!1,G+=W);G+=je}return G},prepare:function(re){if(!!re)return{target:re,_targetLowerCodes:q.prepareLowerCodes(re),_nextBeginningIndexes:null,score:null,indexes:null,obj:null}},prepareSlow:function(re){if(!!re)return{target:re,_targetLowerCodes:q.prepareLowerCodes(re),_nextBeginningIndexes:q.prepareNextBeginningIndexes(re),score:null,indexes:null,obj:null}},prepareSearch:function(re){if(!!re)return q.prepareLowerCodes(re)},getPrepared:function(re){if(re.length>999)return q.prepare(re);var I=M.get(re);return I!==void 0||(I=q.prepare(re),M.set(re,I)),I},getPreparedSearch:function(re){if(re.length>999)return q.prepareSearch(re);var I=w.get(re);return I!==void 0||(I=q.prepareSearch(re),w.set(re,I)),I},algorithm:function(re,I,W){for(var G=I._targetLowerCodes,he=re.length,le=G.length,oe=0,ye=0,Ie=0,He=0;;){var je=W===G[ye];if(je){if(A[He++]=ye,++oe,oe===he)break;W=re[Ie===0?oe:Ie===oe?oe+1:Ie===oe-1?oe-1:oe]}if(++ye,ye>=le)for(;;){if(oe<=1)return null;if(Ie===0){--oe;var Re=re[oe];if(W===Re)continue;Ie=oe}else{if(Ie===1)return null;--Ie,oe=Ie,W=re[oe+1];var Re=re[oe];if(W===Re)continue}He=oe,ye=A[He-1]+1;break}}var oe=0,Ye=0,ze=!1,Ke=0,Le=I._nextBeginningIndexes;Le===null&&(Le=I._nextBeginningIndexes=q.prepareNextBeginningIndexes(I.target));var Xe=ye=A[0]===0?0:Le[A[0]-1];if(ye!==le)for(;;)if(ye>=le){if(oe<=0){if(++Ye,Ye>he-2)break;if(re[Ye]===re[Ye+1])continue;ye=Xe;continue}--oe;var st=x[--Ke];ye=Le[st]}else{var je=re[Ye===0?oe:Ye===oe?oe+1:Ye===oe-1?oe-1:oe]===G[ye];if(je){if(x[Ke++]=ye,++oe,oe===he){ze=!0;break}++ye}else ye=Le[ye]}{if(ze)var V=x,ae=Ke;else var V=A,ae=He;for(var _t=0,Ze=-1,at=0;at<he;++at){var ye=V[at];Ze!==ye-1&&(_t-=ye),Ze=ye}ze?Ye!==0&&(_t+=-20):(_t*=1e3,Ie!==0&&(_t+=-20)),_t-=le-he,I.score=_t,I.indexes=new Array(ae);for(var at=ae-1;at>=0;--at)I.indexes[at]=V[at];return I}},algorithmNoTypo:function(re,I,W){for(var G=I._targetLowerCodes,he=re.length,le=G.length,oe=0,ye=0,Ie=0;;){var He=W===G[ye];if(He){if(A[Ie++]=ye,++oe,oe===he)break;W=re[oe]}if(++ye,ye>=le)return null}var oe=0,je=!1,Re=0,Ye=I._nextBeginningIndexes;Ye===null&&(Ye=I._nextBeginningIndexes=q.prepareNextBeginningIndexes(I.target));var ze=ye=A[0]===0?0:Ye[A[0]-1];if(ye!==le)for(;;)if(ye>=le){if(oe<=0)break;--oe;var Ke=x[--Re];ye=Ye[Ke]}else{var He=re[oe]===G[ye];if(He){if(x[Re++]=ye,++oe,oe===he){je=!0;break}++ye}else ye=Ye[ye]}{if(je)var Le=x,Xe=Re;else var Le=A,Xe=Ie;for(var st=0,V=-1,ae=0;ae<he;++ae){var ye=Le[ae];V!==ye-1&&(st-=ye),V=ye}je||(st*=1e3),st-=le-he,I.score=st,I.indexes=new Array(Xe);for(var ae=Xe-1;ae>=0;--ae)I.indexes[ae]=Le[ae];return I}},prepareLowerCodes:function(re){for(var I=re.length,W=[],G=re.toLowerCase(),he=0;he<I;++he)W[he]=G.charCodeAt(he);return W},prepareBeginningIndexes:function(re){for(var I=re.length,W=[],G=0,he=!1,le=!1,oe=0;oe<I;++oe){var ye=re.charCodeAt(oe),Ie=ye>=65&&ye<=90,He=Ie||ye>=97&&ye<=122||ye>=48&&ye<=57,je=Ie&&!he||!le||!He;he=Ie,le=He,je&&(W[G++]=oe)}return W},prepareNextBeginningIndexes:function(re){for(var I=re.length,W=q.prepareBeginningIndexes(re),G=[],he=W[0],le=0,oe=0;oe<I;++oe)he>oe?G[oe]=he:(he=W[++le],G[oe]=he===void 0?I:he);return G},cleanup:D,new:K};return q}c(K,"fuzzysortNew");var Y=typeof window=="undefined",M=new Map,w=new Map,R=[];R.total=0;var A=[],x=[];function D(){M.clear(),w.clear(),A=[],x=[]}c(D,"cleanup");function j(z){for(var q=-9007199254740991,re=z.length-1;re>=0;--re){var I=z[re];if(I!==null){var W=I.score;W>q&&(q=W)}}return q===-9007199254740991?null:q}c(j,"defaultScoreFn");function N(z,q){var re=z[q];if(re!==void 0)return re;var I=q;Array.isArray(q)||(I=q.split("."));for(var W=I.length,G=-1;z&&++G<W;)z=z[I[G]];return z}c(N,"getValue");function X(z){return typeof z=="object"}c(X,"isObj");var ve=c(function(){var z=[],q=0,re={};function I(){for(var W=0,G=z[W],he=1;he<q;){var le=he+1;W=he,le<q&&z[le].score<z[he].score&&(W=le),z[W-1>>1]=z[W],he=1+(W<<1)}for(var oe=W-1>>1;W>0&&G.score<z[oe].score;oe=(W=oe)-1>>1)z[W]=z[oe];z[W]=G}return c(I,"n"),re.add=function(W){var G=q;z[q++]=W;for(var he=G-1>>1;G>0&&W.score<z[he].score;he=(G=he)-1>>1)z[G]=z[he];z[G]=W},re.poll=function(){if(q!==0){var W=z[0];return z[0]=z[--q],I(),W}},re.peek=function(W){if(q!==0)return z[0]},re.replaceTop=function(W){z[0]=W,I()},re},"fastpriorityqueue"),de=ve();return K()},"UMD"))},645:(ee,h)=>{/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */h.read=function(H,E,O,B,K){var Y,M,w=K*8-B-1,R=(1<<w)-1,A=R>>1,x=-7,D=O?K-1:0,j=O?-1:1,N=H[E+D];for(D+=j,Y=N&(1<<-x)-1,N>>=-x,x+=w;x>0;Y=Y*256+H[E+D],D+=j,x-=8);for(M=Y&(1<<-x)-1,Y>>=-x,x+=B;x>0;M=M*256+H[E+D],D+=j,x-=8);if(Y===0)Y=1-A;else{if(Y===R)return M?NaN:(N?-1:1)*(1/0);M=M+Math.pow(2,B),Y=Y-A}return(N?-1:1)*M*Math.pow(2,Y-B)},h.write=function(H,E,O,B,K,Y){var M,w,R,A=Y*8-K-1,x=(1<<A)-1,D=x>>1,j=K===23?Math.pow(2,-24)-Math.pow(2,-77):0,N=B?0:Y-1,X=B?1:-1,ve=E<0||E===0&&1/E<0?1:0;for(E=Math.abs(E),isNaN(E)||E===1/0?(w=isNaN(E)?1:0,M=x):(M=Math.floor(Math.log(E)/Math.LN2),E*(R=Math.pow(2,-M))<1&&(M--,R*=2),M+D>=1?E+=j/R:E+=j*Math.pow(2,1-D),E*R>=2&&(M++,R/=2),M+D>=x?(w=0,M=x):M+D>=1?(w=(E*R-1)*Math.pow(2,K),M=M+D):(w=E*Math.pow(2,D-1)*Math.pow(2,K),M=0));K>=8;H[O+N]=w&255,N+=X,w/=256,K-=8);for(M=M<<K|w,A+=K;A>0;H[O+N]=M&255,N+=X,M/=256,A-=8);H[O+N-X]|=ve*128}},2307:(ee,h,H)=>{ee=H.nmd(ee);var E=200,O="__lodash_hash_undefined__",B=1,K=2,Y=9007199254740991,M="[object Arguments]",w="[object Array]",R="[object AsyncFunction]",A="[object Boolean]",x="[object Date]",D="[object Error]",j="[object Function]",N="[object GeneratorFunction]",X="[object Map]",ve="[object Number]",de="[object Null]",z="[object Object]",q="[object Promise]",re="[object Proxy]",I="[object RegExp]",W="[object Set]",G="[object String]",he="[object Symbol]",le="[object Undefined]",oe="[object WeakMap]",ye="[object ArrayBuffer]",Ie="[object DataView]",He="[object Float32Array]",je="[object Float64Array]",Re="[object Int8Array]",Ye="[object Int16Array]",ze="[object Int32Array]",Ke="[object Uint8Array]",Le="[object Uint8ClampedArray]",Xe="[object Uint16Array]",st="[object Uint32Array]",V=/[\\^$.*+?()[\]{}|]/g,ae=/^\[object .+?Constructor\]$/,_t=/^(?:0|[1-9]\d*)$/,Ze={};Ze[He]=Ze[je]=Ze[Re]=Ze[Ye]=Ze[ze]=Ze[Ke]=Ze[Le]=Ze[Xe]=Ze[st]=!0,Ze[M]=Ze[w]=Ze[ye]=Ze[A]=Ze[Ie]=Ze[x]=Ze[D]=Ze[j]=Ze[X]=Ze[ve]=Ze[z]=Ze[I]=Ze[W]=Ze[G]=Ze[oe]=!1;var at=typeof H.g=="object"&&H.g&&H.g.Object===Object&&H.g,Z=typeof self=="object"&&self&&self.Object===Object&&self,pe=at||Z||Function("return this")(),Me=h&&!h.nodeType&&h,rt=Me&&!0&&ee&&!ee.nodeType&&ee,qe=rt&&rt.exports===Me,ot=qe&&at.process,Rt=function(){try{return ot&&ot.binding&&ot.binding("util")}catch(L){}}(),xt=Rt&&Rt.isTypedArray;function zr(L,te){for(var Ee=-1,Qe=L==null?0:L.length,Ht=0,pt=[];++Ee<Qe;){var Gt=L[Ee];te(Gt,Ee,L)&&(pt[Ht++]=Gt)}return pt}c(zr,"arrayFilter");function _r(L,te){for(var Ee=-1,Qe=te.length,Ht=L.length;++Ee<Qe;)L[Ht+Ee]=te[Ee];return L}c(_r,"arrayPush");function rr(L,te){for(var Ee=-1,Qe=L==null?0:L.length;++Ee<Qe;)if(te(L[Ee],Ee,L))return!0;return!1}c(rr,"arraySome");function et(L,te){for(var Ee=-1,Qe=Array(L);++Ee<L;)Qe[Ee]=te(Ee);return Qe}c(et,"baseTimes");function Ot(L){return function(te){return L(te)}}c(Ot,"baseUnary");function An(L,te){return L.has(te)}c(An,"cacheHas");function Be(L,te){return L==null?void 0:L[te]}c(Be,"getValue");function ke(L){var te=-1,Ee=Array(L.size);return L.forEach(function(Qe,Ht){Ee[++te]=[Ht,Qe]}),Ee}c(ke,"mapToArray");function Te(L,te){return function(Ee){return L(te(Ee))}}c(Te,"overArg");function dt(L){var te=-1,Ee=Array(L.size);return L.forEach(function(Qe){Ee[++te]=Qe}),Ee}c(dt,"setToArray");var Mt=Array.prototype,ft=Function.prototype,Lt=Object.prototype,T=pe["__core-js_shared__"],m=ft.toString,v=Lt.hasOwnProperty,P=function(){var L=/[^.]+$/.exec(T&&T.keys&&T.keys.IE_PROTO||"");return L?"Symbol(src)_1."+L:""}(),J=Lt.toString,ue=RegExp("^"+m.call(v).replace(V,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),be=qe?pe.Buffer:void 0,ct=pe.Symbol,Dt=pe.Uint8Array,It=Lt.propertyIsEnumerable,Nt=Mt.splice,gt=ct?ct.toStringTag:void 0,ri=Object.getOwnPropertySymbols,ni=be?be.isBuffer:void 0,co=Te(Object.keys,Object),Br=si(pe,"DataView"),Fi=si(pe,"Map"),xr=si(pe,"Promise"),wt=si(pe,"Set"),Pi=si(pe,"WeakMap"),cr=si(Object,"create"),ii=Li(Br),gc=Li(Fi),yu=Li(xr),Oo=Li(wt),bu=Li(Pi),mc=ct?ct.prototype:void 0,oi=mc?mc.valueOf:void 0;function Ni(L){var te=-1,Ee=L==null?0:L.length;for(this.clear();++te<Ee;){var Qe=L[te];this.set(Qe[0],Qe[1])}}c(Ni,"Hash");function _u(){this.__data__=cr?cr(null):{},this.size=0}c(_u,"hashClear");function xu(L){var te=this.has(L)&&delete this.__data__[L];return this.size-=te?1:0,te}c(xu,"hashDelete");function lp(L){var te=this.__data__;if(cr){var Ee=te[L];return Ee===O?void 0:Ee}return v.call(te,L)?te[L]:void 0}c(lp,"hashGet");function Su(L){var te=this.__data__;return cr?te[L]!==void 0:v.call(te,L)}c(Su,"hashHas");function Cu(L,te){var Ee=this.__data__;return this.size+=this.has(L)?0:1,Ee[L]=cr&&te===void 0?O:te,this}c(Cu,"hashSet"),Ni.prototype.clear=_u,Ni.prototype.delete=xu,Ni.prototype.get=lp,Ni.prototype.has=Su,Ni.prototype.set=Cu;function gn(L){var te=-1,Ee=L==null?0:L.length;for(this.clear();++te<Ee;){var Qe=L[te];this.set(Qe[0],Qe[1])}}c(gn,"ListCache");function Ir(){this.__data__=[],this.size=0}c(Ir,"listCacheClear");function Xt(L){var te=this.__data__,Ee=jr(te,L);if(Ee<0)return!1;var Qe=te.length-1;return Ee==Qe?te.pop():Nt.call(te,Ee,1),--this.size,!0}c(Xt,"listCacheDelete");function mn(L){var te=this.__data__,Ee=jr(te,L);return Ee<0?void 0:te[Ee][1]}c(mn,"listCacheGet");function Eu(L){return jr(this.__data__,L)>-1}c(Eu,"listCacheHas");function Ru(L,te){var Ee=this.__data__,Qe=jr(Ee,L);return Qe<0?(++this.size,Ee.push([L,te])):Ee[Qe][1]=te,this}c(Ru,"listCacheSet"),gn.prototype.clear=Ir,gn.prototype.delete=Xt,gn.prototype.get=mn,gn.prototype.has=Eu,gn.prototype.set=Ru;function ai(L){var te=-1,Ee=L==null?0:L.length;for(this.clear();++te<Ee;){var Qe=L[te];this.set(Qe[0],Qe[1])}}c(ai,"MapCache");function up(){this.size=0,this.__data__={hash:new Ni,map:new(Fi||gn),string:new Ni}}c(up,"mapCacheClear");function vc(L){var te=Go(this,L).delete(L);return this.size-=te?1:0,te}c(vc,"mapCacheDelete");function wc(L){return Go(this,L).get(L)}c(wc,"mapCacheGet");function yc(L){return Go(this,L).has(L)}c(yc,"mapCacheHas");function Ho(L,te){var Ee=Go(this,L),Qe=Ee.size;return Ee.set(L,te),this.size+=Ee.size==Qe?0:1,this}c(Ho,"mapCacheSet"),ai.prototype.clear=up,ai.prototype.delete=vc,ai.prototype.get=wc,ai.prototype.has=yc,ai.prototype.set=Ho;function Va(L){var te=-1,Ee=L==null?0:L.length;for(this.__data__=new ai;++te<Ee;)this.add(L[te])}c(Va,"SetCache");function dp(L){return this.__data__.set(L,O),this}c(dp,"setCacheAdd");function Wo(L){return this.__data__.has(L)}c(Wo,"setCacheHas"),Va.prototype.add=Va.prototype.push=dp,Va.prototype.has=Wo;function In(L){var te=this.__data__=new gn(L);this.size=te.size}c(In,"Stack");function hp(){this.__data__=new gn,this.size=0}c(hp,"stackClear");function bc(L){var te=this.__data__,Ee=te.delete(L);return this.size=te.size,Ee}c(bc,"stackDelete");function fp(L){return this.__data__.get(L)}c(fp,"stackGet");function _c(L){return this.__data__.has(L)}c(_c,"stackHas");function pp(L,te){var Ee=this.__data__;if(Ee instanceof gn){var Qe=Ee.__data__;if(!Fi||Qe.length<E-1)return Qe.push([L,te]),this.size=++Ee.size,this;Ee=this.__data__=new ai(Qe)}return Ee.set(L,te),this.size=Ee.size,this}c(pp,"stackSet"),In.prototype.clear=hp,In.prototype.delete=bc,In.prototype.get=fp,In.prototype.has=_c,In.prototype.set=pp;function qo(L,te){var Ee=ci(L),Qe=!Ee&&Cc(L),Ht=!Ee&&!Qe&&Ko(L),pt=!Ee&&!Qe&&!Ht&&Qa(L),Gt=Ee||Qe||Ht||pt,nr=Gt?et(L.length,String):[],lr=nr.length;for(var Kt in L)(te||v.call(L,Kt))&&!(Gt&&(Kt=="length"||Ht&&(Kt=="offset"||Kt=="parent")||pt&&(Kt=="buffer"||Kt=="byteLength"||Kt=="byteOffset")||ku(Kt,lr)))&&nr.push(Kt);return nr}c(qo,"arrayLikeKeys");function jr(L,te){for(var Ee=L.length;Ee--;)if(Ka(L[Ee][0],te))return Ee;return-1}c(jr,"assocIndexOf");function Au(L,te,Ee){var Qe=te(L);return ci(L)?Qe:_r(Qe,Ee(L))}c(Au,"baseGetAllKeys");function lo(L){return L==null?L===void 0?le:de:gt&&gt in Object(L)?vp(L):Pu(L)}c(lo,"baseGetTag");function xc(L){return Bi(L)&&lo(L)==M}c(xc,"baseIsArguments");function zo(L,te,Ee,Qe,Ht){return L===te?!0:L==null||te==null||!Bi(L)&&!Bi(te)?L!==L&&te!==te:Iu(L,te,Ee,Qe,zo,Ht)}c(zo,"baseIsEqual");function Iu(L,te,Ee,Qe,Ht,pt){var Gt=ci(L),nr=ci(te),lr=Gt?w:Tn(L),Kt=nr?w:Tn(te);lr=lr==M?z:lr,Kt=Kt==M?z:Kt;var Ce=lr==z,Xr=Kt==z,vr=lr==Kt;if(vr&&Ko(L)){if(!Ko(te))return!1;Gt=!0,Ce=!1}if(vr&&!Ce)return pt||(pt=new In),Gt||Qa(L)?jo(L,te,Ee,Qe,Ht,pt):Vo(L,te,lr,Ee,Qe,Ht,pt);if(!(Ee&B)){var Wt=Ce&&v.call(L,"__wrapped__"),wr=Xr&&v.call(te,"__wrapped__");if(Wt||wr){var kn=Wt?L.value():L,Yr=wr?te.value():te;return pt||(pt=new In),Ht(kn,Yr,Ee,Qe,pt)}}return vr?(pt||(pt=new In),mp(L,te,Ee,Qe,Ht,pt)):!1}c(Iu,"baseIsEqualDeep");function Tu(L){if(!Zo(L)||Fu(L))return!1;var te=Rc(L)?ue:ae;return te.test(Li(L))}c(Tu,"baseIsNative");function Mi(L){return Bi(L)&&Za(L.length)&&!!Ze[lo(L)]}c(Mi,"baseIsTypedArray");function gp(L){if(!Ga(L))return co(L);var te=[];for(var Ee in Object(L))v.call(L,Ee)&&Ee!="constructor"&&te.push(Ee);return te}c(gp,"baseKeys");function jo(L,te,Ee,Qe,Ht,pt){var Gt=Ee&B,nr=L.length,lr=te.length;if(nr!=lr&&!(Gt&&lr>nr))return!1;var Kt=pt.get(L);if(Kt&&pt.get(te))return Kt==te;var Ce=-1,Xr=!0,vr=Ee&K?new Va:void 0;for(pt.set(L,te),pt.set(te,L);++Ce<nr;){var Wt=L[Ce],wr=te[Ce];if(Qe)var kn=Gt?Qe(wr,Wt,Ce,te,L,pt):Qe(Wt,wr,Ce,L,te,pt);if(kn!==void 0){if(kn)continue;Xr=!1;break}if(vr){if(!rr(te,function(Yr,ui){if(!An(vr,ui)&&(Wt===Yr||Ht(Wt,Yr,Ee,Qe,pt)))return vr.push(ui)})){Xr=!1;break}}else if(!(Wt===wr||Ht(Wt,wr,Ee,Qe,pt))){Xr=!1;break}}return pt.delete(L),pt.delete(te),Xr}c(jo,"equalArrays");function Vo(L,te,Ee,Qe,Ht,pt,Gt){switch(Ee){case Ie:if(L.byteLength!=te.byteLength||L.byteOffset!=te.byteOffset)return!1;L=L.buffer,te=te.buffer;case ye:return!(L.byteLength!=te.byteLength||!pt(new Dt(L),new Dt(te)));case A:case x:case ve:return Ka(+L,+te);case D:return L.name==te.name&&L.message==te.message;case I:case G:return L==te+"";case X:var nr=ke;case W:var lr=Qe&B;if(nr||(nr=dt),L.size!=te.size&&!lr)return!1;var Kt=Gt.get(L);if(Kt)return Kt==te;Qe|=K,Gt.set(L,te);var Ce=jo(nr(L),nr(te),Qe,Ht,pt,Gt);return Gt.delete(L),Ce;case he:if(oi)return oi.call(L)==oi.call(te)}return!1}c(Vo,"equalByTag");function mp(L,te,Ee,Qe,Ht,pt){var Gt=Ee&B,nr=$i(L),lr=nr.length,Kt=$i(te),Ce=Kt.length;if(lr!=Ce&&!Gt)return!1;for(var Xr=lr;Xr--;){var vr=nr[Xr];if(!(Gt?vr in te:v.call(te,vr)))return!1}var Wt=pt.get(L);if(Wt&&pt.get(te))return Wt==te;var wr=!0;pt.set(L,te),pt.set(te,L);for(var kn=Gt;++Xr<lr;){vr=nr[Xr];var Yr=L[vr],ui=te[vr];if(Qe)var Xa=Gt?Qe(ui,Yr,vr,te,L,pt):Qe(Yr,ui,vr,L,te,pt);if(!(Xa===void 0?Yr===ui||Ht(Yr,ui,Ee,Qe,pt):Xa)){wr=!1;break}kn||(kn=vr=="constructor")}if(wr&&!kn){var Ya=L.constructor,Qo=te.constructor;Ya!=Qo&&"constructor"in L&&"constructor"in te&&!(typeof Ya=="function"&&Ya instanceof Ya&&typeof Qo=="function"&&Qo instanceof Qo)&&(wr=!1)}return pt.delete(L),pt.delete(te),wr}c(mp,"equalObjects");function $i(L){return Au(L,li,Sc)}c($i,"getAllKeys");function Go(L,te){var Ee=L.__data__;return Du(te)?Ee[typeof te=="string"?"string":"hash"]:Ee.map}c(Go,"getMapData");function si(L,te){var Ee=Be(L,te);return Tu(Ee)?Ee:void 0}c(si,"getNative");function vp(L){var te=v.call(L,gt),Ee=L[gt];try{L[gt]=void 0;var Qe=!0}catch(pt){}var Ht=J.call(L);return Qe&&(te?L[gt]=Ee:delete L[gt]),Ht}c(vp,"getRawTag");var Sc=ri?function(L){return L==null?[]:(L=Object(L),zr(ri(L),function(te){return It.call(L,te)}))}:Mu,Tn=lo;(Br&&Tn(new Br(new ArrayBuffer(1)))!=Ie||Fi&&Tn(new Fi)!=X||xr&&Tn(xr.resolve())!=q||wt&&Tn(new wt)!=W||Pi&&Tn(new Pi)!=oe)&&(Tn=c(function(L){var te=lo(L),Ee=te==z?L.constructor:void 0,Qe=Ee?Li(Ee):"";if(Qe)switch(Qe){case ii:return Ie;case gc:return X;case yu:return q;case Oo:return W;case bu:return oe}return te},"getTag"));function ku(L,te){return te=te==null?Y:te,!!te&&(typeof L=="number"||_t.test(L))&&L>-1&&L%1==0&&L<te}c(ku,"isIndex");function Du(L){var te=typeof L;return te=="string"||te=="number"||te=="symbol"||te=="boolean"?L!=="__proto__":L===null}c(Du,"isKeyable");function Fu(L){return!!P&&P in L}c(Fu,"isMasked");function Ga(L){var te=L&&L.constructor,Ee=typeof te=="function"&&te.prototype||Lt;return L===Ee}c(Ga,"isPrototype");function Pu(L){return J.call(L)}c(Pu,"objectToString");function Li(L){if(L!=null){try{return m.call(L)}catch(te){}try{return L+""}catch(te){}}return""}c(Li,"toSource");function Ka(L,te){return L===te||L!==L&&te!==te}c(Ka,"eq");var Cc=xc(function(){return arguments}())?xc:function(L){return Bi(L)&&v.call(L,"callee")&&!It.call(L,"callee")},ci=Array.isArray;function Ec(L){return L!=null&&Za(L.length)&&!Rc(L)}c(Ec,"isArrayLike");var Ko=ni||Ac;function Nu(L,te){return zo(L,te)}c(Nu,"isEqual");function Rc(L){if(!Zo(L))return!1;var te=lo(L);return te==j||te==N||te==R||te==re}c(Rc,"isFunction");function Za(L){return typeof L=="number"&&L>-1&&L%1==0&&L<=Y}c(Za,"isLength");function Zo(L){var te=typeof L;return L!=null&&(te=="object"||te=="function")}c(Zo,"isObject");function Bi(L){return L!=null&&typeof L=="object"}c(Bi,"isObjectLike");var Qa=xt?Ot(xt):Mi;function li(L){return Ec(L)?qo(L):gp(L)}c(li,"keys");function Mu(){return[]}c(Mu,"stubArray");function Ac(){return!1}c(Ac,"stubFalse"),ee.exports=Nu},3300:(ee,h)=>{"use strict";var H=c(function(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof E!="undefined")return E;throw new Error("unable to locate global object")},"getGlobal"),E=H();ee.exports=h=E.fetch,E.fetch&&(h.default=E.fetch.bind(E)),h.Headers=E.Headers,h.Request=E.Request,h.Response=E.Response},447:(ee,h,H)=>{var E=H(2479);ee.exports=E(O),ee.exports.strict=E(B),O.proto=O(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return O(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return B(this)},configurable:!0})});function O(K){var Y=c(function(){return Y.called?Y.value:(Y.called=!0,Y.value=K.apply(this,arguments))},"f");return Y.called=!1,Y}c(O,"once");function B(K){var Y=c(function(){if(Y.called)throw new Error(Y.onceError);return Y.called=!0,Y.value=K.apply(this,arguments)},"f"),M=K.name||"Function wrapped with `once`";return Y.onceError=M+" shouldn't be called more than once",Y.called=!1,Y}c(B,"onceStrict")},6470:(ee,h,H)=>{"use strict";var E=H(4155);function O(M){if(typeof M!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(M))}c(O,"assertPath");function B(M,w){for(var R="",A=0,x=-1,D=0,j,N=0;N<=M.length;++N){if(N<M.length)j=M.charCodeAt(N);else{if(j===47)break;j=47}if(j===47){if(!(x===N-1||D===1))if(x!==N-1&&D===2){if(R.length<2||A!==2||R.charCodeAt(R.length-1)!==46||R.charCodeAt(R.length-2)!==46){if(R.length>2){var X=R.lastIndexOf("/");if(X!==R.length-1){X===-1?(R="",A=0):(R=R.slice(0,X),A=R.length-1-R.lastIndexOf("/")),x=N,D=0;continue}}else if(R.length===2||R.length===1){R="",A=0,x=N,D=0;continue}}w&&(R.length>0?R+="/..":R="..",A=2)}else R.length>0?R+="/"+M.slice(x+1,N):R=M.slice(x+1,N),A=N-x-1;x=N,D=0}else j===46&&D!==-1?++D:D=-1}return R}c(B,"normalizeStringPosix");function K(M,w){var R=w.dir||w.root,A=w.base||(w.name||"")+(w.ext||"");return R?R===w.root?R+A:R+M+A:A}c(K,"_format");var Y={resolve:c(function(){for(var w="",R=!1,A,x=arguments.length-1;x>=-1&&!R;x--){var D;x>=0?D=arguments[x]:(A===void 0&&(A=E.cwd()),D=A),O(D),D.length!==0&&(w=D+"/"+w,R=D.charCodeAt(0)===47)}return w=B(w,!R),R?w.length>0?"/"+w:"/":w.length>0?w:"."},"resolve"),normalize:c(function(w){if(O(w),w.length===0)return".";var R=w.charCodeAt(0)===47,A=w.charCodeAt(w.length-1)===47;return w=B(w,!R),w.length===0&&!R&&(w="."),w.length>0&&A&&(w+="/"),R?"/"+w:w},"normalize"),isAbsolute:c(function(w){return O(w),w.length>0&&w.charCodeAt(0)===47},"isAbsolute"),join:c(function(){if(arguments.length===0)return".";for(var w,R=0;R<arguments.length;++R){var A=arguments[R];O(A),A.length>0&&(w===void 0?w=A:w+="/"+A)}return w===void 0?".":Y.normalize(w)},"join"),relative:c(function(w,R){if(O(w),O(R),w===R||(w=Y.resolve(w),R=Y.resolve(R),w===R))return"";for(var A=1;A<w.length&&w.charCodeAt(A)===47;++A);for(var x=w.length,D=x-A,j=1;j<R.length&&R.charCodeAt(j)===47;++j);for(var N=R.length,X=N-j,ve=D<X?D:X,de=-1,z=0;z<=ve;++z){if(z===ve){if(X>ve){if(R.charCodeAt(j+z)===47)return R.slice(j+z+1);if(z===0)return R.slice(j+z)}else D>ve&&(w.charCodeAt(A+z)===47?de=z:z===0&&(de=0));break}var q=w.charCodeAt(A+z),re=R.charCodeAt(j+z);if(q!==re)break;q===47&&(de=z)}var I="";for(z=A+de+1;z<=x;++z)(z===x||w.charCodeAt(z)===47)&&(I.length===0?I+="..":I+="/..");return I.length>0?I+R.slice(j+de):(j+=de,R.charCodeAt(j)===47&&++j,R.slice(j))},"relative"),_makeLong:c(function(w){return w},"_makeLong"),dirname:c(function(w){if(O(w),w.length===0)return".";for(var R=w.charCodeAt(0),A=R===47,x=-1,D=!0,j=w.length-1;j>=1;--j)if(R=w.charCodeAt(j),R===47){if(!D){x=j;break}}else D=!1;return x===-1?A?"/":".":A&&x===1?"//":w.slice(0,x)},"dirname"),basename:c(function(w,R){if(R!==void 0&&typeof R!="string")throw new TypeError('"ext" argument must be a string');O(w);var A=0,x=-1,D=!0,j;if(R!==void 0&&R.length>0&&R.length<=w.length){if(R.length===w.length&&R===w)return"";var N=R.length-1,X=-1;for(j=w.length-1;j>=0;--j){var ve=w.charCodeAt(j);if(ve===47){if(!D){A=j+1;break}}else X===-1&&(D=!1,X=j+1),N>=0&&(ve===R.charCodeAt(N)?--N==-1&&(x=j):(N=-1,x=X))}return A===x?x=X:x===-1&&(x=w.length),w.slice(A,x)}else{for(j=w.length-1;j>=0;--j)if(w.charCodeAt(j)===47){if(!D){A=j+1;break}}else x===-1&&(D=!1,x=j+1);return x===-1?"":w.slice(A,x)}},"basename"),extname:c(function(w){O(w);for(var R=-1,A=0,x=-1,D=!0,j=0,N=w.length-1;N>=0;--N){var X=w.charCodeAt(N);if(X===47){if(!D){A=N+1;break}continue}x===-1&&(D=!1,x=N+1),X===46?R===-1?R=N:j!==1&&(j=1):R!==-1&&(j=-1)}return R===-1||x===-1||j===0||j===1&&R===x-1&&R===A+1?"":w.slice(R,x)},"extname"),format:c(function(w){if(w===null||typeof w!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof w);return K("/",w)},"format"),parse:c(function(w){O(w);var R={root:"",dir:"",base:"",ext:"",name:""};if(w.length===0)return R;var A=w.charCodeAt(0),x=A===47,D;x?(R.root="/",D=1):D=0;for(var j=-1,N=0,X=-1,ve=!0,de=w.length-1,z=0;de>=D;--de){if(A=w.charCodeAt(de),A===47){if(!ve){N=de+1;break}continue}X===-1&&(ve=!1,X=de+1),A===46?j===-1?j=de:z!==1&&(z=1):j!==-1&&(z=-1)}return j===-1||X===-1||z===0||z===1&&j===X-1&&j===N+1?X!==-1&&(N===0&&x?R.base=R.name=w.slice(1,X):R.base=R.name=w.slice(N,X)):(N===0&&x?(R.name=w.slice(1,j),R.base=w.slice(1,X)):(R.name=w.slice(N,j),R.base=w.slice(N,X)),R.ext=w.slice(j,X)),N>0?R.dir=w.slice(0,N-1):x&&(R.dir="/"),R},"parse"),sep:"/",delimiter:":",win32:null,posix:null};Y.posix=Y,ee.exports=Y},7279:(ee,h)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.EndOfStreamError=h.defaultMessages=void 0,h.defaultMessages="End-Of-Stream";class H extends Error{constructor(){super(h.defaultMessages)}}c(H,"EndOfStreamError"),h.EndOfStreamError=H},5167:(ee,h,H)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.StreamReader=h.EndOfStreamError=void 0;const E=H(7279);var O=H(7279);Object.defineProperty(h,"EndOfStreamError",{enumerable:!0,get:function(){return O.EndOfStreamError}});class B{constructor(){this.resolve=()=>null,this.reject=()=>null,this.promise=new Promise((w,R)=>{this.reject=R,this.resolve=w})}}c(B,"Deferred");const K=1*1024*1024;class Y{constructor(w){if(this.s=w,this.request=null,this.endOfStream=!1,this.peekQueue=[],!w.read||!w.once)throw new Error("Expected an instance of stream.Readable");this.s.once("end",()=>this.reject(new E.EndOfStreamError)),this.s.once("error",R=>this.reject(R)),this.s.once("close",()=>this.reject(new Error("Stream closed")))}async peek(w,R,A){const x=await this.read(w,R,A);return this.peekQueue.push(w.subarray(R,R+x)),x}async read(w,R,A){if(A===0)return 0;if(this.peekQueue.length===0&&this.endOfStream)throw new E.EndOfStreamError;let x=A,D=0;for(;this.peekQueue.length>0&&x>0;){const j=this.peekQueue.pop();if(!j)throw new Error("peekData should be defined");const N=Math.min(j.length,x);w.set(j.subarray(0,N),R+D),D+=N,x-=N,N<j.length&&this.peekQueue.push(j.subarray(N))}for(;x>0&&!this.endOfStream;){const j=Math.min(x,K),N=await this._read(w,R+D,j);if(D+=N,N<j)break;x-=N}return D}async _read(w,R,A){if(this.request)throw new Error("Concurrent read operation?");const x=this.s.read(A);return x?(w.set(x,R),x.length):(this.request={buffer:w,offset:R,length:A,deferred:new B},this.s.once("readable",()=>{this.tryRead()}),this.request.deferred.promise)}tryRead(){if(!this.request)throw new Error("this.request should be defined");const w=this.s.read(this.request.length);w?(this.request.buffer.set(w,this.request.offset),this.request.deferred.resolve(w.length),this.request=null):this.s.once("readable",()=>{this.tryRead()})}reject(w){this.endOfStream=!0,this.request&&(this.request.deferred.reject(w),this.request=null)}}c(Y,"StreamReader"),h.StreamReader=Y},4155:ee=>{var h=ee.exports={},H,E;function O(){throw new Error("setTimeout has not been defined")}c(O,"defaultSetTimout");function B(){throw new Error("clearTimeout has not been defined")}c(B,"defaultClearTimeout"),function(){try{typeof setTimeout=="function"?H=setTimeout:H=O}catch(X){H=O}try{typeof clearTimeout=="function"?E=clearTimeout:E=B}catch(X){E=B}}();function K(X){if(H===setTimeout)return setTimeout(X,0);if((H===O||!H)&&setTimeout)return H=setTimeout,setTimeout(X,0);try{return H(X,0)}catch(ve){try{return H.call(null,X,0)}catch(de){return H.call(this,X,0)}}}c(K,"runTimeout");function Y(X){if(E===clearTimeout)return clearTimeout(X);if((E===B||!E)&&clearTimeout)return E=clearTimeout,clearTimeout(X);try{return E(X)}catch(ve){try{return E.call(null,X)}catch(de){return E.call(this,X)}}}c(Y,"runClearTimeout");var M=[],w=!1,R,A=-1;function x(){!w||!R||(w=!1,R.length?M=R.concat(M):A=-1,M.length&&D())}c(x,"cleanUpNextTick");function D(){if(!w){var X=K(x);w=!0;for(var ve=M.length;ve;){for(R=M,M=[];++A<ve;)R&&R[A].run();A=-1,ve=M.length}R=null,w=!1,Y(X)}}c(D,"drainQueue"),h.nextTick=function(X){var ve=new Array(arguments.length-1);if(arguments.length>1)for(var de=1;de<arguments.length;de++)ve[de-1]=arguments[de];M.push(new j(X,ve)),M.length===1&&!w&&K(D)};function j(X,ve){this.fun=X,this.array=ve}c(j,"Item"),j.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={};function N(){}c(N,"noop"),h.on=N,h.addListener=N,h.once=N,h.off=N,h.removeListener=N,h.removeAllListeners=N,h.emit=N,h.prependListener=N,h.prependOnceListener=N,h.listeners=function(X){return[]},h.binding=function(X){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(X){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},842:(ee,h,H)=>{"use strict";var E=H(8764).Buffer;Object.defineProperty(h,"__esModule",{value:!0}),h.AbstractTokenizer=void 0;const O=H(5167);class B{constructor(Y){this.position=0,this.numBuffer=new Uint8Array(8),this.fileInfo=Y||{}}async readToken(Y,M=this.position){const w=E.alloc(Y.len);if(await this.readBuffer(w,{position:M})<Y.len)throw new O.EndOfStreamError;return Y.get(w,0)}async peekToken(Y,M=this.position){const w=E.alloc(Y.len);if(await this.peekBuffer(w,{position:M})<Y.len)throw new O.EndOfStreamError;return Y.get(w,0)}async readNumber(Y){if(await this.readBuffer(this.numBuffer,{length:Y.len})<Y.len)throw new O.EndOfStreamError;return Y.get(this.numBuffer,0)}async peekNumber(Y){if(await this.peekBuffer(this.numBuffer,{length:Y.len})<Y.len)throw new O.EndOfStreamError;return Y.get(this.numBuffer,0)}async ignore(Y){if(this.fileInfo.size!==void 0){const M=this.fileInfo.size-this.position;if(Y>M)return this.position+=M,M}return this.position+=Y,Y}async close(){}normalizeOptions(Y,M){if(M&&M.position!==void 0&&M.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return M?{mayBeLess:M.mayBeLess===!0,offset:M.offset?M.offset:0,length:M.length?M.length:Y.length-(M.offset?M.offset:0),position:M.position?M.position:this.position}:{mayBeLess:!1,offset:0,length:Y.length,position:this.position}}}c(B,"AbstractTokenizer"),h.AbstractTokenizer=B},778:(ee,h,H)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.BufferTokenizer=void 0;const E=H(5167),O=H(842);class B extends O.AbstractTokenizer{constructor(Y,M){super(M);this.uint8Array=Y,this.fileInfo.size=this.fileInfo.size?this.fileInfo.size:Y.length}async readBuffer(Y,M){if(M&&M.position){if(M.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");this.position=M.position}const w=await this.peekBuffer(Y,M);return this.position+=w,w}async peekBuffer(Y,M){const w=this.normalizeOptions(Y,M),R=Math.min(this.uint8Array.length-w.position,w.length);if(!w.mayBeLess&&R<w.length)throw new E.EndOfStreamError;return Y.set(this.uint8Array.subarray(w.position,w.position+R),w.offset),R}async close(){}}c(B,"BufferTokenizer"),h.BufferTokenizer=B},7859:(ee,h,H)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.fromFile=h.FileTokenizer=void 0;const E=H(842),O=H(5167),B=H(7209);class K extends E.AbstractTokenizer{constructor(w,R){super(R);this.fd=w}async readBuffer(w,R){const A=this.normalizeOptions(w,R);this.position=A.position;const x=await B.read(this.fd,w,A.offset,A.length,A.position);if(this.position+=x.bytesRead,x.bytesRead<A.length&&(!R||!R.mayBeLess))throw new O.EndOfStreamError;return x.bytesRead}async peekBuffer(w,R){const A=this.normalizeOptions(w,R),x=await B.read(this.fd,w,A.offset,A.length,A.position);if(!A.mayBeLess&&x.bytesRead<A.length)throw new O.EndOfStreamError;return x.bytesRead}async close(){return B.close(this.fd)}}c(K,"FileTokenizer"),h.FileTokenizer=K;async function Y(M){const w=await B.stat(M);if(!w.isFile)throw new Error(`File not a file: ${M}`);const R=await B.open(M,"r");return new K(R,{path:M,size:w.size})}c(Y,"fromFile"),h.fromFile=Y},7209:(ee,h,H)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.readFile=h.writeFileSync=h.writeFile=h.read=h.open=h.close=h.stat=h.createReadStream=h.pathExists=void 0;const E=H(4059);h.pathExists=E.existsSync,h.createReadStream=E.createReadStream;async function O(A){return new Promise((x,D)=>{E.stat(A,(j,N)=>{j?D(j):x(N)})})}c(O,"stat"),h.stat=O;async function B(A){return new Promise((x,D)=>{E.close(A,j=>{j?D(j):x()})})}c(B,"close"),h.close=B;async function K(A,x){return new Promise((D,j)=>{E.open(A,x,(N,X)=>{N?j(N):D(X)})})}c(K,"open"),h.open=K;async function Y(A,x,D,j,N){return new Promise((X,ve)=>{E.read(A,x,D,j,N,(de,z,q)=>{de?ve(de):X({bytesRead:z,buffer:q})})})}c(Y,"read"),h.read=Y;async function M(A,x){return new Promise((D,j)=>{E.writeFile(A,x,N=>{N?j(N):D()})})}c(M,"writeFile"),h.writeFile=M;function w(A,x){E.writeFileSync(A,x)}c(w,"writeFileSync"),h.writeFileSync=w;async function R(A){return new Promise((x,D)=>{E.readFile(A,(j,N)=>{j?D(j):x(N)})})}c(R,"readFile"),h.readFile=R},599:(ee,h,H)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.ReadStreamTokenizer=void 0;const E=H(842),O=H(5167),B=256e3;class K extends E.AbstractTokenizer{constructor(M,w){super(w);this.streamReader=new O.StreamReader(M)}async getFileInfo(){return this.fileInfo}async readBuffer(M,w){const R=this.normalizeOptions(M,w),A=R.position-this.position;if(A>0)return await this.ignore(A),this.readBuffer(M,w);if(A<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(R.length===0)return 0;const x=await this.streamReader.read(M,R.offset,R.length);if(this.position+=x,(!w||!w.mayBeLess)&&x<R.length)throw new O.EndOfStreamError;return x}async peekBuffer(M,w){const R=this.normalizeOptions(M,w);let A=0;if(R.position){const x=R.position-this.position;if(x>0){const D=new Uint8Array(R.length+x);return A=await this.peekBuffer(D,{mayBeLess:R.mayBeLess}),M.set(D.subarray(x),R.offset),A-x}else if(x<0)throw new Error("Cannot peek from a negative offset in a stream")}if(R.length>0){try{A=await this.streamReader.peek(M,R.offset,R.length)}catch(x){if(w&&w.mayBeLess&&x instanceof O.EndOfStreamError)return 0;throw x}if(!R.mayBeLess&&A<R.length)throw new O.EndOfStreamError}return A}async ignore(M){const w=Math.min(B,M),R=new Uint8Array(w);let A=0;for(;A<M;){const x=M-A,D=await this.readBuffer(R,{length:Math.min(w,x)});if(D<0)return D;A+=D}return A}}c(K,"ReadStreamTokenizer"),h.ReadStreamTokenizer=K},5849:(ee,h,H)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.fromBuffer=h.fromStream=h.EndOfStreamError=void 0;const E=H(599),O=H(778);var B=H(5167);Object.defineProperty(h,"EndOfStreamError",{enumerable:!0,get:function(){return B.EndOfStreamError}});function K(M,w){return w=w||{},new E.ReadStreamTokenizer(M,w)}c(K,"fromStream"),h.fromStream=K;function Y(M,w){return new O.BufferTokenizer(M,w)}c(Y,"fromBuffer"),h.fromBuffer=Y},6597:(ee,h,H)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.fromStream=h.fromBuffer=h.EndOfStreamError=h.fromFile=void 0;const E=H(7209),O=H(5849);var B=H(7859);Object.defineProperty(h,"fromFile",{enumerable:!0,get:function(){return B.fromFile}});var K=H(5849);Object.defineProperty(h,"EndOfStreamError",{enumerable:!0,get:function(){return K.EndOfStreamError}}),Object.defineProperty(h,"fromBuffer",{enumerable:!0,get:function(){return K.fromBuffer}});async function Y(M,w){if(w=w||{},M.path){const R=await E.stat(M.path);w.path=M.path,w.size=R.size}return O.fromStream(M,w)}c(Y,"fromStream"),h.fromStream=Y},3416:(ee,h,H)=>{"use strict";var E=H(8764).Buffer;Object.defineProperty(h,"__esModule",{value:!0}),h.AnsiStringType=h.StringType=h.BufferType=h.Uint8ArrayType=h.IgnoreType=h.Float80_LE=h.Float80_BE=h.Float64_LE=h.Float64_BE=h.Float32_LE=h.Float32_BE=h.Float16_LE=h.Float16_BE=h.INT64_BE=h.UINT64_BE=h.INT64_LE=h.UINT64_LE=h.INT32_LE=h.INT32_BE=h.INT24_BE=h.INT24_LE=h.INT16_LE=h.INT16_BE=h.INT8=h.UINT32_BE=h.UINT32_LE=h.UINT24_BE=h.UINT24_LE=h.UINT16_BE=h.UINT16_LE=h.UINT8=void 0;const O=H(645);function B(A){return new DataView(A.buffer,A.byteOffset)}c(B,"dv"),h.UINT8={len:1,get(A,x){return B(A).getUint8(x)},put(A,x,D){return B(A).setUint8(x,D),x+1}},h.UINT16_LE={len:2,get(A,x){return B(A).getUint16(x,!0)},put(A,x,D){return B(A).setUint16(x,D,!0),x+2}},h.UINT16_BE={len:2,get(A,x){return B(A).getUint16(x)},put(A,x,D){return B(A).setUint16(x,D),x+2}},h.UINT24_LE={len:3,get(A,x){const D=B(A);return D.getUint8(x)+(D.getUint16(x+1,!0)<<8)},put(A,x,D){const j=B(A);return j.setUint8(x,D&255),j.setUint16(x+1,D>>8,!0),x+3}},h.UINT24_BE={len:3,get(A,x){const D=B(A);return(D.getUint16(x)<<8)+D.getUint8(x+2)},put(A,x,D){const j=B(A);return j.setUint16(x,D>>8),j.setUint8(x+2,D&255),x+3}},h.UINT32_LE={len:4,get(A,x){return B(A).getUint32(x,!0)},put(A,x,D){return B(A).setUint32(x,D,!0),x+4}},h.UINT32_BE={len:4,get(A,x){return B(A).getUint32(x)},put(A,x,D){return B(A).setUint32(x,D),x+4}},h.INT8={len:1,get(A,x){return B(A).getInt8(x)},put(A,x,D){return B(A).setInt8(x,D),x+2}},h.INT16_BE={len:2,get(A,x){return B(A).getInt16(x)},put(A,x,D){return B(A).setInt16(x,D),x+2}},h.INT16_LE={len:2,get(A,x){return B(A).getInt16(x,!0)},put(A,x,D){return B(A).setInt16(x,D,!0),x+2}},h.INT24_LE={len:3,get(A,x){const D=h.UINT24_LE.get(A,x);return D>8388607?D-16777216:D},put(A,x,D){const j=B(A);return j.setUint8(x,D&255),j.setUint16(x+1,D>>8,!0),x+3}},h.INT24_BE={len:3,get(A,x){const D=h.UINT24_BE.get(A,x);return D>8388607?D-16777216:D},put(A,x,D){const j=B(A);return j.setUint16(x,D>>8),j.setUint8(x+2,D&255),x+3}},h.INT32_BE={len:4,get(A,x){return B(A).getInt32(x)},put(A,x,D){return B(A).setInt32(x,D),x+4}},h.INT32_LE={len:4,get(A,x){return B(A).getInt32(x,!0)},put(A,x,D){return B(A).setInt32(x,D,!0),x+4}},h.UINT64_LE={len:8,get(A,x){return B(A).getBigUint64(x,!0)},put(A,x,D){return B(A).setBigUint64(x,D,!0),x+8}},h.INT64_LE={len:8,get(A,x){return B(A).getBigInt64(x,!0)},put(A,x,D){return B(A).setBigInt64(x,D,!0),x+8}},h.UINT64_BE={len:8,get(A,x){return B(A).getBigUint64(x)},put(A,x,D){return B(A).setBigUint64(x,D),x+8}},h.INT64_BE={len:8,get(A,x){return B(A).getBigInt64(x)},put(A,x,D){return B(A).setBigInt64(x,D),x+8}},h.Float16_BE={len:2,get(A,x){return O.read(A,x,!1,10,this.len)},put(A,x,D){return O.write(A,D,x,!1,10,this.len),x+this.len}},h.Float16_LE={len:2,get(A,x){return O.read(A,x,!0,10,this.len)},put(A,x,D){return O.write(A,D,x,!0,10,this.len),x+this.len}},h.Float32_BE={len:4,get(A,x){return B(A).getFloat32(x)},put(A,x,D){return B(A).setFloat32(x,D),x+4}},h.Float32_LE={len:4,get(A,x){return B(A).getFloat32(x,!0)},put(A,x,D){return B(A).setFloat32(x,D,!0),x+4}},h.Float64_BE={len:8,get(A,x){return B(A).getFloat64(x)},put(A,x,D){return B(A).setFloat64(x,D),x+8}},h.Float64_LE={len:8,get(A,x){return B(A).getFloat64(x,!0)},put(A,x,D){return B(A).setFloat64(x,D,!0),x+8}},h.Float80_BE={len:10,get(A,x){return O.read(A,x,!1,63,this.len)},put(A,x,D){return O.write(A,D,x,!1,63,this.len),x+this.len}},h.Float80_LE={len:10,get(A,x){return O.read(A,x,!0,63,this.len)},put(A,x,D){return O.write(A,D,x,!0,63,this.len),x+this.len}};class K{constructor(x){this.len=x}get(x,D){}}c(K,"IgnoreType"),h.IgnoreType=K;class Y{constructor(x){this.len=x}get(x,D){return x.subarray(D,D+this.len)}}c(Y,"Uint8ArrayType"),h.Uint8ArrayType=Y;class M{constructor(x){this.len=x}get(x,D){return x.slice(D,D+this.len)}}c(M,"BufferType"),h.BufferType=M;class w{constructor(x,D){this.len=x,this.encoding=D}get(x,D){return E.from(x).toString(this.encoding,D,D+this.len)}}c(w,"StringType"),h.StringType=w;class R{constructor(x){this.len=x}static decode(x,D,j){let N="";for(let X=D;X<j;++X)N+=R.codePointToString(R.singleByteDecoder(x[X]));return N}static inRange(x,D,j){return D<=x&&x<=j}static codePointToString(x){return x<=65535?String.fromCharCode(x):(x-=65536,String.fromCharCode((x>>10)+55296,(x&1023)+56320))}static singleByteDecoder(x){if(R.inRange(x,0,127))return x;const D=R.windows1252[x-128];if(D===null)throw Error("invaliding encoding");return D}get(x,D=0){return R.decode(x,D,D+this.len)}}c(R,"AnsiStringType"),h.AnsiStringType=R,R.windows1252=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]},5102:()=>{},189:function(ee,h,H){"use strict";var E=this&&this.__spreadArrays||function(){for(var w=0,R=0,A=arguments.length;R<A;R++)w+=arguments[R].length;for(var x=Array(w),D=0,R=0;R<A;R++)for(var j=arguments[R],N=0,X=j.length;N<X;N++,D++)x[D]=j[N];return x};Object.defineProperty(h,"__esModule",{value:!0}),h.config=h.loadMessageBundle=void 0;var O=H(1926),B=H(800),K=H(800);Object.defineProperty(h,"MessageFormat",{enumerable:!0,get:function(){return K.MessageFormat}}),Object.defineProperty(h,"BundleFormat",{enumerable:!0,get:function(){return K.BundleFormat}});function Y(w){return function(R,A){for(var x=[],D=2;D<arguments.length;D++)x[D-2]=arguments[D];if(typeof R=="number")throw new Error("Browser implementation does currently not support externalized strings.");return B.localize.apply(void 0,E([R,A],x))}}c(Y,"loadMessageBundle"),h.loadMessageBundle=Y;function M(w){return B.setPseudo((w==null?void 0:w.locale.toLowerCase())==="pseudo"),Y}c(M,"config"),h.config=M,O.default.install(Object.freeze({loadMessageBundle:Y,config:M}))},800:(ee,h,H)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.config=h.loadMessageBundle=h.localize=h.format=h.setPseudo=h.isPseudo=h.isDefined=h.BundleFormat=h.MessageFormat=void 0;var E=H(1926),O;(function(D){D.file="file",D.bundle="bundle",D.both="both"})(O=h.MessageFormat||(h.MessageFormat={}));var B;(function(D){D.standalone="standalone",D.languagePack="languagePack"})(B=h.BundleFormat||(h.BundleFormat={}));var K;(function(D){function j(N){var X=N;return X&&Y(X.key)&&Y(X.comment)}c(j,"is"),D.is=j})(K||(K={}));function Y(D){return typeof D!="undefined"}c(Y,"isDefined"),h.isDefined=Y,h.isPseudo=!1;function M(D){h.isPseudo=D}c(M,"setPseudo"),h.setPseudo=M;function w(D,j){var N;return h.isPseudo&&(D="\uFF3B"+D.replace(/[aouei]/g,"$&$&")+"\uFF3D"),j.length===0?N=D:N=D.replace(/\{(\d+)\}/g,function(X,ve){var de=ve[0],z=j[de],q=X;return typeof z=="string"?q=z:(typeof z=="number"||typeof z=="boolean"||z===void 0||z===null)&&(q=String(z)),q}),N}c(w,"format"),h.format=w;function R(D,j){for(var N=[],X=2;X<arguments.length;X++)N[X-2]=arguments[X];return w(j,N)}c(R,"localize"),h.localize=R;function A(D){return E.default().loadMessageBundle(D)}c(A,"loadMessageBundle"),h.loadMessageBundle=A;function x(D){return E.default().config(D)}c(x,"config"),h.config=x},1926:(ee,h)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0});var H;function E(){if(H===void 0)throw new Error("No runtime abstraction layer installed");return H}c(E,"RAL"),function(O){function B(K){if(K===void 0)throw new Error("No runtime abstraction layer provided");H=K}c(B,"install"),O.install=B}(E||(E={})),h.default=E},6822:(ee,h,H)=>{"use strict";ee.exports=H(189)},2479:ee=>{ee.exports=h;function h(H,E){if(H&&E)return h(H)(E);if(typeof H!="function")throw new TypeError("need wrapper function");return Object.keys(H).forEach(function(B){O[B]=H[B]}),O;function O(){for(var B=new Array(arguments.length),K=0;K<B.length;K++)B[K]=arguments[K];var Y=H.apply(this,B),M=B[B.length-1];return typeof Y=="function"&&Y!==M&&Object.keys(M).forEach(function(w){Y[w]=M[w]}),Y}c(O,"wrapper")}c(h,"wrappy")},6529:()=>{},6391:()=>{},4059:()=>{}},__webpack_module_cache__={};function __webpack_require__(ee){var h=__webpack_module_cache__[ee];if(h!==void 0)return h.exports;var H=__webpack_module_cache__[ee]={id:ee,loaded:!1,exports:{}};return __webpack_modules__[ee].call(H.exports,H,H.exports,__webpack_require__),H.loaded=!0,H.exports}c(__webpack_require__,"__webpack_require__"),(()=>{__webpack_require__.n=ee=>{var h=ee&&ee.__esModule?()=>ee.default:()=>ee;return __webpack_require__.d(h,{a:h}),h}})(),(()=>{__webpack_require__.d=(ee,h)=>{for(var H in h)__webpack_require__.o(h,H)&&!__webpack_require__.o(ee,H)&&Object.defineProperty(ee,H,{enumerable:!0,get:h[H]})}})(),(()=>{__webpack_require__.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(ee){if(typeof window=="object")return window}}()})(),(()=>{__webpack_require__.o=(ee,h)=>Object.prototype.hasOwnProperty.call(ee,h)})(),(()=>{__webpack_require__.r=ee=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(ee,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(ee,"__esModule",{value:!0})}})(),(()=>{__webpack_require__.nmd=ee=>(ee.paths=[],ee.children||(ee.children=[]),ee)})();var __webpack_exports__={};(()=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{StateKeys:()=>Uo,activate:()=>OE,getOpenActionsService:()=>vu,getState:()=>Dy,updateState:()=>ap});var ee={};__webpack_require__.r(ee),__webpack_require__.d(ee,{max:()=>vr,min:()=>Xr});const h=require("vscode"),H=47;function E(t){if(t===void 0)return;const e=t.path.endsWith("/");return!e&&!t.fragment?t.toString():t.with({path:e?t.path.slice(0,-1):t.path,fragment:""}).toString()}c(E,"asKey");function O(t){if(t===void 0)return;const e=t.path.endsWith("/");return!e&&!t.query&&!t.fragment?t.toString():t.with({path:e?t.path.slice(0,-1):t.path,query:"",fragment:""}).toString()}c(O,"asFileKey");function B(t,e){return`${(e==null?void 0:e.excludeScheme)?"":`${t.scheme}-`}${t.authority}${t.path.endsWith("/")?t.path.slice(0,-1):t.path}`}c(B,"asFileStorageKey");function K(t){const e=t.path;let r=0,n=-1,i=!0;for(let o=e.length-1;o>=0;--o)if(e.charCodeAt(o)===H){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":e.slice(r,n)}c(K,"basename");function Y(t){const e=t.path;if(e.length===1)return"/";let r,n=-1,i=!0;for(let o=e.length-1;o>=1;--o)if(r=e.charCodeAt(o),r===H){if(!i){n=o;break}}else i=!1;return n===-1?"/":e.slice(0,n)}c(Y,"dirname");function M(t){const e=t.path.lastIndexOf("/");return e===-1?t.with({path:"/"}):t.with({path:t.path.substring(0,e)})}c(M,"getParent");function w(t,e){const r=typeof e=="string"?e:e.path;return r.startsWith(t.path)?h.Uri.joinPath(t,r.substr(t.path.length)):h.Uri.joinPath(t,r)}c(w,"joinRelativePath");function R(t,e){return typeof e=="string"?(e.startsWith("/")||(e=`/${e}`),A(t,e)&&t.path.substr(e.length+(e.endsWith("/")?0:1)).split("/").length===1):A(t,e)&&t.path.substr(e.path.length+(e.path.endsWith("/")?0:1)).split("/").length===1}c(R,"isChild");function A(t,e){return typeof e=="string"?(e.startsWith("/")||(e=`/${e}`),e.length===1||t.path.startsWith(e.endsWith("/")?e:`${e}/`)):e.scheme===t.scheme&&e.authority===t.authority&&(e.path.length===1||t.path.startsWith(e.path.endsWith("/")?e.path:`${e.path}/`))}c(A,"isDescendent");function x(t){return t&&typeof t=="object"&&"scheme"in t}c(x,"isSerializedUri");const D=new TextDecoder,j=new TextEncoder,N=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];function X(t){const e=j.encode(t),r=new Array(e.length);for(let n=0;n<e.length;++n)r[n]=N[e[n]];return r.join("")}c(X,"encodeUtf8Hex");function ve(t){const e=t.match(/(\w{2})/g);if(e===null)return"";const r=new Uint8Array(e.map(n=>parseInt(n,16)));return D.decode(r)}c(ve,"decodeUtf8Hex");var de;(function(t){t.authoritySeparator="+",t.scheme="vscode-vfs";function e(s){const{authority:l}=s,u=l.indexOf(t.authoritySeparator);return u!==-1?l.substr(0,u):l}c(e,"getProviderId"),t.getProviderId=e;function r(s){return s.scheme!==t.scheme?s:s.with({scheme:e(s)})}c(r,"getProviderUri"),t.getProviderUri=r;function n(s,l){const u=new Map,d=h.workspace.textDocuments;if(d.length===0)return u;for(const f of d)f.uri.scheme===s&&l.some(p=>A(f.uri,p))&&u.set(E(f.uri),f.uri);return u}c(n,"getOpenUris"),t.getOpenUris=n;function i(s){return s.scheme===t.scheme?s:s.with({scheme:t.scheme})}c(i,"getVirtualUri"),t.getVirtualUri=i;function o(s,l){const[u,d]=s.authority.split(t.authoritySeparator);let f;if(d)try{const p=JSON.parse(ve(d));f=l?l(p):p}catch{}return{scheme:u,metadata:f}}c(o,"decodeAuthority"),t.decodeAuthority=o;function a(s,l){const u=l?`${t.authoritySeparator}${X(JSON.stringify(l))}`:"";return`${s}${u}`}c(a,"encodeAuthority"),t.encodeAuthority=a})(de||(de={}));var z;(function(t){t[t.Admin=100]="Admin",t[t.Maintain=40]="Maintain",t[t.WriteToPullRequest=31]="WriteToPullRequest",t[t.Write=30]="Write",t[t.Triage=20]="Triage",t[t.Read=10]="Read",t[t.None=0]="None"})(z||(z={}));var q;(function(t){t[t.Branch=0]="Branch",t[t.RemoteBranch=1]="RemoteBranch",t[t.Tag=2]="Tag",t[t.Commit=3]="Commit"})(q||(q={}));var re;(function(t){t[t.Open=0]="Open",t[t.Closed=1]="Closed",t[t.Merged=2]="Merged"})(re||(re={}));var I;(function(t){t[t.Changed=1]="Changed",t[t.Created=2]="Created",t[t.Deleted=3]="Deleted"})(I||(I={}));var W;(function(t){t.CurrentWindow="currentWindow",t.NewWindow="newWindow",t.AddToWorkspace="addToWorkspace"})(W||(W={}));var G;(function(t){t[t.Branch=0]="Branch",t[t.Tag=1]="Tag",t[t.Commit=2]="Commit",t[t.PullRequest=3]="PullRequest",t[t.Tree=4]="Tree"})(G||(G={}));var he;(function(t){t[t.Abort=0]="Abort",t[t.KeepCurrent=1]="KeepCurrent",t[t.DiscardCurrent=2]="DiscardCurrent",t[t.Merge=3]="Merge"})(he||(he={}));var le;(function(t){t[t.Repository=0]="Repository",t[t.PullRequest=1]="PullRequest",t[t.Branch=2]="Branch",t[t.Commit=3]="Commit",t[t.File=4]="File",t[t.Tag=5]="Tag"})(le||(le={}));var oe;(function(t){t.Branch="branch",t.RemoteBranch="remoteBranch",t.PullRequestBranch="pullRequestBranch",t.PullRequestRemoteBranch="pullRequestRemoteBranch",t.Tag="tag",t.Commit="commit"})(oe||(oe={}));class ye extends Error{constructor(e){super(e);var r;(r=Error.captureStackTrace)==null||r.call(Error,this,ye)}}c(ye,"DetachedHEADError");class Ie extends Error{constructor(e,r){super(typeof e=="string"?e:e.message);this.reauthenticate=r;var n;this.original=typeof e!="string"?e:void 0,(n=Error.captureStackTrace)==null||n.call(Error,this,Ie)}}c(Ie,"InvalidCredentialsError");class He extends Error{constructor(e=!1){super(e?"Unable to sync the repository":"Unable to fetch the repository");var r;(r=Error.captureStackTrace)==null||r.call(Error,this,He)}}c(He,"SyncOrFetchError");class je extends Error{constructor(){super("Sync operation will result in conflicts");var e;(e=Error.captureStackTrace)==null||e.call(Error,this,je)}}c(je,"SyncConflictsError");const Re=6,Ye="";var ze;(function(t){t.Off="off",t.Error="error",t.Warn="warn",t.Info="info",t.Debug="debug"})(ze||(ze={}));var Ke;(function(t){t[t.Off=0]="Off",t[t.Error=1]="Error",t[t.Warn=2]="Warn",t[t.Info=3]="Info",t[t.Debug=4]="Debug"})(Ke||(Ke={}));const Le="GitHub Repositories",Xe="[RemoteHub]",st=c(class{static configure(t,e){this._isDebugging=t.extensionMode===h.ExtensionMode.Development,this.logLevel=e}static enabled(t){return this.level>=this.toOrderedLevel(t)}static get logLevel(){return this._logLevel}static set logLevel(t){var e,r;this._logLevel=t,this.level=this.toOrderedLevel(t),t===ze.Off?((e=this.output)==null||e.dispose(),this.output=void 0):this.output=(r=this.output)!=null?r:h.window.createOutputChannel(Le)}static toOrderedLevel(t){switch(t){case ze.Off:return 0;case ze.Error:return 1;case ze.Warn:return 2;case ze.Info:return 3;case ze.Debug:return 4}}static get isDebugging(){return this._isDebugging}static debug(t,...e){st.isDebugging&&console.log(this.timestamp,Xe,t!=null?t:Ye,...e),!(this.output===void 0||this.level<4)&&this.output.appendLine(`${this.timestamp} ${t!=null?t:Ye}${this.toLoggableParams(!0,e)}`)}static error(t,e,...r){if(!(this.level<1&&!st.isDebugging)){if(e===void 0){const n=t instanceof Error?t.stack:void 0;if(n){const i=/.*\s*?at\s(.+?)\s/.exec(n);i!==null&&(e=i[1])}}st.isDebugging&&console.error(this.timestamp,Xe,e!=null?e:Ye,...r,t),!(this.output===void 0||this.level<1)&&this.output.appendLine(`${this.timestamp} ${e!=null?e:Ye}${this.toLoggableParams(!1,r)}
${String(t)}`)}}static log(t,...e){st.isDebugging&&console.log(this.timestamp,Xe,t!=null?t:Ye,...e),!(this.output===void 0||this.level<3)&&this.output.appendLine(`${this.timestamp} ${t!=null?t:Ye}${this.toLoggableParams(!1,e)}`)}static warn(t,...e){st.isDebugging&&console.warn(this.timestamp,Xe,t!=null?t:Ye,...e),!(this.output===void 0||this.level<2)&&this.output.appendLine(`${this.timestamp} ${t!=null?t:Ye}${this.toLoggableParams(!1,e)}`)}static showOutputChannel(){var t;(t=this.output)==null||t.show()}static toLoggable(t,e){if(typeof t!="object")return String(t);if(t instanceof h.Uri)return`Uri(${t.toString(!0)})`;try{return JSON.stringify(t,e)}catch{return"<error>"}}static toLoggableName(t){var e,r,n;let i;if(typeof t=="function"){if(t.prototype===void 0||t.prototype.constructor===void 0)return t.name;i=(e=t.prototype.constructor.name)!=null?e:Ye}else i=(n=(r=t.constructor)==null?void 0:r.name)!=null?n:Ye;const o=i.indexOf("_");return o===-1?i:i.substr(o+1)}static get timestamp(){const t=new Date;return`[${t.toISOString().replace(/T/," ").replace(/\..+/,Ye)}:${`00${t.getUTCMilliseconds()}`.slice(-3)}]`}static toLoggableParams(t,e){if(e.length===0||t&&this.level<4&&!st.isDebugging)return Ye;const r=e.map(n=>this.toLoggable(n)).join(", ");return r.length!==0?` \u2014 ${r}`:Ye}},"_Logger");let V=st;V.level=0,V._logLevel=ze.Off;function ae(t){const e=performance.now()*.001;let r=Math.floor(e),n=Math.floor(e%1*1e9);return t!==void 0&&(r=r-t[0],n=n-t[1],n<0&&(r--,n+=1e9)),[r,n]}c(ae,"hrtime");let _t=0;function Ze(){return _t===Number.MAX_SAFE_INTEGER&&(_t=0),++_t}c(Ze,"getNextInstanceId");const at=c(class{constructor(t,e,...r){this.context=t,this.instance=`[${Ze().toString().padStart(5)}] `;var n,i,o,a,s,l;let u;if(typeof(e==null?void 0:e.log)=="boolean"?u=e.log?{}:void 0:u=(n=e==null?void 0:e.log)!=null?n:{},this.logLevel=(i=e==null?void 0:e.logLevel)!=null?i:ze.Info,this.time=ae(),u){if(!V.enabled(this.logLevel))return;r.length?pe(this.logLevel,`${this.instance}${(o=u.prefix)!=null?o:""}${t}${(a=u.message)!=null?a:""}`,...r):pe(this.logLevel,`${this.instance}${(s=u.prefix)!=null?s:""}${t}${(l=u.message)!=null?l:""}`)}}log(t){this.logCore(this.context,t,!1)}logStep(t,e){(!t||e)&&this.logCore(this.context,e,!1),this.step=t?{time:ae(),label:t}:void 0}restart(t){this.logCore(this.context,t,!0),this.step=void 0,this.time=ae()}stop(t){this.restart(t)}logCore(t,e,r){var n,i,o,a,s,l,u;if(!V.enabled(this.logLevel))return;let d="";if(this.step){const[S,y]=ae(this.step.time),b=S*1e3+Math.floor(y/1e6);d=`${this.step.label?`${this.step.label} took `:""}${b} ms`}if(!r){pe(this.logLevel,`${this.instance}${(n=e==null?void 0:e.prefix)!=null?n:""}${t}${(i=e==null?void 0:e.message)!=null?i:""}${d?` ${d}`:""}${(o=e==null?void 0:e.suffix)!=null?o:""}`);return}const[f,p]=ae(this.time),g=f*1e3+Math.floor(p/1e6);pe(g>500?ze.Warn:this.logLevel,`${this.instance}${(a=e==null?void 0:e.prefix)!=null?a:""}${t}${(s=e==null?void 0:e.message)!=null?s:""}${(l=e==null?void 0:e.took)!=null?l:" took "}${g} ms${d?` (${d})`:""}${(u=e==null?void 0:e.suffix)!=null?u:""}`)}static start(t,e,...r){var n;(n=at.watches.get(t))==null||n.log(),at.watches.set(t,new at(t,e,...r))}static log(t,e){var r;(r=at.watches.get(t))==null||r.log(e)}static stop(t,e){var r;(r=at.watches.get(t))==null||r.stop(e),at.watches.delete(t)}},"_Stopwatch");let Z=at;Z.watches=new Map;function pe(t,e,...r){switch(t){case ze.Warn:V.warn(e,...r);break;case ze.Info:V.log(e,...r);break;default:V.debug(e,...r);break}}c(pe,"log");var Me=__webpack_require__(189),rt;(function(t){t.Off="off",t.Auto="auto",t.Always="always"})(rt||(rt={}));var qe;(function(t){t.None="none",t.Latest="latest",t.Match="match",t.TipPlusLatest="tip+latest"})(qe||(qe={})),function(t){function e(r){return r===t.None||r===t.Latest||r===t.Match||r===t.TipPlusLatest?r:t.None}c(e,"sanitize"),t.sanitize=e}(qe||(qe={}));var ot;(function(t){t.Browse="browse",t.Edit="edit"})(ot||(ot={})),function(t){function e(n){return n===t.Browse||n===t.Edit?n:t.Edit}c(e,"sanitize"),t.sanitize=e;function r(n){return n===t.Browse?t.Edit:t.Browse}c(r,"toggle"),t.toggle=r}(ot||(ot={}));var Rt;(function(t){function e(r,n){return r.display===n.display&&r.index===n.index}c(e,"equals"),t.equals=e})(Rt||(Rt={}));var xt;(function(t){const e=new Map([[oe.Branch,qe.None],[oe.RemoteBranch,qe.None],[oe.PullRequestBranch,qe.Match],[oe.PullRequestRemoteBranch,qe.Match],[oe.Commit,qe.Match],[oe.Tag,qe.Match]]),r=new Map([[oe.Branch,ot.Edit],[oe.RemoteBranch,ot.Edit],[oe.PullRequestBranch,ot.Browse],[oe.PullRequestRemoteBranch,ot.Browse],[oe.Commit,ot.Browse],[oe.Tag,ot.Browse]]);function n(o){var a,s;return{display:(a=r.get(o))!=null?a:ot.Edit,index:(s=e.get(o))!=null?s:qe.None}}c(n,"getDefault"),t.getDefault=n;function i(o){switch(o){case oe.Branch:case oe.RemoteBranch:return{display:ot.Browse,index:qe.Latest};case oe.PullRequestBranch:case oe.PullRequestRemoteBranch:return{display:ot.Browse,index:qe.Match};case oe.Commit:case oe.Tag:return{display:ot.Browse,index:qe.Match};default:return{display:ot.Edit,index:qe.None}}}c(i,"getIndexDefault"),t.getIndexDefault=i})(xt||(xt={}));const zr=null;var _r=__webpack_require__(2307),rr=__webpack_require__.n(_r);const et="remoteHub",Ot="modes",An="indexMemento";class Be{constructor(){this._onDidChange=new h.EventEmitter,this._onDidChangeAny=new h.EventEmitter,this.memoryState=new Map}static configure(e){ke.state=e.workspaceState,e.subscriptions.push(h.workspace.onDidChangeConfiguration(ke.onConfigurationChanged,ke))}get onDidChange(){return this._onDidChange.event}get onDidChangeAny(){return this._onDidChangeAny.event}onConfigurationChanged(e){if(!e.affectsConfiguration(et)){this._onDidChangeAny.fire(e);return}this._onDidChangeAny.fire(e),this._onDidChange.fire(e)}set state(e){if(this._state=e,this.modes=this._state.get(Ot),this.modes===void 0&&(this.modes=Object.create(null)),this.memoryState.size!==0){for(const r of this.memoryState.entries())this.modes[r[0]]=r[1];this._state.update(Ot,this.modes).then(()=>{this.memoryState.clear()},void 0)}this.indexMemento=this._state.get(An),this.indexMemento===void 0&&(this.indexMemento=Object.create(null))}get(e,r,n){return n===void 0?h.workspace.getConfiguration(e===void 0?void 0:et,r).get(e===void 0?et:e):h.workspace.getConfiguration(e===void 0?void 0:et,r).get(e===void 0?et:e,n)}getMode(e,r,n){var i;const o=e.toString();let a=this.modes!==void 0?this.modes[o]:void 0;if(a!==void 0)return{display:ot.sanitize(a.display),index:qe.sanitize(a.index)};if(a=this.memoryState.get(o),a!==void 0)return a;if(r===oe.Branch||r===oe.RemoteBranch)switch((i=h.workspace.getConfiguration("remoteHub.richNavigation.indexMode",e))==null?void 0:i.get("branch")){case"none":return{display:ot.Edit,index:qe.None};case"latest":return{display:ot.Browse,index:qe.Latest};case"tipPlusLatest":return{display:ot.Edit,index:qe.TipPlusLatest}}if(!n)return xt.getDefault(r)}setMode(e,r){const n=e.toString();return this._state===void 0||this.modes===void 0?(this.memoryState.set(n,r),Promise.resolve()):(this.modes[n]=r,this._state.update(Ot,this.modes))}getIndexMemento(e){if(this.indexMemento!==void 0)return this.indexMemento[e.toString()]}setIndexMemento(e,r){return this.indexMemento===void 0||this._state===void 0?Promise.resolve():(this.indexMemento[e.toString()]=r,this._state.update(An,this.indexMemento))}getAny(e,r,n){return n===void 0?h.workspace.getConfiguration(void 0,r).get(e):h.workspace.getConfiguration(void 0,r).get(e,n)}changed(e,r,n){var i;return(i=e==null?void 0:e.affectsConfiguration(`${et}.${r}`,n))!=null?i:!0}inspect(e,r){return h.workspace.getConfiguration(e===void 0?void 0:et,r).inspect(e===void 0?et:e)}inspectAny(e,r){return h.workspace.getConfiguration(void 0,r).inspect(e)}async migrate(e,r,n){const i=ke.inspect(e);if(i===void 0)return!1;let o=!1;return i.globalValue!==void 0&&(await this.update(r,n.migrationFn!=null?n.migrationFn(i.globalValue):i.globalValue,h.ConfigurationTarget.Global),o=!0),i.workspaceValue!==void 0&&(await this.update(r,n.migrationFn!=null?n.migrationFn(i.workspaceValue):i.workspaceValue,h.ConfigurationTarget.Workspace),o=!0),i.workspaceFolderValue!==void 0&&(await this.update(r,n.migrationFn!=null?n.migrationFn(i.workspaceFolderValue):i.workspaceFolderValue,h.ConfigurationTarget.WorkspaceFolder),o=!0),!o&&n.fallbackValue!==void 0&&(await this.update(r,n.fallbackValue,h.ConfigurationTarget.Global),o=!0),o}async migrateIfMissing(e,r,n){const i=ke.inspect(e);if(i===void 0)return;const o=ke.inspect(r);i.globalValue!==void 0&&(o===void 0||o.globalValue===void 0)&&await this.update(r,n.migrationFn!=null?n.migrationFn(i.globalValue):i.globalValue,h.ConfigurationTarget.Global),i.workspaceValue!==void 0&&(o===void 0||o.workspaceValue===void 0)&&await this.update(r,n.migrationFn!=null?n.migrationFn(i.workspaceValue):i.workspaceValue,h.ConfigurationTarget.Workspace),i.workspaceFolderValue!==void 0&&(o===void 0||o.workspaceFolderValue===void 0)&&await this.update(r,n.migrationFn!=null?n.migrationFn(i.workspaceFolderValue):i.workspaceFolderValue,h.ConfigurationTarget.WorkspaceFolder)}name(e){return e}update(e,r,n){return h.workspace.getConfiguration(et).update(e,r,n)}updateAny(e,r,n,i){return h.workspace.getConfiguration(void 0,n===h.ConfigurationTarget.Global?void 0:i).update(e,r,n)}updateEffective(e,r){const n=ke.inspect(e);return n.workspaceFolderValue!==void 0?r===n.workspaceFolderValue?Promise.resolve(void 0):ke.update(e,r,h.ConfigurationTarget.WorkspaceFolder):n.workspaceValue!==void 0?r===n.workspaceValue?Promise.resolve(void 0):ke.update(e,r,h.ConfigurationTarget.Workspace):n.globalValue===r||n.globalValue===void 0&&r===n.defaultValue?Promise.resolve(void 0):ke.update(e,rr()(r,n.defaultValue)?void 0:r,h.ConfigurationTarget.Global)}getUseNewCommitApi(){let e=this.get("experimental.useNewCommitApi");return e===null&&(e=!0),e}}c(Be,"Configuration");const ke=new Be;function Te(t){return t!==void 0&&typeof t.then=="function"}c(Te,"isPromise");const dt="";function Mt(...t){if(t.length===1){const e=t[0];return e===void 0?dt:typeof e=="string"?e:typeof e=="number"||typeof e=="boolean"||e instanceof Error?String(e):e instanceof h.Uri?e.toString():JSON.stringify(e)}return JSON.stringify(t)}c(Mt,"defaultResolver");function ft(t){return(e,r,n)=>{let i;if(typeof n.value=="function"?i=n.value:typeof n.get=="function"&&(i=n.get),i===void 0)throw new Error("Not supported");const o=`$gate$${r}`;n.value=function(...a){const s=a.length===0?o:`${o}$${(t!=null?t:Mt)(...a)}`;Object.prototype.hasOwnProperty.call(this,s)||Object.defineProperty(this,s,{configurable:!1,enumerable:!1,writable:!0,value:void 0});let l=this[s];if(l===void 0){let u;try{if(u=i.apply(this,a),u==null||!Te(u))return u;this[s]=l=u.then(d=>(this[s]=void 0,d)).catch(d=>{throw this[s]=void 0,d})}catch(d){throw this[s]=void 0,d}}return l}}}c(ft,"gate");const Lt=/^[0-9a-f]{40}$/i;function T(t){return t!==void 0&&Lt.test(t)}c(T,"isSha");const m=/^[^/](?!.*\/\.)(?!.*\.\.)(?!.*\/\/)(?!.*@\{)[^\000-\037\177 ~^:?*[\\]+[^./]$/;function v(t){return m.test(t)}c(v,"isValidBranchName");function P(t){return t===""||t==="~"||t==="HEAD"?t:t.endsWith("^")?`${t.substr(0,7)}^`:t.substr(0,7)}c(P,"shortenRef");const J="";function ue(...t){if(t.length===1){const e=t[0];return e===void 0?J:typeof e=="string"?e:typeof e=="number"||typeof e=="boolean"||e instanceof Error?String(e):e instanceof h.Uri?e.toString():JSON.stringify(e)}return JSON.stringify(t)}c(ue,"serialize_defaultResolver");function be(t){return(e,r,n)=>{let i;if(typeof n.value=="function"?i=n.value:typeof n.get=="function"&&(i=n.get),i===void 0)throw new Error("Not supported");const o=`$serialize$${r}`;n.value=function(...a){const s=a.length===0?o:`${o}$${(t!=null?t:ue)(...a)}`;Object.prototype.hasOwnProperty.call(this,s)||Object.defineProperty(this,s,{configurable:!1,enumerable:!1,writable:!0,value:void 0});let l=this[s];const u=c(()=>i.apply(this,a),"run");return l===void 0?l=u():l=l.then(u,u),this[s]=l,l}}}c(be,"serialize");class ct extends Error{constructor(e,r,n){super(e.message);this.original=e,this.name=r,this.id=n;var i;(i=Error.captureStackTrace)==null||i.call(Error,this,ct)}}c(ct,"PullRequestNotFoundError");class Dt extends Error{constructor(e,r){super(e.message);this.original=e,this.name=r;var n;(n=Error.captureStackTrace)==null||n.call(Error,this,Dt)}}c(Dt,"RepositoryForbiddenError");class It extends Error{constructor(e,r){super(e.message);this.original=e,this.name=r;var n;(n=Error.captureStackTrace)==null||n.call(Error,this,It)}}c(It,"RepositoryNotFoundError");class Nt extends Error{constructor(e,r){super(e.message);this.original=e,this.name=r;var n;(n=Error.captureStackTrace)==null||n.call(Error,this,Nt)}}c(Nt,"RepositoryEmptyError");class gt extends Error{constructor(e,r){super(e.message);this.original=e,this.duplicate=r;var n;(n=Error.captureStackTrace)==null||n.call(Error,this,gt)}}c(gt,"InvalidBranchNameError");class ri extends Error{constructor(e){super(e.message);this.original=e;var r;(r=Error.captureStackTrace)==null||r.call(Error,this,ri)}}c(ri,"MergeConflictError");class ni extends Error{constructor(e){super(e);var r;(r=Error.captureStackTrace)==null||r.call(Error,this,ni)}}c(ni,"NothingToCommitError");class co extends Error{constructor(){super("Failed to create and push commit");var e;(e=Error.captureStackTrace)==null||e.call(Error,this,co)}}c(co,"CommitFailedError");class Br extends Error{constructor(e){var r;const n=typeof e=="string"?e:Xt.getProviderId(e);super(`No provider registered with ${n}`);this.id=n,(r=Error.captureStackTrace)==null||r.call(Error,this,Br)}}c(Br,"ProviderNotFoundError");class Fi{constructor(e,r,n,i,o){this.providerService=e,this.uri=r,this.id=n,this.name=i,this.provider={id:o.id,name:o.name}}get canonicalUri(){return this.providerService.getVirtualCanonicalRootUri(this.uri)}createRelativeUri(e){return this.providerService.createRelativeUri(this.uri,e)}async getMetadata(){const e=await this.providerService.getMetadata(this.uri);if(!e)throw new Error(`Unable to find metadata for ${this.uri.toString()}`);return e}async getIndexMetadata(){return this.providerService.getIndexMetadata(this.uri)}getUriMetadata(){return this.providerService.getVirtualUriMetadata(this.uri)}}c(Fi,"VirtualRepository");var xr;(function(t){t[t.Clone=-1]="Clone",t[t.Repository=0]="Repository",t[t.PullRequest=1]="PullRequest",t[t.Branch=2]="Branch",t[t.Commit=3]="Commit",t[t.Tag=4]="Tag"})(xr||(xr={}));var wt;(function(t){t[t.NotIndexed=0]="NotIndexed",t[t.Indexed=1]="Indexed",t[t.Match=2]="Match",t[t.Active=3]="Active"})(wt||(wt={})),function(t){function e(r){return r!==void 0&&(r===t.Indexed||r===t.Match||r===t.Active)}c(e,"hasIndex"),t.hasIndex=e}(wt||(wt={}));var Pi;(function(t){function e(r){return r!==void 0&&r.type===3}c(e,"isActive"),t.isActive=e})(Pi||(Pi={}));var cr;(function(t){t[t.Latest=1]="Latest",t[t.SHA=2]="SHA"})(cr||(cr={}));var ii;(function(t){function e(r){const n=de.decodeAuthority(r).metadata;if(!(n===void 0||n.idx===void 0)){if(n.idx==="latest")return{type:1};if(T(n.idx))return{type:2,sha:n.idx}}}c(e,"decode"),t.decode=e})(ii||(ii={}));function*gc(t,e){for(const r of t)yield*e(r)}c(gc,"flatMap");function*yu(t,e){for(const r of t)e(r)&&(yield r)}c(yu,"filter");function*Oo(t,e){for(const r of t){const n=e(r);n!=null&&(yield n)}}c(Oo,"filterMap");function bu(t,e){for(const r of t)if(e(r))return r}c(bu,"find");function mc(t,e){let r="";const n=t[Symbol.iterator]();let i=n.next();if(i.done)return r;for(;;){const o=i.value.toString();if(i=n.next(),i.done){r+=o;break}r+=o,r+=e}return r}c(mc,"join");function*oi(t,e){for(const r of t)yield e(r)}c(oi,"map");function Ni(t,e){for(const r of t)if(e(r))return!0;return!1}c(Ni,"some");function*_u(...t){for(const e of t)for(const r of e)yield r}c(_u,"union");function*xu(t){const e=new Set;for(const r of t)e.has(r)||(e.add(r),yield r)}c(xu,"unique");var lp=__webpack_require__(5102),Su=Object.defineProperty,Cu=Object.getOwnPropertyDescriptor,gn=c((t,e,r,n)=>{for(var i=n>1?void 0:n?Cu(e,r):e,o=t.length-1,a;o>=0;o--)(a=t[o])&&(i=(n?a(e,r,i):a(i))||i);return n&&i&&Su(e,r,i),i},"__decorateClass");const Ir=c(class{constructor(t,e){this.metadataStore=t,this.telemetryService=e,this._providers=new Map,this._indexProviders=new Map,this._onDidChangeProviders=new h.EventEmitter,this._repositories=new Map,this._onDidChangeRepositories=new h.EventEmitter,this._onDidChangeRepository=new h.EventEmitter,this._onDidSyncRepository=new h.EventEmitter,this._onDidRefresh=new h.EventEmitter,this._onWillRefresh=new h.EventEmitter,this.pendingMetadataRequests=new Map,this.disposable=h.Disposable.from(h.workspace.onDidChangeWorkspaceFolders(this.onWorkspaceFoldersChanged,this),t.onDidChange(r=>this.onMetadataChanged(r)))}get onDidChangeProviders(){return this._onDidChangeProviders.event}get onDidChangeRepositories(){return this._onDidChangeRepositories.event}get onDidChangeRepository(){return this._onDidChangeRepository.event}get onDidSyncRepository(){return this._onDidSyncRepository.event}get onDidRefresh(){return this._onDidRefresh.event}get onWillRefresh(){return this._onWillRefresh.event}dispose(){this.disposable.dispose(),this._providers.clear(),this._repositories.clear()}onMetadataChanged(t){const e=this._repositories.get(E(t.uri));!e||(V.log(`VirtualProviderService.onMetadataChanged(${t.uri.toString()}, reason=${t.reason}): Firing onDidChangeRepository...`),this._onDidChangeRepository.fire({repository:e,reason:t.reason==="revision"?"HEAD":void 0}))}onWorkspaceFoldersChanged(t){if(t.added.length)for(const e of t.added){const r=E(e.uri);if(e.uri.scheme!==Ir.scheme||this._repositories.has(r))continue;const n=this.getProvider(e.uri);if(!n)continue;this._repositories.set(r,null);const{repo:i,name:o}=this.getVirtualUriMetadata(e.uri),a=new Fi(this,e.uri,i,o,n);this._repositories.set(r,a),this._onDidChangeRepositories.fire({added:[a],removed:[]}),this.telemetryService.sendEvent("repository.opened",{provider:n.id,repositories:this._repositories.size.toString()})}if(t.removed.length)for(const e of t.removed){const r=E(e.uri);if(e.uri.scheme!==Ir.scheme||!this._repositories.has(r))continue;const n=this._repositories.get(r);this._repositories.delete(r),n&&(this._onDidChangeRepositories.fire({added:[],removed:[n]}),this.telemetryService.sendEvent("repository.closed",{repositories:this._repositories.size.toString()}))}xi(Hn.HasVirtualFolders,this._repositories.size!==0),xi(Hn.VirtualFolderProviders,mc(xu(oi(this.getRepositories(),e=>e.provider.id)),","))}get hasProviders(){return this._providers.size!==0}get registeredProviders(){return[...oi(this._providers.values(),t=>({id:t.id,name:t.name}))]}get repositories(){return[...this.getRepositories()]}registerVirtualIndexProvider(t,e){if(this._indexProviders.has(t))throw new Error(`Virtual index provider '${t}' has already been registered`);return this._indexProviders.set(t,e),{dispose:()=>{this._indexProviders.delete(t)}}}register(t,e,r,n){var i;if(this._providers.has(t))throw new Error(`Provider '${t}' has already been registered`);const o={id:t,name:e,provider:r,fs:n};return this._providers.set(t,o),this._onDidChangeProviders.fire({added:[o],removed:[]}),this.telemetryService.sendEvent("provider.registered",{provider:t}),this.onWorkspaceFoldersChanged({added:(i=h.workspace.workspaceFolders)!=null?i:[],removed:[]}),{dispose:()=>{this._providers.delete(t);const a=[];for(const[s,l]of[...this._repositories])(l==null?void 0:l.provider.id)===t&&(this._repositories.delete(s),a.push(l));this._onDidChangeRepositories.fire({added:[],removed:a}),this._onDidChangeProviders.fire({added:[],removed:[o]})}}}refresh(){if(this._providers.size===0)return;const t=[],e=[];for(const r of this._providers.values()){t.push(...oi(this.getRepositories(r.id),i=>i.uri));const n=this._indexProviders.get(r.id);n!==void 0&&e.push(n)}this._onWillRefresh.fire(t),this.metadataStore.refresh(),e.forEach(r=>r.refresh(t)),this._onDidRefresh.fire(t)}getRegisteredProvider(t){const e=this.getProvider(t);return e?{id:e.id,name:e.name}:void 0}getRepository(t,e){const r=h.workspace.getWorkspaceFolder(t);if(!r||r.uri.scheme!==Ir.scheme)return;const n=this._repositories.get(E(r.uri));if(!(e!==void 0&&(n==null?void 0:n.provider.id)!==e))return n!=null?n:void 0}getRepositories(t){return yu(this._repositories.values(),e=>e!==null&&(!t||e.provider.id===t))}hasProvider(t,e){const r=typeof t=="string"?t:Ir.getProviderId(t),n=this._providers.get(r);return e!==void 0&&(n==null?void 0:n.id)!==e?!1:n!==void 0}isReadonly(t){var e;return Boolean((e=this.getProvider(t))==null?void 0:e.provider.isReadonly)}getProvider(t){const e=typeof t=="string"?t:Ir.getProviderId(t);return this._providers.get(e)}getRepositoryProvider(t){var e;const r=(e=this.getProvider(t))==null?void 0:e.provider;if(r)return r;throw new Br(t)}getFileSystemProvider(t){var e;const r=(e=this.getProvider(t))==null?void 0:e.fs;if(r)return r;throw new Br(t)}getRemoteWorkspaceSourceProviders(t){var e,r,n,i;return t?(i=(n=(e=this.getProvider(t))==null?void 0:(r=e.provider).getRemoteWorkspaceSourceProviders)==null?void 0:n.call(r))!=null?i:[]:[...gc(this._providers.values(),o=>{var a,s,l;return(l=(s=(a=o.provider).getRemoteWorkspaceSourceProviders)==null?void 0:s.call(a))!=null?l:[]})]}isInWorkspace(t){return this.getVirtualWorkspaceUri(t)!==void 0}getAuthentication(t){const e=this.getProvider(t);if(!e)throw new Br(t);return e==null?void 0:e.provider.getAuthentication(t)}canOpenRemoteUrl(t,e){if(e){const r=this.getProvider(e),n=r==null?void 0:r.provider.canOpenRemoteUrl(t);return n!==void 0?{provider:r,urlType:n}:void 0}for(const r of this._providers.values()){const n=r.provider.canOpenRemoteUrl(t);if(n!==void 0)return{provider:r,urlType:n}}}async createWorkspaceForRemoteUrl(t,e,r=W.CurrentWindow){var n;const i=this.canOpenRemoteUrl(t,e);return(n=i==null?void 0:i.provider)==null?void 0:n.provider.createWorkspaceForRemoteUrl(t,r)}createProviderUri(t,e,r){return de.getProviderUri(this.getRepositoryProvider(t).createVirtualUri(Ir.baseVirtualWorkspaceUri,e,r))}createRelativeProviderUri(t,e){return de.getProviderUri(this.createRelativeUri(t,e))}createRelativeUri(t,e){const r=this.getProviderRootUri(t);let n=`${r.path}/`;n.endsWith("/")&&(n=n.slice(0,-1));const i=r.with({path:`${r.path}/${e.startsWith("/")?e.substr(1):e}`});return t.scheme===Ir.scheme?de.getVirtualUri(i):i}createRelativeVirtualUri(t,e){return de.getVirtualUri(this.createRelativeUri(t,e))}createVirtualUri(t,e,r){return this.getRepositoryProvider(t).createVirtualUri(Ir.baseVirtualWorkspaceUri,e,r)}async getBestRemoteUri(t,e){const{provider:r,repo:n,ref:i}=this.getVirtualUriMetadata(t);if(e===xr.Repository)return this.getRemoteUri(r.id,{repo:n});if(e===xr.Clone)return this.getRemoteUri(r.id,{repo:n,clone:!0});if(e===xr.PullRequest||e===void 0&&(i==null?void 0:i.type)===G.PullRequest){if((i==null?void 0:i.type)===G.PullRequest)return this.getRemoteUri(r.id,{repo:n,pullRequest:{id:i.id}});const{pullRequest:o}=await this.getMetadata(t);if(e===xr.PullRequest&&o)return this.getRemoteUri(r.id,{repo:n,pullRequest:{id:o.id}})}if(e===xr.Branch||e===void 0&&(i==null?void 0:i.type)===G.Branch){if((i==null?void 0:i.type)===G.Branch)return this.getRemoteUri(r.id,{repo:n,branch:i.id});const{HEAD:o}=await this.getMetadata(t);if(o.type===q.Branch||o.type===q.RemoteBranch&&e===xr.Branch)return this.getRemoteUri(r.id,{repo:n,branch:o.branch.name})}if(e===xr.Tag||e===void 0&&(i==null?void 0:i.type)===G.Tag){if((i==null?void 0:i.type)===G.Tag)return this.getRemoteUri(r.id,{repo:n,tag:i.id});const{HEAD:o}=await this.getMetadata(t);if(o.type===q.Tag)return this.getRemoteUri(r.id,{repo:n,tag:o.detached.name})}if(e===xr.Commit||e===void 0&&((i==null?void 0:i.type)===G.Commit||(i==null?void 0:i.type)===G.Tree&&T(i.id))){if((i==null?void 0:i.type)===G.Commit||(i==null?void 0:i.type)===G.Tree&&T(i.id))return this.getRemoteUri(r.id,{repo:n,sha:i.id});const{HEAD:o}=await this.getMetadata(t);if(e===xr.Commit||o.type===q.Commit)return this.getRemoteUri(r.id,{repo:n,sha:o.sha})}if(e===void 0)return this.getRemoteUri(r.id,{repo:n})}getCanonicalUri(t){let{authority:e}=t;const r=e.indexOf(Ir.authoritySeparator);return r!==-1&&(e=e.substr(0,r)),t.with({authority:e})}getRemoteUri(t,e){var r,n;return(n=(r=this.getRepositoryProvider(t)).getRemoteUri)==null?void 0:n.call(r,e)}getProviderRootUri(t){return t=de.getProviderUri(t),this.getRepositoryProvider(t).getProviderRootUri(t)}getRelativeFilePath(t,e){return e=de.getProviderUri(e!=null?e:t),this.getRepositoryProvider(e).getRelativeFilePath(t,e)}getVirtualUriMetadata(t){return this.getRepositoryProvider(t).getVirtualUriMetadata(t)}getVirtualCanonicalRootUri(t){const e=de.getVirtualUri(this.getProviderRootUri(t));let{authority:r}=e;const n=r.indexOf(Ir.authoritySeparator);return n!==-1&&(r=r.substr(0,n)),e.with({authority:r})}getVirtualRootUri(t){return de.getVirtualUri(this.getProviderRootUri(t))}getVirtualWorkspaceUri(t){var e;return(e=h.workspace.getWorkspaceFolder(de.getVirtualUri(t)))==null?void 0:e.uri}createIGitRepository(t,e,r,n){var i,o;return(o=(i=this.getRepositoryProvider(t)).createIGitRepository)==null?void 0:o.call(i,t,e,r,n)}async getCommitOperations(t,e,r){let n;return(r==null?void 0:r.staged)?(n=await e.getStagedChanges(t),n.length===0&&r.staged==="auto"&&(n=await e.getChanges(t))):n=await e.getChanges(t),n.map(o=>{const a=this.getRelativeFilePath(t,o.uri);switch(o.type){case I.Created:return{type:o.type,path:a,fileType:o.fileType,content:e.readFile(o.uri).then(s=>s!=null?s:new Uint8Array)};case I.Changed:return{type:o.type,path:a,fileType:o.fileType,content:e.readFile(o.uri).then(s=>s!=null?s:new Uint8Array)};case I.Deleted:return{type:o.type,path:a,fileType:o.fileType,content:void 0}}})}async getMetadata(t){return{...await this.getMetadataCore(this.getVirtualRootUri(t)),path:this.getRelativeFilePath(t,t)}}async getIndexMetadata(t){const e=this.getIndexProvider(t);return e?e.getIndexMetadata(t):void 0}getModeConfig(t,e,r){return ke.getMode(this.getVirtualRootUri(t),e,Boolean(r))}async getModeRefType(t,e){return t=this.getVirtualRootUri(t),this.getRepositoryProvider(t).getModeRefType(t,e)}getIndexProvider(t){var e;const r=(e=this.getProvider(t))==null?void 0:e.id;return r?this._indexProviders.get(r):void 0}async getMetadataCore(t){const e=E(t);let r=this.pendingMetadataRequests.get(e);if(r)return r;let{revision:n,cachedMetadata:i}=await this.metadataStore.get(t);if(i!==void 0)return i;const o=this.getProvider(t);if(!o)throw new Br(t);const a=ii.decode(t);(a==null?void 0:a.type)===cr.SHA&&(n=a.sha),r=o.provider.createMetadata(t,n),this.pendingMetadataRequests.set(e,r);try{const s=await r;return await this.updateMetadataCore(t,s,{silent:!0}),s}finally{this.pendingMetadataRequests.delete(e)}}async updateMetadata(t,e){const r=new Z(`VirtualProviderService.updateMetadata(${t.toString()})`,{},e.HEAD.sha);try{await this.metadataStore.set(de.getVirtualUri(t),e.HEAD.sha,e)}finally{r.stop()}}updateMetadataCore(t,e,r){return this.metadataStore.set(de.getVirtualUri(t),e.HEAD.sha,e,r)}async clone(t){const e=await this.getBestRemoteUri(t,xr.Clone);if(!e)throw new Error("No url found for clone");if(Sn)return void h.env.openExternal(h.Uri.parse(`${h.env.uriScheme}://vscode.git/clone?url=${encodeURIComponent(e.toString(!0))}`));const r=c(async n=>{try{await n.activate(),await h.commands.executeCommand("git.clone",e.toString(!0))}catch(i){V.error(i,"Unable to clone repository")}},"cloneRepository");if(h.workspace.isTrusted){const n=h.extensions.getExtension("vscode.git");if(n)await r(n);else throw new Error("Git extension not found")}else{const n=h.extensions.onDidChange(async()=>{const o=h.extensions.getExtension("vscode.git");o&&(await r(o),n.dispose())});await h.workspace.requestWorkspaceTrust()||n.dispose()}}createBranch(t,e,r,n){return this.getRepositoryProvider(t).createBranch(t,e,r,n)}createCommit(t,e,r,n){return this.getRepositoryProvider(t).createCommit(t,e,r,n)}createAndPushCommit(t,e,r,n,i,o){return this.getRepositoryProvider(t).createAndPushCommit(t,e,r,n,i,o)}createPullRequest(t,e,r,n,i){return this.getRepositoryProvider(t).createPullRequest(t,e,r,n,i)}fetch(t,e){return this.getRepositoryProvider(t).fetch(t,e)}fork(t){return this.getRepositoryProvider(t).fork(t)}getBranches(t,e){return this.getRepositoryProvider(t).getBranches(t,e)}getCommit(t,e){return this.getRepositoryProvider(t).getCommit(t,e)}getCommits(t,e){var r;return(r=this.getRepositoryProvider(t))==null?void 0:r.getCommits(t,e)}compareCommits(t,e){var r;return(r=this.getRepositoryProvider(t))==null?void 0:r.compareCommits(t,e)}getFileContent(t,e,r){return this.getRepositoryProvider(t).getFileContent(t,e,r)}getFork(t){return this.getRepositoryProvider(t).getFork(t)}async getIncomingChanges(t){var e,r,n;return(n=(r=(e=this.getRepositoryProvider(t)).getIncomingChanges)==null?void 0:r.call(e,t))!=null?n:[]}getPullRequest(t,e){return this.getRepositoryProvider(t).getPullRequest(t,e)}getTags(t,e){return this.getRepositoryProvider(t).getTags(t,e)}getSnapshots(t,e){var r,n;return(n=(r=this.getIndexProvider(t))==null?void 0:r.getSnapshots(t,e))!=null?n:Promise.resolve([])}async getTarGz(t,e){var r,n;return(n=(r=this.getRepositoryProvider(t)).getTarGz)==null?void 0:n.call(r,t,e)}pushCommit(t,e,r,n){return this.getRepositoryProvider(t).pushCommit(t,e,r,n)}switchTo(t,e,r){return this.getRepositoryProvider(t).switchTo(t,e,r)}async sync(t,e,r){const n=this._repositories.get(E(t));n&&this._onDidSyncRepository.fire({repository:n,syncing:!0});try{const i=this.getProvider(t),o=this.getIndexProvider(t);if(i===void 0)throw new Br(t);let{to:a,reason:s,...l}=r!=null?r:{};return a===void 0&&o&&(a=await o.resolveIndexRef(t,s==="user")),await i.provider.sync(t,e,{conflictResolution:he.Abort,...l,to:a})}finally{n&&this._onDidSyncRepository.fire({repository:n,syncing:!1})}}stat(t){return this.getFileSystemProvider(t).stat(t)}readDirectory(t){return this.getFileSystemProvider(t).readDirectory(t)}readFile(t){return this.getFileSystemProvider(t).readFile(t)}watch(t,e){return this.getFileSystemProvider(t).watch(t,e)}provideFileSearchResults(t,e,r){return this.getFileSystemProvider(e.folder).provideFileSearchResults(t,e,r)}provideTextSearchResults(t,e,r,n){return this.getFileSystemProvider(e.folder).provideTextSearchResults(t,e,r,n)}static getProviderId(t){const{authority:e}=t,r=e.indexOf(Ir.authoritySeparator);return r!==-1?e.substr(0,r):e}static isCanonicalUri(t){return t.authority.indexOf(Ir.authoritySeparator)===-1}},"_VirtualProviderService");let Xt=Ir;Xt.scheme="vscode-vfs",Xt.authoritySeparator="+",Xt.baseVirtualWorkspaceUri=h.Uri.parse(`${Ir.scheme}://`),gn([be()],Xt.prototype,"getMetadataCore",1);function mn(){}c(mn,"Diff"),mn.prototype={diff:c(function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=n.callback;typeof n=="function"&&(i=n,n={}),this.options=n;var o=this;function a(y){return i?(setTimeout(function(){i(void 0,y)},0),!0):y}c(a,"done"),e=this.castInput(e),r=this.castInput(r),e=this.removeEmpty(this.tokenize(e)),r=this.removeEmpty(this.tokenize(r));var s=r.length,l=e.length,u=1,d=s+l,f=[{newPos:-1,components:[]}],p=this.extractCommon(f[0],r,e,0);if(f[0].newPos+1>=s&&p+1>=l)return a([{value:this.join(r),count:r.length}]);function g(){for(var y=-1*u;y<=u;y+=2){var b=void 0,_=f[y-1],C=f[y+1],k=(C?C.newPos:0)-y;_&&(f[y-1]=void 0);var F=_&&_.newPos+1<s,$=C&&0<=k&&k<l;if(!F&&!$){f[y]=void 0;continue}if(!F||$&&_.newPos<C.newPos?(b=Ru(C),o.pushComponent(b.components,void 0,!0)):(b=_,b.newPos++,o.pushComponent(b.components,!0,void 0)),k=o.extractCommon(b,r,e,y),b.newPos+1>=s&&k+1>=l)return a(Eu(o,b.components,r,e,o.useLongestToken));f[y]=b}u++}if(c(g,"execEditLength"),i)c(function y(){setTimeout(function(){if(u>d)return i();g()||y()},0)},"exec")();else for(;u<=d;){var S=g();if(S)return S}},"diff"),pushComponent:c(function(e,r,n){var i=e[e.length-1];i&&i.added===r&&i.removed===n?e[e.length-1]={count:i.count+1,added:r,removed:n}:e.push({count:1,added:r,removed:n})},"pushComponent"),extractCommon:c(function(e,r,n,i){for(var o=r.length,a=n.length,s=e.newPos,l=s-i,u=0;s+1<o&&l+1<a&&this.equals(r[s+1],n[l+1]);)s++,l++,u++;return u&&e.components.push({count:u}),e.newPos=s,l},"extractCommon"),equals:c(function(e,r){return this.options.comparator?this.options.comparator(e,r):e===r||this.options.ignoreCase&&e.toLowerCase()===r.toLowerCase()},"equals"),removeEmpty:c(function(e){for(var r=[],n=0;n<e.length;n++)e[n]&&r.push(e[n]);return r},"removeEmpty"),castInput:c(function(e){return e},"castInput"),tokenize:c(function(e){return e.split("")},"tokenize"),join:c(function(e){return e.join("")},"join")};function Eu(t,e,r,n,i){for(var o=0,a=e.length,s=0,l=0;o<a;o++){var u=e[o];if(u.removed){if(u.value=t.join(n.slice(l,l+u.count)),l+=u.count,o&&e[o-1].added){var f=e[o-1];e[o-1]=e[o],e[o]=f}}else{if(!u.added&&i){var d=r.slice(s,s+u.count);d=d.map(function(g,S){var y=n[l+S];return y.length>g.length?y:g}),u.value=t.join(d)}else u.value=t.join(r.slice(s,s+u.count));s+=u.count,u.added||(l+=u.count)}}var p=e[a-1];return a>1&&typeof p.value=="string"&&(p.added||p.removed)&&t.equals("",p.value)&&(e[a-2].value+=p.value,e.pop()),e}c(Eu,"buildValues");function Ru(t){return{newPos:t.newPos,components:t.components.slice(0)}}c(Ru,"clonePath");var ai=new mn;function up(t,e,r){return ai.diff(t,e,r)}c(up,"diffChars");function vc(t,e){if(typeof t=="function")e.callback=t;else if(t)for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}c(vc,"generateOptions");var wc=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,yc=/\S/,Ho=new mn;Ho.equals=function(t,e){return this.options.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t===e||this.options.ignoreWhitespace&&!yc.test(t)&&!yc.test(e)},Ho.tokenize=function(t){for(var e=t.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),r=0;r<e.length-1;r++)!e[r+1]&&e[r+2]&&wc.test(e[r])&&wc.test(e[r+2])&&(e[r]+=e[r+2],e.splice(r+1,2),r--);return e};function Va(t,e,r){return r=vc(r,{ignoreWhitespace:!0}),Ho.diff(t,e,r)}c(Va,"diffWords");function dp(t,e,r){return Ho.diff(t,e,r)}c(dp,"diffWordsWithSpace");var Wo=new mn;Wo.tokenize=function(t){var e=[],r=t.split(/(\n|\r\n)/);r[r.length-1]||r.pop();for(var n=0;n<r.length;n++){var i=r[n];n%2&&!this.options.newlineIsToken?e[e.length-1]+=i:(this.options.ignoreWhitespace&&(i=i.trim()),e.push(i))}return e};function In(t,e,r){return Wo.diff(t,e,r)}c(In,"diffLines");function hp(t,e,r){var n=vc(r,{ignoreWhitespace:!0});return Wo.diff(t,e,n)}c(hp,"diffTrimmedLines");var bc=new mn;bc.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};function fp(t,e,r){return bc.diff(t,e,r)}c(fp,"diffSentences");var _c=new mn;_c.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function pp(t,e,r){return _c.diff(t,e,r)}c(pp,"diffCss");function qo(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?qo=c(function(e){return typeof e},"_typeof"):qo=c(function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},"_typeof"),qo(t)}c(qo,"_typeof");function jr(t){return Au(t)||lo(t)||xc(t)||Iu()}c(jr,"_toConsumableArray");function Au(t){if(Array.isArray(t))return zo(t)}c(Au,"_arrayWithoutHoles");function lo(t){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(t))return Array.from(t)}c(lo,"_iterableToArray");function xc(t,e){if(!!t){if(typeof t=="string")return zo(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zo(t,e)}}c(xc,"_unsupportedIterableToArray");function zo(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}c(zo,"_arrayLikeToArray");function Iu(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}c(Iu,"_nonIterableSpread");var Tu=Object.prototype.toString,Mi=new mn;Mi.useLongestToken=!0,Mi.tokenize=Wo.tokenize,Mi.castInput=function(t){var e=this.options,r=e.undefinedReplacement,n=e.stringifyReplacer,i=n===void 0?function(o,a){return typeof a=="undefined"?r:a}:n;return typeof t=="string"?t:JSON.stringify(jo(t,null,null,i),i,"  ")},Mi.equals=function(t,e){return mn.prototype.equals.call(Mi,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"))};function gp(t,e,r){return Mi.diff(t,e,r)}c(gp,"diffJson");function jo(t,e,r,n,i){e=e||[],r=r||[],n&&(t=n(i,t));var o;for(o=0;o<e.length;o+=1)if(e[o]===t)return r[o];var a;if(Tu.call(t)==="[object Array]"){for(e.push(t),a=new Array(t.length),r.push(a),o=0;o<t.length;o+=1)a[o]=jo(t[o],e,r,n,i);return e.pop(),r.pop(),a}if(t&&t.toJSON&&(t=t.toJSON()),qo(t)==="object"&&t!==null){e.push(t),a={},r.push(a);var s=[],l;for(l in t)t.hasOwnProperty(l)&&s.push(l);for(s.sort(),o=0;o<s.length;o+=1)l=s[o],a[l]=jo(t[l],e,r,n,l);e.pop(),r.pop()}else a=t;return a}c(jo,"canonicalize");var Vo=new mn;Vo.tokenize=function(t){return t.slice()},Vo.join=Vo.removeEmpty=function(t){return t};function mp(t,e,r){return Vo.diff(t,e,r)}c(mp,"diffArrays");function $i(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.split(/\r\n|[\n\v\f\r\x85]/),n=t.match(/\r\n|[\n\v\f\r\x85]/g)||[],i=[],o=0;function a(){var u={};for(i.push(u);o<r.length;){var d=r[o];if(/^(\-\-\-|\+\+\+|@@)\s/.test(d))break;var f=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(d);f&&(u.index=f[1]),o++}for(s(u),s(u),u.hunks=[];o<r.length;){var p=r[o];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(p))break;if(/^@@/.test(p))u.hunks.push(l());else{if(p&&e.strict)throw new Error("Unknown line "+(o+1)+" "+JSON.stringify(p));o++}}}c(a,"parseIndex");function s(u){var d=/^(---|\+\+\+)\s+(.*)$/.exec(r[o]);if(d){var f=d[1]==="---"?"old":"new",p=d[2].split("	",2),g=p[0].replace(/\\\\/g,"\\");/^".*"$/.test(g)&&(g=g.substr(1,g.length-2)),u[f+"FileName"]=g,u[f+"Header"]=(p[1]||"").trim(),o++}}c(s,"parseFileHeader");function l(){var u=o,d=r[o++],f=d.split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),p={oldStart:+f[1],oldLines:typeof f[2]=="undefined"?1:+f[2],newStart:+f[3],newLines:typeof f[4]=="undefined"?1:+f[4],lines:[],linedelimiters:[]};p.oldLines===0&&(p.oldStart+=1),p.newLines===0&&(p.newStart+=1);for(var g=0,S=0;o<r.length&&!(r[o].indexOf("--- ")===0&&o+2<r.length&&r[o+1].indexOf("+++ ")===0&&r[o+2].indexOf("@@")===0);o++){var y=r[o].length==0&&o!=r.length-1?" ":r[o][0];if(y==="+"||y==="-"||y===" "||y==="\\")p.lines.push(r[o]),p.linedelimiters.push(n[o]||`
`),y==="+"?g++:y==="-"?S++:y===" "&&(g++,S++);else break}if(!g&&p.newLines===1&&(p.newLines=0),!S&&p.oldLines===1&&(p.oldLines=0),e.strict){if(g!==p.newLines)throw new Error("Added line count did not match for hunk at line "+(u+1));if(S!==p.oldLines)throw new Error("Removed line count did not match for hunk at line "+(u+1))}return p}for(c(l,"parseHunk");o<r.length;)a();return i}c($i,"parsePatch");function Go(t,e,r){var n=!0,i=!1,o=!1,a=1;return c(function s(){if(n&&!o){if(i?a++:n=!1,t+a<=r)return a;o=!0}if(!i)return o||(n=!0),e<=t-a?-a++:(i=!0,s())},"iterator")}c(Go,"distanceIterator");function si(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string"&&(e=$i(e)),Array.isArray(e)){if(e.length>1)throw new Error("applyPatch only works with a single input.");e=e[0]}var n=t.split(/\r\n|[\n\v\f\r\x85]/),i=t.match(/\r\n|[\n\v\f\r\x85]/g)||[],o=e.hunks,a=r.compareLine||function(Se,Ne,Fe,Je){return Ne===Je},s=0,l=r.fuzzFactor||0,u=0,d=0,f,p;function g(Se,Ne){for(var Fe=0;Fe<Se.lines.length;Fe++){var Je=Se.lines[Fe],it=Je.length>0?Je[0]:" ",ht=Je.length>0?Je.substr(1):Je;if(it===" "||it==="-"){if(!a(Ne+1,n[Ne],it,ht)&&(s++,s>l))return!1;Ne++}}return!0}c(g,"hunkFits");for(var S=0;S<o.length;S++){for(var y=o[S],b=n.length-y.oldLines,_=0,C=d+y.oldStart-1,k=Go(C,u,b);_!==void 0;_=k())if(g(y,C+_)){y.offset=d+=_;break}if(_===void 0)return!1;u=y.offset+y.oldStart+y.oldLines}for(var F=0,$=0;$<o.length;$++){var ne=o[$],ie=ne.oldStart+ne.offset+F-1;F+=ne.newLines-ne.oldLines;for(var Q=0;Q<ne.lines.length;Q++){var me=ne.lines[Q],se=me.length>0?me[0]:" ",fe=me.length>0?me.substr(1):me,xe=ne.linedelimiters[Q];if(se===" ")ie++;else if(se==="-")n.splice(ie,1),i.splice(ie,1);else if(se==="+")n.splice(ie,0,fe),i.splice(ie,0,xe),ie++;else if(se==="\\"){var Ge=ne.lines[Q-1]?ne.lines[Q-1][0]:null;Ge==="+"?f=!0:Ge==="-"&&(p=!0)}}}if(f)for(;!n[n.length-1];)n.pop(),i.pop();else p&&(n.push(""),i.push(`
`));for(var ce=0;ce<n.length-1;ce++)n[ce]=n[ce]+i[ce];return n.join("")}c(si,"applyPatch");function vp(t,e){typeof t=="string"&&(t=$i(t));var r=0;function n(){var i=t[r++];if(!i)return e.complete();e.loadFile(i,function(o,a){if(o)return e.complete(o);var s=si(a,i,e);e.patched(i,s,function(l){if(l)return e.complete(l);n()})})}c(n,"processIndex"),n()}c(vp,"applyPatches");function Sc(t,e,r,n,i,o,a){a||(a={}),typeof a.context=="undefined"&&(a.context=4);var s=In(r,n,a);s.push({value:"",lines:[]});function l(_){return _.map(function(C){return" "+C})}c(l,"contextLines");for(var u=[],d=0,f=0,p=[],g=1,S=1,y=c(function(C){var k=s[C],F=k.lines||k.value.replace(/\n$/,"").split(`
`);if(k.lines=F,k.added||k.removed){var $;if(!d){var ne=s[C-1];d=g,f=S,ne&&(p=a.context>0?l(ne.lines.slice(-a.context)):[],d-=p.length,f-=p.length)}($=p).push.apply($,jr(F.map(function(ce){return(k.added?"+":"-")+ce}))),k.added?S+=F.length:g+=F.length}else{if(d)if(F.length<=a.context*2&&C<s.length-2){var ie;(ie=p).push.apply(ie,jr(l(F)))}else{var Q,me=Math.min(F.length,a.context);(Q=p).push.apply(Q,jr(l(F.slice(0,me))));var se={oldStart:d,oldLines:g-d+me,newStart:f,newLines:S-f+me,lines:p};if(C>=s.length-2&&F.length<=a.context){var fe=/\n$/.test(r),xe=/\n$/.test(n),Ge=F.length==0&&p.length>se.oldLines;!fe&&Ge&&r.length>0&&p.splice(se.oldLines,0,"\\ No newline at end of file"),(!fe&&!Ge||!xe)&&p.push("\\ No newline at end of file")}u.push(se),d=0,f=0,p=[]}g+=F.length,S+=F.length}},"_loop"),b=0;b<s.length;b++)y(b);return{oldFileName:t,newFileName:e,oldHeader:i,newHeader:o,hunks:u}}c(Sc,"structuredPatch");function Tn(t){var e=[];t.oldFileName==t.newFileName&&e.push("Index: "+t.oldFileName),e.push("==================================================================="),e.push("--- "+t.oldFileName+(typeof t.oldHeader=="undefined"?"":"	"+t.oldHeader)),e.push("+++ "+t.newFileName+(typeof t.newHeader=="undefined"?"":"	"+t.newHeader));for(var r=0;r<t.hunks.length;r++){var n=t.hunks[r];n.oldLines===0&&(n.oldStart-=1),n.newLines===0&&(n.newStart-=1),e.push("@@ -"+n.oldStart+","+n.oldLines+" +"+n.newStart+","+n.newLines+" @@"),e.push.apply(e,n.lines)}return e.join(`
`)+`
`}c(Tn,"formatPatch");function ku(t,e,r,n,i,o,a){return Tn(Sc(t,e,r,n,i,o,a))}c(ku,"createTwoFilesPatch");function Du(t,e,r,n,i,o){return ku(t,t,e,r,n,i,o)}c(Du,"createPatch");function Fu(t,e){return t.length!==e.length?!1:Ga(t,e)}c(Fu,"arrayEqual");function Ga(t,e){if(e.length>t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}c(Ga,"arrayStartsWith");function Pu(t){var e=te(t.lines),r=e.oldLines,n=e.newLines;r!==void 0?t.oldLines=r:delete t.oldLines,n!==void 0?t.newLines=n:delete t.newLines}c(Pu,"calcLineCount");function Li(t,e,r){t=Ka(t,r),e=Ka(e,r);var n={};(t.index||e.index)&&(n.index=t.index||e.index),(t.newFileName||e.newFileName)&&(Cc(t)?Cc(e)?(n.oldFileName=ci(n,t.oldFileName,e.oldFileName),n.newFileName=ci(n,t.newFileName,e.newFileName),n.oldHeader=ci(n,t.oldHeader,e.oldHeader),n.newHeader=ci(n,t.newHeader,e.newHeader)):(n.oldFileName=t.oldFileName,n.newFileName=t.newFileName,n.oldHeader=t.oldHeader,n.newHeader=t.newHeader):(n.oldFileName=e.oldFileName||t.oldFileName,n.newFileName=e.newFileName||t.newFileName,n.oldHeader=e.oldHeader||t.oldHeader,n.newHeader=e.newHeader||t.newHeader)),n.hunks=[];for(var i=0,o=0,a=0,s=0;i<t.hunks.length||o<e.hunks.length;){var l=t.hunks[i]||{oldStart:1/0},u=e.hunks[o]||{oldStart:1/0};if(Ec(l,u))n.hunks.push(Ko(l,a)),i++,s+=l.newLines-l.oldLines;else if(Ec(u,l))n.hunks.push(Ko(u,s)),o++,a+=u.newLines-u.oldLines;else{var d={oldStart:Math.min(l.oldStart,u.oldStart),oldLines:0,newStart:Math.min(l.newStart+a,u.oldStart+s),newLines:0,lines:[]};Nu(d,l.oldStart,l.lines,u.oldStart,u.lines),o++,i++,n.hunks.push(d)}}return n}c(Li,"merge");function Ka(t,e){if(typeof t=="string"){if(/^@@/m.test(t)||/^Index:/m.test(t))return $i(t)[0];if(!e)throw new Error("Must provide a base reference or pass in a patch");return Sc(void 0,void 0,e,t)}return t}c(Ka,"loadPatch");function Cc(t){return t.newFileName&&t.newFileName!==t.oldFileName}c(Cc,"fileNameChanged");function ci(t,e,r){return e===r?e:(t.conflict=!0,{mine:e,theirs:r})}c(ci,"selectField");function Ec(t,e){return t.oldStart<e.oldStart&&t.oldStart+t.oldLines<e.oldStart}c(Ec,"hunkBefore");function Ko(t,e){return{oldStart:t.oldStart,oldLines:t.oldLines,newStart:t.newStart+e,newLines:t.newLines,lines:t.lines}}c(Ko,"cloneHunk");function Nu(t,e,r,n,i){var o={offset:e,lines:r,index:0},a={offset:n,lines:i,index:0};for(Bi(t,o,a),Bi(t,a,o);o.index<o.lines.length&&a.index<a.lines.length;){var s=o.lines[o.index],l=a.lines[a.index];if((s[0]==="-"||s[0]==="+")&&(l[0]==="-"||l[0]==="+"))Rc(t,o,a);else if(s[0]==="+"&&l[0]===" "){var u;(u=t.lines).push.apply(u,jr(li(o)))}else if(l[0]==="+"&&s[0]===" "){var d;(d=t.lines).push.apply(d,jr(li(a)))}else s[0]==="-"&&l[0]===" "?Za(t,o,a):l[0]==="-"&&s[0]===" "?Za(t,a,o,!0):s===l?(t.lines.push(s),o.index++,a.index++):Zo(t,li(o),li(a))}Qa(t,o),Qa(t,a),Pu(t)}c(Nu,"mergeLines");function Rc(t,e,r){var n=li(e),i=li(r);if(Ac(n)&&Ac(i)){if(Ga(n,i)&&L(r,n,n.length-i.length)){var o;(o=t.lines).push.apply(o,jr(n));return}else if(Ga(i,n)&&L(e,i,i.length-n.length)){var a;(a=t.lines).push.apply(a,jr(i));return}}else if(Fu(n,i)){var s;(s=t.lines).push.apply(s,jr(n));return}Zo(t,n,i)}c(Rc,"mutualChange");function Za(t,e,r,n){var i=li(e),o=Mu(r,i);if(o.merged){var a;(a=t.lines).push.apply(a,jr(o.merged))}else Zo(t,n?o:i,n?i:o)}c(Za,"removal");function Zo(t,e,r){t.conflict=!0,t.lines.push({conflict:!0,mine:e,theirs:r})}c(Zo,"conflict");function Bi(t,e,r){for(;e.offset<r.offset&&e.index<e.lines.length;){var n=e.lines[e.index++];t.lines.push(n),e.offset++}}c(Bi,"insertLeading");function Qa(t,e){for(;e.index<e.lines.length;){var r=e.lines[e.index++];t.lines.push(r)}}c(Qa,"insertTrailing");function li(t){for(var e=[],r=t.lines[t.index][0];t.index<t.lines.length;){var n=t.lines[t.index];if(r==="-"&&n[0]==="+"&&(r="+"),r===n[0])e.push(n),t.index++;else break}return e}c(li,"collectChange");function Mu(t,e){for(var r=[],n=[],i=0,o=!1,a=!1;i<e.length&&t.index<t.lines.length;){var s=t.lines[t.index],l=e[i];if(l[0]==="+")break;if(o=o||s[0]!==" ",n.push(l),i++,s[0]==="+")for(a=!0;s[0]==="+";)r.push(s),s=t.lines[++t.index];l.substr(1)===s.substr(1)?(r.push(s),t.index++):a=!0}if((e[i]||"")[0]==="+"&&o&&(a=!0),a)return r;for(;i<e.length;)n.push(e[i++]);return{merged:n,changes:r}}c(Mu,"collectContext");function Ac(t){return t.reduce(function(e,r){return e&&r[0]==="-"},!0)}c(Ac,"allRemoves");function L(t,e,r){for(var n=0;n<r;n++){var i=e[e.length-r+n].substr(1);if(t.lines[t.index+n]!==" "+i)return!1}return t.index+=r,!0}c(L,"skipRemoveSuperset");function te(t){var e=0,r=0;return t.forEach(function(n){if(typeof n!="string"){var i=te(n.mine),o=te(n.theirs);e!==void 0&&(i.oldLines===o.oldLines?e+=i.oldLines:e=void 0),r!==void 0&&(i.newLines===o.newLines?r+=i.newLines:r=void 0)}else r!==void 0&&(n[0]==="+"||n[0]===" ")&&r++,e!==void 0&&(n[0]==="-"||n[0]===" ")&&e++}),{oldLines:e,newLines:r}}c(te,"calcOldNewLineCount");function Ee(t){for(var e=[],r,n,i=0;i<t.length;i++)r=t[i],r.added?n=1:r.removed?n=-1:n=0,e.push([n,r.value]);return e}c(Ee,"convertChangesToDMP");function Qe(t){for(var e=[],r=0;r<t.length;r++){var n=t[r];n.added?e.push("<ins>"):n.removed&&e.push("<del>"),e.push(Ht(n.value)),n.added?e.push("</ins>"):n.removed&&e.push("</del>")}return e.join("")}c(Qe,"convertChangesToXML");function Ht(t){var e=t;return e=e.replace(/&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/"/g,"&quot;"),e}c(Ht,"escapeHTML");var pt=/[^a-zA-Z0-9]/,Gt=/\s/,nr=/[\r\n]/,lr=/\n\r?\n$/,Kt=/^\r?\n\r?\n/,Ce;(function(t){t[t.DIFF_DELETE=-1]="DIFF_DELETE",t[t.DIFF_INSERT=1]="DIFF_INSERT",t[t.DIFF_EQUAL=0]="DIFF_EQUAL"})(Ce||(Ce={}));function Xr(t,e){return t<e?t:e}c(Xr,"min");function vr(t,e){return t>e?t:e}c(vr,"max");var Wt=ee,wr=function(){function t(){this.diffs=[],this.start1=0,this.start2=0,this.length1=0,this.length2=0}return c(t,"PatchObject"),t.prototype.toString=function(){var e,r;this.length1===0?e=this.start1+",0":this.length1===1?e=this.start1+1:e=this.start1+1+","+this.length1,this.length2===0?r=this.start2+",0":this.length2===1?r=this.start2+1:r=this.start2+1+","+this.length2;for(var n=["@@ -"+e+" +"+r+` @@
`],i,o=0;o<this.diffs.length;o++){switch(this.diffs[o][0]){case Ce.DIFF_INSERT:i="+";break;case Ce.DIFF_DELETE:i="-";break;case Ce.DIFF_EQUAL:i=" ";break}n[o+1]=i+encodeURI(this.diffs[o][1])+`
`}return n.join("").replace(/%20/g," ")},t}(),kn=function(){function t(){this.diffTimeout=1,this.diffEditCost=4,this.matchThreshold=.5,this.matchDistance=1e3,this.patchDeleteThreshold=.5,this.patchMargin=4,this.matchMaxBits=32}return c(t,"DiffMatchPatch"),t.prototype.diff_main=function(e,r,n,i){typeof i=="undefined"&&(this.diffTimeout<=0?i=Number.MAX_VALUE:i=Date.now()+this.diffTimeout*1e3);var o=i;if(e==null||r==null)throw new Error("Null input. (diff_main)");if(e===r)return e?[[Ce.DIFF_EQUAL,e]]:[];typeof n=="undefined"&&(n=!0);var a=n,s=this.diff_commonPrefix(e,r),l=e.substring(0,s);e=e.substring(s),r=r.substring(s),s=this.diff_commonSuffix(e,r);var u=e.substring(e.length-s);e=e.substring(0,e.length-s),r=r.substring(0,r.length-s);var d=this.diff_compute_(e,r,a,o);return l&&d.unshift([Ce.DIFF_EQUAL,l]),u&&d.push([Ce.DIFF_EQUAL,u]),this.diff_cleanupMerge(d),d},t.prototype.diff_commonPrefix=function(e,r){if(!e||!r||e.charAt(0)!==r.charAt(0))return 0;for(var n=0,i=Wt.min(e.length,r.length),o=i,a=0;n<o;)e.substring(a,o)===r.substring(a,o)?(n=o,a=n):i=o,o=Math.floor((i-n)/2+n);return o},t.prototype.diff_commonSuffix=function(e,r){if(!e||!r||e.charAt(e.length-1)!==r.charAt(r.length-1))return 0;for(var n=0,i=Wt.min(e.length,r.length),o=i,a=0;n<o;)e.substring(e.length-o,e.length-a)===r.substring(r.length-o,r.length-a)?(n=o,a=n):i=o,o=Math.floor((i-n)/2+n);return o},t.prototype.diff_cleanupSemantic=function(e){for(var r=!1,n=[],i=0,o=null,a=0,s=0,l=0,u=0,d=0;a<e.length;)e[a][0]===Ce.DIFF_EQUAL?(n[i++]=a,s=u,l=d,u=0,d=0,o=e[a][1]):(e[a][0]===Ce.DIFF_INSERT?u+=e[a][1].length:d+=e[a][1].length,o&&o.length<=Wt.max(s,l)&&o.length<=Wt.max(u,d)&&(e.splice(n[i-1],0,[Ce.DIFF_DELETE,o]),e[n[i-1]+1][0]=Ce.DIFF_INSERT,i--,i--,a=i>0?n[i-1]:-1,s=0,l=0,u=0,d=0,o=null,r=!0)),a++;for(r&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),a=1;a<e.length;){if(e[a-1][0]===Ce.DIFF_DELETE&&e[a][0]===Ce.DIFF_INSERT){var f=e[a-1][1],p=e[a][1],g=this.diff_commonOverlap_(f,p),S=this.diff_commonOverlap_(p,f);g>=S?(g>=f.length/2||g>=p.length/2)&&(e.splice(a,0,[Ce.DIFF_EQUAL,p.substring(0,g)]),e[a-1][1]=f.substring(0,f.length-g),e[a+1][1]=p.substring(g),a++):(S>=f.length/2||S>=p.length/2)&&(e.splice(a,0,[Ce.DIFF_EQUAL,f.substring(0,S)]),e[a-1][0]=Ce.DIFF_INSERT,e[a-1][1]=p.substring(0,p.length-S),e[a+1][0]=Ce.DIFF_DELETE,e[a+1][1]=f.substring(S),a++),a++}a++}},t.prototype.diff_cleanupSemanticLossless=function(e){for(var r=1;r<e.length-1;){if(e[r-1][0]===Ce.DIFF_EQUAL&&e[r+1][0]===Ce.DIFF_EQUAL){var n=e[r-1][1],i=e[r][1],o=e[r+1][1],a=this.diff_commonSuffix(n,i);if(a){var s=i.substring(i.length-a);n=n.substring(0,n.length-a),i=s+i.substring(0,i.length-a),o=s+o}for(var l=n,u=i,d=o,f=this.diff_cleanupSemanticScore_(n,i)+this.diff_cleanupSemanticScore_(i,o);i.charAt(0)===o.charAt(0);){n+=i.charAt(0),i=i.substring(1)+o.charAt(0),o=o.substring(1);var p=this.diff_cleanupSemanticScore_(n,i)+this.diff_cleanupSemanticScore_(i,o);p>=f&&(f=p,l=n,u=i,d=o)}e[r-1][1]!==l&&(l?e[r-1][1]=l:(e.splice(r-1,1),r--),e[r][1]=u,d?e[r+1][1]=d:(e.splice(r+1,1),r--))}r++}},t.prototype.diff_cleanupEfficiency=function(e){for(var r=!1,n=[],i=0,o=null,a=0,s=!1,l=!1,u=!1,d=!1;a<e.length;)e[a][0]===Ce.DIFF_EQUAL?(e[a][1].length<this.diffEditCost&&(u||d)?(n[i++]=a,s=u,l=d,o=e[a][1]):(i=0,o=null),u=d=!1):(e[a][0]===Ce.DIFF_DELETE?d=!0:u=!0,o&&(s&&l&&u&&d||o.length<this.diffEditCost/2&&Number(s)+Number(l)+Number(u)+Number(d)===3)&&(e.splice(n[i-1],0,[Ce.DIFF_DELETE,o]),e[n[i-1]+1][0]=Ce.DIFF_INSERT,i--,o=null,s&&l?(u=d=!0,i=0):(i--,a=i>0?n[i-1]:-1,u=d=!1),r=!0)),a++;r&&this.diff_cleanupMerge(e)},t.prototype.diff_cleanupMerge=function(e){e.push([Ce.DIFF_EQUAL,""]);for(var r=0,n=0,i=0,o="",a="",s;r<e.length;)switch(e[r][0]){case Ce.DIFF_INSERT:i++,a+=e[r][1],r++;break;case Ce.DIFF_DELETE:n++,o+=e[r][1],r++;break;case Ce.DIFF_EQUAL:n+i>1?(n!==0&&i!==0&&(s=this.diff_commonPrefix(a,o),s!==0&&(r-n-i>0&&e[r-n-i-1][0]===Ce.DIFF_EQUAL?e[r-n-i-1][1]+=a.substring(0,s):(e.splice(0,0,[Ce.DIFF_EQUAL,a.substring(0,s)]),r++),a=a.substring(s),o=o.substring(s)),s=this.diff_commonSuffix(a,o),s!==0&&(e[r][1]=a.substring(a.length-s)+e[r][1],a=a.substring(0,a.length-s),o=o.substring(0,o.length-s))),r-=n+i,e.splice(r,n+i),o.length&&(e.splice(r,0,[Ce.DIFF_DELETE,o]),r++),a.length&&(e.splice(r,0,[Ce.DIFF_INSERT,a]),r++),r++):r!==0&&e[r-1][0]===Ce.DIFF_EQUAL?(e[r-1][1]+=e[r][1],e.splice(r,1)):r++,i=0,n=0,o="",a="";break}e[e.length-1][1]===""&&e.pop();var l=!1;for(r=1;r<e.length-1;)e[r-1][0]===Ce.DIFF_EQUAL&&e[r+1][0]===Ce.DIFF_EQUAL&&(e[r][1].substring(e[r][1].length-e[r-1][1].length)===e[r-1][1]?(e[r][1]=e[r-1][1]+e[r][1].substring(0,e[r][1].length-e[r-1][1].length),e[r+1][1]=e[r-1][1]+e[r+1][1],e.splice(r-1,1),l=!0):e[r][1].substring(0,e[r+1][1].length)===e[r+1][1]&&(e[r-1][1]+=e[r+1][1],e[r][1]=e[r][1].substring(e[r+1][1].length)+e[r+1][1],e.splice(r+1,1),l=!0)),r++;l&&this.diff_cleanupMerge(e)},t.prototype.diff_xIndex=function(e,r){var n=0,i=0,o=0,a=0,s;for(s=0;s<e.length&&(e[s][0]!==Ce.DIFF_INSERT&&(n+=e[s][1].length),e[s][0]!==Ce.DIFF_DELETE&&(i+=e[s][1].length),!(n>r));s++)o=n,a=i;return e.length!==s&&e[s][0]===Ce.DIFF_DELETE?a:a+(r-o)},t.prototype.diff_prettyHtml=function(e){for(var r=[],n=/&/g,i=/</g,o=/>/g,a=/\n/g,s=0;s<e.length;s++){var l=e[s][0],u=e[s][1],d=u.replace(n,"&amp;").replace(i,"&lt;").replace(o,"&gt;").replace(a,"&para;<br>");switch(l){case Ce.DIFF_INSERT:r[s]='<ins style="background:#e6ffe6;">'+d+"</ins>";break;case Ce.DIFF_DELETE:r[s]='<del style="background:#ffe6e6;">'+d+"</del>";break;case Ce.DIFF_EQUAL:r[s]="<span>"+d+"</span>";break}}return r.join("")},t.prototype.diff_text1=function(e){for(var r=[],n=0;n<e.length;n++)e[n][0]!==Ce.DIFF_INSERT&&(r[n]=e[n][1]);return r.join("")},t.prototype.diff_text2=function(e){for(var r=[],n=0;n<e.length;n++)e[n][0]!==Ce.DIFF_DELETE&&(r[n]=e[n][1]);return r.join("")},t.prototype.diff_levenshtein=function(e){for(var r=0,n=0,i=0,o=0;o<e.length;o++){var a=e[o][0],s=e[o][1];switch(a){case Ce.DIFF_INSERT:n+=s.length;break;case Ce.DIFF_DELETE:i+=s.length;break;case Ce.DIFF_EQUAL:r+=Wt.max(n,i),n=0,i=0;break}}return r+=Wt.max(n,i),r},t.prototype.diff_toDelta=function(e){for(var r=[],n=0;n<e.length;n++)switch(e[n][0]){case Ce.DIFF_INSERT:r[n]="+"+encodeURI(e[n][1]);break;case Ce.DIFF_DELETE:r[n]="-"+e[n][1].length;break;case Ce.DIFF_EQUAL:r[n]="="+e[n][1].length;break}return r.join("	").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(e,r){for(var n=[],i=0,o=0,a=r.split(/\t/g),s=0;s<a.length;s++){var l=a[s].substring(1);switch(a[s].charAt(0)){case"+":try{n[i++]=[Ce.DIFF_INSERT,decodeURI(l)]}catch(f){throw new Error("Illegal escape in diff_fromDelta: "+l)}break;case"-":case"=":var u=parseInt(l,10);if(isNaN(u)||u<0)throw new Error("Invalid number in diff_fromDelta: "+l);var d=e.substring(o,o+=u);a[s].charAt(0)==="="?n[i++]=[Ce.DIFF_EQUAL,d]:n[i++]=[Ce.DIFF_DELETE,d];break;default:if(a[s])throw new Error("Invalid diff operation in diff_fromDelta: "+a[s])}}if(o!==e.length)throw new Error("Delta length ("+o+") does not equal source text length ("+e.length+")");return n},t.prototype.diff_linesToChars=function(e,r){var n=[],i={};n[0]="";var o=this.diff_linesToCharsMunge_(e,n,i,4e4),a=this.diff_linesToCharsMunge_(r,n,i,65535);return{chars1:o,chars2:a,lineArray:n}},t.prototype.diff_charsToLines=function(e,r){for(var n=0;n<e.length;n++){for(var i=e[n][1],o=[],a=0;a<i.length;a++)o[a]=r[i.charCodeAt(a)];e[n][1]=o.join("")}},t.prototype.match_main=function(e,r,n){if(e==null||r==null||n==null)throw new Error("Null input. (match_main)");return n=Wt.max(0,Wt.min(n,e.length)),e===r?0:e.length?e.substring(n,n+r.length)===r?n:this.match_bitap_(e,r,n):-1},t.prototype.patch_make=function(e,r,n){var i,o;if(typeof e=="string"&&typeof r=="string"&&typeof n=="undefined")i=e,o=this.diff_main(i,r,!0),o.length>2&&(this.diff_cleanupSemantic(o),this.diff_cleanupEfficiency(o));else if(e&&typeof e=="object"&&typeof r=="undefined"&&typeof n=="undefined")o=e,i=this.diff_text1(o);else if(typeof e=="string"&&r&&typeof r=="object"&&typeof n=="undefined")i=e,o=r;else if(typeof e=="string"&&typeof r=="string"&&n&&typeof n=="object")i=e,o=n;else throw new Error("Unknown call format to patch_make");if(o.length===0)return[];for(var a=[],s=new wr,l=0,u=0,d=0,f=i,p=i,g=0;g<o.length;g++){var S=o[g][0],y=o[g][1];switch(!l&&S!==Ce.DIFF_EQUAL&&(s.start1=u,s.start2=d),S){case Ce.DIFF_INSERT:s.diffs[l++]=o[g],s.length2+=y.length,p=p.substring(0,d)+y+p.substring(d);break;case Ce.DIFF_DELETE:s.length1+=y.length,s.diffs[l++]=o[g],p=p.substring(0,d)+p.substring(d+y.length);break;case Ce.DIFF_EQUAL:y.length<=2*this.patchMargin&&l&&o.length!==g+1?(s.diffs[l++]=o[g],s.length1+=y.length,s.length2+=y.length):y.length>=2*this.patchMargin&&l&&(this.patch_addContext_(s,f),a.push(s),s=new wr,l=0,f=p,u=d);break}S!==Ce.DIFF_INSERT&&(u+=y.length),S!==Ce.DIFF_DELETE&&(d+=y.length)}return l&&(this.patch_addContext_(s,f),a.push(s)),a},t.prototype.patch_deepCopy=function(e){for(var r=[],n=0;n<e.length;n++){for(var i=e[n],o=new wr,a=0;a<i.diffs.length;a++)o.diffs[a]=[i.diffs[a][0],i.diffs[a][1]];o.start1=i.start1,o.start2=i.start2,o.length1=i.length1,o.length2=i.length2,r[n]=o}return r},t.prototype.patch_apply=function(e,r){if(e.length===0)return[r,[]];e=this.patch_deepCopy(e);var n=this.patch_addPadding(e);r=n+r+n,this.patch_splitMax(e);for(var i=0,o=[],a=0;a<e.length;a++){var s=e[a].start2+i,l=this.diff_text1(e[a].diffs),u=void 0,d=-1;if(l.length>this.matchMaxBits?(u=this.match_main(r,l.substring(0,this.matchMaxBits),s),u!==-1&&(d=this.match_main(r,l.substring(l.length-this.matchMaxBits),s+l.length-this.matchMaxBits),(d===-1||u>=d)&&(u=-1))):u=this.match_main(r,l,s),u===-1)o[a]=!1,i-=e[a].length2-e[a].length1;else{o[a]=!0,i=u-s;var f=void 0;if(d===-1?f=r.substring(u,u+l.length):f=r.substring(u,d+this.matchMaxBits),l===f)r=r.substring(0,u)+this.diff_text2(e[a].diffs)+r.substring(u+l.length);else{var p=this.diff_main(l,f,!1);if(l.length>this.matchMaxBits&&this.diff_levenshtein(p)/l.length>this.patchDeleteThreshold)o[a]=!1;else{this.diff_cleanupSemanticLossless(p);for(var g=0,S=0,y=0;y<e[a].diffs.length;y++){var b=e[a].diffs[y];b[0]!==Ce.DIFF_EQUAL&&(S=this.diff_xIndex(p,g)),b[0]===Ce.DIFF_INSERT?r=r.substring(0,u+S)+b[1]+r.substring(u+S):b[0]===Ce.DIFF_DELETE&&(r=r.substring(0,u+S)+r.substring(u+this.diff_xIndex(p,g+b[1].length))),b[0]!==Ce.DIFF_DELETE&&(g+=b[1].length)}}}}}return r=r.substring(n.length,r.length-n.length),[r,o]},t.prototype.patch_addPadding=function(e){for(var r=this.patchMargin,n="",i=1;i<=r;i++)n+=String.fromCharCode(i);for(var i=0;i<e.length;i++)e[i].start1+=r,e[i].start2+=r;var o=e[0],a=o.diffs;if(a.length===0||a[0][0]!==Ce.DIFF_EQUAL)a.unshift([Ce.DIFF_EQUAL,n]),o.start1-=r,o.start2-=r,o.length1+=r,o.length2+=r;else if(r>a[0][1].length){var s=r-a[0][1].length;a[0][1]=n.substring(a[0][1].length)+a[0][1],o.start1-=s,o.start2-=s,o.length1+=s,o.length2+=s}if(o=e[e.length-1],a=o.diffs,a.length===0||a[a.length-1][0]!==Ce.DIFF_EQUAL)a.push([Ce.DIFF_EQUAL,n]),o.length1+=r,o.length2+=r;else if(r>a[a.length-1][1].length){var s=r-a[a.length-1][1].length;a[a.length-1][1]+=n.substring(0,s),o.length1+=s,o.length2+=s}return n},t.prototype.patch_splitMax=function(e){for(var r=this.matchMaxBits,n=0;n<e.length;n++)if(!(e[n].length1<=r)){var i=e[n];e.splice(n--,1);for(var o=i.start1,a=i.start2,s="";i.diffs.length!==0;){var l=new wr,u=!0;for(l.start1=o-s.length,l.start2=a-s.length,s!==""&&(l.length1=l.length2=s.length,l.diffs.push([Ce.DIFF_EQUAL,s]));i.diffs.length!==0&&l.length1<r-this.patchMargin;){var d=i.diffs[0][0],f=i.diffs[0][1];d===Ce.DIFF_INSERT?(l.length2+=f.length,a+=f.length,l.diffs.push(i.diffs.shift()),u=!1):d===Ce.DIFF_DELETE&&l.diffs.length===1&&l.diffs[0][0]===Ce.DIFF_EQUAL&&f.length>2*r?(l.length1+=f.length,o+=f.length,u=!1,l.diffs.push([d,f]),i.diffs.shift()):(f=f.substring(0,r-l.length1-this.patchMargin),l.length1+=f.length,o+=f.length,d===Ce.DIFF_EQUAL?(l.length2+=f.length,a+=f.length):u=!1,l.diffs.push([d,f]),f===i.diffs[0][1]?i.diffs.shift():i.diffs[0][1]=i.diffs[0][1].substring(f.length))}s=this.diff_text2(l.diffs),s=s.substring(s.length-this.patchMargin);var p=this.diff_text1(i.diffs).substring(0,this.patchMargin);p!==""&&(l.length1+=p.length,l.length2+=p.length,l.diffs.length!==0&&l.diffs[l.diffs.length-1][0]===Ce.DIFF_EQUAL?l.diffs[l.diffs.length-1][1]+=p:l.diffs.push([Ce.DIFF_EQUAL,p])),u||e.splice(++n,0,l)}}},t.prototype.patch_toText=function(e){for(var r=[],n=0;n<e.length;n++)r[n]=e[n];return r.join("")},t.prototype.patch_fromText=function(e){var r=[];if(!e)return r;for(var n=e.split(`
`),i=0,o=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;i<n.length;){var a=n[i].match(o);if(!a)throw new Error("Invalid patch string: "+n[i]);var s=new wr;r.push(s),s.start1=parseInt(a[1],10),a[2]===""?(s.start1--,s.length1=1):a[2]==="0"?s.length1=0:(s.start1--,s.length1=parseInt(a[2],10)),s.start2=parseInt(a[3],10),a[4]===""?(s.start2--,s.length2=1):a[4]==="0"?s.length2=0:(s.start2--,s.length2=parseInt(a[4],10)),i++;for(var l=void 0,u=void 0,d=void 0;i<n.length;){l=n[i].charAt(0),d=n[i].substring(1);try{u=decodeURI(d)}catch(f){throw new Error("Illegal escape in patch_fromText: "+d)}if(l==="-")s.diffs.push([Ce.DIFF_DELETE,u]);else if(l==="+")s.diffs.push([Ce.DIFF_INSERT,u]);else if(l===" ")s.diffs.push([Ce.DIFF_EQUAL,u]);else{if(l==="@")break;if(l!=="")throw new Error('Invalid patch mode "'+l+'" in: '+u)}i++}}return r},t.prototype.diff_compute_=function(e,r,n,i){var o;if(!e)return[[Ce.DIFF_INSERT,r]];if(!r)return[[Ce.DIFF_DELETE,e]];var a=e.length>r.length?e:r,s=e.length>r.length?r:e,l=a.indexOf(s);if(l!==-1)return o=[[Ce.DIFF_INSERT,a.substring(0,l)],[Ce.DIFF_EQUAL,s],[Ce.DIFF_INSERT,a.substring(l+s.length)]],e.length>r.length&&(o[0][0]=Ce.DIFF_DELETE,o[2][0]=Ce.DIFF_DELETE),o;if(s.length===1)return[[Ce.DIFF_DELETE,e],[Ce.DIFF_INSERT,r]];var u=this.diff_halfMatch_(e,r);if(u){var d=u[0],f=u[1],p=u[2],g=u[3],S=u[4],y=this.diff_main(d,p,n,i),b=this.diff_main(f,g,n,i);return y.concat([[Ce.DIFF_EQUAL,S]],b)}return n&&e.length>100&&r.length>100?this.diff_lineMode_(e,r,i):this.diff_bisect_(e,r,i)},t.prototype.diff_lineMode_=function(e,r,n){var i=this.diff_linesToChars(e,r);e=i.chars1,r=i.chars2;var o=i.lineArray,a=this.diff_main(e,r,!1,n);this.diff_charsToLines(a,o),this.diff_cleanupSemantic(a),a.push([Ce.DIFF_EQUAL,""]);for(var s=0,l=0,u=0,d="",f="";s<a.length;){switch(a[s][0]){case Ce.DIFF_INSERT:u++,f+=a[s][1];break;case Ce.DIFF_DELETE:l++,d+=a[s][1];break;case Ce.DIFF_EQUAL:if(l>=1&&u>=1){a.splice(s-l-u,l+u),s=s-l-u;for(var p=this.diff_main(d,f,!1,n),g=p.length-1;g>=0;g--)a.splice(s,0,p[g]);s=s+p.length}u=0,l=0,d="",f="";break}s++}return a.pop(),a},t.prototype.diff_bisect_=function(e,r,n){for(var i=e.length,o=r.length,a=Math.ceil((i+o)/2),s=a,l=2*a,u=new Array(l),d=new Array(l),f=0;f<l;f++)u[f]=-1,d[f]=-1;u[s+1]=0,d[s+1]=0;for(var p=i-o,g=p%2!=0,S=0,y=0,b=0,_=0,C=0;C<a&&!(Date.now()>n);C++){for(var k=-C+S;k<=C-y;k+=2){var F=s+k,$=void 0;k===-C||k!==C&&u[F-1]<u[F+1]?$=u[F+1]:$=u[F-1]+1;for(var ne=$-k;$<i&&ne<o&&e.charAt($)===r.charAt(ne);)$++,ne++;if(u[F]=$,$>i)y+=2;else if(ne>o)S+=2;else if(g){var ie=s+p-k;if(ie>=0&&ie<l&&d[ie]!==-1){var Q=i-d[ie];if($>=Q)return this.diff_bisectSplit_(e,r,$,ne,n)}}}for(var me=-C+b;me<=C-_;me+=2){var ie=s+me,Q=void 0;me===-C||me!==C&&d[ie-1]<d[ie+1]?Q=d[ie+1]:Q=d[ie-1]+1;for(var se=Q-me;Q<i&&se<o&&e.charAt(i-Q-1)===r.charAt(o-se-1);)Q++,se++;if(d[ie]=Q,Q>i)_+=2;else if(se>o)b+=2;else if(!g){var F=s+p-me;if(F>=0&&F<l&&u[F]!==-1){var $=u[F],ne=s+$-F;if(Q=i-Q,$>=Q)return this.diff_bisectSplit_(e,r,$,ne,n)}}}}return[[Ce.DIFF_DELETE,e],[Ce.DIFF_INSERT,r]]},t.prototype.diff_bisectSplit_=function(e,r,n,i,o){var a=e.substring(0,n),s=r.substring(0,i),l=e.substring(n),u=r.substring(i),d=this.diff_main(a,s,!1,o),f=this.diff_main(l,u,!1,o);return d.concat(f)},t.prototype.diff_linesToCharsMunge_=function(e,r,n,i){for(var o="",a=0,s=-1,l=r.length;s<e.length-1;){s=e.indexOf(`
`,a),s===-1&&(s=e.length-1);var u=e.substring(a,s+1);(n.hasOwnProperty?n.hasOwnProperty(u):n[u]!==void 0)?o+=String.fromCharCode(n[u]):(l===i&&(u=e.substring(a),s=e.length),o+=String.fromCharCode(l),n[u]=l,r[l++]=u),a=s+1}return o},t.prototype.diff_commonOverlap_=function(e,r){var n=e.length,i=r.length;if(n===0||i===0)return 0;n>i?e=e.substring(n-i):n<i&&(r=r.substring(0,n));var o=Wt.min(n,i);if(e===r)return o;for(var a=0,s=1;;){var l=e.substring(o-s),u=r.indexOf(l);if(u===-1)return a;s+=u,(u===0||e.substring(o-s)===r.substring(0,s))&&(a=s,s++)}},t.prototype.diff_halfMatch_=function(e,r){if(this.diffTimeout<=0)return null;var n=e.length>r.length?e:r,i=e.length>r.length?r:e;if(n.length<4||i.length*2<n.length)return null;var o=this.diff_halfMatchI_(n,i,Math.ceil(n.length/4)),a=this.diff_halfMatchI_(n,i,Math.ceil(n.length/2)),s;if(!o&&!a)return null;a?o?s=o[4].length>a[4].length?o:a:s=a:s=o;var l,u,d,f,p=s[4];return e.length>r.length?(l=s[0],u=s[1],d=s[2],f=s[3]):(d=s[0],f=s[1],l=s[2],u=s[3]),[l,u,d,f,p]},t.prototype.diff_halfMatchI_=function(e,r,n){for(var i=e.substring(n,n+Math.floor(e.length/4)),o="",a,s,l,u,d=r.indexOf(i,0);d!==-1;){var f=this.diff_commonPrefix(e.substring(n),r.substring(d)),p=this.diff_commonSuffix(e.substring(0,n),r.substring(0,d));o.length<p+f&&(o=r.substring(d-p,d)+r.substring(d,d+f),a=e.substring(0,n-p),s=e.substring(n+f),l=r.substring(0,d-p),u=r.substring(d+f)),d=r.indexOf(i,d+1)}return o.length*2>=e.length?[a,s,l,u,o]:null},t.prototype.diff_cleanupSemanticScore_=function(e,r){if(!e||!r)return 6;var n=e.charAt(e.length-1),i=r.charAt(0),o=n.match(pt),a=i.match(pt),s=o&&n.match(Gt),l=a&&i.match(Gt),u=s&&n.match(nr),d=l&&i.match(nr),f=u&&e.match(lr),p=d&&r.match(Kt);return f||p?5:u||d?4:o&&!s&&l?3:s||l?2:o||a?1:0},t.prototype.match_bitap_=function(e,r,n){if(r.length>this.matchMaxBits)throw new Error("Pattern too long for this browser");var i=this.match_alphabet_(r),o=this.matchThreshold,a=e.indexOf(r,n);a!==-1&&(o=Wt.min(this.match_bitapScore_(0,a,r,n),o),a=e.lastIndexOf(r,n+r.length),a!==-1&&(o=Wt.min(this.match_bitapScore_(0,a,r,n),o)));var s=1<<r.length-1;a=-1;for(var l,u,d=r.length+e.length,f,p=0;p<r.length;p++){for(l=0,u=d;l<u;)this.match_bitapScore_(p,n+u,r,n)<=o?l=u:d=u,u=Math.floor((d-l)/2+l);d=u;var g=Wt.max(1,n-u+1),S=Wt.min(n+u,e.length)+r.length,y=Array(S+2);y[S+1]=(1<<p)-1;for(var b=S;b>=g;b--){var _=i[e.charAt(b-1)];if(p===0?y[b]=(y[b+1]<<1|1)&_:y[b]=(y[b+1]<<1|1)&_|((f[b+1]|f[b])<<1|1)|f[b+1],y[b]&s){var C=this.match_bitapScore_(p,b-1,r,n);if(C<=o)if(o=C,a=b-1,a>n)g=Wt.max(1,2*n-a);else break}}if(this.match_bitapScore_(p+1,n,r,n)>o)break;f=y}return a},t.prototype.match_bitapScore_=function(e,r,n,i){var o=e/n.length,a=Math.abs(i-r);return this.matchDistance?o+a/this.matchDistance:a?1:o},t.prototype.match_alphabet_=function(e){for(var r={},n=0;n<e.length;n++)r[e.charAt(n)]=0;for(var n=0;n<e.length;n++)r[e.charAt(n)]|=1<<e.length-n-1;return r},t.prototype.patch_addContext_=function(e,r){if(r.length!==0){if(e.start2==null)throw Error("patch not initialized");for(var n=r.substring(e.start2,e.start2+e.length1),i=0;r.indexOf(n)!==r.lastIndexOf(n)&&n.length<this.matchMaxBits-this.patchMargin-this.patchMargin;)i+=this.patchMargin,n=r.substring(e.start2-i,e.start2+e.length1+i);i+=this.patchMargin;var o=r.substring(e.start2-i,e.start2);o&&e.diffs.unshift([Ce.DIFF_EQUAL,o]);var a=r.substring(e.start2+e.length1,e.start2+e.length1+i);a&&e.diffs.push([Ce.DIFF_EQUAL,a]),e.start1-=o.length,e.start2-=o.length,e.length1+=o.length+a.length,e.length2+=o.length+a.length}},t}();function Yr(t,e){let r={};for(let o=0;o<e.length;o++){const a=e[o];r[a]?r[a].push(o):r[a]=[o]}let i=[{buffer1index:-1,buffer2index:-1,chain:null}];for(let o=0;o<t.length;o++){const a=t[o],s=r[a]||[];let l=0,u=i[0];for(let d=0;d<s.length;d++){const f=s[d];let p;for(p=l;p<i.length&&!(i[p].buffer2index<f&&(p===i.length-1||i[p+1].buffer2index>f));p++);if(p<i.length){const g={buffer1index:o,buffer2index:f,chain:i[p]};if(l===i.length?i.push(u):i[l]=u,l=p+1,u=g,l===i.length)break}}i[l]=u}return i[i.length-1]}c(Yr,"LCS");function ui(t,e){const r=Yr(t,e);let n=[],i=t.length,o=e.length,a={common:[]};function s(){a.common.length&&(a.common.reverse(),n.push(a),a={common:[]})}c(s,"processCommon");for(let l=r;l!==null;l=l.chain){let u={buffer1:[],buffer2:[]};for(;--i>l.buffer1index;)u.buffer1.push(t[i]);for(;--o>l.buffer2index;)u.buffer2.push(e[o]);(u.buffer1.length||u.buffer2.length)&&(s(),u.buffer1.reverse(),u.buffer2.reverse(),n.push(u)),i>=0&&a.common.push(t[i])}return s(),n.reverse(),n}c(ui,"diffComm");function Xa(t,e){const r=Yr(t,e);let n=[],i=t.length,o=e.length;for(let a=r;a!==null;a=a.chain){const s=i-a.buffer1index-1,l=o-a.buffer2index-1;i=a.buffer1index,o=a.buffer2index,(s||l)&&n.push({buffer1:[i+1,s],buffer1Content:t.slice(i+1,i+1+s),buffer2:[o+1,l],buffer2Content:e.slice(o+1,o+1+l)})}return n.reverse(),n}c(Xa,"diffIndices");function Ya(t,e){const r=Yr(t,e);let n=[],i=t.length,o=e.length;function a(s,l,u){let d=[];for(let f=0;f<u;f++)d.push(s[l+f]);return{offset:l,length:u,chunk:d}}c(a,"chunkDescription");for(let s=r;s!==null;s=s.chain){const l=i-s.buffer1index-1,u=o-s.buffer2index-1;i=s.buffer1index,o=s.buffer2index,(l||u)&&n.push({buffer1:a(t,s.buffer1index+1,l),buffer2:a(e,s.buffer2index+1,u)})}return n.reverse(),n}c(Ya,"diffPatch");function Qo(t,e,r){let n=[];function i(l,u){n.push({ab:u,oStart:l.buffer1[0],oLength:l.buffer1[1],abStart:l.buffer2[0],abLength:l.buffer2[1]})}c(i,"addHunk"),Xa(e,t).forEach(l=>i(l,"a")),Xa(e,r).forEach(l=>i(l,"b")),n.sort((l,u)=>l.oStart-u.oStart);let o=[],a=0;function s(l){l>a&&(o.push({stable:!0,buffer:"o",bufferStart:a,bufferLength:l-a,bufferContent:e.slice(a,l)}),a=l)}for(c(s,"advanceTo");n.length;){let l=n.shift(),u=l.oStart,d=l.oStart+l.oLength,f=[l];for(s(u);n.length;){const p=n[0],g=p.oStart;if(g>d)break;d=Math.max(d,g+p.oLength),f.push(n.shift())}if(f.length===1){if(l.abLength>0){const p=l.ab==="a"?t:r;o.push({stable:!0,buffer:l.ab,bufferStart:l.abStart,bufferLength:l.abLength,bufferContent:p.slice(l.abStart,l.abStart+l.abLength)})}}else{let p={a:[t.length,-1,e.length,-1],b:[r.length,-1,e.length,-1]};for(;f.length;){l=f.shift();const C=l.oStart,k=C+l.oLength,F=l.abStart,$=F+l.abLength;let ne=p[l.ab];ne[0]=Math.min(F,ne[0]),ne[1]=Math.max($,ne[1]),ne[2]=Math.min(C,ne[2]),ne[3]=Math.max(k,ne[3])}const g=p.a[0]+(u-p.a[2]),S=p.a[1]+(d-p.a[3]),y=p.b[0]+(u-p.b[2]),b=p.b[1]+(d-p.b[3]);let _={stable:!1,aStart:g,aLength:S-g,aContent:t.slice(g,S),oStart:u,oLength:d-u,oContent:e.slice(u,d),bStart:y,bLength:b-y,bContent:r.slice(y,b)};o.push(_)}a=d}return s(e.length),o}c(Qo,"diff3MergeRegions");function $u(t,e,r,n){n=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/},n);const o=typeof t=="string",a=typeof e=="string",s=typeof r=="string";o&&(t=t.split(n.stringSeparator)),a&&(e=e.split(n.stringSeparator)),s&&(r=r.split(n.stringSeparator));let l=[];const u=Qo(t,e,r);let d=[];function f(){d.length&&l.push({ok:d}),d=[]}c(f,"flushOk");function p(g,S){if(g.length!==S.length)return!1;for(let y=0;y<g.length;y++)if(g[y]!==S[y])return!1;return!0}return c(p,"isFalseConflict"),u.forEach(g=>{g.stable?d.push(...g.bufferContent):n.excludeFalseConflicts&&p(g.aContent,g.bContent)?d.push(...g.aContent):(f(),l.push({conflict:{a:g.aContent,aIndex:g.aStart,o:g.oContent,oIndex:g.oStart,b:g.bContent,bIndex:g.bStart}}))}),f(),l}c($u,"diff3Merge");function GE(t,e,r,n){n=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/,label:{}},n);const o=$u(t,e,r,n);let a=!1,s=[];return o.forEach(l=>{l.ok?s=s.concat(l.ok):l.conflict&&(a=!0,s.push(`<<<<<<<${n.label.a?` ${n.label.a}`:""}`),s=s.concat(l.conflict.a),s.push(`|||||||${n.label.o?` ${n.label.o}`:""}`),s=s.concat(l.conflict.o),s.push("======="),s=s.concat(l.conflict.b),s.push(`>>>>>>>${n.label.b?` ${n.label.b}`:""}`))}),{conflict:a,result:s}}c(GE,"mergeDiff3");function Py(t,e,r,n){n=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/},n);const o=$u(t,e,r,n);let a=!1,s=[];for(let l=0;l<o.length;l++){const u=o[l];u.ok?s=s.concat(u.ok):(a=!0,s=s.concat([`
<<<<<<<<<
`],u.conflict.a,[`
=========
`],u.conflict.b,[`
>>>>>>>>>
`]))}return{conflict:a,result:s}}c(Py,"node_diff3_merge");function KE(t,e,r,n){n=Object.assign({excludeFalseConflicts:!1,stringSeparator:/\s+/},n);const o=$u(t,e,r,n);let a=!1,s=[];for(let l=0;l<o.length;l++){const u=o[l];if(u.ok)s=s.concat(u.ok);else{const d=ui(u.conflict.a,u.conflict.b);for(let f=0;f<d.length;f++){let p=d[f];p.common?s=s.concat(p.common):(a=!0,s=s.concat([`
<<<<<<<<<
`],p.buffer1,[`
=========
`],p.buffer2,[`
>>>>>>>>>
`]))}}}return{conflict:a,result:s}}c(KE,"mergeDigIn");function ZE(t,e){let r=[],n=0;function i(o){for(;n<o;)r.push(t[n]),n++}c(i,"advanceTo");for(let o=0;o<e.length;o++){let a=e[o];i(a.buffer1.offset);for(let s=0;s<a.buffer2.chunk.length;s++)r.push(a.buffer2.chunk[s]);n+=a.buffer1.length}return i(t.length),r}c(ZE,"patch");function QE(t){return t.map(e=>({buffer1:{offset:e.buffer1.offset,length:e.buffer1.length},buffer2:{chunk:e.buffer2.chunk}}))}c(QE,"stripPatch");function XE(t){return t.map(e=>({buffer1:e.buffer2,buffer2:e.buffer1}))}c(XE,"invertPatch");const Lu=new kn;Lu.diffTimeout=0;function Bu(t,e,r){return ke.get("diff.useDiffMatchPatch")===!0?Lu.patch_toText(Lu.patch_make(e,r)):Du(t,e,r)}c(Bu,"diffs_createPatch");function wp(t,e,r){return si(t,e,r)}c(wp,"diffs_applyPatch");function Ny(t,e){const r=[];for(const n of $i(t,e))r.push({...n,oldFileName:n.newFileName,oldHeader:n.newHeader,newFileName:n.oldFileName,newHeader:n.oldHeader,hunks:n.hunks.map(i=>({...i,oldLines:i.newLines,oldStart:i.newStart,newLines:i.oldLines,newStart:i.oldStart,lines:i.lines.map(o=>o[0]==="-"?`+${o.slice(1)}`:o[0]==="+"?`-${o.slice(1)}`:o)}))}),r.push(n);return r}c(Ny,"reversePatch");function yp(t,e,r){let n=`
`;const i=t.match(/(?:\r?\n)/g);if(i!==null&&i.length!==0){const l=i.filter(u=>u===`\r
`).length;n=l>i.length-l?`\r
`:`
`}const o=Py(t,e,r,{excludeFalseConflicts:!0,stringSeparator:/\r?\n/}),a=o.result;let s=!1;if(o.conflict){let l;const u=[];let d=0;for(const g of a)g===`
<<<<<<<<<
`?l={start:d,separator:d,end:d}:g===`
=========
`?l.separator=d:g===`
>>>>>>>>>
`&&(l.end=d,u.push(l)),d++;let f=0,p=0;for(const g of u)a.splice(g.start-f,1),f++,p=g.end-g.separator+1,a.splice(g.separator-f,p),f+=p;u.length&&(s=!0)}return{conflicts:s,mergedContent:a.join(n)}}c(yp,"diffs_merge");let Uu=0;function My(){return Uu===Number.MAX_SAFE_INTEGER&&(Uu=0),String(++Uu)}c(My,"getNextLockId");class bp{constructor(){this.id=My()}async synchronize(e){let r;const n=this.promise;this.promise=new Promise(i=>r=i),await n;try{return await e()}finally{r()}}}c(bp,"Lock");class Ja{constructor(e){this.lock=new bp,this.readers=new Set,this.counter=0,this._id=e!=null?e:this.lock.id}get id(){return this._id}getNextCounter(){return this.counter===Number.MAX_SAFE_INTEGER&&(this.counter=0),++this.counter}async synchronizeRead(e,r){let n;const i=new Z(`Reader(${this.getNextCounter()}|${this.id})`,{log:{prefix:"(A) ",message:r?` \u2022 ${r}`:""},logLevel:ze.Debug});let o;await this.lock.synchronize(async()=>{this.writer&&await this.writer,o=new Promise(a=>n=a),this.readers.add(o)}),i.restart({prefix:"(L) ",suffix:r?` \u2022 ${r}`:"",took:" waited for "});try{return await e()}finally{i.stop({prefix:"(U) ",suffix:r?` \u2022 ${r}`:"",took:" locked for "}),o!==void 0&&this.readers.delete(o),n()}}async synchronizeWrite(e,r){let n;const i=new Z(`Writer(${this.getNextCounter()}|${this.id})`,{log:{prefix:"(A) ",message:r?` \u2022 ${r}`:""},logLevel:ze.Debug});await this.lock.synchronize(async()=>{if(this.writer&&await this.writer,this.readers.size){const o=[...this.readers];this.readers.clear(),await Promise.all(o)}this.writer=new Promise(o=>n=o)}),i.restart({prefix:"(L) ",suffix:r?` \u2022 ${r}`:"",took:" waited for "});try{return await e()}finally{i.stop({prefix:"(U) ",suffix:r?` \u2022 ${r}`:"",took:" locked for "}),n(),this.writer=void 0}}}c(Ja,"ReaderWriterLock");class _p{constructor(){this.locks=new Map}async synchronizeRead(e,r,n){let i=this.locks.get(e);return i===void 0&&(i=new Ja(String(e)),this.locks.set(e,i)),i.synchronizeRead(r,n)}async synchronizeWrite(e,r,n){let i=this.locks.get(e);return i===void 0&&(i=new Ja(String(e)),this.locks.set(e,i)),i.synchronizeWrite(r,n)}}c(_p,"KeyedReaderWriterLock");const $y=new TextDecoder,Ly=new TextEncoder;async function es(t){const e=typeof t=="string"?Ly.encode(t):t;let r;if(globalThis.crypto.subtle)r=await globalThis.crypto.subtle.digest({name:"sha-1"},e);else{const n=new Ep;n.update(e),r=n.digest()}return globalThis.btoa(encodeURIComponent($y.decode(r)))}c(es,"sha1");var xp;(function(t){t[t.BLOCK_SIZE=64]="BLOCK_SIZE"})(xp||(xp={}));function Ou(t,e,r=32){const n=r-e,i=~((1<<n)-1);return(t<<e|(i&t)>>>n)>>>0}c(Ou,"leftRotate");function Sp(t,e=0,r=t.byteLength,n=0){for(let i=0;i<r;i++)t[e+i]=n}c(Sp,"fill");const Cp=c(class{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(64+3),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._finished=!1}update(t){const e=this._buff;let r=this._buffLen,n=0;const i=t.byteLength;for(;n<i;){const o=Math.min(64-r,i-n);for(let a=0;a<o;a++)e[r++]=t[n++];r>=64&&(this._step(),r-=64,this._totalLen+=64)}this._buffLen=r}digest(){this._finished||(this._finished=!0,this._totalLen+=this._buffLen,this._wrapUp());const t=new ArrayBuffer(20),e=new DataView(t);return e.setUint32(0,this._h0,!1),e.setUint32(4,this._h1,!1),e.setUint32(8,this._h2,!1),e.setUint32(12,this._h3,!1),e.setUint32(16,this._h4,!1),t}_wrapUp(){this._buff[this._buffLen++]=128,Sp(this._buff,this._buffLen),this._buffLen>56&&(this._step(),Sp(this._buff));const t=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(t/4294967296),!1),this._buffDV.setUint32(60,t%4294967296,!1),this._step()}_step(){const t=Cp._bigBlock32,e=this._buffDV;for(let d=0;d<64;d+=4)t.setUint32(d,e.getUint32(d,!1),!1);for(let d=64;d<320;d+=4)t.setUint32(d,Ou(t.getUint32(d-12,!1)^t.getUint32(d-32,!1)^t.getUint32(d-56,!1)^t.getUint32(d-64,!1),1),!1);let r=this._h0,n=this._h1,i=this._h2,o=this._h3,a=this._h4,s,l,u;for(let d=0;d<80;d++)d<20?(s=n&i|~n&o,l=1518500249):d<40?(s=n^i^o,l=1859775393):d<60?(s=n&i|n&o|i&o,l=2400959708):(s=n^i^o,l=3395469782),u=Ou(r,5)+s+a+l+t.getUint32(d*4,!1)&4294967295,a=o,o=i,i=Ou(n,30),n=r,r=u;this._h0=this._h0+r&4294967295,this._h1=this._h1+n&4294967295,this._h2=this._h2+i&4294967295,this._h3=this._h3+o&4294967295,this._h4=this._h4+a&4294967295}},"_SHA1Computer");let Ep=Cp;Ep._bigBlock32=new DataView(new ArrayBuffer(320));function By(t){const e=globalThis.atob(t),r=e.length,n=new Uint8Array(r);for(let i=0;i<r;i++)n[i]=e.charCodeAt(i);return n}c(By,"fromBase64");const{fromCharCode:Uy}=String;function Rp(t){let e;if(typeof t=="string")e=t;else{e="";for(let r=0,{length:n}=t;r<n;r++)e+=Uy(t[r])}return globalThis.btoa(e)}c(Rp,"toBase64");function Oy(t,e){if(t===e)return-1;let r=0;for(;t[r]===e[r];)r++;return r}c(Oy,"indexOfDifference");var Hy=Object.defineProperty,Wy=Object.getOwnPropertyDescriptor,qy=c((t,e,r,n)=>{for(var i=n>1?void 0:n?Wy(e,r):e,o=t.length-1,a;o>=0;o--)(a=t[o])&&(i=(n?a(e,r,i):a(i))||i);return n&&i&&Hy(e,r,i),i},"changeStore_decorateClass");const tn=(0,Me.loadMessageBundle)(),zy=h.FileSystemError.FileNotFound().code,Ap=`===================================================================
`,Dn=new TextDecoder,jy=new TextEncoder;function Vy(t){return t&&"type"in t&&"uri"in t&&"uri"in t&&"fileType"in t&&"revision"in t&&"timestamp"in t}c(Vy,"isOperation");function ts(t,e,r){return{type:t.type,rootUri:e,uri:r!=null?r:t.uri}}c(ts,"toEvent");const Xo=c(class{constructor(t,e,r,n,i,o){this.providerService=t,this.storageService=e,this.fileStorageService=r,this.telemetryService=n,this.workspaceId=i,this._onDidChange=new h.EventEmitter,this.cache=new Map,this.lock=new _p,this.scopedStores=new Map,o===void 0&&(Xo._instance=this,this.disposable=h.Disposable.from(this.providerService.onDidRefresh(()=>this.cache.clear())))}static get instance(){return this._instance}get onDidChange(){return this._onDidChange.event}dispose(){var t;(t=this.disposable)==null||t.dispose()}async exportDebugInfo(t){var e;async function r(n){const i=await h.workspace.openTextDocument({language:"json",content:`ChangeStore Operations for ${n.toString(!0)}

${this.toStorage(await this.getWorkingOperations(n))}`});return void h.window.showTextDocument(i)}if(c(r,"exportCore"),t===void 0)for(const n of(e=h.workspace.workspaceFolders)!=null?e:[])await r.call(this,n.uri);else return r.call(this,t)}async getWorkspaceProvidersWithChanges(){var t,e;const r=new Map;for(const n of(t=h.workspace.workspaceFolders)!=null?t:[])if(n.uri.scheme===Xt.scheme&&await this.hasChanges(n.uri)){const i=(e=this.providerService.getRepository(n.uri))==null?void 0:e.provider;if(!i)continue;r.set(i.id,i)}return[...r.values()]}async getWorkspacesWithChanges(){var t;const e=new Z("ChangeStore.getWorkspacesWithChanges()");try{const r=[];for(const n of(t=h.workspace.workspaceFolders)!=null?t:[])n.uri.scheme===Xt.scheme&&await this.hasChanges(n.uri)&&r.push(n.uri);return r.length>0?r:void 0}finally{e.stop()}}async acceptAll(t,e){const r=`ChangeStore.acceptAll(${t.toString()}, ${e==null?void 0:e.staged})`;V.log(r);const n=[];await this.lock.synchronizeWrite(E(t),async()=>{const i=await this.getWorkingOperations(t),o=[];let a=[];const s=(e==null?void 0:e.staged)&&!(e.staged==="auto"&&!i.some(l=>l.staged));for(const l of i){if(s&&!l.staged){a.push(l);continue}l.fileType===h.FileType.File&&await this.discardWorkingContent(t,l.uri);let u;if(l.type===I.Created&&l.fileType===h.FileType.Directory&&(i.some(d=>R(d.uri,l.uri))||(u={type:I.Deleted,rootUri:t,uri:l.uri})),n.push(u!=null?u:ts(l,t)),l.type===I.Created){let d=l.uri;for(;;){const{parent:f}=this.findParent(d,i,p=>p.type===I.Created);if(f){o.push(f),d=f.uri;continue}break}}}a.length>0&&o.length>0&&(a=a.filter(l=>o.includes(l)?(n.push(ts(l,t)),!1):!0)),await this.saveWorkingOperations(t,a)},r),n.length!==0&&this._onDidChange.fire(n)}async discard(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const r=`ChangeStore.discard(${t.toString()})`;V.log(r);const n=[];await this.lock.synchronizeWrite(E(e),async()=>this.discardCore(e,t,n),r),n.length!==0&&this._onDidChange.fire(n)}async discardCore(t,e,r){V.debug(`ChangeStore.discardCore(${e.toString()})`);const n=await this.getWorkingOperations(t);if(n.length===0)return;const i=O(e),o=n.findIndex(l=>O(l.uri)===i);if(o===-1)return;const[a]=n.splice(o,1);let s;switch(a.type){case I.Created:s=I.Deleted;break;case I.Deleted:s=I.Created;break;default:s=a.type;break}if(r.push({type:s,rootUri:t,uri:e}),a.type===I.Created){let l=a.uri;for(;;){const{parent:u,parentIndex:d}=this.findNewParentWithOnlyChild(l,n);if(u){n.splice(d,1),r.push({type:I.Deleted,rootUri:t,uri:u.uri}),l=u.uri;continue}break}}await this.saveWorkingOperations(t,n),a.fileType===h.FileType.File&&await this.discardWorkingContent(t,e)}async discardAll(t,e){const r=this.getUriScope(t);if(r)return this.getScopedChangeStore(r).discardAll(t,e);const n=`ChangeStore.discardAll(${t.toString()}, ${e==null?void 0:e.staged})`;V.log(n);const i=[];await this.lock.synchronizeWrite(E(t),async()=>{const o=await this.getWorkingOperations(t),a=[];let s=[];const l=(e==null?void 0:e.staged)&&!(e.staged==="auto"&&!o.some(u=>u.staged));for(const u of o){if(l&&!u.staged){s.push(u);continue}u.fileType===h.FileType.File&&await this.discardWorkingContent(t,u.uri);let d;switch(u.type){case I.Created:d=I.Deleted;break;case I.Deleted:d=I.Created;break;default:d=u.type;break}if(i.push({type:d,rootUri:t,uri:u.uri}),u.type===I.Created){let f=u.uri;for(;;){const{parent:p}=this.findNewParentWithOnlyChild(f,o);if(p){a.push(p),f=p.uri;continue}break}}}s.length>0&&a.length>0&&(s=s.filter(u=>a.includes(u)?(i.push({type:I.Deleted,rootUri:t,uri:u.uri}),!1):!0)),await this.saveWorkingOperations(t,s)},n),i.length!==0&&this._onDidChange.fire(i)}async stage(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const r=`ChangeStore.stage(${t.toString()})`;V.log(r);const n=[];await this.lock.synchronizeWrite(E(e),async()=>{const{operation:i,index:o}=await this.getWorkingOperation(t,e);i!==void 0&&await this.spliceOperation(t,o,{...i,staged:!0,timestamp:Date.now()},n)},r),n.length!==0&&this._onDidChange.fire(n)}async stageAll(t){const e=`ChangeStore.stageAll(${t.toString()})`;V.log(e);const r=[];await this.lock.synchronizeWrite(E(t),async()=>{const n=(await this.getWorkingOperations(t)).map(i=>({...i,staged:!0,timestamp:Date.now()}));n.length!==0&&(await this.saveWorkingOperations(t,n),r.push(...n.map(i=>ts(i,t))))},e),r.length!==0&&this._onDidChange.fire(r)}async unstage(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const r=`ChangeStore.unstage(${t.toString()})`;V.log(r);const n=[];await this.lock.synchronizeWrite(E(e),async()=>{const{operation:i,index:o}=await this.getWorkingOperation(t,e);i!==void 0&&await this.spliceOperation(t,o,{...i,staged:!1,timestamp:Date.now()},n)},r),n.length!==0&&this._onDidChange.fire(n)}async unstageAll(t){const e=`ChangeStore.unstageAll(${t.toString()})`;V.log(e);const r=[];await this.lock.synchronizeWrite(E(t),async()=>{const n=(await this.getWorkingOperations(t)).map(i=>({...i,staged:!1,timestamp:Date.now()}));n.length!==0&&(await this.saveWorkingOperations(t,n),r.push(...n.map(i=>ts(i,t))))},e),r.length!==0&&this._onDidChange.fire(r)}async hasChanges(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).hasChanges(t);const r=E(t),n=this.cache.get(r);return n!==void 0?n.length!==0:this.lock.synchronizeRead(r,async()=>(await this.getWorkingOperations(t)).length!==0,`ChangeStore.hasChanges(${t.toString()})`)}maybeHasChanges(t,e){const r=this.getUriScope(t);if(r)return this.getScopedChangeStore(r).maybeHasChanges(t,e);const n=E(t),i=this.cache.get(n);if(i===void 0)return;if(i.length===0)return!1;if(e===void 0)return!0;const o=O(e);return i.some(a=>O(a.uri)===o)}async hasMergeConflicts(t){return this.lock.synchronizeRead(E(t),async()=>(await this.getWorkingOperations(t)).some(e=>e.conflicts!==void 0),`ChangeStore.hasMergeConflicts(${t.toString()})`)}async hasStagedChanges(t){return this.lock.synchronizeRead(E(t),async()=>(await this.getWorkingOperations(t)).some(e=>e.staged&&e.conflicts===void 0),`ChangeStore.hasStagedChanges(${t.toString()})`)}async hasWorkingChanges(t){return this.lock.synchronizeRead(E(t),async()=>(await this.getWorkingOperations(t)).some(e=>!e.staged&&e.conflicts===void 0),`ChangeStore.hasWorkingChanges(${t.toString()})`)}async getChange(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).getChange(t);const r=this.providerService.getVirtualRootUri(t);if(r!==void 0)return this.lock.synchronizeRead(E(r),async()=>{const{operation:n}=await this.getWorkingOperation(t,r);return n},`ChangeStore.getChange(${t.toString()})`)}async getChanges(t,e){const r=this.getUriScope(t);return r?this.getScopedChangeStore(r).getChanges(t,e):this.lock.synchronizeRead(E(t),async()=>{let n=await this.getWorkingOperations(t);if((e==null?void 0:e.excludeConflicts)||(e==null?void 0:e.predicate)){const{excludeConflicts:i,predicate:o}=e;n=n.filter(a=>{var s;return(!i||a.conflicts===void 0)&&((s=o==null?void 0:o(a))!=null?s:!0)})}return n},`ChangeStore.getChanges(${t.toString()})`)}async getGroupedChanges(t,e){const r=this.getUriScope(t);return r?this.getScopedChangeStore(r).getGroupedChanges(t,e):this.lock.synchronizeRead(E(t),async()=>{var n,i;const o=await this.getWorkingOperations(t),a={conflicts:[],staged:[],working:[]};for(const s of o)!((i=(n=e==null?void 0:e.predicate)==null?void 0:n.call(e,s))!=null?i:!0)||(s.conflicts?a.conflicts.push(s):s.staged?a.staged.push(s):a.working.push(s));return a},`ChangeStore.getChangesByType(${t.toString()})`)}async getContent(t){const e=this.providerService.getVirtualRootUri(t);if(e===void 0)throw new Error(`Unable to find content for ${t.toString()}; Repository not found`);const r=E(e),n=this.cache.get(r);if((n==null?void 0:n.length)===0)throw new Error(`Unable to find content for ${t.toString()}`);return this.lock.synchronizeRead(r,async()=>{const i=Dn.decode(await this.getWorkingContent(e,t));if(i!==void 0)return i;throw new Error(`Unable to find content for ${t.toString()}`)},`ChangeStore.getContent(${t.toString()}}`)}async getMergeConflicts(t,e){return this.lock.synchronizeRead(E(t),async()=>(await this.getWorkingOperations(t)).filter(n=>{var i,o;return n.conflicts!==void 0&&((o=(i=e==null?void 0:e.predicate)==null?void 0:i.call(e,n))!=null?o:!0)}),`ChangeStore.getMergeConflicts(${t.toString()})`)}async getStagedChanges(t,e){return this.lock.synchronizeRead(E(t),async()=>(await this.getWorkingOperations(t)).filter(n=>{var i,o;return n.staged&&n.conflicts===void 0&&((o=(i=e==null?void 0:e.predicate)==null?void 0:i.call(e,n))!=null?o:!0)}),`ChangeStore.getStagedChanges(${t.toString()})`)}async getWorkingChanges(t,e){return this.lock.synchronizeRead(E(t),async()=>(await this.getWorkingOperations(t)).filter(n=>{var i,o;return!n.staged&&n.conflicts===void 0&&((o=(i=e==null?void 0:e.predicate)==null?void 0:i.call(e,n))!=null?o:!0)}),`ChangeStore.getWorkingChanges(${t.toString()})`)}async applyChangeset(t,e,r,n){var i;let o;Vy(r)?o=r:n=n!=null?n:r,V.log(`ChangeStore.applyChangeset${t.toString()}`,e.workspaceId,e.uri,o==null?void 0:o.uri,n==null?void 0:n.save);const a=this.getScopedChangeStore(e.workspaceId),s=(i=e.patch)!=null?i:await a.createPatch(e.uri,o==null?void 0:o.uri);await this.applyPatchCore(t,s,{...n,getIncomingContent:async l=>{const u=this.getScopedUri(this.providerService.createRelativeVirtualUri(e.uri,l),e.workspaceId);return Dn.decode(await h.workspace.fs.readFile(u))},merge:async(l,u,d)=>{try{const f=de.getProviderUri(l),p=Dn.decode(await h.workspace.fs.readFile(f)),g=this.getScopedUri(this.providerService.createRelativeVirtualUri(e.uri,u),e.workspaceId),S=Dn.decode(await h.workspace.fs.readFile(g));return{...yp(d,p,S),baseUri:f,incomingUri:g}}catch(f){throw new Error(`Unable to apply patch to ${u}: ${String(f)}`)}}})}async applyPatch(t,e,r){if(V.log(`ChangeStore.applyPatch(${t.toString()})`,r==null?void 0:r.save),!e.startsWith("diff --"))throw new Error("Invalid patch");return this.applyPatchCore(t,e,r)}async applyPatchCore(t,e,r={}){const n=`ChangeStore.applyPatchCore(${t.toString()})`;V.debug(n,r==null?void 0:r.save);const i=new h.WorkspaceEdit,o=[],a=new Map;async function s(p){var g;const S=E(p),y=h.workspace.textDocuments.find(b=>E(b.uri)===S);return(g=y==null?void 0:y.getText())!=null?g:Dn.decode(await h.workspace.fs.readFile(p))}c(s,"getContent");async function l(p){try{const g=await h.workspace.fs.stat(p);return Boolean(g)}catch{return!1}}c(l,"exists");async function u(p,g,S){let y=wp("",S,{fuzzFactor:0});if(y===!1){if(!r.getIncomingContent)throw new Error(`Unable to apply patch to ${g}`);y=await r.getIncomingContent(g)}i.createFile(p,{overwrite:!0}),i.replace(p,new h.Range(0,0,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),y)}c(u,"applyCreate");async function d(p,g,S,y){const b=await s(p);let _=wp(b,S,{fuzzFactor:1});if(_===!1){if(r.merge===void 0)throw new Error(`Unable to apply patch to ${g}; Resulted in conflicts`);const C={title:tn("apply patch failed prompt confirm","Merge")},k={title:tn("apply patch failed prompt cancel","Skip File"),isCloseAffordance:!0};if(await h.window.showWarningMessage(tn("apply patch failed prompt",`Unable to apply changes to '{0}'.

Do you want to retry by merging the files?`,g),{modal:!0,useCustom:!0},C,k)!==C)return;const $=await r.merge(p,g,b);_=$.mergedContent,$.conflicts&&a.set(E(p),{type:y,baseUri:$.baseUri,incomingUri:$.incomingUri})}i.replace(p,new h.Range(0,0,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),_)}c(d,"applyModification");const f=(r==null?void 0:r.reverse)?Ny(e,{}):$i(e,{});for(const p of f)if(p.oldFileName==="/dev/null"){if(!p.newFileName)continue;const g=p.newFileName.startsWith("b/")?p.newFileName.substr(2):p.newFileName,S=this.providerService.createRelativeVirtualUri(t,g);o.push(E(S)),!await l(S)?await u(S,g,p):await d(S,g,p,I.Created)}else if(p.newFileName==="/dev/null"){if(!p.oldFileName)continue;const g=p.oldFileName.startsWith("a/")?p.oldFileName.substr(2):p.oldFileName,S=this.providerService.createRelativeVirtualUri(t,g);await l(S)&&i.deleteFile(S)}else if(p.oldFileName===p.newFileName){if(!p.newFileName)continue;const g=this.providerService.createRelativeVirtualUri(t,p.newFileName);o.push(E(g)),!await l(g)?await u(g,p.newFileName,p):await d(g,p.newFileName,p,I.Changed)}else throw new Error(`Unable to apply patch to ${p.oldFileName}; Renames aren't currently supported`);if(await h.workspace.applyEdit(i),r.save&&o.length)for(const p of o){const g=h.workspace.textDocuments.find(S=>E(S.uri)===p);await(g==null?void 0:g.save())}a.size&&setTimeout(async()=>{const p=[];await this.lock.synchronizeWrite(E(t),async()=>{const g=await this.getWorkingOperations(t);if(g.length===0)return;let S=-1;for(const y of g){S++;const b=a.get(E(y.uri));b!==void 0&&await this.spliceOperation(y.uri,S,{...y,conflicts:{baseUri:b.baseUri,incomingUri:b.incomingUri,status:[y.type,b.type]},timestamp:Date.now()},p)}},n),p.length!==0&&this._onDidChange.fire(p)},0)}async createChangeset(t){V.log(`ChangeStore.createChangeset${t.toString()})`);const e=await this.createPatch(t);return e?{workspaceId:this.workspaceId,uri:t,patch:e}:void 0}async createPatch(t,e,r){if(V.log(`ChangeStore.createPatch${t.toString()})`,e),e===void 0){let o=await this.getWorkingOperations(t);if((r==null?void 0:r.staged)&&(o=o.filter(s=>s.staged)),o.length===0)return"";const a=[];for(const s of o){const l=await this.createPatchCore(t,s);a.push(l)}return a.join("")}const{operation:n}=await this.getWorkingOperation(e,t);if(n===void 0)throw new Error(`Unable to create patch for ${e.toString()}`);return(r==null?void 0:r.staged)&&n.staged?"":await this.createPatchCore(t,n)}async createPatchCore(t,e){const r=this.providerService.getRelativeFilePath(t,e.uri),n=`diff --git a/${r} b/${r}`;if(e.type===I.Created){let l=await this.getContent(e.uri),u;!l.endsWith(`
`)&&!l.endsWith(`\r
`)?u=`
\\ No newline at end of file`:u="";let d=0;return l=l.replace(/\r?\n/g,f=>(d++,`${f}+`)),`${n}
new file mode 100644
--- /dev/null
+++ b/${r}
@@ -0,0 +1,${d} @@
+${l}${u}`}if(e.type===I.Deleted){let l=Dn.decode(await h.workspace.fs.readFile(de.getProviderUri(e.uri))),u=0;return l=l.replace(/\r?\n/g,d=>(u++,`${d}-`)),`${n}
deleted file mode 100644
--- a/${r}
+++ /dev/null
@@ -1,${u} +0,0 @@
-${l}`}const i=await this.getContent(e.uri),o=Dn.decode(await h.workspace.fs.readFile(de.getProviderUri(e.uri))),a=Bu(r,o,i),s=a.indexOf(Ap);return`${n}
${a.substr(s+Ap.length)}`}async keep(t,e){const r=this.providerService.getVirtualWorkspaceUri(t);if(r===void 0)return;const n=`ChangeStore.keep(${t.toString()})`;V.log(n,e);const i=[];await this.lock.synchronizeWrite(E(r),async()=>{const{operation:o,index:a}=await this.getWorkingOperation(t,r);if(o===void 0)return;if(e===void 0&&o.conflicts){const[,l]=o.conflicts.status;switch(l){case I.Changed:switch(o.type){case I.Changed:case I.Created:case I.Deleted:await this.spliceOperation(t,a,{...o,conflicts:void 0,timestamp:Date.now()},i);break}break;case I.Created:switch(o.type){case I.Changed:case I.Deleted:await this.spliceOperation(t,a,{...o,conflicts:void 0,timestamp:Date.now()},i);break;case I.Created:await this.spliceOperation(t,a,{...o,type:I.Changed,size:o.size,hash:o.hash,originalHash:o.originalHash,conflicts:void 0,timestamp:Date.now()},i);break}break;case I.Deleted:switch(o.type){case I.Deleted:await this.discardCore(r,t,i);break;case I.Changed:await this.spliceOperation(t,a,{...o,type:I.Created,originalHash:void 0,conflicts:void 0,timestamp:Date.now()},i);break;case I.Created:await this.spliceOperation(t,a,{...o,conflicts:void 0,timestamp:Date.now()},i);break}break}return}if(e===void 0)return;switch(e.type){case I.Changed:switch(o.type){case I.Deleted:await this.spliceOperation(t,a,{...o,type:I.Deleted,size:void 0,hash:void 0,originalHash:void 0,conflicts:void 0,timestamp:Date.now()},i);return;case I.Created:break;case I.Changed:break}break;case I.Created:switch(o.type){case I.Changed:case I.Deleted:return;case I.Created:break}break;case I.Deleted:switch(o.type){case I.Deleted:return this.discardCore(r,t,i);case I.Changed:await this.spliceOperation(t,a,{...o,type:I.Created,originalHash:void 0,conflicts:void 0,timestamp:Date.now()},i);return;case I.Created:return}}const s=e!==void 0?await h.workspace.fs.readFile(e.providerUri):void 0;await this.spliceOperation(t,a,{...o,type:I.Changed,originalHash:s!==void 0?await es(s):o.originalHash,conflicts:void 0,timestamp:Date.now()},i)},n),i.length!==0&&this._onDidChange.fire(i)}async merge(t,e,r){const n=this.providerService.getVirtualWorkspaceUri(t);if(n===void 0)return;const i=`ChangeStore.merge(${t.toString()})`;V.log(i,e,r);const o=[];await this.lock.synchronizeWrite(E(n),async()=>{const{operation:a,index:s}=await this.getWorkingOperation(t,n);if(a===void 0)return;switch(e.type){case I.Changed:switch(a.type){case I.Deleted:return void this.spliceOperation(t,s,{...a,type:I.Deleted,size:void 0,hash:void 0,originalHash:void 0,conflicts:{baseUri:r.providerUri,incomingUri:e.providerUri,status:[a.type,e.type]},timestamp:Date.now()},o);case I.Created:break;case I.Changed:break}break;case I.Created:switch(a.type){case I.Deleted:case I.Changed:return;case I.Created:break}break;case I.Deleted:switch(a.type){case I.Deleted:return this.discardCore(n,t,o);case I.Changed:return void this.spliceOperation(t,s,{...a,type:I.Created,originalHash:void 0,conflicts:{baseUri:void 0,incomingUri:e.providerUri,status:[a.type,e.type]},timestamp:Date.now()},o);case I.Created:return}}const l=await this.getWorkingContent(n,t),u=await h.workspace.fs.readFile(r.providerUri),d=await h.workspace.fs.readFile(e.providerUri),f=yp(Dn.decode(l),Dn.decode(u),Dn.decode(d));await this.writeFileCore(n,t,o,jy.encode(f.mergedContent),d!=null?d:new Uint8Array(0),f.conflicts?{baseUri:r.providerUri,incomingUri:e.providerUri,status:[a.type,e.type]}:void 0)},i),o.length!==0&&this._onDidChange.fire(o)}async resolveDiffCommand(t,e,r,n){let i;const o=this.providerService.getVirtualRootUri(t);return o!==void 0&&({operation:i}=await this.getWorkingOperation(t,o)),(i==null?void 0:i.type)===I.Deleted?this.resolveOpenCommand(e):((i==null?void 0:i.type)===I.Created&&(e=e.with({query:"~"})),{command:"vscode.diff",title:"Open Changes",arguments:[e,t,r,n]})}resolveOpenCommand(t,e){return{command:"vscode.open",title:"Open File",arguments:[t,e]}}getScopedUri(t,e){const r=typeof e=="string"?e:e.workspaceId;return r===this.workspaceId?t:t.with({fragment:r})}getUriScope(t){return t.fragment||void 0}getScopedChangeStore(t){const e=typeof t=="string"?t:t.workspaceId;V.log(`ChangeStore.getScopedChangeStore(${e})`);let r=this.scopedStores.get(e);return r===void 0&&(r=e===this.workspaceId?new Xo.ScopedChangeStore(this,e,this.workspaceId):new Xo.ScopedChangeStore(new Xo(this.providerService,this.storageService.with(e),this.fileStorageService.with(e),this.telemetryService,this.workspaceId,e),e,this.workspaceId),this.scopedStores.set(e,r)),r}async stat(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).stat(t);const r=this.providerService.getVirtualRootUri(t);if(r===void 0)return;const n=E(r),i=this.cache.get(n);if((i==null?void 0:i.length)!==0)return this.lock.synchronizeRead(n,async()=>{var o;const{operation:a}=await this.getWorkingOperation(t,r);if(a!==void 0){if(a.type===I.Deleted)throw h.FileSystemError.FileNotFound(`The ${a.fileType===h.FileType.Directory?"folder":"file"} has been deleted.`);return{type:a.fileType,size:(o=a.size)!=null?o:0,ctime:0,mtime:a.timestamp}}},`ChangeStore.stat(${t.toString()}`)}async readFile(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).readFile(t);const r=new Z(`ChangeStore.readFile(${t.toString()})`);try{const n=this.providerService.getVirtualRootUri(t);if(n===void 0)return;const i=E(n),o=this.cache.get(i);return(o==null?void 0:o.length)===0?void 0:await this.lock.synchronizeRead(i,()=>{const a=this.cache.get(i);if((a==null?void 0:a.length)===0){r.log({message:": Not found; no operations"});return}return this.getWorkingContent(n,t)},r.context)}finally{r.stop()}}async createDirectory(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const r=new Z(`ChangeStore.createDirectory(${t.toString()})`);try{const n=[];if(await this.lock.synchronizeWrite(E(e),async()=>{const{operation:i,index:o}=await this.getWorkingOperation(t,e),a=await this.providerService.getMetadata(t);await this.spliceOperation(t,o,i===void 0?{type:I.Created,uri:t,fileType:h.FileType.Directory,revision:a.HEAD.sha,timestamp:Date.now(),size:0,hash:"",originalHash:void 0}:{...i,timestamp:Date.now()},n)},r.context),n.length===0)return;this._onDidChange.fire(n)}finally{r.stop()}}async deleteDirectory(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const r=new Z(`ChangeStore.deleteDirectory(${t.toString()})`);try{const n=[];if(await this.lock.synchronizeWrite(E(e),async()=>{const{operation:i,index:o}=await this.getWorkingOperation(t,e);if((i==null?void 0:i.type)===I.Created)return this.discardCore(e,t,n);const a=await this.providerService.getMetadata(t);await this.spliceOperation(t,o,{type:I.Deleted,uri:t,fileType:h.FileType.Directory,revision:a.HEAD.sha,timestamp:Date.now(),size:void 0,hash:void 0,originalHash:void 0},n)},r.context),n.length===0)return;this._onDidChange.fire(n)}finally{r.stop()}}async updateDirectoryEntries(t,e){const r=this.providerService.getVirtualWorkspaceUri(t);if(r===void 0)return e;const n=new Z(`ChangeStore.updateDirectoryEntries(${t.toString()})`,{},e.length);try{const i=E(r),o=this.cache.get(i);return(o==null?void 0:o.length)===0?e:await this.lock.synchronizeRead(i,async()=>{const{path:a}=w(r,t),s=await this.getWorkingOperations(r);for(const l of s)switch(l.type){case I.Changed:break;case I.Created:{if(R(l.uri,a)){const u=this.providerService.getRelativeFilePath(t,l.uri);e.push([u,l.fileType])}break}case I.Deleted:{if(R(l.uri,a)){const u=this.providerService.getRelativeFilePath(t,l.uri),d=e.findIndex(([f])=>f===u);d!==-1&&e.splice(d,1)}break}}return e},n.context)}finally{n.stop()}}async writeFile(t,e,r,n){const i=this.providerService.getVirtualWorkspaceUri(t);if(i===void 0)return;const o=new Z(`ChangeStore.writeFile(${t.toString()})`,{},e.length,n);try{const a=[];if(await this.lock.synchronizeWrite(E(i),async()=>this.writeFileCore(i,t,a,e,r,n),o.context),a.length===0)return;this._onDidChange.fire(a)}finally{o.stop()}}async writeFileCore(t,e,r,n,i,o){const a=new Z(`ChangeStore.writeFileCore(${e.toString()})`,{},n.length,o);try{const[{operation:s,index:l},u,d]=await Promise.all([this.getWorkingOperation(e,t),es(n),es(i)]);if(u===d&&(s==null?void 0:s.type)===I.Changed)return this.discardCore(t,e,r);if(u===(s==null?void 0:s.hash)&&d===(s==null?void 0:s.originalHash))return;const[{HEAD:f}]=await Promise.all([this.providerService.getMetadata(e),this.saveWorkingContent(t,e,n)]);await this.spliceOperation(e,l,s===void 0?{type:I.Changed,uri:e,fileType:h.FileType.File,revision:f.sha,timestamp:Date.now(),size:n.byteLength,hash:u,originalHash:d,conflicts:o,staged:!1}:{...s,revision:f.sha,timestamp:Date.now(),size:n.byteLength,hash:u,originalHash:d,conflicts:o,staged:!1},r)}finally{a.stop()}}async createFile(t,e){const r=this.providerService.getVirtualWorkspaceUri(t);if(r===void 0)return;const n=new Z(`ChangeStore.createFile(${t.toString()})`,{},e.length);try{const i=[];if(await this.lock.synchronizeWrite(E(r),async()=>{const[{operation:o,index:a},s,l]=await Promise.all([this.getWorkingOperation(t,r),es(e),this.providerService.getMetadata(t),this.saveWorkingContent(r,t,e)]);await this.spliceOperation(t,a,o===void 0?{type:I.Created,uri:t,fileType:h.FileType.File,revision:l.HEAD.sha,timestamp:Date.now(),size:e.byteLength,hash:s,originalHash:s}:{...o,type:I.Created,revision:l.HEAD.sha,timestamp:Date.now(),size:e.byteLength,hash:s},i)},n.context),i.length===0)return;this._onDidChange.fire(i)}finally{n.stop()}}async deleteFile(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const r=new Z(`ChangeStore.deleteFile(${t.toString()})`);try{const n=[];if(await this.lock.synchronizeWrite(E(e),async()=>{const{operation:i,index:o}=await this.getWorkingOperation(t,e);if((i==null?void 0:i.type)===I.Created)return this.discardCore(e,t,n);const[a]=await Promise.all([this.providerService.getMetadata(t),this.discardWorkingContent(e,t)]);await this.spliceOperation(t,o,{type:I.Deleted,uri:t,fileType:h.FileType.File,revision:a.HEAD.sha,timestamp:Date.now(),size:void 0,hash:void 0,originalHash:void 0},n)},r.context),n.length===0)return;this._onDidChange.fire(n)}finally{r.stop()}}findParent(t,e,r){const n=M(t),{operation:i,index:o}=this.findWorkingOperation(n,e);return i!==void 0&&r(i,e)?{parent:i,parentIndex:o}:{parent:void 0,parentIndex:-1}}findNewParentWithOnlyChild(t,e){const r=O(t);return this.findParent(t,e,(n,i)=>n.type===I.Created&&!i.some(o=>R(o.uri,n.uri)&&O(o.uri)!==r))}async getWorkingOperation(t,e){return this.findWorkingOperation(t,await this.getWorkingOperations(e))}findWorkingOperation(t,e){if(e.length===0)return{operation:void 0,index:-1};const r=O(t);let n=-1;const i=e.find((o,a)=>O(o.uri)!==r?!1:(n=a,!0));return i===void 0?{operation:void 0,index:-1}:{operation:i,index:n}}async getWorkingOperations(t){const e=E(t);let r=this.cache.get(e);return r===void 0&&(r=this.fromStorage(await this.storageService.get(this.getOperationsStorageKey(e))),this.cache.set(e,r)),r}async saveWorkingOperations(t,e){V.debug(`ChangeStore.saveWorkingOperations(${t.toString()})`,e.length);const r=E(t);this.cache.set(r,e);try{await this.storageService.store(this.getOperationsStorageKey(r),this.toStorage(e))}catch(n){throw this.cache.delete(r),V.error(n,`Failed to save repository changes for ${r}`),n}}getOperationsStorageKey(t){return`operations/${t}`}async getWorkingContent(t,e){try{return await this.fileStorageService.get(this.getFileStorageKey(t,e))}catch(r){throw V.error(r),this.telemetryService.sendException(r),r}}async discardWorkingContent(t,e){V.debug(`ChangeStore.discardWorkingContent(${e.toString()})`);try{return await this.fileStorageService.delete(this.getFileStorageKey(t,e))}catch(r){if(r instanceof h.FileSystemError&&r.code===zy)return;throw V.error(r),this.telemetryService.sendException(r),r}}async saveWorkingContent(t,e,r){V.debug(`ChangeStore.saveWorkingContent(${e.toString()})`,r.length);try{return await this.fileStorageService.store(this.getFileStorageKey(t,e),r)}catch(n){throw V.error(n),this.telemetryService.sendException(n),n}}getFileStorageKey(t,e){return`changestore/${B(e)}`}async spliceOperation(t,e,r,n){const i=this.providerService.getVirtualWorkspaceUri(t);if(i===void 0)return;const o=await this.getWorkingOperations(i);e!==-1?o.splice(e,1,r):o.push(r),await this.saveWorkingOperations(i,o),n.push(ts(r,i,t))}fromStorage(t){if(!t)return[];try{const e=JSON.parse(t,(r,n)=>(r==="uri"||r.endsWith("Uri"))&&x(n)?typeof n=="string"?h.Uri.parse(n):h.Uri.from(n):n);return Array.isArray(e)?e:e.operations}catch(e){throw V.error(e,"Failed to deserialize ChangeStore operations"),e}}toStorage(t){const e={schemaVersion:Xo.operationsStorageSchemaVersion,operations:t};return JSON.stringify(e)}},"_ChangeStore");let rs=Xo;rs.operationsStorageSchemaVersion=1,rs.ScopedChangeStore=class{constructor(t,e,r){this.changeStore=t,this.scope=e,this.workspaceId=r}createPatch(t,e,r){return this.changeStore.createPatch(this.stripUriScope(t),this.stripUriScope(e),r)}discardAll(t,e){return this.changeStore.discardAll(this.stripUriScope(t),e)}getChange(t){return this.changeStore.getChange(this.stripUriScope(t))}getChanges(t,e){return this.changeStore.getChanges(this.stripUriScope(t),e)}async getGroupedChanges(t,e){return this.changeStore.getGroupedChanges(this.stripUriScope(t),e)}hasChanges(t){return this.changeStore.hasChanges(this.stripUriScope(t))}maybeHasChanges(t,e){return this.changeStore.maybeHasChanges(this.stripUriScope(t),this.stripUriScope(e))}async stat(t){const r=this.changeStore.getUriScope(t)!==this.workspaceId,n=await this.changeStore.stat(this.stripUriScope(t));return n!==void 0&&r&&(n.permissions=h.FilePermission.Readonly),n}readFile(t){return this.changeStore.readFile(this.stripUriScope(t))}resolveDiffCommand(t,e,r,n){return this.changeStore.resolveDiffCommand(this.changeStore.getScopedUri(t,this.scope),this.changeStore.getScopedUri(e,this.scope),r,n)}stripUriScope(t){return t===void 0||!t.fragment?t:t.with({fragment:""})}},qy([ft()],rs.prototype,"getWorkingOperations",1);function Ip(t){switch(t){case I.Changed:return tn("change type changed","Modified");case I.Created:return tn("change type created","Added");case I.Deleted:return tn("change type deleted","Deleted")}}c(Ip,"getStatusText");function Gy(t){const[e,r]=t;switch(e){case I.Changed:switch(r){case I.Changed:case I.Created:return tn("conflict status changed both","Modified by Both");case I.Deleted:return tn("conflict status deleted them","Deleted by Incoming")}break;case I.Created:switch(r){case I.Changed:case I.Created:return tn("conflict status created both","Added by Both");case I.Deleted:return tn("conflict status deleted them","Deleted by Incoming")}break;case I.Deleted:switch(r){case I.Changed:case I.Created:return tn("conflict status deleted us","Deleted by Current");case I.Deleted:return tn("conflict status deleted both","Deleted by Both")}break}}c(Gy,"getConflictStatusText");var Tp=Object.defineProperty,Ky=c(t=>Tp(t,"__esModule",{value:!0}),"vu"),Ae=c((t,e)=>()=>(t&&(e=t(t=0)),e),"C"),Zy=c((t,e)=>{Ky(t);for(var r in e)Tp(t,r,{get:e[r],enumerable:!0})},"hu"),kp,Qy=Ae(()=>{kp={Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5}}),Yo,Fn,di,Jr,Ic,hi,Tc,kc,Dp,Fp,ns,Hu=Ae(()=>{Yo="function",Fn="object",di="undefined",Jr="prototype",Ic="hasOwnProperty",hi=Object,Tc=hi[Jr],kc=hi.assign,Dp=hi.create,Fp=hi.defineProperty,ns=Tc[Ic]});function Jo(){return typeof globalThis!==di&&globalThis?globalThis:typeof self!==di&&self?self:typeof window!==di&&window?window:typeof __webpack_require__.g!==di&&__webpack_require__.g?__webpack_require__.g:null}c(Jo,"ot");function Wu(t){throw new TypeError(t)}c(Wu,"Ir");function Dc(t){var e=Dp;if(e)return e(t);if(t==null)return{};var r=typeof t;r!==Fn&&r!==Yo&&Wu("Object prototype may only be an Object:"+t);function n(){}return c(n,"n"),n[Jr]=t,new n}c(Dc,"Dt");var Pp=Ae(()=>{Hu()});function $t(t,e){typeof e!==Yo&&e!==null&&Wu("Class extends value "+String(e)+" is not a constructor or null"),Fc(t,e);function r(){this.constructor=t}c(r,"r"),t[Jr]=e===null?Dc(e):(r[Jr]=e[Jr],new r)}c($t,"H");var Xy,Yy,Np,ea,Fc,Jy=Ae(()=>{Hu(),Pp(),Xy=(Jo()||{}).Symbol,Yy=(Jo()||{}).Reflect,Np=c(function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Tc[Ic].call(e,i)&&(t[i]=e[i])}return t},"Su"),ea=kc||Np,Fc=c(function(t,e){return Fc=hi.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n[Ic](i)&&(r[i]=n[i])},Fc(t,e)},"Ai")}),eb=Ae(()=>{}),qt=Ae(()=>{Hu(),Pp(),Jy(),eb()});function Ui(t,e){return t&&ss[Pn].hasOwnProperty.call(t,e)}c(Ui,"jt");function Mp(t){return t&&(t===ss[Pn]||t===Array[Pn])}c(Mp,"To");function qu(t){return Mp(t)||t===Function[Pn]}c(qu,"Ri");function uo(t){if(t){if(ra)return ra(t);var e=t[Lp]||t[Pn]||(t[is]?t[is][Pn]:null);if(e)return e}return null}c(uo,"nr");function Pc(t,e){var r=[],n=ss.getOwnPropertyNames;if(n)r=n(t);else for(var i in t)typeof i=="string"&&Ui(t,i)&&r.push(i);if(r&&r.length>0)for(var o=0;o<r.length;o++)e(r[o])}c(Pc,"Bn");function zu(t,e,r){return e!==is&&typeof t[e]===os&&(r||Ui(t,e))}c(zu,"Mi");function Nc(t){throw new TypeError("DynamicProto: "+t)}c(Nc,"Vn");function tb(t){var e={};return Pc(t,function(r){!e[r]&&zu(t,r,!1)&&(e[r]=t[r])}),e}c(tb,"Tu");function ju(t,e){for(var r=t.length-1;r>=0;r--)if(t[r]===e)return!0;return!1}c(ju,"Li");function rb(t,e,r,n){function i(l,u,d){var f=u[d];if(f[Mc]&&n){var p=l[as]||{};p[ta]!==!1&&(f=(p[u[ho]]||{})[d]||f)}return function(){return f.apply(l,arguments)}}c(i,"i");var o={};Pc(r,function(l){o[l]=i(e,r,l)});for(var a=uo(t),s=[];a&&!qu(a)&&!ju(s,a);)Pc(a,function(l){!o[l]&&zu(a,l,!ra)&&(o[l]=i(e,a,l))}),s.push(a),a=uo(a);return o}c(rb,"Eu");function nb(t,e,r,n){var i=null;if(t&&Ui(r,ho)){var o=t[as]||{};if(i=(o[r[ho]]||{})[e],i||Nc("Missing ["+e+"] "+os),!i[$c]&&o[ta]!==!1){for(var a=!Ui(t,e),s=uo(t),l=[];a&&s&&!qu(s)&&!ju(l,s);){var u=s[e];if(u){a=u===n;break}l.push(s),s=uo(s)}try{a&&(t[e]=i),i[$c]=1}catch(d){o[ta]=!1}}}return i}c(nb,"wu");function ib(t,e,r){var n=e[t];return n===r&&(n=uo(e)[t]),typeof n!==os&&Nc("["+t+"] is not a "+os),n}c(ib,"Pu");function ob(t,e,r,n,i){function o(l,u){var d=c(function(){var f=nb(this,u,l,d)||ib(u,l,d);return f.apply(this,arguments)},"l");return d[Mc]=1,d}if(c(o,"a"),!Mp(t)){var a=r[as]=r[as]||{},s=a[e]=a[e]||{};a[ta]!==!1&&(a[ta]=!!i),Pc(r,function(l){zu(r,l,!1)&&r[l]!==n[l]&&(s[l]=r[l],delete r[l],(!Ui(t,l)||t[l]&&!t[l][Mc])&&(t[l]=o(t,l)))})}}c(ob,"bu");function ab(t,e){if(ra)for(var r=[],n=uo(e);n&&!qu(n)&&!ju(r,n);){if(n===t)return!0;r.push(n),n=uo(n)}return!1}c(ab,"Du");function Vu(t,e){return Ui(t,Pn)?t.name||e||Zu:((t||{})[is]||{}).name||e||Zu}c(Vu,"Ui");function Gu(t,e,r,n){Ui(t,Pn)||Nc("theClass is an invalid class definition.");var i=t[Pn];ab(i,e)||Nc("["+Vu(t)+"] is not in class hierarchy of ["+Vu(e)+"]");var o=null;Ui(i,ho)?o=i[ho]:(o=$p+Vu(t,"_")+"$"+Xu,Xu++,i[ho]=o);var a=Gu[Ku],s=!!a[Lc];s&&n&&n[Lc]!==void 0&&(s=!!n[Lc]);var l=tb(e),u=rb(i,e,l,s);r(e,u);var d=!!ra&&!!a[Qu];d&&n&&(d=!!n[Qu]),ob(i,o,e,l,d!==!1)}c(Gu,"_i");var is,Pn,os,as,Mc,ho,$p,$c,ta,Ku,Zu,Lp,Lc,Qu,ss,ra,Xu,Bp,ir,yr=Ae(()=>{is="constructor",Pn="prototype",os="function",as="_dynInstFuncs",Mc="_isDynProxy",ho="_dynClass",$p="_dynCls$",$c="_dynInstChk",ta=$c,Ku="_dfOpts",Zu="_unknown_",Lp="__proto__",Lc="useBaseInst",Qu="setInstFuncs",ss=Object,ra=ss.getPrototypeOf,Xu=0,Bp={setInstFuncs:!0,useBaseInst:!0},Gu[Ku]=Bp,ir=Gu}),Ue,Pe,Bc=Ae(()=>{(function(t){t[t.CRITICAL=1]="CRITICAL",t[t.WARNING=2]="WARNING"})(Ue||(Ue={})),Pe={BrowserDoesNotSupportLocalStorage:0,BrowserCannotReadLocalStorage:1,BrowserCannotReadSessionStorage:2,BrowserCannotWriteLocalStorage:3,BrowserCannotWriteSessionStorage:4,BrowserFailedRemovalFromLocalStorage:5,BrowserFailedRemovalFromSessionStorage:6,CannotSendEmptyTelemetry:7,ClientPerformanceMathError:8,ErrorParsingAISessionCookie:9,ErrorPVCalc:10,ExceptionWhileLoggingError:11,FailedAddingTelemetryToBuffer:12,FailedMonitorAjaxAbort:13,FailedMonitorAjaxDur:14,FailedMonitorAjaxOpen:15,FailedMonitorAjaxRSC:16,FailedMonitorAjaxSend:17,FailedMonitorAjaxGetCorrelationHeader:18,FailedToAddHandlerForOnBeforeUnload:19,FailedToSendQueuedTelemetry:20,FailedToReportDataLoss:21,FlushFailed:22,MessageLimitPerPVExceeded:23,MissingRequiredFieldSpecification:24,NavigationTimingNotSupported:25,OnError:26,SessionRenewalDateIsZero:27,SenderNotInitialized:28,StartTrackEventFailed:29,StopTrackEventFailed:30,StartTrackFailed:31,StopTrackFailed:32,TelemetrySampledAndNotSent:33,TrackEventFailed:34,TrackExceptionFailed:35,TrackMetricFailed:36,TrackPVFailed:37,TrackPVFailedCalc:38,TrackTraceFailed:39,TransmissionFailed:40,FailedToSetStorageBuffer:41,FailedToRestoreStorageBuffer:42,InvalidBackendResponse:43,FailedToFixDepricatedValues:44,InvalidDurationValue:45,TelemetryEnvelopeInvalid:46,CreateEnvelopeError:47,CannotSerializeObject:48,CannotSerializeObjectNonSerializable:49,CircularReferenceDetected:50,ClearAuthContextFailed:51,ExceptionTruncated:52,IllegalCharsInName:53,ItemNotInArray:54,MaxAjaxPerPVExceeded:55,MessageTruncated:56,NameTooLong:57,SampleRateOutOfRange:58,SetAuthContextFailed:59,SetAuthContextFailedAccountName:60,StringValueTooLong:61,StartCalledMoreThanOnce:62,StopCalledWithoutStart:63,TelemetryInitializerFailed:64,TrackArgumentsNotSpecified:65,UrlTooLong:66,SessionStorageBufferFull:67,CannotAccessCookie:68,IdTooLong:69,InvalidEvent:70,FailedMonitorAjaxSetRequestHeader:71,SendBrowserInfoOnUserInit:72,PluginException:73,NotificationException:74,SnippetScriptLoadFailure:99,InvalidInstrumentationKey:100,CannotParseAiBlobValue:101,InvalidContentBlob:102,TrackPageActionEventFailed:103}});function Yu(t){return Tc.toString.call(t)}c(Yu,"Oi");function sb(t,e){return typeof t===e}c(sb,"Hi");function Ur(t){return t===void 0||typeof t===di}c(Ur,"pe");function Oe(t){return t===null||Ur(t)}c(Oe,"x");function cb(t){return!Oe(t)}c(cb,"ji");function Ju(t,e){return t&&ns.call(t,e)}c(Ju,"Er");function fo(t){return typeof t===Fn}c(fo,"st");function Tt(t){return typeof t===Yo}c(Tt,"j");function cs(t,e,r,n){n===void 0&&(n=!1);var i=!1;if(!Oe(t))try{Oe(t[ad])?Oe(t[od])||(t[od](id+e,r),i=!0):(t[ad](e,r,n),i=!0)}catch(o){}return i}c(cs,"zt");function Up(t,e,r,n){if(n===void 0&&(n=!1),!Oe(t))try{Oe(t[cd])?Oe(t[sd])||t[sd](id+e,r):t[cd](e,r,n)}catch(i){}}c(Up,"qn");function lb(t){var e=t,r=/([^\w\d_$])/g;return r.test(t)&&(e=t.replace(r,"_")),e}c(lb,"zi");function ur(t,e){if(t)for(var r in t)ns.call(t,r)&&e.call(t,r,t[r])}c(ur,"Q");function ub(t,e){if(t&&e){var r=e.length,n=t.length;if(t===e)return!0;if(n>=r){for(var i=n-1,o=r-1;o>=0;o--){if(t[i]!=e[o])return!1;i--}return!0}}return!1}c(ub,"Bi");function Tr(t,e){return t&&e?t.indexOf(e)!==-1:!1}c(Tr,"Ee");function ed(t){return Yu(t)==="[object Date]"}c(ed,"wr");function fi(t){return Yu(t)==="[object Array]"}c(fi,"Re");function Uc(t){return Yu(t)==="[object Error]"}c(Uc,"Bt");function yt(t){return typeof t=="string"}c(yt,"_");function td(t){return typeof t=="number"}c(td,"ir");function rd(t){return typeof t=="boolean"}c(rd,"Gr");function Oi(t){if(ed(t)){var e=c(function(r){var n=String(r);return n.length===1&&(n="0"+n),n},"e");return t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes())+":"+e(t.getUTCSeconds())+"."+String((t.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}c(Oi,"Me");function bt(t,e,r){for(var n=t.length,i=0;i<n&&!(i in t&&e.call(r||t,t[i],i,t)===-1);i++);}c(bt,"R");function ls(t,e,r){for(var n=t.length,i=r||0,o=Math.max(i>=0?i:n-Math.abs(i),0);o<n;o++)if(o in t&&t[o]===e)return o;return-1}c(ls,"Nt");function us(t,e,r){for(var n=t.length,i=r||t,o=new Array(n),a=0;a<n;a++)a in t&&(o[a]=e.call(i,t[a],t));return o}c(us,"Vt");function Op(t,e,r){var n=t.length,i=0,o;if(arguments.length>=3)o=arguments[2];else{for(;i<n&&!(i in t);)i++;o=t[i++]}for(;i<n;)i in t&&(o=e(o,t[i],i,t)),i++;return o}c(Op,"Kr");function Sr(t){return typeof t!="string"?t:t.replace(/^\s+|\s+$/g,"")}c(Sr,"oe");function po(t){var e=typeof t;e!==Yo&&(e!==Fn||t===null)&&Wu("objKeys called on non-object");var r=[];for(var n in t)t&&ns.call(t,n)&&r.push(n);if(zp)for(var i=Oc.length,o=0;o<i;o++)t&&ns.call(t,Oc[o])&&r.push(Oc[o]);return r}c(po,"Qe");function na(t,e,r,n){if(ld)try{var i={enumerable:!0,configurable:!0};return r&&(i.get=r),n&&(i.set=n),ld(t,e,i),!0}catch(o){}return!1}c(na,"St");function rn(){var t=Date;return t.now?t.now():new t().getTime()}c(rn,"de");function Pt(t){return Uc(t)?t.name:""}c(Pt,"G");function kt(t,e,r,n,i){var o=r;return t&&(o=t[e],o!==r&&(!i||i(o))&&(!n||n(r))&&(o=r,t[e]=o)),o}c(kt,"K");function kr(t,e,r){var n;return t?(n=t[e],!n&&Oe(n)&&(n=Ur(r)?{}:r,t[e]=n)):n=Ur(r)?{}:r,n}c(kr,"ge");function Hp(t){return!t}c(Hp,"Gn");function nd(t){return!!t}c(nd,"Pr");function Nn(t){throw new Error(t)}c(Nn,"Ae");function Wp(t,e,r){if(t&&e&&t!==e&&fo(t)&&fo(e)){var n=c(function(o){if(yt(o)){var a=e[o];Tt(a)?(!r||r(o,!0,e,t))&&(t[o]=function(s){return function(){var l=arguments;return e[s].apply(e,l)}}(o)):(!r||r(o,!1,e,t))&&(Ju(t,o)&&delete t[o],na(t,o,function(){return e[o]},function(s){e[o]=s})||(t[o]=a))}},"n");for(var i in e)n(i)}return t}c(Wp,"Wr");function db(t){return function(){function e(){var r=this;t&&ur(t,function(n,i){r[n]=i})}return c(e,"e"),e}()}c(db,"qi");function qp(t){return t&&(t=hi(kc?kc({},t):t)),t}c(qp,"Kn");var id,od,ad,sd,cd,ld,hb,fb,zp,Oc,Dr=Ae(()=>{qt(),id="on",od="attachEvent",ad="addEventListener",sd="detachEvent",cd="removeEventListener",ld=Fp,hb=hi.freeze,fb=hi.seal,zp=!{toString:null}.propertyIsEnumerable("toString"),Oc=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]});function Fr(t){var e=Jo();return e&&e[t]?e[t]:t===dd&&Hc()?window:null}c(Fr,"we");function Hc(){return Boolean(typeof window===Fn&&window)}c(Hc,"ar");function ds(){return Hc()?window:Fr(dd)}c(ds,"Ct");function jp(){return Boolean(typeof document===Fn&&document)}c(jp,"Wn");function Mn(){return jp()?document:Fr(Vp)}c(Mn,"Ne");function pb(){return Boolean(typeof navigator===Fn&&navigator)}c(pb,"ko");function $n(){return pb()?navigator:Fr(Gp)}c($n,"Ue");function gb(){return Boolean(typeof history===Fn&&history)}c(gb,"Ro");function mb(){return gb()?history:Fr(Kp)}c(mb,"Xi");function go(t){if(t&&tg){var e=Fr("__mockLocation");if(e)return e}return typeof location===Fn&&location?location:Fr(Zp)}c(go,"et");function vb(){return typeof console!==di?console:Fr(Qp)}c(vb,"Yi");function pi(){return Fr(Xp)}c(pi,"Ye");function ia(){return Boolean(typeof JSON===Fn&&JSON||Fr(hd)!==null)}c(ia,"vt");function vn(){return ia()?JSON||Fr(hd):null}c(vn,"Pe");function wb(){return Fr(Yp)}c(wb,"$i");function yb(){return Fr(Jp)}c(yb,"Zi");function bb(){var t=$n();return t&&t.product?t.product===eg:!1}c(bb,"Qi");function Wc(){var t=$n();if(t&&(t.userAgent!==Vc||jc===null)){Vc=t.userAgent;var e=(Vc||"").toLowerCase();jc=Tr(e,qc)||Tr(e,zc)}return jc}c(Wc,"qt");function ud(t){if(t===void 0&&(t=null),!t){var e=$n()||{};t=e?(e.userAgent||"").toLowerCase():""}var r=(t||"").toLowerCase();if(Tr(r,qc))return parseInt(r.split(qc)[1]);if(Tr(r,zc)){var n=parseInt(r.split(zc)[1]);if(n)return n+4}return null}c(ud,"or");function mt(t){var e=Object[Jr].toString.call(t),r="";return e==="[object Error]"?r="{ stack: '"+t.stack+"', message: '"+t.message+"', name: '"+t.name+"'":ia()&&(r=vn().stringify(t)),e+r}c(mt,"O");var dd,Vp,Gp,Kp,Zp,Qp,Xp,hd,Yp,Jp,eg,qc,zc,jc,Vc,tg,hs=Ae(()=>{qt(),Dr(),dd="window",Vp="document",Gp="navigator",Kp="history",Zp="location",Qp="console",Xp="performance",hd="JSON",Yp="crypto",Jp="msCrypto",eg="ReactNative",qc="msie",zc="trident/",jc=null,Vc=null,tg=!1});function rg(t){return t?'"'+t.replace(/\"/g,"")+'"':""}c(rg,"Mo");function Gc(t,e){return(t||{}).logger||new fd(e)}c(Gc,"kt");var ng,ig,og,oa,fd,pd=Ae(()=>{Bc(),hs(),yr(),Dr(),ng="AI (Internal): ",ig="AI: ",og="AITR_",oa=function(){function t(e,r,n,i){n===void 0&&(n=!1);var o=this;o.messageId=e,o.message=(n?ig:ng)+e;var a="";ia()&&(a=vn().stringify(i));var s=(r?" message:"+rg(r):"")+(i?" props:"+rg(a):"");o.message+=s}return c(t,"t"),t.dataType="MessageData",t}(),fd=function(){function t(e){this.identifier="DiagnosticLogger",this.queue=[];var r=0,n={};ir(t,this,function(i){Oe(e)&&(e={}),i.consoleLoggingLevel=function(){return o("loggingLevelConsole",0)},i.telemetryLoggingLevel=function(){return o("loggingLevelTelemetry",1)},i.maxInternalMessageLimit=function(){return o("maxMessageLimit",25)},i.enableDebugExceptions=function(){return o("enableDebugExceptions",!1)},i.throwInternal=function(s,l,u,d,f){f===void 0&&(f=!1);var p=new oa(l,u,f,d);if(i.enableDebugExceptions())throw p;if(!Ur(p.message)){var g=i.consoleLoggingLevel();if(f){var S=+p.messageId;!n[S]&&g>=Ue.WARNING&&(i.warnToConsole(p.message),n[S]=!0)}else g>=Ue.WARNING&&i.warnToConsole(p.message);i.logInternalMessage(s,p)}},i.warnToConsole=function(s){var l=vb();if(l){var u="log";l.warn&&(u="warn"),Tt(l[u])&&l[u](s)}},i.resetInternalMessageCount=function(){r=0,n={}},i.logInternalMessage=function(s,l){if(!a()){var u=!0,d=og+l.messageId;if(n[d]?u=!1:n[d]=!0,u&&(s<=i.telemetryLoggingLevel()&&(i.queue.push(l),r++),r===i.maxInternalMessageLimit())){var f="Internal events throttle limit per PageView reached for this app.",p=new oa(Pe.MessageLimitPerPVExceeded,f,!1);i.queue.push(p),i.warnToConsole(f)}}};function o(s,l){var u=e[s];return Oe(u)?l:u}c(o,"a");function a(){return r>=i.maxInternalMessageLimit()}c(a,"o")})}return c(t,"t"),t}()});function aa(t,e,r,n,i){if(t){var o=t;if(Tt(o.getPerfMgr)&&(o=o.getPerfMgr()),o){var a=void 0,s=o.getCtx(Kc);try{if(a=o.create(e(),n,i),a){if(s&&a.setCtx&&(a.setCtx(sa.ParentContextKey,s),s.getCtx&&s.setCtx)){var l=s.getCtx(sa.ChildrenContextKey);l||(l=[],s.setCtx(sa.ChildrenContextKey,l)),l.push(a)}return o.setCtx(Kc,a),r(a)}}catch(u){a&&a.setCtx&&a.setCtx("exception",u)}finally{a&&o.fire(a),o.setCtx(Kc,s)}}}return r()}c(aa,"ct");var mo,sa,gd,Kc,Zc=Ae(()=>{yr(),Dr(),mo="ctx",sa=function(){function t(e,r,n){var i=this,o=!1;if(i.start=rn(),i.name=e,i.isAsync=n,i.isChildEvt=function(){return!1},Tt(r)){var a;o=na(i,"payload",function(){return!a&&Tt(r)&&(a=r(),r=null),a})}i.getCtx=function(s){return s?s===t.ParentContextKey||s===t.ChildrenContextKey?i[s]:(i[mo]||{})[s]:null},i.setCtx=function(s,l){if(s)if(s===t.ParentContextKey)i[s]||(i.isChildEvt=function(){return!0}),i[s]=l;else if(s===t.ChildrenContextKey)i[s]=l;else{var u=i[mo]=i[mo]||{};u[s]=l}},i.complete=function(){var s=0,l=i.getCtx(t.ChildrenContextKey);if(fi(l))for(var u=0;u<l.length;u++){var d=l[u];d&&(s+=d.time)}i.time=rn()-i.start,i.exTime=i.time-s,i.complete=function(){},!o&&Tt(r)&&(i.payload=r())}}return c(t,"t"),t.ParentContextKey="parent",t.ChildrenContextKey="childEvts",t}(),gd=function(){function t(e){this.ctx={},ir(t,this,function(r){r.create=function(n,i,o){return new sa(n,i,o)},r.fire=function(n){n&&(n.complete(),e&&e.perfEvent(n))},r.setCtx=function(n,i){if(n){var o=r[mo]=r[mo]||{};o[n]=i}},r.getCtx=function(n){return(r[mo]||{})[n]}})}return c(t,"t"),t}(),Kc="CoreUtils.doPerf"}),ag,_b=Ae(()=>{Zc(),Bc(),Dr(),ag=function(){function t(e,r){var n=this,i=null,o=Tt(e.processTelemetry),a=Tt(e.setNextPlugin);n._hasRun=!1,n.getPlugin=function(){return e},n.getNext=function(){return i},n.setNext=function(s){i=s},n.processTelemetry=function(s,l){l||(l=r);var u=e?e.identifier:"TelemetryPluginChain";aa(l?l.core():null,function(){return u+":processTelemetry"},function(){if(e&&o){n._hasRun=!0;try{l.setNext(i),a&&e.setNextPlugin(i),i&&(i._hasRun=!1),e.processTelemetry(s,l)}catch(f){var d=i&&i._hasRun;(!i||!d)&&l.diagLog().throwInternal(Ue.CRITICAL,Pe.PluginException,"Plugin ["+e.identifier+"] failed during processTelemetry - "+f),i&&!d&&i.processTelemetry(s,l)}}else i&&(n._hasRun=!0,i.processTelemetry(s,l))},function(){return{item:s}},!s.sync)}}return c(t,"t"),t}()});function md(t,e){var r=[];if(t&&t.length>0)for(var n=null,i=0;i<t.length;i++){var o=t[i];if(o&&Tt(o.processTelemetry)){var a=new ag(o,e);r.push(a),n&&n.setNext(a),n=a}}return r.length>0?r[0]:null}c(md,"ta");function xb(t,e,r){var n=[],i=!r;if(t)for(;t;){var o=t.getPlugin();(i||o===r)&&(i=!0,n.push(o)),t=t.getNext()}return i||n.push(r),md(n,e)}c(xb,"qu");function Sb(t,e,r){var n=t,i=!1;return r&&t&&(n=[],bt(t,function(o){(i||o===r)&&(i=!0,n.push(o))})),r&&!i&&(n||(n=[]),n.push(r)),md(n,e)}c(Sb,"Gu");var vo,vd=Ae(()=>{pd(),_b(),Dr(),vo=function(){function t(e,r,n,i){var o=this,a=null;i!==null&&(e&&Tt(e.getPlugin)?a=xb(e,o,i||e.getPlugin()):i?a=Sb(e,o,i):Ur(i)&&(a=md(e,o))),o.core=function(){return n},o.diagLog=function(){return Gc(n,r)},o.getCfg=function(){return r},o.getExtCfg=function(s,l){l===void 0&&(l={});var u;if(r){var d=r.extensionConfig;d&&s&&(u=d[s])}return u||l},o.getConfig=function(s,l,u){u===void 0&&(u=!1);var d,f=o.getExtCfg(s,null);return f&&!Oe(f[l])?d=f[l]:r&&!Oe(r[l])&&(d=r[l]),Oe(d)?u:d},o.hasNext=function(){return a!=null},o.getNext=function(){return a},o.setNext=function(s){a=s},o.processNext=function(s){var l=a;l&&(a=l.getNext(),l.processTelemetry(s,o))},o.createNew=function(s,l){return s===void 0&&(s=null),new t(s||a,r,n,l)}}return c(t,"t"),t}()}),sg,wd,cg=Ae(()=>{sg="iKey",wd="extensionConfig"}),fs,wo,lg=Ae(()=>{vd(),Dr(),cg(),fs="getPlugin",wo=function(){function t(){var e=this,r=!1,n=null,i=null;e.core=null,e.diagLog=function(o){return e._getTelCtx(o).diagLog()},e.isInitialized=function(){return r},e.setInitialized=function(o){r=o},e.setNextPlugin=function(o){i=o},e.processNext=function(o,a){a?a.processNext(o):i&&Tt(i.processTelemetry)&&i.processTelemetry(o,null)},e._getTelCtx=function(o){o===void 0&&(o=null);var a=o;if(!a){var s=n||new vo(null,{},e.core);i&&i[fs]?a=s.createNew(null,i[fs]):a=s.createNew(null,i)}return a},e._baseTelInit=function(o,a,s,l){o&&kt(o,wd,[],null,Oe),!l&&a&&(l=a.getProcessTelContext().getNext());var u=i;i&&i[fs]&&(u=i[fs]()),e.core=a,n=new vo(l,o,a,u),r=!0}}return c(t,"t"),t.prototype.initialize=function(e,r,n,i){this._baseTelInit(e,r,n,i)},t}()});function yd(t,e){for(var r=[],n=null,i=t.getNext();i;){var o=i.getPlugin();o&&(n&&Tt(n[_d])&&Tt(o[Qc])&&n[_d](o),(!Tt(o[xd])||!o[xd]())&&r.push(o),n=o,i=i.getNext())}bt(r,function(a){a.initialize(t.getCfg(),t.core(),e,t.getNext())})}c(yd,"Yr");function ug(t){return t.sort(function(e,r){var n=0,i=Tt(r[Qc]);return Tt(e[Qc])?n=i?e[bd]-r[bd]:1:i&&(n=-1),n})}c(ug,"aa");var Qc,bd,_d,xd,dg=Ae(()=>{Dr(),Qc="processTelemetry",bd="priority",_d="setNextPlugin",xd="isInitialized"}),Xc,hg,fg,Cb=Ae(()=>{qt(),yr(),lg(),vd(),dg(),Dr(),Xc=500,hg="Channel has invalid priority",fg=function(t){$t(e,t);function e(){var r=t.call(this)||this;r.identifier="ChannelControllerPlugin",r.priority=Xc;var n;ir(e,r,function(s,l){s.setNextPlugin=function(u){},s.processTelemetry=function(u,d){n&&bt(n,function(f){if(f.length>0){var p=r._getTelCtx(d).createNew(f);p.processNext(u)}})},s.getChannelControls=function(){return n},s.initialize=function(u,d,f){s.isInitialized()||(l.initialize(u,d,f),a((u||{}).channels,f),bt(n,function(p){return yd(new vo(p,u,d),f)}))}});function i(s){bt(s,function(l){l.priority<Xc&&Nn(hg+l.identifier)})}c(i,"i");function o(s){s&&s.length>0&&(s=s.sort(function(l,u){return l.priority-u.priority}),i(s),n.push(s))}c(o,"a");function a(s,l){if(n=[],s&&bt(s,function(d){return o(d)}),l){var u=[];bt(l,function(d){d.priority>Xc&&u.push(d)}),o(u)}}return c(a,"o"),r}return c(e,"e"),e._staticInit=function(){var r=e.prototype;na(r,"ChannelControls",r.getChannelControls),na(r,"channelQueue",r.getChannelControls)}(),e}(wo)});function pg(t,e){var r=ps[gi]||ms[gi];return r||(r=ps[gi]=ps(t,e),ms[gi]=r),r}c(pg,"pa");function Yc(t){return t?t.isEnabled():!0}c(Yc,"ti");function Eb(t){var e=t.cookieCfg=t.cookieCfg||{};if(kt(e,"domain",t.cookieDomain,cb,Oe),kt(e,"path",t.cookiePath||"/",null,Oe),Oe(e[tl])){var r=void 0;Ur(t[Rd])||(r=!t[Rd]),Ur(t[Ad])||(r=!t[Ad]),e[tl]=r}return e}c(Eb,"Wu");function Sd(t,e){var r;if(t)r=t.getCookieMgr();else if(e){var n=e.cookieCfg;n[gi]?r=n[gi]:r=ps(e)}return r||(r=pg(e,(t||{}).logger)),r}c(Sd,"cr");function ps(t,e){var r=Eb(t||ms),n=r.path||"/",i=r.domain,o=r[tl]!==!1,a={isEnabled:function(){var s=o&&gg(e),l=ms[gi];return s&&l&&a!==l&&(s=Yc(l)),s},setEnabled:function(s){o=s!==!1},set:function(s,l,u,d,f){if(Yc(a)){var p={},g=Sr(l||nn),S=g.indexOf(";");if(S!==-1&&(g=Sr(l.substring(0,S)),p=mg(l.substring(S+1))),kt(p,"domain",d||i,nd,Ur),!Oe(u)){var y=Wc();if(Ur(p[el])){var b=rn(),_=b+u*1e3;if(_>0){var C=new Date;C.setTime(_),kt(p,el,vg(C,y?Cd:Ed)||vg(C,y?Cd:Ed)||nn,nd)}}y||kt(p,"max-age",nn+u,null,Ur)}var k=go();k&&k.protocol==="https:"&&(kt(p,"secure",null,null,Ur),rl===null&&(rl=!bg(($n()||{}).userAgent)),rl&&kt(p,"SameSite","None",null,Ur)),kt(p,"path",f||n,null,Ur);var F=r.setCookie||yg;F(s,wg(g,p))}},get:function(s){var l=nn;return Yc(a)&&(l=(r.getCookie||Rb)(s)),l},del:function(s,l){Yc(a)&&a.purge(s,l)},purge:function(s,l){if(gg(e)){var u=(f={},f.path=l||"/",f[el]="Thu, 01 Jan 1970 00:00:01 GMT",f);Wc()||(u["max-age"]="0");var d=r.delCookie||yg;d(s,wg(nn,u))}var f}};return a[gi]=a,a}c(ps,"ur");function gg(t){if(gs===null){gs=!1;try{var e=ca||{};gs=e[Jc]!==void 0}catch(r){t&&t.throwInternal(Ue.WARNING,Pe.CannotAccessCookie,"Cannot access document.cookie - "+Pt(r),{exception:mt(r)})}}return gs}c(gg,"da");function mg(t){var e={};if(t&&t.length){var r=Sr(t).split(";");bt(r,function(n){if(n=Sr(n||nn),n){var i=n.indexOf("=");i===-1?e[n]=null:e[Sr(n.substring(0,i))]=Sr(n.substring(i+1))}})}return e}c(mg,"Xo");function vg(t,e){return Tt(t[e])?t[e]():null}c(vg,"Yo");function wg(t,e){var r=t||nn;return ur(e,function(n,i){r+="; "+n+(Oe(i)?nn:"="+i)}),r}c(wg,"$o");function Rb(t){var e=nn;if(ca){var r=ca[Jc]||nn;Id!==r&&(Td=mg(r),Id=r),e=Sr(Td[t]||nn)}return e}c(Rb,"Ju");function yg(t,e){ca&&(ca[Jc]=t+"="+e)}c(yg,"Zo");function bg(t){return yt(t)?!!(Tr(t,"CPU iPhone OS 12")||Tr(t,"iPad; CPU OS 12")||Tr(t,"Macintosh; Intel Mac OS X 10_14")&&Tr(t,"Version/")&&Tr(t,"Safari")||Tr(t,"Macintosh; Intel Mac OS X 10_14")&&ub(t,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||Tr(t,"Chrome/5")||Tr(t,"Chrome/6")||Tr(t,"UnrealEngine")&&!Tr(t,"Chrome")||Tr(t,"UCBrowser/12")||Tr(t,"UCBrowser/11")):!1}c(bg,"ri");var Cd,Ed,Jc,el,tl,Rd,Ad,gi,nn,gs,rl,Id,ca,Td,ms,kd=Ae(()=>{Bc(),hs(),Dr(),Cd="toGMTString",Ed="toUTCString",Jc="cookie",el="expires",tl="enabled",Rd="isCookieUseDisabled",Ad="disableCookiesUsage",gi="_ckMgr",nn="",gs=null,rl=null,Id=null,ca=Mn(),Td={},ms={}}),_g,Dd,Fd,xg=Ae(()=>{qt(),yr(),Cb(),vd(),dg(),Zc(),kd(),Dr(),cg(),_g="Extensions must provide callback to initialize",Dd="_notificationManager",Fd=function(){function t(){var e=!1,r,n,i,o,a;ir(t,this,function(s){s._extensions=new Array,n=new fg,s.logger=Dc({throwInternal:function(l,u,d,f,p){p===void 0&&(p=!1)},warnToConsole:function(l){},resetInternalMessageCount:function(){}}),r=[],s.isInitialized=function(){return e},s.initialize=function(l,u,d,f){s.isInitialized()&&Nn("Core should not be initialized more than once"),(!l||Oe(l.instrumentationKey))&&Nn("Please provide instrumentation key"),i=f,s[Dd]=f,s.config=l||{},l.extensions=Oe(l.extensions)?[]:l.extensions;var p=kr(l,wd);p.NotificationManager=f,d&&(s.logger=d);var g=[];g.push.apply(g,u.concat(l.extensions)),g=ug(g);var S=[],y=[],b={};bt(g,function(_){(Oe(_)||Oe(_.initialize))&&Nn(_g);var C=_.priority,k=_.identifier;_&&C&&(Oe(b[C])?b[C]=k:d.warnToConsole("Two extensions have same priority #"+C+" - "+b[C]+", "+k)),!C||C<n.priority?S.push(_):y.push(_)}),g.push(n),S.push(n),g=ug(g),s._extensions=g,yd(new vo([n],l,s),g),yd(new vo(S,l,s),g),s._extensions=S,s.getTransmissionControls().length===0&&Nn("No channels available"),e=!0,s.releaseQueue()},s.getTransmissionControls=function(){return n.getChannelControls()},s.track=function(l){kt(l,sg,s.config.instrumentationKey,null,Hp),kt(l,"time",Oi(new Date),null,Hp),kt(l,"ver","4.0",null,Oe),s.isInitialized()?s.getProcessTelContext().processNext(l):r.push(l)},s.getProcessTelContext=function(){var l=s._extensions,u=l;return(!l||l.length===0)&&(u=[n]),new vo(u,s.config,s)},s.getNotifyMgr=function(){return i||(i=Dc({addNotificationListener:function(l){},removeNotificationListener:function(l){},eventsSent:function(l){},eventsDiscarded:function(l,u){},eventsSendRequest:function(l,u){}}),s[Dd]=i),i},s.getCookieMgr=function(){return a||(a=ps(s.config,s.logger)),a},s.setCookieMgr=function(l){a=l},s.getPerfMgr=function(){return o||s.config&&s.config.enablePerfMgr&&(o=new gd(s.getNotifyMgr())),o},s.setPerfMgr=function(l){o=l},s.eventCnt=function(){return r.length},s.releaseQueue=function(){r.length>0&&(bt(r,function(l){s.getProcessTelContext().processNext(l)}),r=[])}})}return c(t,"t"),t}()}),Pd,Sg=Ae(()=>{yr(),Dr(),Pd=function(){function t(e){this.listeners=[];var r=!!(e||{}).perfEvtsSendAll;ir(t,this,function(n){n.addNotificationListener=function(i){n.listeners.push(i)},n.removeNotificationListener=function(i){for(var o=ls(n.listeners,i);o>-1;)n.listeners.splice(o,1),o=ls(n.listeners,i)},n.eventsSent=function(i){bt(n.listeners,function(o){o&&o.eventsSent&&setTimeout(function(){return o.eventsSent(i)},0)})},n.eventsDiscarded=function(i,o){bt(n.listeners,function(a){a&&a.eventsDiscarded&&setTimeout(function(){return a.eventsDiscarded(i,o)},0)})},n.eventsSendRequest=function(i,o){bt(n.listeners,function(a){if(a&&a.eventsSendRequest)if(o)setTimeout(function(){return a.eventsSendRequest(i,o)},0);else try{a.eventsSendRequest(i,o)}catch(s){}})},n.perfEvent=function(i){i&&(r||!i.isChildEvt())&&bt(n.listeners,function(o){if(o&&o.perfEvent)if(i.isAsync)setTimeout(function(){return o.perfEvent(i)},0);else try{o.perfEvent(i)}catch(a){}})}})}return c(t,"t"),t}()}),Nd,Ab=Ae(()=>{qt(),xg(),Qy(),Sg(),Zc(),pd(),yr(),Dr(),Nd=function(t){$t(e,t);function e(){var r=t.call(this)||this;return ir(e,r,function(n,i){n.initialize=function(s,l,u,d){i.initialize(s,l,u||new fd(s),d||new Pd(s))},n.track=function(s){aa(n.getPerfMgr(),function(){return"AppInsightsCore:track"},function(){s===null&&(a(s),Nn("Invalid telemetry item")),o(s),i.track(s)},function(){return{item:s}},!s.sync)},n.addNotificationListener=function(s){var l=n.getNotifyMgr();l&&l.addNotificationListener(s)},n.removeNotificationListener=function(s){var l=n.getNotifyMgr();l&&l.removeNotificationListener(s)},n.pollInternalLogs=function(s){var l=n.config.diagnosticLogInterval;return(!l||!(l>0))&&(l=1e4),setInterval(function(){var u=n.logger?n.logger.queue:[];bt(u,function(d){var f={name:s||"InternalMessageId: "+d.messageId,iKey:n.config.instrumentationKey,time:Oi(new Date),baseType:oa.dataType,baseData:{message:d.message}};n.track(f)}),u.length=0},l)};function o(s){if(Oe(s.name))throw a(s),Error("telemetry name required")}c(o,"a");function a(s){var l=n.getNotifyMgr();l&&l.eventsDiscarded([s],kp.InvalidEvent)}c(a,"o")}),r}return c(e,"e"),e}(Fd)});function Cg(t){t<0&&(t>>>=0),la=123456789+t&mi,ua=987654321-t&mi,$d=!0}c(Cg,"ns");function Eg(){try{var t=rn()&2147483647;Cg((Math.random()*Md^t)+t)}catch(e){}}c(Eg,"is");function Rg(t){return t>0?Math.floor(yo()/mi*(t+1))>>>0:0}c(Rg,"ii");function yo(t){var e,r=wb()||yb();return r&&r.getRandomValues?e=r.getRandomValues(new Uint32Array(1))[0]&mi:Wc()?($d||Eg(),e=Ag()&mi):e=Math.floor(Md*Math.random()|0),t||(e>>>=0),e}c(yo,"It");function Ib(t){t?Cg(t):Eg()}c(Ib,"va");function Ag(t){ua=36969*(ua&65535)+(ua>>16)&mi,la=18e3*(la&65535)+(la>>16)&mi;var e=(ua<<16)+(la&65535)>>>0&mi|0;return t||(e>>>=0),e}c(Ag,"ai");var Md,mi,$d,la,ua,Ig=Ae(()=>{hs(),Dr(),Md=4294967296,mi=4294967295,$d=!1,la=123456789,ua=987654321});function bo(t,e){var r=!1,n=ds();n&&(r=cs(n,t,e),r=cs(n.body,t,e)||r);var i=Mn();return i&&(r=ws.Attach(i,t,e)||r),r}c(bo,"Mt");function Tb(){function t(){return Rg(15)}return c(t,"t"),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(kg,function(e){var r=t()|0,n=e==="x"?r:r&3|8;return n.toString(16)})}c(Tb,"as");function kb(){var t=pi();return t&&t.now?t.now():rn()}c(kb,"os");function nl(t){t===void 0&&(t=22);for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=yo()>>>0,n=0,i="";i.length<t;)n++,i+=e.charAt(r&63),r>>>=6,n===5&&(r=(yo()<<2&4294967295|r&3)>>>0,n=0);return i}c(nl,"Wt");function Ln(){for(var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],e="",r,n=0;n<4;n++)r=yo(),e+=t[r&15]+t[r>>4&15]+t[r>>8&15]+t[r>>12&15]+t[r>>16&15]+t[r>>20&15]+t[r>>24&15]+t[r>>28&15];var i=t[8+(yo()&3)|0];return e.substr(0,8)+e.substr(9,4)+"4"+e.substr(13,3)+i+e.substr(16,3)+e.substr(19,12)}c(Ln,"He");function da(t,e){var r=pg(t,e),n=il._canUseCookies;return ha===null&&(ha=[],vs=n,na(il,"_canUseCookies",function(){return vs},function(i){vs=i,bt(ha,function(o){o.setEnabled(i)})})),ls(ha,r)===-1&&ha.push(r),rd(n)&&r.setEnabled(n),rd(vs)&&r.setEnabled(vs),r}c(da,"Xt");function Tg(){da().setEnabled(!1)}c(Tg,"oi");function Db(t){return da(null,t).isEnabled()}c(Db,"xa");function Fb(t,e){return da(null,t).get(e)}c(Fb,"ya");function Pb(t,e,r,n){da(null,t).set(e,r,null,n)}c(Pb,"Sa");function Nb(t,e){return da(null,t).del(e)}c(Nb,"Ca");var ha,vs,il,kg,ws,Mb=Ae(()=>{qt(),kd(),hs(),Dr(),Ig(),ha=null,il={_canUseCookies:void 0,isTypeof:sb,isUndefined:Ur,isNullOrUndefined:Oe,hasOwnProperty:Ju,isFunction:Tt,isObject:fo,isDate:ed,isArray:fi,isError:Uc,isString:yt,isNumber:td,isBoolean:rd,toISOString:Oi,arrForEach:bt,arrIndexOf:ls,arrMap:us,arrReduce:Op,strTrim:Sr,objCreate:Dc,objKeys:po,objDefineAccessors:na,addEventHandler:bo,dateNow:rn,isIE:Wc,disableCookies:Tg,newGuid:Tb,perfNow:kb,newId:nl,randomValue:Rg,random32:yo,mwcRandomSeed:Ib,mwcRandom32:Ag,generateW3CId:Ln},kg=/[xy]/g,ws={Attach:cs,AttachEvent:cs,Detach:Up,DetachEvent:Up}});function Ld(t,e){if(t)for(var r=0;r<t.length&&!e(t[r],r);r++);}c(Ld,"Ia");function Bd(t,e,r,n,i){i>=0&&i<=2&&Ld(t,function(o,a){var s=o.cbks,l=s[Hd[i]];if(l){e.ctx=function(){var f=n[a]=n[a]||{};return f};try{l.apply(e.inst,r)}catch(f){var u=e.err;try{var d=s[Hd[2]];d&&(e.err=f,d.apply(e.inst,r))}catch(p){}finally{e.err=u}}}})}c(Bd,"Ta");function $b(t){return function(){var e=this,r=arguments,n=t.h,i={name:t.n,inst:e,ctx:null,set:l},o=[],a=s([i],r);function s(d,f){return Ld(f,function(p){d.push(p)}),d}c(s,"c");function l(d,f){r=s([],r),r[d]=f,a=s([i],r)}c(l,"s"),Bd(n,i,a,o,0);var u=t.f;try{i.rslt=u.apply(e,r)}catch(d){throw i.err=d,Bd(n,i,a,o,3),d}return Bd(n,i,a,o,1),i.rslt}}c($b,"Qu");function Lb(t){if(t){if(Wd)return Wd(t);var e=t[Fg]||t[Jr]||t[Pg];if(e)return e}return null}c(Lb,"el");function Dg(t,e,r){var n=null;return t&&(Ju(t,e)?n=t:r&&(n=Dg(Lb(t),e,!1))),n}c(Dg,"fs");function Bb(t,e,r){return t?Ud(t[Jr],e,r,!1):null}c(Bb,"Ea");function Ud(t,e,r,n){if(n===void 0&&(n=!0),t&&e&&r){var i=Dg(t,e,n);if(i){var o=i[e];if(typeof o===Yo){var a=o[Od];if(!a){a={i:0,n:e,f:o,h:[]};var s=$b(a);s[Od]=a,i[e]=s}var l={id:a.i,cbks:r,rm:function(){var u=this.id;Ld(a.h,function(d,f){if(d.id===u)return a.h.splice(f,1),1})}};return a.i++,a.h.push(l),l}}}return null}c(Ud,"sn");var Od,Hd,Fg,Pg,Wd,Ub=Ae(()=>{qt(),Dr(),Od="_aiHooks",Hd=["req","rsp","hkErr","fnErr"],Fg="__proto__",Pg="constructor",Wd=Object.getPrototypeOf}),St=Ae(()=>{Ab(),xg(),lg(),Ig(),Mb(),Dr(),hs(),qt(),Sg(),Zc(),pd(),Bc(),Ub(),kd()}),jt,Ng=Ae(()=>{jt={requestContextHeader:"Request-Context",requestContextTargetKey:"appId",requestContextAppIdFormat:"appId=cid-v1:",requestIdHeader:"Request-Id",traceParentHeader:"traceparent",traceStateHeader:"tracestate",sdkContextHeader:"Sdk-Context",sdkContextHeaderAppIdRequest:"appId",requestContextHeaderLowerCase:"request-context"}});function qd(t,e,r){var n=e.length,i=Mg(t,e);if(i.length!==n){for(var o=0,a=i;r[a]!==void 0;)o++,a=i.substring(0,150-3)+Bg(o);i=a}return i}c(qd,"si");function Mg(t,e){var r;return e&&(e=Sr(e.toString()),e.length>150&&(r=e.substring(0,150),t.throwInternal(Ue.WARNING,Pe.NameTooLong,"name is too long.  It has been truncated to "+150+" characters.",{name:e},!0))),r||e}c(Mg,"Pa");function Or(t,e,r){r===void 0&&(r=1024);var n;return e&&(r=r||1024,e=Sr(e),e.toString().length>r&&(n=e.toString().substring(0,r),t.throwInternal(Ue.WARNING,Pe.StringValueTooLong,"string value is too long. It has been truncated to "+r+" characters.",{value:e},!0))),n||e}c(Or,"ae");function ys(t,e){return jd(t,e,2048,Pe.UrlTooLong)}c(ys,"Tt");function zd(t,e){var r;return e&&e.length>32768&&(r=e.substring(0,32768),t.throwInternal(Ue.WARNING,Pe.MessageTruncated,"message is too long, it has been truncated to "+32768+" characters.",{message:e},!0)),r||e}c(zd,"Ar");function $g(t,e){var r;if(e){var n=""+e;n.length>32768&&(r=n.substring(0,32768),t.throwInternal(Ue.WARNING,Pe.ExceptionTruncated,"exception is too long, it has been truncated to "+32768+" characters.",{exception:e},!0))}return r||e}c($g,"ci");function Hi(t,e){if(e){var r={};ur(e,function(n,i){if(fo(i)&&ia())try{i=vn().stringify(i)}catch(o){t.throwInternal(Ue.WARNING,Pe.CannotSerializeObjectNonSerializable,"custom property is not valid",{exception:o},!0)}i=Or(t,i,8192),n=qd(t,n,r),r[n]=i}),e=r}return e}c(Hi,"je");function Wi(t,e){if(e){var r={};ur(e,function(n,i){n=qd(t,n,r),r[n]=i}),e=r}return e}c(Wi,"ze");function Lg(t,e){return e&&jd(t,e,128,Pe.IdTooLong).toString()}c(Lg,"ui");function jd(t,e,r,n){var i;return e&&(e=Sr(e),e.length>r&&(i=e.substring(0,r),t.throwInternal(Ue.WARNING,n,"input is too long, it has been truncated to "+r+" characters.",{data:e},!0))),i||e}c(jd,"li");function Bg(t){var e="00"+t;return e.substr(e.length-3)}c(Bg,"ba");var Ug,wn=Ae(()=>{St(),Ug={MAX_NAME_LENGTH:150,MAX_ID_LENGTH:128,MAX_PROPERTY_LENGTH:8192,MAX_STRING_LENGTH:1024,MAX_URL_LENGTH:2048,MAX_MESSAGE_LENGTH:32768,MAX_EXCEPTION_LENGTH:32768,sanitizeKeyAndAddUniqueness:qd,sanitizeKey:Mg,sanitizeString:Or,sanitizeUrl:ys,sanitizeMessage:zd,sanitizeException:$g,sanitizeProperties:Hi,sanitizeMeasurements:Wi,sanitizeId:Lg,sanitizeInput:jd,padNumber:Bg,trim:Sr}});function fa(t){var e=null;if(Tt(Event))e=new Event(t);else{var r=Mn();r&&r.createEvent&&(e=r.createEvent("Event"),e.initEvent(t,!0,!0))}return e}c(fa,"Lt");var Og=Ae(()=>{St()});function Bt(t,e){return e===void 0&&(e=!1),t==null?e:t.toString().toLowerCase()==="true"}c(Bt,"ee");function vi(t){(isNaN(t)||t<0)&&(t=0),t=Math.round(t);var e=""+t%1e3,r=""+Math.floor(t/1e3)%60,n=""+Math.floor(t/(1e3*60))%60,i=""+Math.floor(t/(1e3*60*60))%24,o=Math.floor(t/(1e3*60*60*24));return e=e.length===1?"00"+e:e.length===2?"0"+e:e,r=r.length<2?"0"+r:r,n=n.length<2?"0"+n:n,i=i.length<2?"0"+i:i,(o>0?o+".":"")+i+":"+n+":"+r+"."+e}c(vi,"Ge");function Vd(){var t=$n();return"sendBeacon"in t&&t.sendBeacon}c(Vd,"Nr");function Hg(t,e){var r=null;return bt(t,function(n){if(n.identifier===e)return r=n,-1}),r}c(Hg,"cn");function Wg(t,e,r,n,i){return!i&&yt(t)&&(t==="Script error."||t==="Script error")}c(Wg,"un");var ol=Ae(()=>{St()}),_o,al,pa,sl,Gd,on,yn=Ae(()=>{_o="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",al="sampleRate",pa="ProcessLegacy",sl="http.method",Gd="https://dc.services.visualstudio.com",on="not_specified"}),xo,bn,qg=Ae(()=>{(function(t){t[t.LocalStorage=0]="LocalStorage",t[t.SessionStorage=1]="SessionStorage"})(xo||(xo={})),function(t){t[t.AI=0]="AI",t[t.AI_AND_W3C=1]="AI_AND_W3C",t[t.W3C=2]="W3C"}(bn||(bn={}))});function Kd(){return Qd()?cl(xo.LocalStorage):null}c(Kd,"Fa");function cl(t){try{if(Oe(Jo()))return null;var e=new Date,r=Fr(t===xo.LocalStorage?"localStorage":"sessionStorage");r.setItem(e.toString(),e.toString());var n=r.getItem(e.toString())!==e.toString();if(r.removeItem(e.toString()),!n)return r}catch(i){}return null}c(cl,"fi");function Zd(){return ga()?cl(xo.SessionStorage):null}c(Zd,"ka");function zg(){qi=!1,zi=!1}c(zg,"pn");function Qd(){return qi===void 0&&(qi=!!cl(xo.LocalStorage)),qi}c(Qd,"kr");function jg(t,e){var r=Kd();if(r!==null)try{return r.getItem(e)}catch(n){qi=!1,t.throwInternal(Ue.WARNING,Pe.BrowserCannotReadLocalStorage,"Browser failed read of local storage. "+Pt(n),{exception:mt(n)})}return null}c(jg,"dn");function Vg(t,e,r){var n=Kd();if(n!==null)try{return n.setItem(e,r),!0}catch(i){qi=!1,t.throwInternal(Ue.WARNING,Pe.BrowserCannotWriteLocalStorage,"Browser failed write to local storage. "+Pt(i),{exception:mt(i)})}return!1}c(Vg,"mn");function Gg(t,e){var r=Kd();if(r!==null)try{return r.removeItem(e),!0}catch(n){qi=!1,t.throwInternal(Ue.WARNING,Pe.BrowserFailedRemovalFromLocalStorage,"Browser failed removal of local storage item. "+Pt(n),{exception:mt(n)})}return!1}c(Gg,"gn");function ga(){return zi===void 0&&(zi=!!cl(xo.SessionStorage)),zi}c(ga,"wt");function Ob(){var t=[];return ga()&&ur(Fr("sessionStorage"),function(e){t.push(e)}),t}c(Ob,"Ra");function ll(t,e){var r=Zd();if(r!==null)try{return r.getItem(e)}catch(n){zi=!1,t.throwInternal(Ue.WARNING,Pe.BrowserCannotReadSessionStorage,"Browser failed read of session storage. "+Pt(n),{exception:mt(n)})}return null}c(ll,"$t");function ul(t,e,r){var n=Zd();if(n!==null)try{return n.setItem(e,r),!0}catch(i){zi=!1,t.throwInternal(Ue.WARNING,Pe.BrowserCannotWriteSessionStorage,"Browser failed write to session storage. "+Pt(i),{exception:mt(i)})}return!1}c(ul,"Zt");function Kg(t,e){var r=Zd();if(r!==null)try{return r.removeItem(e),!0}catch(n){zi=!1,t.throwInternal(Ue.WARNING,Pe.BrowserFailedRemovalFromSessionStorage,"Browser failed removal of session storage item. "+Pt(n),{exception:mt(n)})}return!1}c(Kg,"vn");var qi,zi,Zg=Ae(()=>{St(),qg(),qi=void 0,zi=void 0});function bs(t){var e=Jd,r=Jg,n=r[e];return Yd.createElement?r[e]||(n=r[e]=Yd.createElement("a")):n={host:Yg(t,!0)},n.href=t,e++,e>=r.length&&(e=0),Jd=e,n}c(bs,"dr");function Qg(t){var e,r=bs(t);return r&&(e=r.href),e}c(Qg,"hn");function Hb(t){var e,r=bs(t);return r&&(e=r.pathname),e}c(Hb,"La");function Xg(t,e){return t?t.toUpperCase()+" "+e:e}c(Xg,"xn");function Yg(t,e){var r=Xd(t,e)||"";if(r){var n=r.match(/(www[0-9]?\.)?(.[^/:]+)(\:[\d]+)?/i);if(n!=null&&n.length>3&&yt(n[2])&&n[2].length>0)return n[2]+(n[3]||"")}return r}c(Yg,"pi");function Xd(t,e){var r=null;if(t){var n=t.match(/(\w*):\/\/(.[^/:]+)(\:[\d]+)?/i);if(n!=null&&n.length>2&&yt(n[2])&&n[2].length>0&&(r=n[2]||"",e&&n.length>2)){var i=(n[1]||"").toLowerCase(),o=n[3]||"";(i==="http"&&o===":80"||i==="https"&&o===":443")&&(o=""),r+=o}}return r}c(Xd,"yn");var Yd,Jd,Jg,em=Ae(()=>{St(),Yd=Mn()||{},Jd=0,Jg=[null,null,null,null,null]});function dl(t){return tm.indexOf(t.toLowerCase())!==-1}c(dl,"Rr");function Wb(t,e,r,n){var i,o=n,a=n;if(e&&e.length>0){var s=bs(e);if(i=s.host,!o)if(s.pathname!=null){var l=s.pathname.length===0?"/":s.pathname;l.charAt(0)!=="/"&&(l="/"+l),a=s.pathname,o=Or(t,r?r+" "+l:l)}else o=Or(t,e)}else i=n,o=n;return{target:i,name:o,data:a}}c(Wb,"gs");function _s(){var t=pi();if(t&&t.now&&t.timing){var e=t.now()+t.timing.navigationStart;if(e>0)return e}return rn()}c(_s,"mr");function Hr(t,e){var r=null;return t!==0&&e!==0&&!Oe(t)&&!Oe(e)&&(r=e-t),r}c(Hr,"ve");var tm,eh,rm,ji,nm,im=Ae(()=>{St(),Ng(),wn(),Og(),ol(),yn(),Zg(),em(),tm=["https://dc.services.visualstudio.com/v2/track","https://breeze.aimon.applicationinsights.io/v2/track","https://dc-int.services.visualstudio.com/v2/track"],eh={NotSpecified:on,createDomEvent:fa,disableStorage:zg,isInternalApplicationInsightsEndpoint:dl,canUseLocalStorage:Qd,getStorage:jg,setStorage:Vg,removeStorage:Gg,canUseSessionStorage:ga,getSessionStorageKeys:Ob,getSessionStorage:ll,setSessionStorage:ul,removeSessionStorage:Kg,disableCookies:Tg,canUseCookies:Db,disallowsSameSiteNone:bg,setCookie:Pb,stringToBoolOrDefault:Bt,getCookie:Fb,deleteCookie:Nb,trim:Sr,newId:nl,random32:function(){return yo(!0)},generateW3CId:Ln,isArray:fi,isError:Uc,isDate:ed,toISOStringForIE8:Oi,getIEVersion:ud,msToTimeSpan:vi,isCrossOriginError:Wg,dump:mt,getExceptionName:Pt,addEventHandler:cs,IsBeaconApiSupported:Vd,getExtension:Hg},rm={parseUrl:bs,getAbsoluteUrl:Qg,getPathName:Hb,getCompleteUrl:Xg,parseHost:Yg,parseFullHost:Xd},ji={correlationIdPrefix:"cid-v1:",canIncludeCorrelationHeader:function(t,e,r){if(!e||t&&t.disableCorrelationHeaders)return!1;if(t&&t.correlationHeaderExcludePatterns){for(var n=0;n<t.correlationHeaderExcludePatterns.length;n++)if(t.correlationHeaderExcludePatterns[n].test(e))return!1}var i=bs(e).host.toLowerCase();if(i&&(i.indexOf(":443")!==-1||i.indexOf(":80")!==-1)&&(i=(Xd(e,!0)||"").toLowerCase()),(!t||!t.enableCorsCorrelation)&&i&&i!==r)return!1;var o=t&&t.correlationHeaderDomains;if(o){var a;if(bt(o,function(u){var d=new RegExp(u.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));a=a||d.test(i)}),!a)return!1}var s=t&&t.correlationHeaderExcludedDomains;if(!s||s.length===0)return!0;for(var n=0;n<s.length;n++){var l=new RegExp(s[n].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(l.test(i))return!1}return i&&i.length>0},getCorrelationContext:function(t){if(t){var e=ji.getCorrelationContextValue(t,jt.requestContextTargetKey);if(e&&e!==ji.correlationIdPrefix)return e}},getCorrelationContextValue:function(t,e){if(t)for(var r=t.split(","),n=0;n<r.length;++n){var i=r[n].split("=");if(i.length===2&&i[0]===e)return i[1]}}},nm={Now:_s,GetDuration:Hr}});function om(t){if(!t)return{};var e=t.split(am),r=Op(e,function(i,o){var a=o.split(sm);if(a.length===2){var s=a[0].toLowerCase(),l=a[1];i[s]=l}return i},{});if(po(r).length>0){if(r.endpointsuffix){var n=r.location?r.location+".":"";r.ingestionendpoint=r.ingestionendpoint||"https://"+n+"dc."+r.endpointsuffix}r.ingestionendpoint=r.ingestionendpoint||Gd}return r}c(om,"di");var am,sm,cm,qb=Ae(()=>{yn(),St(),am=";",sm="=",cm={parse:om}}),th,lm=Ae(()=>{th=function(){function t(){}return c(t,"t"),t}()}),rh,um=Ae(()=>{qt(),lm(),rh=function(t){$t(e,t);function e(){return t.call(this)||this}return c(e,"e"),e}(th)}),dm,zb=Ae(()=>{dm=function(){function t(){this.ver=1,this.sampleRate=100,this.tags={}}return c(t,"t"),t}()}),nh,jb=Ae(()=>{qt(),zb(),wn(),St(),yn(),nh=function(t){$t(e,t);function e(r,n,i){var o=t.call(this)||this;return o.name=Or(r,i)||on,o.data=n,o.time=Oi(new Date),o.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return o.sampleRate===100?4:1},tags:1,data:1},o}return c(e,"e"),e}(dm)}),ih,hm=Ae(()=>{ih=function(){function t(){this.ver=2,this.properties={},this.measurements={}}return c(t,"t"),t}()}),_n,Vb=Ae(()=>{qt(),hm(),wn(),yn(),_n=function(t){$t(e,t);function e(r,n,i,o){var a=t.call(this)||this;return a.aiDataContract={ver:1,name:1,properties:0,measurements:0},a.name=Or(r,n)||on,a.properties=Hi(r,i),a.measurements=Wi(r,o),a}return c(e,"e"),e.envelopeType="Microsoft.ApplicationInsights.{0}.Event",e.dataType="EventData",e}(ih)}),fm,Gb=Ae(()=>{fm=function(){function t(){}return c(t,"t"),t}()}),pm,Kb=Ae(()=>{pm=function(){function t(){this.ver=2,this.exceptions=[],this.properties={},this.measurements={}}return c(t,"t"),t}()}),gm,Zb=Ae(()=>{gm=function(){function t(){this.hasFullStack=!0,this.parsedStack=[]}return c(t,"t"),t}()});function oh(t,e){var r=t;return r&&!yt(r)&&(JSON&&JSON.stringify?(r=JSON.stringify(t),e&&(!r||r==="{}")&&(Tt(t.toString)?r=t.toString():r=""+t)):r=""+t+" - (Missing JSON.stringify)"),r||""}c(oh,"Ka");function mm(t,e){var r=t;return t&&(r=t[pl]||t[ch]||"",r&&!yt(r)&&(r=oh(r,!0)),t.filename&&(r=r+" @"+(t.filename||"")+":"+(t.lineno||"?")+":"+(t.colno||"?"))),e&&e!=="String"&&e!=="Object"&&e!=="Error"&&(r||"").indexOf(e)===-1&&(r=e+": "+r),r||""}c(mm,"As");function Qb(t){return fo(t)?"hasFullStack"in t&&"typeName"in t:!1}c(Qb,"ol");function Xb(t){return fo(t)?"ver"in t&&"exceptions"in t&&"properties"in t:!1}c(Xb,"sl");function vm(t){return t&&t.src&&yt(t.src)&&t.obj&&fi(t.obj)}c(vm,"Ns");function ma(t){var e=t||"";yt(e)||(yt(e[en])?e=e[en]:e=""+e);var r=e.split(`
`);return{src:e,obj:r}}c(ma,"Lr");function Yb(t){for(var e=[],r=t.split(`
`),n=0;n<r.length;n++){var i=r[n];r[n+1]&&(i+="@"+r[n+1],n++),e.push(i)}return{src:t,obj:e}}c(Yb,"cl");function wm(t){var e=null;if(t)try{if(t[en])e=ma(t[en]);else if(t[So]&&t[So][en])e=ma(t[So][en]);else if(t.exception&&t.exception[en])e=ma(t.exception[en]);else if(vm(t))e=t;else if(vm(t[fl]))e=t[fl];else if(window.opera&&t[pl])e=Yb(t.message);else if(yt(t))e=ma(t);else{var r=t[pl]||t[ch]||"";yt(t[sh])&&(r&&(r+=`
`),r+=" from "+t[sh]),r&&(e=ma(r))}}catch(n){e=ma(n)}return e||{src:"",obj:null}}c(wm,"Fs");function Jb(t){var e="";return t&&(t.obj?bt(t.obj,function(r){e+=r+`
`}):e=t.src||""),e}c(Jb,"ul");function e_(t){var e,r=t.obj;if(r&&r.length>0){e=[];var n=0,i=0;bt(r,function(S){var y=S.toString();if(gl.regex.test(y)){var b=new gl(y,n++);i+=b.sizeInBytes,e.push(b)}});var o=32*1024;if(i>o)for(var a=0,s=e.length-1,l=0,u=a,d=s;a<s;){var f=e[a].sizeInBytes,p=e[s].sizeInBytes;if(l+=f+p,l>o){var g=d-u+1;e.splice(u,g);break}u=a,d=s,a++,s--}}return e}c(e_,"ll");function hl(t){var e="";if(t&&(e=t.typeName||t.name||"",!e))try{var r=/function (.{1,200})\(/,n=r.exec(t.constructor.toString());e=n&&n.length>1?n[1]:""}catch(i){}return e}c(hl,"gi");function ah(t){if(t)try{if(!yt(t)){var e=hl(t),r=oh(t,!1);return(!r||r==="{}")&&(t[So]&&(t=t[So],e=hl(t)),r=oh(t,!0)),r.indexOf(e)!==0&&e!=="String"?e+":"+r:r}}catch(n){}return""+(t||"")}c(ah,"Wa");var ym,So,en,fl,sh,pl,ch,Wr,lh,gl,t_=Ae(()=>{qt(),Gb(),Kb(),Zb(),wn(),St(),yn(),ym="<no_method>",So="error",en="stack",fl="stackDetails",sh="errorSrc",pl="message",ch="description",Wr=function(t){$t(e,t);function e(r,n,i,o,a,s){var l=t.call(this)||this;return l.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0},Xb(n)?(l.exceptions=n.exceptions,l.properties=n.properties,l.measurements=n.measurements,n.severityLevel&&(l.severityLevel=n.severityLevel),n.id&&(l.id=n.id),n.problemGroup&&(l.problemGroup=n.problemGroup),l.ver=2,Oe(n.isManual)||(l.isManual=n.isManual)):(i||(i={}),l.exceptions=[new lh(r,n,i)],l.properties=Hi(r,i),l.measurements=Wi(r,o),a&&(l.severityLevel=a),s&&(l.id=s)),l}return c(e,"e"),e.CreateAutoException=function(r,n,i,o,a,s,l,u){var d=hl(a||s||r);return{message:mm(r,d),url:n,lineNumber:i,columnNumber:o,error:ah(a||s||r),evt:ah(s||r),typeName:d,stackDetails:wm(l||a||s),errorSrc:u}},e.CreateFromInterface=function(r,n,i,o){var a=n.exceptions&&us(n.exceptions,function(l){return lh.CreateFromInterface(r,l)}),s=new e(r,ea({},n,{exceptions:a}),i,o);return s},e.prototype.toInterface=function(){var r=this,n=r.exceptions,i=r.properties,o=r.measurements,a=r.severityLevel,s=r.ver,l=r.problemGroup,u=r.id,d=r.isManual,f=n instanceof Array&&us(n,function(p){return p.toInterface()})||void 0;return{ver:"4.0",exceptions:f,severityLevel:a,properties:i,measurements:o,problemGroup:l,id:u,isManual:d}},e.CreateSimpleException=function(r,n,i,o,a,s){return{exceptions:[{hasFullStack:!0,message:r,stack:a,typeName:n}]}},e.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",e.dataType="ExceptionData",e.formatError=ah,e}(pm),lh=function(t){$t(e,t);function e(r,n,i){var o=t.call(this)||this;if(o.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2},Qb(n))o.typeName=n.typeName,o.message=n.message,o[en]=n[en],o.parsedStack=n.parsedStack,o.hasFullStack=n.hasFullStack;else{var a=n,s=a&&a.evt;Uc(a)||(a=a[So]||s||a),o.typeName=Or(r,hl(a))||on,o.message=zd(r,mm(n||a,o.typeName))||on;var l=n[fl]||wm(n);o.parsedStack=e_(l),o[en]=$g(r,Jb(l)),o.hasFullStack=fi(o.parsedStack)&&o.parsedStack.length>0,i&&(i.typeName=i.typeName||o.typeName)}return o}return c(e,"e"),e.prototype.toInterface=function(){var r=this.parsedStack instanceof Array&&us(this.parsedStack,function(i){return i.toInterface()}),n={id:this.id,outerId:this.outerId,typeName:this.typeName,message:this.message,hasFullStack:this.hasFullStack,stack:this[en],parsedStack:r||void 0};return n},e.CreateFromInterface=function(r,n){var i=n.parsedStack instanceof Array&&us(n.parsedStack,function(a){return gl.CreateFromInterface(a)})||n.parsedStack,o=new e(r,ea({},n,{parsedStack:i}));return o},e}(gm),gl=function(t){$t(e,t);function e(r,n){var i=t.call(this)||this;if(i.sizeInBytes=0,i.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0},typeof r=="string"){var o=r;i.level=n,i.method=ym,i.assembly=Sr(o),i.fileName="",i.line=0;var a=o.match(e.regex);a&&a.length>=5&&(i.method=Sr(a[2])||i.method,i.fileName=Sr(a[4]),i.line=parseInt(a[5])||0)}else i.level=r.level,i.method=r.method,i.assembly=r.assembly,i.fileName=r.fileName,i.line=r.line,i.sizeInBytes=0;return i.sizeInBytes+=i.method.length,i.sizeInBytes+=i.fileName.length,i.sizeInBytes+=i.assembly.length,i.sizeInBytes+=e.baseSize,i.sizeInBytes+=i.level.toString().length,i.sizeInBytes+=i.line.toString().length,i}return c(e,"e"),e.CreateFromInterface=function(r){return new e(r,null)},e.prototype.toInterface=function(){return{level:this.level,method:this.method,assembly:this.assembly,fileName:this.fileName,line:this.line}},e.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,e.baseSize=58,e}(fm)}),bm,r_=Ae(()=>{bm=function(){function t(){this.ver=2,this.metrics=[],this.properties={},this.measurements={}}return c(t,"t"),t}()}),uh,n_=Ae(()=>{(function(t){t[t.Measurement=0]="Measurement",t[t.Aggregation=1]="Aggregation"})(uh||(uh={}))}),_m,i_=Ae(()=>{n_(),_m=function(){function t(){this.kind=uh.Measurement}return c(t,"t"),t}()}),xm,o_=Ae(()=>{qt(),i_(),xm=function(t){$t(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},r}return c(e,"e"),e}(_m)}),Bn,a_=Ae(()=>{qt(),r_(),wn(),o_(),yn(),Bn=function(t){$t(e,t);function e(r,n,i,o,a,s,l,u){var d=t.call(this)||this;d.aiDataContract={ver:1,metrics:1,properties:0};var f=new xm;return f.count=o>0?o:void 0,f.max=isNaN(s)||s===null?void 0:s,f.min=isNaN(a)||a===null?void 0:a,f.name=Or(r,n)||on,f.value=i,d.metrics=[f],d.properties=Hi(r,l),d.measurements=Wi(r,u),d}return c(e,"e"),e.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",e.dataType="MetricData",e}(bm)}),ml,dh=Ae(()=>{qt(),hm(),ml=function(t){$t(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return c(e,"e"),e}(ih)}),xn,s_=Ae(()=>{qt(),dh(),wn(),ol(),yn(),xn=function(t){$t(e,t);function e(r,n,i,o,a,s,l){var u=t.call(this)||this;return u.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0},u.id=Lg(r,l),u.url=ys(r,i),u.name=Or(r,n)||on,isNaN(o)||(u.duration=vi(o)),u.properties=Hi(r,a),u.measurements=Wi(r,s),u}return c(e,"e"),e.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",e.dataType="PageviewData",e}(ml)}),Sm,c_=Ae(()=>{Sm=function(){function t(){this.ver=2,this.success=!0,this.properties={},this.measurements={}}return c(t,"t"),t}()}),Un,l_=Ae(()=>{qt(),wn(),im(),c_(),ol(),Un=function(t){$t(e,t);function e(r,n,i,o,a,s,l,u,d,f,p,g){d===void 0&&(d="Ajax");var S=t.call(this)||this;S.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0},S.id=n,S.duration=vi(a),S.success=s,S.resultCode=l+"",S.type=Or(r,d);var y=Wb(r,i,u,o);return S.data=ys(r,o)||y.data,S.target=Or(r,y.target),f&&(S.target=S.target+" | "+f),S.name=Or(r,y.name),S.properties=Hi(r,p),S.measurements=Wi(r,g),S}return c(e,"e"),e.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",e.dataType="RemoteDependencyData",e}(Sm)}),Cm,u_=Ae(()=>{Cm=function(){function t(){this.ver=2,this.properties={},this.measurements={}}return c(t,"t"),t}()}),wi,d_=Ae(()=>{qt(),u_(),wn(),yn(),wi=function(t){$t(e,t);function e(r,n,i,o,a){var s=t.call(this)||this;return s.aiDataContract={ver:1,message:1,severityLevel:0,properties:0},n=n||on,s.message=zd(r,n),s.properties=Hi(r,o),s.measurements=Wi(r,a),i&&(s.severityLevel=i),s}return c(e,"e"),e.envelopeType="Microsoft.ApplicationInsights.{0}.Message",e.dataType="MessageData",e}(Cm)}),Em,h_=Ae(()=>{qt(),dh(),Em=function(t){$t(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return c(e,"e"),e}(ml)}),yi,f_=Ae(()=>{qt(),h_(),wn(),yn(),yi=function(t){$t(e,t);function e(r,n,i,o,a,s,l){var u=t.call(this)||this;return u.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0},u.url=ys(r,i),u.name=Or(r,n)||on,u.properties=Hi(r,a),u.measurements=Wi(r,s),l&&(u.domProcessing=l.domProcessing,u.duration=l.duration,u.networkConnect=l.networkConnect,u.perfTotal=l.perfTotal,u.receivedResponse=l.receivedResponse,u.sentRequest=l.sentRequest),u}return c(e,"e"),e.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",e.dataType="PageviewPerformanceData",e}(Em)}),bi,p_=Ae(()=>{qt(),um(),bi=function(t){$t(e,t);function e(r,n){var i=t.call(this)||this;return i.aiDataContract={baseType:1,baseData:1},i.baseType=r,i.baseData=n,i}return c(e,"e"),e}(rh)}),xs,g_=Ae(()=>{(function(t){t[t.Verbose=0]="Verbose",t[t.Information=1]="Information",t[t.Warning=2]="Warning",t[t.Error=3]="Error",t[t.Critical=4]="Critical"})(xs||(xs={}))}),Rm,m_=Ae(()=>{St(),Rm=function(){function t(){}return c(t,"t"),t.getConfig=function(e,r,n,i){i===void 0&&(i=!1);var o;return n&&e.extensionConfig&&e.extensionConfig[n]&&!Oe(e.extensionConfig[n][r])?o=e.extensionConfig[n][r]:o=e[r],Oe(o)?i:o},t}()});function Vi(t){var e="ai."+t+".";return function(r){return e+r}}c(Vi,"Qt");var va,or,Ss,Co,vl,_i,Gi,wa,wl,Am=Ae(()=>{qt(),St(),va=Vi("application"),or=Vi("device"),Ss=Vi("location"),Co=Vi("operation"),vl=Vi("session"),_i=Vi("user"),Gi=Vi("cloud"),wa=Vi("internal"),wl=function(t){$t(e,t);function e(){return t.call(this)||this}return c(e,"e"),e}(db({applicationVersion:va("ver"),applicationBuild:va("build"),applicationTypeId:va("typeId"),applicationId:va("applicationId"),applicationLayer:va("layer"),deviceId:or("id"),deviceIp:or("ip"),deviceLanguage:or("language"),deviceLocale:or("locale"),deviceModel:or("model"),deviceFriendlyName:or("friendlyName"),deviceNetwork:or("network"),deviceNetworkName:or("networkName"),deviceOEMName:or("oemName"),deviceOS:or("os"),deviceOSVersion:or("osVersion"),deviceRoleInstance:or("roleInstance"),deviceRoleName:or("roleName"),deviceScreenResolution:or("screenResolution"),deviceType:or("type"),deviceMachineName:or("machineName"),deviceVMName:or("vmName"),deviceBrowser:or("browser"),deviceBrowserVersion:or("browserVersion"),locationIp:Ss("ip"),locationCountry:Ss("country"),locationProvince:Ss("province"),locationCity:Ss("city"),operationId:Co("id"),operationName:Co("name"),operationParentId:Co("parentId"),operationRootId:Co("rootId"),operationSyntheticSource:Co("syntheticSource"),operationCorrelationVector:Co("correlationVector"),sessionId:vl("id"),sessionIsFirst:vl("isFirst"),sessionIsNew:vl("isNew"),userAccountAcquisitionDate:_i("accountAcquisitionDate"),userAccountId:_i("accountId"),userAgent:_i("userAgent"),userId:_i("id"),userStoreRegion:_i("storeRegion"),userAuthUserId:_i("authUserId"),userAnonymousUserAcquisitionDate:_i("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:_i("authUserAcquisitionDate"),cloudName:Gi("name"),cloudRole:Gi("role"),cloudRoleVer:Gi("roleVer"),cloudRoleInstance:Gi("roleInstance"),cloudEnvironment:Gi("environment"),cloudLocation:Gi("location"),cloudDeploymentUnit:Gi("deploymentUnit"),internalNodeName:wa("nodeName"),internalSdkVersion:wa("sdkVersion"),internalAgentVersion:wa("agentVersion"),internalSnippet:wa("snippet"),internalSdkSrc:wa("sdkSrc")}))}),On,v_=Ae(()=>{wn(),St(),yn(),On=function(){function t(){}return c(t,"t"),t.create=function(e,r,n,i,o,a){if(n=Or(i,n)||on,Oe(e)||Oe(r)||Oe(n))throw Error("Input doesn't contain all required fields");var s={name:n,time:Oi(new Date),iKey:"",ext:a||{},tags:[],data:{},baseType:r,baseData:e};return Oe(o)||ur(o,function(l,u){s.data[l]=u}),s},t}()}),qr,zt,w_=Ae(()=>{Am(),qr={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},zt=new wl}),ya,yl,hh,dr=Ae(()=>{im(),qb(),Ng(),yn(),um(),lm(),jb(),Vb(),t_(),a_(),s_(),dh(),l_(),d_(),f_(),p_(),g_(),m_(),Am(),wn(),v_(),w_(),qg(),ol(),Og(),Zg(),em(),ya="AppInsightsPropertiesPlugin",yl="AppInsightsChannelPlugin",hh="ApplicationInsightsAnalytics"}),Im,y_=Ae(()=>{dr(),St(),yr(),Im=function(){function t(e,r,n,i){ir(t,this,function(o){var a=null,s=[],l=!1,u;n&&(u=n.logger);function d(){n&&bt(n.getTransmissionControls(),function(p){bt(p,function(g){return g.flush(!0)})})}c(d,"l");function f(p){s.push(p),a||(a=setInterval(function(){var g=s.slice(0),S=!1;s=[],bt(g,function(y){y()?S=!0:s.push(y)}),s.length===0&&(clearInterval(a),a=null),S&&d()},100))}c(f,"f"),o.trackPageView=function(p,g){var S=p.name;if(Oe(S)||typeof S!="string"){var y=Mn();S=p.name=y&&y.title||""}var b=p.uri;if(Oe(b)||typeof b!="string"){var _=go();b=p.uri=_&&_.href||""}if(!i.isPerformanceTimingSupported()){e.sendPageViewInternal(p,g),d(),u.throwInternal(Ue.WARNING,Pe.NavigationTimingNotSupported,"trackPageView: navigation timing API used for calculation of page duration is not supported in this browser. This page view will be collected without duration and timing info.");return}var C=!1,k,F=i.getPerformanceTiming().navigationStart;F>0&&(k=Hr(F,+new Date),i.shouldCollectDuration(k)||(k=void 0));var $;!Oe(g)&&!Oe(g.duration)&&($=g.duration),(r||!isNaN($))&&(isNaN($)&&(g||(g={}),g.duration=k),e.sendPageViewInternal(p,g),d(),C=!0);var ne=6e4;g||(g={}),f(function(){var ie=!1;try{if(i.isPerformanceTimingDataReady()){ie=!0;var Q={name:S,uri:b};i.populatePageViewPerformanceEvent(Q),!Q.isValid&&!C?(g.duration=k,e.sendPageViewInternal(p,g)):(C||(g.duration=Q.durationMs,e.sendPageViewInternal(p,g)),l||(e.sendPageViewPerformanceInternal(Q,g),l=!0))}else F>0&&Hr(F,+new Date)>ne&&(ie=!0,C||(g.duration=ne,e.sendPageViewInternal(p,g)))}catch(me){u.throwInternal(Ue.CRITICAL,Pe.TrackPVFailedCalc,"trackPageView failed on page load calculation: "+Pt(me),{exception:mt(me)})}return ie})}})}return c(t,"t"),t}()}),Tm,km,b_=Ae(()=>{dr(),St(),Tm=function(){function t(e,r){this.prevPageVisitDataKeyName="prevPageVisitData",this.pageVisitTimeTrackingHandler=r,this._logger=e}return c(t,"t"),t.prototype.trackPreviousPageVisit=function(e,r){try{var n=this.restartPageVisitTimer(e,r);n&&this.pageVisitTimeTrackingHandler(n.pageName,n.pageUrl,n.pageVisitTime)}catch(i){this._logger.warnToConsole("Auto track page visit time failed, metric will not be collected: "+mt(i))}},t.prototype.restartPageVisitTimer=function(e,r){try{var n=this.stopPageVisitTimer();return this.startPageVisitTimer(e,r),n}catch(i){return this._logger.warnToConsole("Call to restart failed: "+mt(i)),null}},t.prototype.startPageVisitTimer=function(e,r){try{if(ga()){ll(this._logger,this.prevPageVisitDataKeyName)!=null&&Nn("Cannot call startPageVisit consecutively without first calling stopPageVisit");var n=new km(e,r),i=vn().stringify(n);ul(this._logger,this.prevPageVisitDataKeyName,i)}}catch(o){this._logger.warnToConsole("Call to start failed: "+mt(o))}},t.prototype.stopPageVisitTimer=function(){try{if(ga()){var e=rn(),r=ll(this._logger,this.prevPageVisitDataKeyName);if(r&&ia()){var n=vn().parse(r);return n.pageVisitTime=e-n.pageVisitStartTime,Kg(this._logger,this.prevPageVisitDataKeyName),n}else return null}return null}catch(i){return this._logger.warnToConsole("Stop page visit timer failed: "+mt(i)),null}},t}(),km=function(){function t(e,r){this.pageVisitStartTime=rn(),this.pageName=e,this.pageUrl=r}return c(t,"t"),t}()}),Dm,__=Ae(()=>{dr(),St(),Dm=function(){function t(e){this.MAX_DURATION_ALLOWED=36e5,e&&(this._logger=e.logger)}return c(t,"t"),t.prototype.populatePageViewPerformanceEvent=function(e){e.isValid=!1;var r=this.getPerformanceNavigationTiming(),n=this.getPerformanceTiming(),i=0,o=0,a=0,s=0,l=0;(r||n)&&(r?(i=r.duration,o=r.startTime===0?r.connectEnd:Hr(r.startTime,r.connectEnd),a=Hr(r.requestStart,r.responseStart),s=Hr(r.responseStart,r.responseEnd),l=Hr(r.responseEnd,r.loadEventEnd)):(i=Hr(n.navigationStart,n.loadEventEnd),o=Hr(n.navigationStart,n.connectEnd),a=Hr(n.requestStart,n.responseStart),s=Hr(n.responseStart,n.responseEnd),l=Hr(n.responseEnd,n.loadEventEnd)),i===0?this._logger.throwInternal(Ue.WARNING,Pe.ErrorPVCalc,"error calculating page view performance.",{total:i,network:o,request:a,response:s,dom:l}):this.shouldCollectDuration(i,o,a,s,l)?i<Math.floor(o)+Math.floor(a)+Math.floor(s)+Math.floor(l)?this._logger.throwInternal(Ue.WARNING,Pe.ClientPerformanceMathError,"client performance math error.",{total:i,network:o,request:a,response:s,dom:l}):(e.durationMs=i,e.perfTotal=e.duration=vi(i),e.networkConnect=vi(o),e.sentRequest=vi(a),e.receivedResponse=vi(s),e.domProcessing=vi(l),e.isValid=!0):this._logger.throwInternal(Ue.WARNING,Pe.InvalidDurationValue,"Invalid page load duration value. Browser perf data won't be sent.",{total:i,network:o,request:a,response:s,dom:l}))},t.prototype.getPerformanceTiming=function(){return this.isPerformanceTimingSupported()?pi().timing:null},t.prototype.getPerformanceNavigationTiming=function(){return this.isPerformanceNavigationTimingSupported()?pi().getEntriesByType("navigation")[0]:null},t.prototype.isPerformanceNavigationTimingSupported=function(){var e=pi();return e&&e.getEntriesByType&&e.getEntriesByType("navigation").length>0},t.prototype.isPerformanceTimingSupported=function(){var e=pi();return e&&e.timing},t.prototype.isPerformanceTimingDataReady=function(){var e=pi(),r=e?e.timing:0;return r&&r.domainLookupStart>0&&r.navigationStart>0&&r.responseStart>0&&r.requestStart>0&&r.loadEventEnd>0&&r.responseEnd>0&&r.connectEnd>0&&r.domLoading>0},t.prototype.shouldCollectDuration=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=$n()||{},i=["googlebot","adsbot-google","apis-google","mediapartners-google"],o=n.userAgent,a=!1;if(o)for(var s=0;s<i.length;s++)a=a||o.toLowerCase().indexOf(i[s])!==-1;if(a)return!1;for(var s=0;s<e.length;s++)if(e[s]<0||e[s]>=this.MAX_DURATION_ALLOWED)return!1;return!0},t}()});function Cs(t,e){t&&t.dispatchEvent&&e&&t.dispatchEvent(e)}c(Cs,"Pn");var fh,bl,ph,gh,x_=Ae(()=>{qt(),dr(),St(),y_(),b_(),__(),yr(),fh="duration",bl="event",ph=function(t){$t(e,t);function e(){var r=t.call(this)||this;r.identifier=hh,r.priority=180,r.autoRoutePVDelay=500;var n,i,o,a=0,s,l;return ir(e,r,function(u,d){var f=go(!0);s=f&&f.href||"",u.getCookieMgr=function(){return Sd(u.core)},u.processTelemetry=function(b,_){aa(u.core,function(){return u.identifier+":processTelemetry"},function(){var C=!1,k=u._telemetryInitializers.length;_=u._getTelCtx(_);for(var F=0;F<k;++F){var $=u._telemetryInitializers[F];if($)try{if($.apply(null,[b])===!1){C=!0;break}}catch(ne){_.diagLog().throwInternal(Ue.CRITICAL,Pe.TelemetryInitializerFailed,"One of telemetry initializers failed, telemetry item will not be sent: "+Pt(ne),{exception:mt(ne)},!0)}}C||u.processNext(b,_)},function(){return{item:b}},!b.sync)},u.trackEvent=function(b,_){try{var C=On.create(b,_n.dataType,_n.envelopeType,u.diagLog(),_);u.core.track(C)}catch(k){u.diagLog().throwInternal(Ue.WARNING,Pe.TrackTraceFailed,"trackTrace failed, trace will not be collected: "+Pt(k),{exception:mt(k)})}},u.startTrackEvent=function(b){try{n.start(b)}catch(_){u.diagLog().throwInternal(Ue.CRITICAL,Pe.StartTrackEventFailed,"startTrackEvent failed, event will not be collected: "+Pt(_),{exception:mt(_)})}},u.stopTrackEvent=function(b,_,C){try{n.stop(b,void 0,_)}catch(k){u.diagLog().throwInternal(Ue.CRITICAL,Pe.StopTrackEventFailed,"stopTrackEvent failed, event will not be collected: "+Pt(k),{exception:mt(k)})}},u.trackTrace=function(b,_){try{var C=On.create(b,wi.dataType,wi.envelopeType,u.diagLog(),_);u.core.track(C)}catch(k){u.diagLog().throwInternal(Ue.WARNING,Pe.TrackTraceFailed,"trackTrace failed, trace will not be collected: "+Pt(k),{exception:mt(k)})}},u.trackMetric=function(b,_){try{var C=On.create(b,Bn.dataType,Bn.envelopeType,u.diagLog(),_);u.core.track(C)}catch(k){u.diagLog().throwInternal(Ue.CRITICAL,Pe.TrackMetricFailed,"trackMetric failed, metric will not be collected: "+Pt(k),{exception:mt(k)})}},u.trackPageView=function(b,_){try{var C=b||{};u._pageViewManager.trackPageView(C,ea({},C.properties,C.measurements,_)),u.config.autoTrackPageVisitTime&&u._pageVisitTimeManager.trackPreviousPageVisit(C.name,C.uri)}catch(k){u.diagLog().throwInternal(Ue.CRITICAL,Pe.TrackPVFailed,"trackPageView failed, page view will not be collected: "+Pt(k),{exception:mt(k)})}},u.sendPageViewInternal=function(b,_,C){var k=Mn();k&&(b.refUri=b.refUri===void 0?k.referrer:b.refUri);var F=On.create(b,xn.dataType,xn.envelopeType,u.diagLog(),_,C);u.core.track(F),a=0},u.sendPageViewPerformanceInternal=function(b,_,C){var k=On.create(b,yi.dataType,yi.envelopeType,u.diagLog(),_,C);u.core.track(k)},u.trackPageViewPerformance=function(b,_){try{u._pageViewPerformanceManager.populatePageViewPerformanceEvent(b),u.sendPageViewPerformanceInternal(b,_)}catch(C){u.diagLog().throwInternal(Ue.CRITICAL,Pe.TrackPVFailed,"trackPageViewPerformance failed, page view will not be collected: "+Pt(C),{exception:mt(C)})}},u.startTrackPage=function(b){try{if(typeof b!="string"){var _=Mn();b=_&&_.title||""}i.start(b)}catch(C){u.diagLog().throwInternal(Ue.CRITICAL,Pe.StartTrackFailed,"startTrackPage failed, page view may not be collected: "+Pt(C),{exception:mt(C)})}},u.stopTrackPage=function(b,_,C,k){try{if(typeof b!="string"){var F=Mn();b=F&&F.title||""}if(typeof _!="string"){var $=go();_=$&&$.href||""}i.stop(b,_,C,k),u.config.autoTrackPageVisitTime&&u._pageVisitTimeManager.trackPreviousPageVisit(b,_)}catch(ne){u.diagLog().throwInternal(Ue.CRITICAL,Pe.StopTrackFailed,"stopTrackPage failed, page view will not be collected: "+Pt(ne),{exception:mt(ne)})}},u.sendExceptionInternal=function(b,_,C){var k=b.exception||b.error||new Error(on),F=new Wr(u.diagLog(),k,b.properties||_,b.measurements,b.severityLevel,b.id).toInterface(),$=On.create(F,Wr.dataType,Wr.envelopeType,u.diagLog(),_,C);u.core.track($)},u.trackException=function(b,_){try{u.sendExceptionInternal(b,_)}catch(C){u.diagLog().throwInternal(Ue.CRITICAL,Pe.TrackExceptionFailed,"trackException failed, exception will not be collected: "+Pt(C),{exception:mt(C)})}},u._onerror=function(b){var _=b&&b.error,C=b&&b.evt;try{if(!C){var k=ds();k&&(C=k[bl])}var F=b&&b.url||(Mn()||{}).URL,$=b.errorSrc||"window.onerror@"+F+":"+(b.lineNumber||0)+":"+(b.columnNumber||0),ne={errorSrc:$,url:F,lineNumber:b.lineNumber||0,columnNumber:b.columnNumber||0,message:b.message};Wg(b.message,b.url,b.lineNumber,b.columnNumber,b.error)?y(Wr.CreateAutoException("Script error: The browser's same-origin policy prevents us from getting the details of this exception. Consider using the 'crossorigin' attribute.",F,b.lineNumber||0,b.columnNumber||0,_,C,null,$),ne):(b.errorSrc||(b.errorSrc=$),u.trackException({exception:b,severityLevel:xs.Error},ne))}catch(Q){var ie=_?_.name+", "+_.message:"null";u.diagLog().throwInternal(Ue.CRITICAL,Pe.ExceptionWhileLoggingError,"_onError threw exception while logging error, error will not be collected: "+Pt(Q),{exception:mt(Q),errorString:ie})}},u.addTelemetryInitializer=function(b){u._telemetryInitializers.push(b)},u.initialize=function(b,_,C,k){if(!u.isInitialized()){if(Oe(_))throw Error("Error initializing");d.initialize(b,_,C,k),u.setInitialized(!1);var F=u._getTelCtx(),$=u.identifier;u.config=F.getExtCfg($);var ne=e.getDefaultConfig(b);ne!==void 0&&ur(ne,function(Fe,Je){u.config[Fe]=F.getConfig($,Fe,Je),u.config[Fe]===void 0&&(u.config[Fe]=Je)}),u.config.isStorageUseDisabled&&zg();var ie={instrumentationKey:function(){return b.instrumentationKey},accountId:function(){return u.config.accountId||b.accountId},sessionRenewalMs:function(){return u.config.sessionRenewalMs||b.sessionRenewalMs},sessionExpirationMs:function(){return u.config.sessionExpirationMs||b.sessionExpirationMs},sampleRate:function(){return u.config.samplingPercentage||b.samplingPercentage},sdkExtension:function(){return u.config.sdkExtension||b.sdkExtension},isBrowserLinkTrackingEnabled:function(){return u.config.isBrowserLinkTrackingEnabled||b.isBrowserLinkTrackingEnabled},appId:function(){return u.config.appId||b.appId}};u._pageViewPerformanceManager=new Dm(u.core),u._pageViewManager=new Im(r,u.config.overridePageViewDuration,u.core,u._pageViewPerformanceManager),u._pageVisitTimeManager=new Tm(u.diagLog(),function(Fe,Je,it){return p(Fe,Je,it)}),u._telemetryInitializers=u._telemetryInitializers||[],g(ie),n=new gh(u.diagLog(),"trackEvent"),n.action=function(Fe,Je,it,ht){ht||(ht={}),ht[fh]=it.toString(),u.trackEvent({name:Fe,properties:ht})},i=new gh(u.diagLog(),"trackPageView"),i.action=function(Fe,Je,it,ht,Ct){Oe(ht)&&(ht={}),ht[fh]=it.toString();var Ut={name:Fe,uri:Je,properties:ht,measurements:Ct};u.sendPageViewInternal(Ut,ht)};var Q=ds(),me=mb(),se=go(!0),fe=r;if(u.config.disableExceptionTracking===!1&&!u.config.autoExceptionInstrumented&&Q){var xe="onerror",Ge=Q[xe];Q.onerror=function(Fe,Je,it,ht,Ct){var Ut=Q[bl],fn=Ge&&Ge(Fe,Je,it,ht,Ct);return fn!==!0&&fe._onerror(Wr.CreateAutoException(Fe,Je,it,ht,Ct,Ut)),fn},u.config.autoExceptionInstrumented=!0}if(u.config.disableExceptionTracking===!1&&u.config.enableUnhandledPromiseRejectionTracking===!0&&!u.config.autoUnhandledPromiseInstrumented&&Q){var ce="onunhandledrejection",Se=Q[ce];Q[ce]=function(Fe){var Je=Q[bl],it=Se&&Se.call(Q,Fe);return it!==!0&&fe._onerror(Wr.CreateAutoException(Fe.reason.toString(),se?se.href:"",0,0,Fe,Je)),it},u.config.autoUnhandledPromiseInstrumented=!0}if(u.config.enableAutoRouteTracking===!0&&me&&Tt(me.pushState)&&Tt(me.replaceState)&&Q&&typeof Event!="undefined"){var Ne=r;bt(C,function(Fe){Fe.identifier===ya&&(o=Fe)}),me.pushState=function(Fe){return function(){var Je=Fe.apply(this,arguments);return Cs(Q,fa(Ne.config.namePrefix+"pushState")),Cs(Q,fa(Ne.config.namePrefix+"locationchange")),Je}}(me.pushState),me.replaceState=function(Fe){return function(){var Je=Fe.apply(this,arguments);return Cs(Q,fa(Ne.config.namePrefix+"replaceState")),Cs(Q,fa(Ne.config.namePrefix+"locationchange")),Je}}(me.replaceState),Q.addEventListener&&(Q.addEventListener(Ne.config.namePrefix+"popstate",function(){Cs(Q,fa(Ne.config.namePrefix+"locationchange"))}),Q.addEventListener(Ne.config.namePrefix+"locationchange",function(){if(o&&o.context&&o.context.telemetryTrace){o.context.telemetryTrace.traceID=Ln();var Fe="_unknown_";se&&se.pathname&&(Fe=se.pathname+(se.hash||"")),o.context.telemetryTrace.name=Fe}l&&(s=l),l=se&&se.href||"",setTimeout(function(Je){Ne.trackPageView({refUri:Je,properties:{duration:0}})}.bind(r,s),Ne.autoRoutePVDelay)}))}u.setInitialized(!0)}};function p(b,_,C){var k={PageName:b,PageUrl:_};u.trackMetric({name:"PageVisitTime",average:C,max:C,min:C,sampleCount:1},k)}c(p,"m");function g(b){if(!b.isBrowserLinkTrackingEnabled()){var _=["/browserLinkSignalR/","/__browserLink/"],C=c(function(k){if(k.baseType===Un.dataType){var F=k.baseData;if(F){for(var $=0;$<_.length;$++)if(F.target&&F.target.indexOf(_[$])>=0)return!1}}return!0},"y");S(C)}}c(g,"I");function S(b){u._telemetryInitializers.push(b)}c(S,"E");function y(b,_){var C=On.create(b,Wr.dataType,Wr.envelopeType,u.diagLog(),_);u.core.track(C)}c(y,"b")}),r}return c(e,"e"),e.getDefaultConfig=function(r){return r||(r={}),r.sessionRenewalMs=30*60*1e3,r.sessionExpirationMs=24*60*60*1e3,r.disableExceptionTracking=Bt(r.disableExceptionTracking),r.autoTrackPageVisitTime=Bt(r.autoTrackPageVisitTime),r.overridePageViewDuration=Bt(r.overridePageViewDuration),r.enableUnhandledPromiseRejectionTracking=Bt(r.enableUnhandledPromiseRejectionTracking),(isNaN(r.samplingPercentage)||r.samplingPercentage<=0||r.samplingPercentage>=100)&&(r.samplingPercentage=100),r.isStorageUseDisabled=Bt(r.isStorageUseDisabled),r.isBrowserLinkTrackingEnabled=Bt(r.isBrowserLinkTrackingEnabled),r.enableAutoRouteTracking=Bt(r.enableAutoRouteTracking),r.namePrefix=r.namePrefix||"",r.enableDebug=Bt(r.enableDebug),r.disableFlushOnBeforeUnload=Bt(r.disableFlushOnBeforeUnload),r.disableFlushOnUnload=Bt(r.disableFlushOnUnload,r.disableFlushOnBeforeUnload),r},e.Version="2.6.4",e}(wo),gh=function(){function t(e,r){var n=this,i={};n.start=function(o){typeof i[o]!="undefined"&&e.throwInternal(Ue.WARNING,Pe.StartCalledMoreThanOnce,"start was called more than once for this event without calling stop.",{name:o,key:o},!0),i[o]=+new Date},n.stop=function(o,a,s,l){var u=i[o];if(isNaN(u))e.throwInternal(Ue.WARNING,Pe.StopCalledWithoutStart,"stop was called without a corresponding start.",{name:o,key:o},!0);else{var d=+new Date,f=Hr(u,d);n.action(o,a,f,s,l)}delete i[o],i[o]=void 0}}return c(t,"t"),t}()}),Fm=Ae(()=>{x_()}),Pm,Nm,S_=Ae(()=>{dr(),St(),yr(),Pm=function(){function t(e){var r=[];ir(t,this,function(n){n.enqueue=function(i){r.push(i)},n.count=function(){return r.length},n.clear=function(){r.length=0},n.getItems=function(){return r.slice(0)},n.batchPayloads=function(i){if(i&&i.length>0){var o=e.emitLineDelimitedJson()?i.join(`
`):"["+i.join(",")+"]";return o}return null},n.markAsSent=function(i){n.clear()},n.clearSent=function(i){}})}return c(t,"t"),t}(),Nm=function(){function t(e,r){var n=!1,i;ir(t,this,function(o){var a=u(t.BUFFER_KEY),s=u(t.SENT_BUFFER_KEY);i=a.concat(s),i.length>t.MAX_BUFFER_SIZE&&(i.length=t.MAX_BUFFER_SIZE),d(t.SENT_BUFFER_KEY,[]),d(t.BUFFER_KEY,i),o.enqueue=function(f){if(i.length>=t.MAX_BUFFER_SIZE){n||(e.throwInternal(Ue.WARNING,Pe.SessionStorageBufferFull,"Maximum buffer size reached: "+i.length,!0),n=!0);return}i.push(f),d(t.BUFFER_KEY,i)},o.count=function(){return i.length},o.clear=function(){i=[],d(t.BUFFER_KEY,[]),d(t.SENT_BUFFER_KEY,[]),n=!1},o.getItems=function(){return i.slice(0)},o.batchPayloads=function(f){if(f&&f.length>0){var p=r.emitLineDelimitedJson()?f.join(`
`):"["+f.join(",")+"]";return p}return null},o.markAsSent=function(f){i=l(f,i),d(t.BUFFER_KEY,i);var p=u(t.SENT_BUFFER_KEY);p instanceof Array&&f instanceof Array&&(p=p.concat(f),p.length>t.MAX_BUFFER_SIZE&&(e.throwInternal(Ue.CRITICAL,Pe.SessionStorageBufferFull,"Sent buffer reached its maximum size: "+p.length,!0),p.length=t.MAX_BUFFER_SIZE),d(t.SENT_BUFFER_KEY,p))},o.clearSent=function(f){var p=u(t.SENT_BUFFER_KEY);p=l(f,p),d(t.SENT_BUFFER_KEY,p)};function l(f,p){var g=[];return bt(p,function(S){!Tt(S)&&ls(f,S)===-1&&g.push(S)}),g}c(l,"s");function u(f){var p=f;try{p=r.namePrefix&&r.namePrefix()?r.namePrefix()+"_"+p:p;var g=ll(e,p);if(g){var S=vn().parse(g);if(yt(S)&&(S=vn().parse(S)),S&&fi(S))return S}}catch(y){e.throwInternal(Ue.CRITICAL,Pe.FailedToRestoreStorageBuffer," storage key: "+p+", "+Pt(y),{exception:mt(y)})}return[]}c(u,"u");function d(f,p){var g=f;try{g=r.namePrefix&&r.namePrefix()?r.namePrefix()+"_"+g:g;var S=JSON.stringify(p);ul(e,g,S)}catch(y){ul(e,g,JSON.stringify([])),e.throwInternal(Ue.WARNING,Pe.FailedToSetStorageBuffer," storage key: "+g+", "+Pt(y)+". Buffer cleared",{exception:mt(y)})}}c(d,"l")})}return c(t,"t"),t.BUFFER_KEY="AI_buffer",t.SENT_BUFFER_KEY="AI_sentBuffer",t.MAX_BUFFER_SIZE=2e3,t}()});function ar(t,e,r){return kt(t,e,r,nd)}c(ar,"ye");var _l,Zt,hr,mh,er,Mm,vh,$m,Lm,Bm,Um,Om,C_=Ae(()=>{qt(),dr(),St(),_l="baseType",Zt="baseData",hr="properties",mh="true",er=function(){function t(){}return c(t,"t"),t.extractPropsAndMeasurements=function(e,r,n){Oe(e)||ur(e,function(i,o){td(o)?n[i]=o:yt(o)?r[i]=o:ia()&&(r[i]=vn().stringify(o))})},t.createEnvelope=function(e,r,n,i){var o=new nh(e,i,r);ar(o,"sampleRate",n[al]),(n[Zt]||{}).startTime&&(o.time=Oi(n[Zt].startTime)),o.iKey=n.iKey;var a=n.iKey.replace(/-/g,"");return o.name=o.name.replace("{0}",a),t.extractPartAExtensions(n,o),n.tags=n.tags||[],qp(o)},t.extractPartAExtensions=function(e,r){var n=r.tags=r.tags||{},i=e.ext=e.ext||{},o=e.tags=e.tags||[],a=i.user;a&&(ar(n,zt.userAuthUserId,a.authId),ar(n,zt.userId,a.id||a.localId));var s=i.app;s&&ar(n,zt.sessionId,s.sesId);var l=i.device;l&&(ar(n,zt.deviceId,l.id||l.localId),ar(n,zt.deviceType,l.deviceClass),ar(n,zt.deviceIp,l.ip),ar(n,zt.deviceModel,l.model),ar(n,zt.deviceType,l.deviceType));var u=e.ext.web;if(u){ar(n,zt.deviceLanguage,u.browserLang),ar(n,zt.deviceBrowserVersion,u.browserVer),ar(n,zt.deviceBrowser,u.browser);var d=r.data=r.data||{},f=d[Zt]=d[Zt]||{},p=f[hr]=f[hr]||{};ar(p,"domain",u.domain),ar(p,"isManual",u.isManual?mh:null),ar(p,"screenRes",u.screenRes),ar(p,"userConsent",u.userConsent?mh:null)}var g=i.os;g&&ar(n,zt.deviceOS,g.name);var S=i.trace;S&&(ar(n,zt.operationParentId,S.parentID),ar(n,zt.operationName,S.name),ar(n,zt.operationId,S.traceID));for(var y={},b=o.length-1;b>=0;b--){var _=o[b];ur(_,function(k,F){y[k]=F}),o.splice(b,1)}ur(o,function(k,F){y[k]=F});var C=ea({},n,y);C[zt.internalSdkVersion]||(C[zt.internalSdkVersion]="javascript:"+t.Version),r.tags=qp(C)},t.prototype.Init=function(e,r){this._logger=e,Oe(r[Zt])&&this._logger.throwInternal(Ue.CRITICAL,Pe.TelemetryEnvelopeInvalid,"telemetryItem.baseData cannot be null.")},t.Version="2.6.4",t}(),Mm=function(t){$t(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return c(e,"e"),e.prototype.Create=function(r,n){t.prototype.Init.call(this,r,n);var i=n[Zt].measurements||{},o=n[Zt][hr]||{};er.extractPropsAndMeasurements(n.data,o,i);var a=n[Zt];if(Oe(a))return r.warnToConsole("Invalid input for dependency data"),null;var s=a[hr]&&a[hr][sl]?a[hr][sl]:"GET",l=new Un(r,a.id,a.target,a.name,a.duration,a.success,a.responseCode,s,a.type,a.correlationContext,o,i),u=new bi(Un.dataType,l);return er.createEnvelope(r,Un.envelopeType,n,u)},e.DependencyEnvelopeCreator=new e,e}(er),vh=function(t){$t(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return c(e,"e"),e.prototype.Create=function(r,n){t.prototype.Init.call(this,r,n);var i={},o={};n[_l]!==_n.dataType&&(i.baseTypeSource=n[_l]),n[_l]===_n.dataType?(i=n[Zt][hr]||{},o=n[Zt].measurements||{}):n[Zt]&&er.extractPropsAndMeasurements(n[Zt],i,o),er.extractPropsAndMeasurements(n.data,i,o);var a=n[Zt].name,s=new _n(r,a,i,o),l=new bi(_n.dataType,s);return er.createEnvelope(r,_n.envelopeType,n,l)},e.EventEnvelopeCreator=new e,e}(er),$m=function(t){$t(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return c(e,"e"),e.prototype.Create=function(r,n){t.prototype.Init.call(this,r,n);var i=n[Zt].measurements||{},o=n[Zt][hr]||{};er.extractPropsAndMeasurements(n.data,o,i);var a=n[Zt],s=Wr.CreateFromInterface(r,a,o,i),l=new bi(Wr.dataType,s);return er.createEnvelope(r,Wr.envelopeType,n,l)},e.ExceptionEnvelopeCreator=new e,e}(er),Lm=function(t){$t(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return c(e,"e"),e.prototype.Create=function(r,n){t.prototype.Init.call(this,r,n);var i=n[Zt],o=i[hr]||{},a=i.measurements||{};er.extractPropsAndMeasurements(n.data,o,a);var s=new Bn(r,i.name,i.average,i.sampleCount,i.min,i.max,o,a),l=new bi(Bn.dataType,s);return er.createEnvelope(r,Bn.envelopeType,n,l)},e.MetricEnvelopeCreator=new e,e}(er),Bm=function(t){$t(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return c(e,"e"),e.prototype.Create=function(r,n){t.prototype.Init.call(this,r,n);var i="duration",o,a=n[Zt];!Oe(a)&&!Oe(a[hr])&&!Oe(a[hr][i])?(o=a[hr][i],delete a[hr][i]):!Oe(n.data)&&!Oe(n.data[i])&&(o=n.data[i],delete n.data[i]);var s=n[Zt],l;((n.ext||{}).trace||{}).traceID&&(l=n.ext.trace.traceID);var u=s.id||l,d=s.name,f=s.uri,p=s[hr]||{},g=s.measurements||{};if(Oe(s.refUri)||(p.refUri=s.refUri),Oe(s.pageType)||(p.pageType=s.pageType),Oe(s.isLoggedIn)||(p.isLoggedIn=s.isLoggedIn.toString()),!Oe(s[hr])){var S=s[hr];ur(S,function(_,C){p[_]=C})}er.extractPropsAndMeasurements(n.data,p,g);var y=new xn(r,d,f,o,p,g,u),b=new bi(xn.dataType,y);return er.createEnvelope(r,xn.envelopeType,n,b)},e.PageViewEnvelopeCreator=new e,e}(er),Um=function(t){$t(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return c(e,"e"),e.prototype.Create=function(r,n){t.prototype.Init.call(this,r,n);var i=n[Zt],o=i.name,a=i.uri||i.url,s=i[hr]||{},l=i.measurements||{};er.extractPropsAndMeasurements(n.data,s,l);var u=new yi(r,o,a,void 0,s,l,i),d=new bi(yi.dataType,u);return er.createEnvelope(r,yi.envelopeType,n,d)},e.PageViewPerformanceEnvelopeCreator=new e,e}(er),Om=function(t){$t(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return c(e,"e"),e.prototype.Create=function(r,n){t.prototype.Init.call(this,r,n);var i=n[Zt].message,o=n[Zt].severityLevel,a=n[Zt][hr]||{},s=n[Zt].measurements||{};er.extractPropsAndMeasurements(n.data,a,s);var l=new wi(r,i,o,a,s),u=new bi(wi.dataType,l);return er.createEnvelope(r,wi.envelopeType,n,u)},e.TraceEnvelopeCreator=new e,e}(er)}),Hm,E_=Ae(()=>{St(),yr(),Hm=function(){function t(e){ir(t,this,function(r){r.serialize=function(a){var s=n(a,"root");try{return vn().stringify(s)}catch(l){e.throwInternal(Ue.CRITICAL,Pe.CannotSerializeObject,l&&Tt(l.toString)?l.toString():"Error serializing object",null,!0)}};function n(a,s){var l="__aiCircularRefCheck",u={};if(!a)return e.throwInternal(Ue.CRITICAL,Pe.CannotSerializeObject,"cannot serialize object because it is null or undefined",{name:s},!0),u;if(a[l])return e.throwInternal(Ue.WARNING,Pe.CircularReferenceDetected,"Circular reference detected while serializing object",{name:s},!0),u;if(!a.aiDataContract){if(s==="measurements")u=o(a,"number",s);else if(s==="properties")u=o(a,"string",s);else if(s==="tags")u=o(a,"string",s);else if(fi(a))u=i(a,s);else{e.throwInternal(Ue.WARNING,Pe.CannotSerializeObjectNonSerializable,"Attempting to serialize an object which does not implement ISerializable",{name:s},!0);try{vn().stringify(a),u=a}catch(d){e.throwInternal(Ue.CRITICAL,Pe.CannotSerializeObject,d&&Tt(d.toString)?d.toString():"Error serializing object",null,!0)}}return u}return a[l]=!0,ur(a.aiDataContract,function(d,f){var p=Tt(f)?f()&1:f&1,g=Tt(f)?f()&4:f&4,S=f&2,y=a[d]!==void 0,b=fo(a[d])&&a[d]!==null;if(p&&!y&&!S)e.throwInternal(Ue.CRITICAL,Pe.MissingRequiredFieldSpecification,"Missing required field specification. The field is required but not present on source",{field:d,name:s});else if(!g){var _=void 0;b?S?_=i(a[d],d):_=n(a[d],d):_=a[d],_!==void 0&&(u[d]=_)}}),delete a[l],u}c(n,"n");function i(a,s){var l;if(a)if(!fi(a))e.throwInternal(Ue.CRITICAL,Pe.ItemNotInArray,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:s},!0);else{l=[];for(var u=0;u<a.length;u++){var d=a[u],f=n(d,s+"["+u+"]");l.push(f)}}return l}c(i,"i");function o(a,s,l){var u;return a&&(u={},ur(a,function(d,f){if(s==="string")f===void 0?u[d]="undefined":f===null?u[d]="null":f.toString?u[d]=f.toString():u[d]="invalid field: toString() is not defined.";else if(s==="number")if(f===void 0)u[d]="undefined";else if(f===null)u[d]="null";else{var p=parseFloat(f);isNaN(p)?u[d]="NaN":u[d]=p}else u[d]="invalid field: "+l+" is of unknown type.",e.throwInternal(Ue.CRITICAL,u[d],null,!0)})),u}c(o,"a")})}return c(t,"t"),t}()}),Wm,wh,R_=Ae(()=>{St(),yr(),Wm=function(){function t(){var e=ds(),r=Mn(),n=!1,i=!0;ir(t,this,function(o){try{if(e&&ws.Attach(e,"online",l)&&(ws.Attach(e,"offline",u),n=!0),r){var a=r.body||r;Ur(a.ononline)||(a.ononline=l,a.onoffline=u,n=!0)}if(n){var s=$n();s&&!Oe(s.onLine)&&(i=s.onLine)}}catch(d){n=!1}o.isListening=n,o.isOnline=function(){var d=!0,f=$n();return n?d=i:f&&!Oe(f.onLine)&&(d=f.onLine),d},o.isOffline=function(){return!o.isOnline()};function l(){i=!0}c(l,"s");function u(){i=!1}c(u,"u")})}return c(t,"t"),t.Offline=new t,t}(),wh=Wm.Offline}),qm,A_=Ae(()=>{qm=function(){function t(){}return c(t,"t"),t.prototype.getHashCodeScore=function(e){var r=this.getHashCode(e)/t.INT_MAX_VALUE;return r*100},t.prototype.getHashCode=function(e){if(e==="")return 0;for(;e.length<t.MIN_INPUT_LENGTH;)e=e.concat(e);for(var r=5381,n=0;n<e.length;++n)r=(r<<5)+r+e.charCodeAt(n),r=r&r;return Math.abs(r)},t.INT_MAX_VALUE=2147483647,t.MIN_INPUT_LENGTH=8,t}()}),zm,I_=Ae(()=>{A_(),dr(),zm=function(){function t(){this.hashCodeGeneragor=new qm,this.keys=new wl}return c(t,"t"),t.prototype.getSamplingScore=function(e){var r=0;return e.tags&&e.tags[this.keys.userId]?r=this.hashCodeGeneragor.getHashCodeScore(e.tags[this.keys.userId]):e.ext&&e.ext.user&&e.ext.user.id?r=this.hashCodeGeneragor.getHashCodeScore(e.ext.user.id):e.tags&&e.tags[this.keys.operationId]?r=this.hashCodeGeneragor.getHashCodeScore(e.tags[this.keys.operationId]):e.ext&&e.ext.telemetryTrace&&e.ext.telemetryTrace.traceID?r=this.hashCodeGeneragor.getHashCodeScore(e.ext.telemetryTrace.traceID):r=Math.random()*100,r},t}()}),jm,T_=Ae(()=>{I_(),dr(),St(),jm=function(){function t(e,r){this.INT_MAX_VALUE=2147483647,this._logger=r||Gc(null),(e>100||e<0)&&(this._logger.throwInternal(Ue.WARNING,Pe.SampleRateOutOfRange,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:e},!0),e=100),this.sampleRate=e,this.samplingScoreGenerator=new zm}return c(t,"t"),t.prototype.isSampledIn=function(e){var r=this.sampleRate,n=!1;return r==null||r>=100||e.baseType===Bn.dataType?!0:(n=this.samplingScoreGenerator.getSamplingScore(e)<r,n)},t}()});function xl(t){try{return t.responseText}catch(e){}return null}c(xl,"Si");var yh,k_=Ae(()=>{qt(),S_(),C_(),E_(),dr(),St(),R_(),T_(),yr(),yh=function(t){$t(e,t);function e(){var r=t.call(this)||this;r.priority=1001,r.identifier=yl,r._XMLHttpRequestSupported=!1;var n,i,o,a,s,l,u={};return ir(e,r,function(d,f){function p(){Nn("Method not implemented.")}c(p,"m"),d.pause=p,d.resume=p,d.flush=function(){try{d.triggerSend(!0,null,1)}catch(ce){d.diagLog().throwInternal(Ue.CRITICAL,Pe.FlushFailed,"flush failed, telemetry will not be collected: "+Pt(ce),{exception:mt(ce)})}},d.onunloadFlush=function(){if((d._senderConfig.onunloadDisableBeacon()===!1||d._senderConfig.isBeaconApiDisabled()===!1)&&Vd())try{d.triggerSend(!0,b,2)}catch(ce){d.diagLog().throwInternal(Ue.CRITICAL,Pe.FailedToSendQueuedTelemetry,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+Pt(ce),{exception:mt(ce)})}else d.flush()},d.teardown=p,d.addHeader=function(ce,Se){u[ce]=Se},d.initialize=function(ce,Se,Ne,Fe){f.initialize(ce,Se,Ne,Fe);var Je=d._getTelCtx(),it=d.identifier;s=new Hm(Se.logger),n=0,i=null,o=0,d._sender=null,l=0;var ht=e._getDefaultAppInsightsChannelConfig();if(d._senderConfig=e._getEmptyAppInsightsChannelConfig(),ur(ht,function(_e,$e){d._senderConfig[_e]=function(){return Je.getConfig(it,_e,$e())}}),d._buffer=d._senderConfig.enableSessionStorageBuffer()&&ga()?new Nm(d.diagLog(),d._senderConfig):new Pm(d._senderConfig),d._sample=new jm(d._senderConfig.samplingPercentage(),d.diagLog()),Ge(ce)||d.diagLog().throwInternal(Ue.CRITICAL,Pe.InvalidInstrumentationKey,"Invalid Instrumentation key "+ce.instrumentationKey),!dl(d._senderConfig.endpointUrl())&&d._senderConfig.customHeaders()&&d._senderConfig.customHeaders().length>0&&bt(d._senderConfig.customHeaders(),function(_e){r.addHeader(_e.header,_e.value)}),!d._senderConfig.isBeaconApiDisabled()&&Vd())d._sender=b;else{var Ct=Fr("XMLHttpRequest");if(Ct){var Ut=new Ct;"withCredentials"in Ut?(d._sender=_,d._XMLHttpRequestSupported=!0):typeof XDomainRequest!==di&&(d._sender=me)}else{var fn=Fr("fetch");fn&&(d._sender=C)}}},d.processTelemetry=function(ce,Se){Se=d._getTelCtx(Se);try{if(d._senderConfig.disableTelemetry())return;if(!ce){Se.diagLog().throwInternal(Ue.CRITICAL,Pe.CannotSendEmptyTelemetry,"Cannot send empty telemetry");return}if(ce.baseData&&!ce.baseType){Se.diagLog().throwInternal(Ue.CRITICAL,Pe.InvalidEvent,"Cannot send telemetry without baseData and baseType");return}if(ce.baseType||(ce.baseType="EventData"),!d._sender){Se.diagLog().throwInternal(Ue.CRITICAL,Pe.SenderNotInitialized,"Sender was not initialized");return}if(g(ce))ce[al]=d._sample.sampleRate;else{Se.diagLog().throwInternal(Ue.WARNING,Pe.TelemetrySampledAndNotSent,"Telemetry item was sampled out and not sent",{SampleRate:d._sample.sampleRate});return}var Ne=e.constructEnvelope(ce,d._senderConfig.instrumentationKey(),Se.diagLog());if(!Ne){Se.diagLog().throwInternal(Ue.CRITICAL,Pe.CreateEnvelopeError,"Unable to create an AppInsights envelope");return}var Fe=!1;if(ce.tags&&ce.tags[pa]&&(bt(ce.tags[pa],function(Ct){try{Ct&&Ct(Ne)===!1&&(Fe=!0,Se.diagLog().warnToConsole("Telemetry processor check returns false"))}catch(Ut){Se.diagLog().throwInternal(Ue.CRITICAL,Pe.TelemetryInitializerFailed,"One of telemetry initializers failed, telemetry item will not be sent: "+Pt(Ut),{exception:mt(Ut)},!0)}}),delete ce.tags[pa]),Fe)return;var Je=s.serialize(Ne),it=d._buffer.getItems(),ht=d._buffer.batchPayloads(it);ht&&ht.length+Je.length>d._senderConfig.maxBatchSizeInBytes()&&d.triggerSend(!0,null,10),d._buffer.enqueue(Je),ne()}catch(Ct){Se.diagLog().throwInternal(Ue.WARNING,Pe.FailedAddingTelemetryToBuffer,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+Pt(Ct),{exception:mt(Ct)})}d.processNext(ce,Se)},d._xhrReadyStateChange=function(ce,Se,Ne){ce.readyState===4&&S(ce.status,Se,ce.responseURL,Ne,Q(ce),xl(ce)||ce.response)},d.triggerSend=function(ce,Se,Ne){ce===void 0&&(ce=!0);try{if(d._senderConfig.disableTelemetry())d._buffer.clear();else{if(d._buffer.count()>0){var Fe=d._buffer.getItems();xe(Ne||0,ce),Se?Se.call(r,Fe,ce):d._sender(Fe,ce)}o=+new Date}clearTimeout(a),a=null,i=null}catch(it){var Je=ud();(!Je||Je>9)&&d.diagLog().throwInternal(Ue.CRITICAL,Pe.TransmissionFailed,"Telemetry transmission failed, some telemetry will be lost: "+Pt(it),{exception:mt(it)})}},d._onError=function(ce,Se,Ne){d.diagLog().throwInternal(Ue.WARNING,Pe.OnError,"Failed to send telemetry.",{message:Se}),d._buffer.clearSent(ce)},d._onPartialSuccess=function(ce,Se){for(var Ne=[],Fe=[],Je=Se.errors.reverse(),it=0,ht=Je;it<ht.length;it++){var Ct=ht[it],Ut=ce.splice(Ct.index,1)[0];ie(Ct.statusCode)?Fe.push(Ut):Ne.push(Ut)}ce.length>0&&d._onSuccess(ce,Se.itemsAccepted),Ne.length>0&&d._onError(Ne,Q(null,["partial success",Se.itemsAccepted,"of",Se.itemsReceived].join(" "))),Fe.length>0&&(F(Fe),d.diagLog().throwInternal(Ue.WARNING,Pe.TransmissionFailed,"Partial success. Delivered: "+ce.length+", Failed: "+Ne.length+". Will retry to send "+Fe.length+" our of "+Se.itemsReceived+" items"))},d._onSuccess=function(ce,Se){d._buffer.clearSent(ce)},d._xdrOnLoad=function(ce,Se){var Ne=xl(ce);if(ce&&(Ne+""=="200"||Ne===""))n=0,d._onSuccess(Se,0);else{var Fe=k(Ne);Fe&&Fe.itemsReceived&&Fe.itemsReceived>Fe.itemsAccepted&&!d._senderConfig.isRetryDisabled()?d._onPartialSuccess(Se,Fe):d._onError(Se,se(ce))}};function g(ce){return d._sample.isSampledIn(ce)}c(g,"I");function S(ce,Se,Ne,Fe,Je,it){var ht=null;if(d._appId||(ht=k(it),ht&&ht.appId&&(d._appId=ht.appId)),(ce<200||ce>=300)&&ce!==0){if((ce===301||ce===307||ce===308)&&!y(Ne)){d._onError(Se,Je);return}!d._senderConfig.isRetryDisabled()&&ie(ce)?(F(Se),d.diagLog().throwInternal(Ue.WARNING,Pe.TransmissionFailed,". Response code "+ce+". Will retry to send "+Se.length+" items.")):d._onError(Se,Je)}else if(wh.isOffline()){if(!d._senderConfig.isRetryDisabled()){var Ct=10;F(Se,Ct),d.diagLog().throwInternal(Ue.WARNING,Pe.TransmissionFailed,". Offline - Response Code: "+ce+". Offline status: "+wh.isOffline()+". Will retry to send "+Se.length+" items.")}}else y(Ne),ce===206?(ht||(ht=k(it)),ht&&!d._senderConfig.isRetryDisabled()?d._onPartialSuccess(Se,ht):d._onError(Se,Je)):(n=0,d._onSuccess(Se,Fe))}c(S,"E");function y(ce){return l>=10?!1:!Oe(ce)&&ce!==""&&ce!==d._senderConfig.endpointUrl()?(d._senderConfig.endpointUrl=function(){return ce},++l,!0):!1}c(y,"b");function b(ce,Se){var Ne=d._senderConfig.endpointUrl(),Fe=d._buffer.batchPayloads(ce),Je=new Blob([Fe],{type:"text/plain;charset=UTF-8"}),it=$n().sendBeacon(Ne,Je);it?(d._buffer.markAsSent(ce),d._onSuccess(ce,ce.length)):(_(ce,!0),d.diagLog().throwInternal(Ue.WARNING,Pe.TransmissionFailed,". Failed to send telemetry with Beacon API, retried with xhrSender."))}c(b,"p");function _(ce,Se){var Ne=new XMLHttpRequest,Fe=d._senderConfig.endpointUrl();try{Ne[_o]=!0}catch(it){}Ne.open("POST",Fe,Se),Ne.setRequestHeader("Content-type","application/json"),dl(Fe)&&Ne.setRequestHeader(jt.sdkContextHeader,jt.sdkContextHeaderAppIdRequest),bt(po(u),function(it){Ne.setRequestHeader(it,u[it])}),Ne.onreadystatechange=function(){return d._xhrReadyStateChange(Ne,ce,ce.length)},Ne.onerror=function(it){return d._onError(ce,Q(Ne),it)};var Je=d._buffer.batchPayloads(ce);Ne.send(Je),d._buffer.markAsSent(ce)}c(_,"v");function C(ce,Se){var Ne=d._senderConfig.endpointUrl(),Fe=d._buffer.batchPayloads(ce),Je=new Blob([Fe],{type:"text/plain;charset=UTF-8"}),it=new Headers;dl(Ne)&&it.append(jt.sdkContextHeader,jt.sdkContextHeaderAppIdRequest),bt(po(u),function(Ut){it.append(Ut,u[Ut])});var ht={method:"POST",headers:it,body:Je},Ct=new Request(Ne,ht);fetch(Ct).then(function(Ut){if(Ut.ok)Ut.text().then(function(fn){S(Ut.status,ce,Ut.url,ce.length,Ut.statusText,fn)}),d._buffer.markAsSent(ce);else throw Error(Ut.statusText)}).catch(function(Ut){d._onError(ce,Ut.message)})}c(C,"y");function k(ce){try{if(ce&&ce!==""){var Se=vn().parse(ce);if(Se&&Se.itemsReceived&&Se.itemsReceived>=Se.itemsAccepted&&Se.itemsReceived-Se.itemsAccepted===Se.errors.length)return Se}}catch(Ne){d.diagLog().throwInternal(Ue.CRITICAL,Pe.InvalidBackendResponse,"Cannot parse the response. "+Pt(Ne),{response:ce})}return null}c(k,"w");function F(ce,Se){if(Se===void 0&&(Se=1),!(!ce||ce.length===0)){d._buffer.clearSent(ce),n++;for(var Ne=0,Fe=ce;Ne<Fe.length;Ne++){var Je=Fe[Ne];d._buffer.enqueue(Je)}$(Se),ne()}}c(F,"L");function $(ce){var Se=10,Ne;if(n<=1)Ne=Se;else{var Fe=(Math.pow(2,n)-1)/2,Je=Math.floor(Math.random()*Fe*Se)+1;Je=ce*Je,Ne=Math.max(Math.min(Je,3600),Se)}var it=rn()+Ne*1e3;i=it}c($,"F");function ne(){if(!a){var ce=i?Math.max(0,i-rn()):0,Se=Math.max(d._senderConfig.maxBatchInterval(),ce);a=setTimeout(function(){d.triggerSend(!0,null,1)},Se)}}c(ne,"Y");function ie(ce){return ce===408||ce===429||ce===500||ce===503}c(ie,"Se");function Q(ce,Se){return ce?"XMLHttpRequest,Status:"+ce.status+",Response:"+xl(ce)||0||0:Se}c(Q,"X");function me(ce,Se){var Ne=ds(),Fe=new XDomainRequest;Fe.onload=function(){return d._xdrOnLoad(Fe,ce)},Fe.onerror=function(Ct){return d._onError(ce,se(Fe),Ct)};var Je=Ne&&Ne.location&&Ne.location.protocol||"";if(d._senderConfig.endpointUrl().lastIndexOf(Je,0)!==0){d.diagLog().throwInternal(Ue.WARNING,Pe.TransmissionFailed,". Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol."),d._buffer.clear();return}var it=d._senderConfig.endpointUrl().replace(/^(https?:)/,"");Fe.open("POST",it);var ht=d._buffer.batchPayloads(ce);Fe.send(ht),d._buffer.markAsSent(ce)}c(me,"me");function se(ce,Se){return ce?"XDomainRequest,Response:"+xl(ce)||0:Se}c(se,"De");function fe(){var ce="getNotifyMgr";return d.core[ce]?d.core[ce]():d.core._notificationManager}c(fe,"pt");function xe(ce,Se){var Ne=fe();if(Ne&&Ne.eventsSendRequest)try{Ne.eventsSendRequest(ce,Se)}catch(Fe){d.diagLog().throwInternal(Ue.CRITICAL,Pe.NotificationException,"send request notification failed: "+Pt(Fe),{exception:mt(Fe)})}}c(xe,"at");function Ge(ce){var Se=Oe(ce.disableInstrumentationKeyValidation)?!1:ce.disableInstrumentationKeyValidation;if(Se)return!0;var Ne="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",Fe=new RegExp(Ne);return Fe.test(ce.instrumentationKey)}c(Ge,"dt")}),r}return c(e,"e"),e.constructEnvelope=function(r,n,i){var o;switch(n!==r.iKey&&!Oe(n)?o=ea({},r,{iKey:n}):o=r,o.baseType){case _n.dataType:return vh.EventEnvelopeCreator.Create(i,o);case wi.dataType:return Om.TraceEnvelopeCreator.Create(i,o);case xn.dataType:return Bm.PageViewEnvelopeCreator.Create(i,o);case yi.dataType:return Um.PageViewPerformanceEnvelopeCreator.Create(i,o);case Wr.dataType:return $m.ExceptionEnvelopeCreator.Create(i,o);case Bn.dataType:return Lm.MetricEnvelopeCreator.Create(i,o);case Un.dataType:return Mm.DependencyEnvelopeCreator.Create(i,o);default:return vh.EventEnvelopeCreator.Create(i,o)}},e._getDefaultAppInsightsChannelConfig=function(){return{endpointUrl:function(){return"https://dc.services.visualstudio.com/v2/track"},emitLineDelimitedJson:function(){return!1},maxBatchInterval:function(){return 15e3},maxBatchSizeInBytes:function(){return 102400},disableTelemetry:function(){return!1},enableSessionStorageBuffer:function(){return!0},isRetryDisabled:function(){return!1},isBeaconApiDisabled:function(){return!0},onunloadDisableBeacon:function(){return!1},instrumentationKey:function(){},namePrefix:function(){},samplingPercentage:function(){return 100},customHeaders:function(){}}},e._getEmptyAppInsightsChannelConfig=function(){return{endpointUrl:void 0,emitLineDelimitedJson:void 0,maxBatchInterval:void 0,maxBatchSizeInBytes:void 0,disableTelemetry:void 0,enableSessionStorageBuffer:void 0,isRetryDisabled:void 0,isBeaconApiDisabled:void 0,onunloadDisableBeacon:void 0,instrumentationKey:void 0,namePrefix:void 0,samplingPercentage:void 0,customHeaders:void 0}},e}(wo)}),Vm=Ae(()=>{k_()}),Gm,bh,Km,D_=Ae(()=>{yr(),dr(),St(),Gm="ai_session",bh=function(){function t(){}return c(t,"t"),t}(),Km=function(){function t(e,r){var n=this,i,o,a=Gc(r),s=Sd(r);ir(t,n,function(l){e||(e={}),Tt(e.sessionExpirationMs)||(e.sessionExpirationMs=function(){return t.acquisitionSpan}),Tt(e.sessionRenewalMs)||(e.sessionRenewalMs=function(){return t.renewalSpan}),l.config=e;var u=l.config.sessionCookiePostfix&&l.config.sessionCookiePostfix()?l.config.sessionCookiePostfix():l.config.namePrefix&&l.config.namePrefix()?l.config.namePrefix():"";i=c(function(){return Gm+u},"i"),l.automaticSession=new bh,l.update=function(){var y=rn(),b=!1,_=l.automaticSession;_.id||(b=!d(_,y));var C=l.config.sessionExpirationMs();if(!b&&C>0){var k=l.config.sessionRenewalMs(),F=y-_.acquisitionDate,$=y-_.renewalDate;b=F<0||$<0,b=b||F>C,b=b||$>k}b?p(y):(!o||y-o>t.cookieUpdateInterval)&&g(_,y)},l.backup=function(){var y=l.automaticSession;S(y.id,y.acquisitionDate,y.renewalDate)};function d(y,b){var _=!1,C=s.get(i());if(C&&Tt(C.split))_=f(y,C);else{var k=jg(a,i());k&&(_=f(y,k))}return _||!!y.id}c(d,"l");function f(y,b){var _=!1,C=", session will be reset",k=b.split("|");if(k.length>=2)try{var F=+k[1]||0,$=+k[2]||0;isNaN(F)||F<=0?a.throwInternal(Ue.WARNING,Pe.SessionRenewalDateIsZero,"AI session acquisition date is 0"+C):isNaN($)||$<=0?a.throwInternal(Ue.WARNING,Pe.SessionRenewalDateIsZero,"AI session renewal date is 0"+C):k[0]&&(y.id=k[0],y.acquisitionDate=F,y.renewalDate=$,_=!0)}catch(ne){a.throwInternal(Ue.CRITICAL,Pe.ErrorParsingAISessionCookie,"Error parsing ai_session value ["+(b||"")+"]"+C+" - "+Pt(ne),{exception:mt(ne)})}return _}c(f,"f");function p(y){var b=l.config||{},_=(b.getNewId?b.getNewId():null)||nl;l.automaticSession.id=_(b.idLength?b.idLength():22),l.automaticSession.acquisitionDate=y,g(l.automaticSession,y),Qd()||a.throwInternal(Ue.WARNING,Pe.BrowserDoesNotSupportLocalStorage,"Browser does not support local storage. Session durations will be inaccurate.")}c(p,"m");function g(y,b){var _=y.acquisitionDate;y.renewalDate=b;var C=l.config,k=C.sessionRenewalMs(),F=_+C.sessionExpirationMs()-b,$=[y.id,_,b],ne=0;F<k?ne=F/1e3:ne=k/1e3;var ie=C.cookieDomain?C.cookieDomain():null;s.set(i(),$.join("|"),C.sessionExpirationMs()>0?ne:null,ie),o=b}c(g,"I");function S(y,b,_){Vg(a,i(),[y,b,_].join("|"))}c(S,"E")})}return c(t,"t"),t.acquisitionSpan=864e5,t.renewalSpan=18e5,t.cookieUpdateInterval=6e4,t}()}),Zm,F_=Ae(()=>{Zm=function(){function t(){}return c(t,"t"),t}()}),Qm,P_=Ae(()=>{Qm=function(){function t(){this.id="browser",this.deviceClass="Browser"}return c(t,"t"),t}()}),Xm,Ym,N_=Ae(()=>{Xm="2.6.4",Ym=function(){function t(e){this.sdkVersion=(e.sdkExtension&&e.sdkExtension()?e.sdkExtension()+"_":"")+"javascript:"+Xm}return c(t,"t"),t}()});function Jm(t){return!(typeof t!="string"||!t||t.match(/,|;|=| |\|/))}c(Jm,"zc");var e0,M_=Ae(()=>{yr(),dr(),St(),e0=function(){function t(e,r){this.isNewUser=!1;var n=Gc(r),i=Sd(r),o;ir(t,this,function(a){a.config=e;var s=a.config.userCookiePostfix&&a.config.userCookiePostfix()?a.config.userCookiePostfix():"";o=c(function(){return t.userCookieName+s},"a");var l=i.get(o());if(l){a.isNewUser=!1;var u=l.split(t.cookieSeparator);u.length>0&&(a.id=u[0])}if(!a.id){var d=e||{},f=(d.getNewId?d.getNewId():null)||nl;a.id=f(d.idLength?e.idLength():22);var p=31536e3,g=Oi(new Date);a.accountAcquisitionDate=g,a.isNewUser=!0;var S=[a.id,g];i.set(o(),S.join(t.cookieSeparator),p);var y=e.namePrefix&&e.namePrefix()?e.namePrefix()+"ai_session":"ai_session";Gg(n,y)}a.accountId=e.accountId?e.accountId():void 0;var b=i.get(t.authUserCookieName);if(b){b=decodeURI(b);var _=b.split(t.cookieSeparator);_[0]&&(a.authenticatedId=_[0]),_.length>1&&_[1]&&(a.accountId=_[1])}a.setAuthenticatedUserContext=function(C,k,F){F===void 0&&(F=!1);var $=!Jm(C)||k&&!Jm(k);if($){n.throwInternal(Ue.WARNING,Pe.SetAuthContextFailedAccountName,"Setting auth user context failed. User auth/account id should be of type string, and not contain commas, semi-colons, equal signs, spaces, or vertical-bars.",!0);return}a.authenticatedId=C;var ne=a.authenticatedId;k&&(a.accountId=k,ne=[a.authenticatedId,a.accountId].join(t.cookieSeparator)),F&&i.set(t.authUserCookieName,encodeURI(ne))},a.clearAuthenticatedUserContext=function(){a.authenticatedId=null,a.accountId=null,i.del(t.authUserCookieName)}})}return c(t,"t"),t.cookieSeparator="|",t.userCookieName="ai_user",t.authUserCookieName="ai_authUser",t}()}),t0,$_=Ae(()=>{t0=function(){function t(){}return c(t,"t"),t}()}),r0,L_=Ae(()=>{dr(),St(),r0=function(){function t(e,r,n,i){var o=this;o.traceID=e||Ln(),o.parentID=r,o.name=n;var a=go();!n&&a&&a.pathname&&(o.name=a.pathname),o.name=Or(i,o.name)}return c(t,"t"),t}()});function ba(t,e){t&&t[e]&&po(t[e]).length===0&&delete t[e]}c(ba,"Or");var Es,Rs,n0,B_=Ae(()=>{yr(),St(),D_(),dr(),F_(),P_(),N_(),M_(),$_(),L_(),Es="ext",Rs="tags",n0=function(){function t(e,r){var n=this,i=e.logger;this.appId=function(){return null},ir(t,this,function(o){o.application=new Zm,o.internal=new Ym(r),Hc()&&(o.sessionManager=new Km(r,e),o.device=new Qm,o.location=new t0,o.user=new e0(r,e),o.telemetryTrace=new r0(void 0,void 0,void 0,i),o.session=new bh),o.applySessionContext=function(a,s){var l=o.session,u=o.sessionManager;l&&yt(l.id)?kt(kr(a.ext,qr.AppExt),"sesId",l.id):u&&u.automaticSession&&kt(kr(a.ext,qr.AppExt),"sesId",u.automaticSession.id,yt)},o.applyOperatingSystemContxt=function(a,s){kt(a.ext,qr.OSExt,o.os)},o.applyApplicationContext=function(a,s){var l=o.application;if(l){var u=kr(a,Rs);kt(u,zt.applicationVersion,l.ver,yt),kt(u,zt.applicationBuild,l.build,yt)}},o.applyDeviceContext=function(a,s){var l=o.device;if(l){var u=kr(kr(a,Es),qr.DeviceExt);kt(u,"localId",l.id,yt),kt(u,"ip",l.ip,yt),kt(u,"model",l.model,yt),kt(u,"deviceClass",l.deviceClass,yt)}},o.applyInternalContext=function(a,s){var l=o.internal;if(l){var u=kr(a,Rs);kt(u,zt.internalAgentVersion,l.agentVersion,yt),kt(u,zt.internalSdkVersion,l.sdkVersion,yt),(a.baseType===oa.dataType||a.baseType===xn.dataType)&&(kt(u,zt.internalSnippet,l.snippetVer,yt),kt(u,zt.internalSdkSrc,l.sdkSrc,yt))}},o.applyLocationContext=function(a,s){var l=n.location;l&&kt(kr(a,Rs,[]),zt.locationIp,l.ip,yt)},o.applyOperationContext=function(a,s){var l=o.telemetryTrace;if(l){var u=kr(kr(a,Es),qr.TraceExt,{traceID:void 0,parentID:void 0});kt(u,"traceID",l.traceID,yt),kt(u,"name",l.name,yt),kt(u,"parentID",l.parentID,yt)}},o.applyWebContext=function(a,s){var l=n.web;l&&kt(kr(a,Es),qr.WebExt,l)},o.applyUserContext=function(a,s){var l=o.user;if(l){var u=kr(a,Rs,[]);kt(u,zt.userAccountId,l.accountId,yt);var d=kr(kr(a,Es),qr.UserExt);kt(d,"id",l.id,yt),kt(d,"authId",l.authenticatedId,yt)}},o.cleanUp=function(a,s){var l=a.ext;l&&(ba(l,qr.DeviceExt),ba(l,qr.UserExt),ba(l,qr.WebExt),ba(l,qr.OSExt),ba(l,qr.AppExt),ba(l,qr.TraceExt))}})}return c(t,"t"),t}()}),i0,_h,U_=Ae(()=>{qt(),yr(),St(),B_(),dr(),i0=function(t){$t(e,t);function e(){var r=t.call(this)||this;r.priority=110,r.identifier=ya;var n,i;return ir(e,r,function(o,a){o.initialize=function(l,u,d,f){a.initialize(l,u,d,f);var p=o._getTelCtx(),g=o.identifier,S=e.getDefaultConfig();i=i||{},ur(S,function(y,b){i[y]=function(){return p.getConfig(g,y,b())}}),o.context=new n0(u,i),n=Hg(d,yl),o.context.appId=function(){return n?n._appId:null},o._extConfig=i},o.processTelemetry=function(l,u){if(!Oe(l)){u=o._getTelCtx(u),l.name===xn.envelopeType&&u.diagLog().resetInternalMessageCount();var d=o.context||{};if(d.session&&typeof o.context.session.id!="string"&&d.sessionManager&&d.sessionManager.update(),s(l,u),d.user&&d.user.isNewUser){d.user.isNewUser=!1;var f=new oa(Pe.SendBrowserInfoOnUserInit,($n()||{}).userAgent||"");u.diagLog().logInternalMessage(Ue.CRITICAL,f)}o.processNext(l,u)}};function s(l,u){kr(l,"tags",[]),kr(l,"ext",{});var d=o.context;d.applySessionContext(l,u),d.applyApplicationContext(l,u),d.applyDeviceContext(l,u),d.applyOperationContext(l,u),d.applyUserContext(l,u),d.applyOperatingSystemContxt(l,u),d.applyWebContext(l,u),d.applyLocationContext(l,u),d.applyInternalContext(l,u),d.cleanUp(l,u)}c(s,"c")}),r}return c(e,"e"),e.getDefaultConfig=function(){var r={instrumentationKey:function(){},accountId:function(){return null},sessionRenewalMs:function(){return 30*60*1e3},samplingPercentage:function(){return 100},sessionExpirationMs:function(){return 24*60*60*1e3},cookieDomain:function(){return null},sdkExtension:function(){return null},isBrowserLinkTrackingEnabled:function(){return!1},appId:function(){return null},namePrefix:function(){},sessionCookiePostfix:function(){},userCookiePostfix:function(){},idLength:function(){return 22},getNewId:function(){return null}};return r},e}(wo),_h=i0}),o0=Ae(()=>{U_()});function a0(t,e,r){var n=0,i=t[e],o=t[r];return i&&o&&(n=Hr(i,o)),n}c(a0,"$c");function Eo(t,e,r,n,i){var o=0,a=a0(r,n,i);return a&&(o=Ki(t,e,vi(a))),o}c(Eo,"xr");function Ki(t,e,r){var n="ajaxPerf",i=0;if(t&&e&&r){var o=t[n]=t[n]||{};o[e]=r,i=1}return i}c(Ki,"tr");function O_(t,e){var r=t.perfTiming,n=e[Vr]||{},i=0,o="name",a="Start",s="End",l="domainLookup",u="connect",d="redirect",f="request",p="response",g="duration",S="startTime",y=l+a,b=l+s,_=u+a,C=u+s,k=f+a,F=f+s,$=p+a,ne=p+s,ie=d+a,Q=d=s,me="transferSize",se="encodedBodySize",fe="decodedBodySize",xe="serverTiming";if(r){i|=Eo(n,d,r,ie,Q),i|=Eo(n,l,r,y,b),i|=Eo(n,u,r,_,C),i|=Eo(n,f,r,k,F),i|=Eo(n,p,r,$,ne),i|=Eo(n,"networkConnect",r,S,C),i|=Eo(n,"sentRequest",r,k,ne);var Ge=r[g];Ge||(Ge=a0(r,S,ne)||0),i|=Ki(n,g,Ge),i|=Ki(n,"perfTotal",Ge);var ce=r[xe];if(ce){var Se={};bt(ce,function(Ne,Fe){var Je=lb(Ne[o]||""+Fe),it=Se[Je]||{};ur(Ne,function(ht,Ct){(ht!==o&&yt(Ct)||td(Ct))&&(it[ht]&&(Ct=it[ht]+";"+Ct),(Ct||!yt(Ct))&&(it[ht]=Ct))}),Se[Je]=it}),i|=Ki(n,xe,Se)}i|=Ki(n,me,r[me]),i|=Ki(n,se,r[se]),i|=Ki(n,fe,r[fe])}else t.perfMark&&(i|=Ki(n,"missing",t.perfAttempts));i&&(e[Vr]=n)}c(O_,"vl");var Vr,s0,xh,H_=Ae(()=>{dr(),St(),yr(),Vr="properties",s0=function(){function t(){var e=this;e.openDone=!1,e.setRequestHeaderDone=!1,e.sendDone=!1,e.abortDone=!1,e.stateChangeAttached=!1}return c(t,"t"),t}(),xh=function(){function t(e,r,n){var i=this,o=n,a="responseText";i.perfMark=null,i.completed=!1,i.requestHeadersSize=null,i.requestHeaders=null,i.responseReceivingDuration=null,i.callbackDuration=null,i.ajaxTotalDuration=null,i.aborted=0,i.pageUrl=null,i.requestUrl=null,i.requestSize=0,i.method=null,i.status=null,i.requestSentTime=null,i.responseStartedTime=null,i.responseFinishedTime=null,i.callbackFinishedTime=null,i.endTime=null,i.xhrMonitoringState=new s0,i.clientFailure=0,i.traceID=e,i.spanID=r,ir(t,i,function(s){s.getAbsoluteUrl=function(){return s.requestUrl?Qg(s.requestUrl):null},s.getPathName=function(){return s.requestUrl?ys(o,Xg(s.method,s.requestUrl)):null},s.CreateTrackItem=function(l,u,d){if(s.ajaxTotalDuration=Math.round(Hr(s.requestSentTime,s.responseFinishedTime)*1e3)/1e3,s.ajaxTotalDuration<0)return null;var f=(y={id:"|"+s.traceID+"."+s.spanID,target:s.getAbsoluteUrl(),name:s.getPathName(),type:l,startTime:null,duration:s.ajaxTotalDuration,success:+s.status>=200&&+s.status<400,responseCode:+s.status,method:s.method},y[Vr]={HttpMethod:s.method},y);if(s.requestSentTime&&(f.startTime=new Date,f.startTime.setTime(s.requestSentTime)),O_(s,f),u&&po(s.requestHeaders).length>0&&(f[Vr]=f[Vr]||{},f[Vr].requestHeaders=s.requestHeaders),d){var p=d();if(p){var g=p.correlationContext;if(g&&(f.correlationContext=g),p.headerMap&&po(p.headerMap).length>0&&(f[Vr]=f[Vr]||{},f[Vr].responseHeaders=p.headerMap),s.status>=400){var S=p.type;f[Vr]=f[Vr]||{},(S===""||S==="text")&&(f[Vr][a]=p[a]?p.statusText+" - "+p[a]:p.statusText),S==="json"&&(f[Vr][a]=p.response?p.statusText+" - "+JSON.stringify(p.response):p.statusText)}}}return f;var y}})}return c(t,"t"),t}()}),W_,q_=Ae(()=>{St(),St(),W_=function(){function t(){}return c(t,"t"),t.GetLength=function(e){var r=0;if(!Oe(e)){var n="";try{n=e.toString()}catch(i){}r=n.length,r=isNaN(r)?0:r}return r},t}()}),Sh,z_=Ae(()=>{St(),Sh=function(){function t(e,r){var n=this;n.traceFlag=t.DEFAULT_TRACE_FLAG,n.version=t.DEFAULT_VERSION,e&&t.isValidTraceId(e)?n.traceId=e:n.traceId=Ln(),r&&t.isValidSpanId(r)?n.spanId=r:n.spanId=Ln().substr(0,16)}return c(t,"t"),t.isValidTraceId=function(e){return e.match(/^[0-9a-f]{32}$/)&&e!=="00000000000000000000000000000000"},t.isValidSpanId=function(e){return e.match(/^[0-9a-f]{16}$/)&&e!=="0000000000000000"},t.prototype.toString=function(){var e=this;return e.version+"-"+e.traceId+"-"+e.spanId+"-"+e.traceFlag},t.DEFAULT_TRACE_FLAG="01",t.DEFAULT_VERSION="00",t}()});function j_(){var t=Jo();return!t||Oe(t.Request)||Oe(t.Request[Jr])||Oe(t[Sa])?null:t[Sa]}c(j_,"xl");function V_(t){var e=!1;if(typeof XMLHttpRequest!==di&&!Oe(XMLHttpRequest)){var r=XMLHttpRequest[Jr];e=!Oe(r)&&!Oe(r.open)&&!Oe(r.send)&&!Oe(r.abort)}var n=ud();if(n&&n<9&&(e=!1),e)try{var i=new XMLHttpRequest;i[Gr]={};var o=XMLHttpRequest[Jr].open;XMLHttpRequest[Jr].open=o}catch(a){e=!1,As(t,Pe.FailedMonitorAjaxOpen,"Failed to enable XMLHttpRequest monitoring, extension is not supported",{exception:mt(a)})}return e}c(V_,"yl");function Sl(t){var e="";try{!Oe(t)&&!Oe(t[Gr])&&!Oe(t[Gr].requestUrl)&&(e+="(url: '"+t[Gr].requestUrl+"')")}catch(r){}return e}c(Sl,"Ti");function As(t,e,r,n,i){t[xa]()[Eh](Ue.CRITICAL,e,r,n,i)}c(As,"kn");function Cl(t,e,r,n,i){t[xa]()[Eh](Ue.WARNING,e,r,n,i)}c(Cl,"Ei");function Is(t,e,r){return function(n){As(t,e,r,{ajaxDiagnosticsMessage:Sl(n.inst),exception:mt(n.err)})}}c(Is,"Rn");function _a(t,e){return t&&e?t.indexOf(e):-1}c(_a,"Hr");var Ch,xa,Gr,Eh,Sa,Rh,Ah,G_=Ae(()=>{qt(),dr(),St(),H_(),q_(),z_(),yr(),Ch="ai.ajxmn.",xa="diagLog",Gr="ajaxData",Eh="throwInternal",Sa="fetch",Rh=0,Ah=function(t){$t(e,t);function e(){var r=t.call(this)||this;r.identifier=e.identifier,r.priority=120;var n="trackDependencyDataInternal",i=go(),o=!1,a=!1,s=i&&i.host&&i.host.toLowerCase(),l=e.getEmptyConfig(),u=!1,d=0,f,p,g,S,y=!1,b=0,_=!1,C=[],k={},F;return ir(e,r,function($,ne){$.initialize=function(_e,$e,Ve,We){if(!$.isInitialized()){ne.initialize(_e,$e,Ve,We);var tt=$._getTelCtx(),ut=e.getDefaultConfig();ur(ut,function(Lr,Di){l[Lr]=tt.getConfig(e.identifier,Lr,Di)});var lt=l.distributedTracingMode;if(u=l.enableRequestHeaderTracking,y=l.enableAjaxPerfTracking,b=l.maxAjaxCallsPerView,_=l.enableResponseHeaderTracking,F=l.excludeRequestFromAutoTrackingPatterns,g=lt===bn.AI||lt===bn.AI_AND_W3C,p=lt===bn.AI_AND_W3C||lt===bn.W3C,y){var Et=_e.instrumentationKey||"unkwn";Et.length>5?S=Ch+Et.substring(Et.length-5)+".":S=Ch+Et+"."}if(l.disableAjaxTracking===!1&&se(),Q(),Ve.length>0&&Ve){for(var Vt=void 0,tr=0;!Vt&&tr<Ve.length;)Ve[tr]&&Ve[tr].identifier===ya&&(Vt=Ve[tr]),tr++;Vt&&(f=Vt.context)}}},$.teardown=function(){bt(C,function(_e){_e.rm()}),C=[],o=!1,a=!1,$.setInitialized(!1)},$.trackDependencyData=function(_e,$e){$[n](_e,$e)},$.includeCorrelationHeaders=function(_e,$e,Ve,We){var tt=$._currentWindowHost||s;if($e){if(ji.canIncludeCorrelationHeader(l,_e.getAbsoluteUrl(),tt)){if(Ve||(Ve={}),Ve.headers=new Headers(Ve.headers||($e instanceof Request?$e.headers||{}:{})),g){var ut="|"+_e.traceID+"."+_e.spanID;Ve.headers.set(jt.requestIdHeader,ut),u&&(_e.requestHeaders[jt.requestIdHeader]=ut)}var lt=l.appId||f&&f.appId();if(lt&&(Ve.headers.set(jt.requestContextHeader,jt.requestContextAppIdFormat+lt),u&&(_e.requestHeaders[jt.requestContextHeader]=jt.requestContextAppIdFormat+lt)),p){var Et=new Sh(_e.traceID,_e.spanID);Ve.headers.set(jt.traceParentHeader,Et.toString()),u&&(_e.requestHeaders[jt.traceParentHeader]=Et.toString())}}return Ve}else if(We){if(ji.canIncludeCorrelationHeader(l,_e.getAbsoluteUrl(),tt)){if(g){var ut="|"+_e.traceID+"."+_e.spanID;We.setRequestHeader(jt.requestIdHeader,ut),u&&(_e.requestHeaders[jt.requestIdHeader]=ut)}var lt=l.appId||f&&f.appId();if(lt&&(We.setRequestHeader(jt.requestContextHeader,jt.requestContextAppIdFormat+lt),u&&(_e.requestHeaders[jt.requestContextHeader]=jt.requestContextAppIdFormat+lt)),p){var Et=new Sh(_e.traceID,_e.spanID);We.setRequestHeader(jt.traceParentHeader,Et.toString()),u&&(_e.requestHeaders[jt.traceParentHeader]=Et.toString())}}return We}},$[n]=function(_e,$e,Ve){if(b===-1||d<b){(l.distributedTracingMode===bn.W3C||l.distributedTracingMode===bn.AI_AND_W3C)&&typeof _e.id=="string"&&_e.id[_e.id.length-1]!=="."&&(_e.id+="."),Oe(_e.startTime)&&(_e.startTime=new Date);var We=On.create(_e,Un.dataType,Un.envelopeType,$[xa](),$e,Ve);$.core.track(We)}else d===b&&As($,Pe.MaxAjaxPerPVExceeded,"Maximum ajax per page view limit reached, ajax monitoring is paused until the next trackPageView(). In order to increase the limit set the maxAjaxCallsPerView configuration parameter.",!0);++d};function ie(_e){var $e=!0;return(_e||l.ignoreHeaders)&&bt(l.ignoreHeaders,function(Ve){if(Ve.toLowerCase()===_e.toLowerCase())return $e=!1,-1}),$e}c(ie,"Se");function Q(){var _e=j_();if(_e){var $e=Jo(),Ve=_e.polyfill;l.disableFetchTracking===!1?(C.push(Ud($e,Sa,{req:function(We,tt,ut){var lt;if(o&&!fe(null,tt,ut)&&!(Ve&&a)){var Et=We.ctx();lt=ht(tt,ut);var Vt=$.includeCorrelationHeaders(lt,tt,ut);Vt!==ut&&We.set(1,Vt),Et.data=lt}},rsp:function(We,tt){var ut=We.ctx().data;ut&&(We.rslt=We.rslt.then(function(lt){return Ut(We,(lt||{}).status,lt,ut,function(){var Et={statusText:lt.statusText,headerMap:null,correlationContext:fn(lt)};if(_){var Vt={};lt.headers.forEach(function(tr,Lr){ie(Lr)&&(Vt[Lr]=tr)}),Et.headerMap=Vt}return Et}),lt}).catch(function(lt){throw Ut(We,0,tt,ut,null,{error:lt.message}),lt}))},hkErr:Is($,Pe.FailedMonitorAjaxOpen,"Failed to monitor Window.fetch, monitoring data for this fetch call may be incorrect.")})),o=!0):Ve&&C.push(Ud($e,Sa,{req:function(We,tt,ut){fe(null,tt,ut)}})),Ve&&($e[Sa].polyfill=Ve)}}c(Q,"X");function me(_e,$e,Ve){C.push(Bb(_e,$e,Ve))}c(me,"me");function se(){V_($)&&!a&&(me(XMLHttpRequest,"open",{req:function(_e,$e,Ve,We){var tt=_e.inst,ut=tt[Gr];!fe(tt,Ve)&&xe(tt,!0)&&(!ut||!ut.xhrMonitoringState.openDone)&&Ge(tt,$e,Ve,We)},hkErr:Is($,Pe.FailedMonitorAjaxOpen,"Failed to monitor XMLHttpRequest.open, monitoring data for this ajax call may be incorrect.")}),me(XMLHttpRequest,"send",{req:function(_e,$e){var Ve=_e.inst,We=Ve[Gr];xe(Ve)&&!We.xhrMonitoringState.sendDone&&(Je("xhr",We),We.requestSentTime=_s(),$.includeCorrelationHeaders(We,void 0,void 0,Ve),We.xhrMonitoringState.sendDone=!0)},hkErr:Is($,Pe.FailedMonitorAjaxSend,"Failed to monitor XMLHttpRequest, monitoring data for this ajax call may be incorrect.")}),me(XMLHttpRequest,"abort",{req:function(_e){var $e=_e.inst,Ve=$e[Gr];xe($e)&&!Ve.xhrMonitoringState.abortDone&&(Ve.aborted=1,Ve.xhrMonitoringState.abortDone=!0)},hkErr:Is($,Pe.FailedMonitorAjaxAbort,"Failed to monitor XMLHttpRequest.abort, monitoring data for this ajax call may be incorrect.")}),u&&me(XMLHttpRequest,"setRequestHeader",{req:function(_e,$e,Ve){var We=_e.inst;xe(We)&&ie($e)&&(We[Gr].requestHeaders[$e]=Ve)},hkErr:Is($,Pe.FailedMonitorAjaxSetRequestHeader,"Failed to monitor XMLHttpRequest.setRequestHeader, monitoring data for this ajax call may be incorrect.")}),a=!0)}c(se,"De");function fe(_e,$e,Ve){var We=!1,tt=((yt($e)?$e:($e||{}).url||"")||"").toLowerCase();if(bt(F,function(Et){var Vt=Et;yt(Et)&&(Vt=new RegExp(Et)),We||(We=Vt.test(tt))}),We)return We;var ut=_a(tt,"?"),lt=_a(tt,"#");return(ut===-1||lt!==-1&&lt<ut)&&(ut=lt),ut!==-1&&(tt=tt.substring(0,ut)),Oe(_e)?Oe($e)||(We=(typeof $e=="object"?$e[_o]===!0:!1)||(Ve?Ve[_o]===!0:!1)):We=_e[_o]===!0||tt[_o]===!0,We?k[tt]||(k[tt]=1):k[tt]&&(We=!0),We}c(fe,"pt");function xe(_e,$e){var Ve=!0,We=a;return Oe(_e)||(Ve=$e===!0||!Oe(_e[Gr])),We&&Ve}c(xe,"at");function Ge(_e,$e,Ve,We){var tt=f&&f.telemetryTrace&&f.telemetryTrace.traceID||Ln(),ut=Ln().substr(0,16),lt=new xh(tt,ut,$[xa]());lt.method=$e,lt.requestUrl=Ve,lt.xhrMonitoringState.openDone=!0,lt.requestHeaders={},lt.async=We,_e[Gr]=lt,ce(_e)}c(Ge,"dt");function ce(_e){_e[Gr].xhrMonitoringState.stateChangeAttached=ws.Attach(_e,"readystatechange",function(){try{_e&&_e.readyState===4&&xe(_e)&&Ne(_e)}catch(Ve){var $e=mt(Ve);(!$e||_a($e.toLowerCase(),"c00c023f")===-1)&&As($,Pe.FailedMonitorAjaxRSC,"Failed to monitor XMLHttpRequest 'readystatechange' event handler, monitoring data for this ajax call may be incorrect.",{ajaxDiagnosticsMessage:Sl(_e),exception:$e})}})}c(ce,"d");function Se(_e){try{var $e=_e.responseType;if($e===""||$e==="text")return _e.responseText}catch(Ve){}return null}c(Se,"T");function Ne(_e){var $e=_e[Gr];$e.responseFinishedTime=_s(),$e.status=_e.status;function Ve(We,tt){var ut=tt||{};ut.ajaxDiagnosticsMessage=Sl(_e),We&&(ut.exception=mt(We)),Cl($,Pe.FailedMonitorAjaxDur,"Failed to calculate the duration of the ajax call, monitoring data for this ajax call won't be sent.",ut)}c(Ve,"N"),it("xmlhttprequest",$e,function(){try{var We=$e.CreateTrackItem("Ajax",u,function(){var tt={statusText:_e.statusText,headerMap:null,correlationContext:Fe(_e),type:_e.responseType,responseText:Se(_e),response:_e.response};if(_){var ut=_e.getAllResponseHeaders();if(ut){var lt=Sr(ut).split(/[\r\n]+/),Et={};bt(lt,function(Vt){var tr=Vt.split(": "),Lr=tr.shift(),Di=tr.join(": ");ie(Lr)&&(Et[Lr]=Di)}),tt.headerMap=Et}}return tt});We?$[n](We):Ve(null,{requestSentTime:$e.requestSentTime,responseFinishedTime:$e.responseFinishedTime})}finally{try{_e[Gr]=null}catch(tt){}}},function(We){Ve(We,null)})}c(Ne,"A");function Fe(_e){try{var $e=_e.getAllResponseHeaders();if($e!==null){var Ve=_a($e.toLowerCase(),jt.requestContextHeaderLowerCase);if(Ve!==-1){var We=_e.getResponseHeader(jt.requestContextHeader);return ji.getCorrelationContext(We)}}}catch(tt){Cl($,Pe.FailedMonitorAjaxGetCorrelationHeader,"Failed to get Request-Context correlation header as it may be not included in the response or not accessible.",{ajaxDiagnosticsMessage:Sl(_e),exception:mt(tt)})}}c(Fe,"D");function Je(_e,$e){if($e.requestUrl&&S&&y){var Ve=pi();if(Ve&&Tt(Ve.mark)){Rh++;var We=S+_e+"#"+Rh;Ve.mark(We);var tt=Ve.getEntriesByName(We);tt&&tt.length===1&&($e.perfMark=tt[0])}}}c(Je,"z");function it(_e,$e,Ve,We){var tt=$e.perfMark,ut=pi(),lt=l.maxAjaxPerfLookupAttempts,Et=l.ajaxPerfLookupDelay,Vt=$e.requestUrl,tr=0;c(function Lr(){try{if(ut&&tt){tr++;for(var Di=null,wu=ut.getEntries(),ja=wu.length-1;ja>=0;ja--){var pn=wu[ja];if(pn){if(pn.entryType==="resource")pn.initiatorType===_e&&(_a(pn.name,Vt)!==-1||_a(Vt,pn.name)!==-1)&&(Di=pn);else if(pn.entryType==="mark"&&pn.name===tt.name){$e.perfTiming=Di;break}if(pn.startTime<tt.startTime-1e3)break}}}!tt||$e.perfTiming||tr>=lt||$e.async===!1?(tt&&Tt(ut.clearMarks)&&ut.clearMarks(tt.name),$e.perfAttempts=tr,Ve()):setTimeout(Lr,Et)}catch(sp){We(sp)}},"We")()}c(it,"U");function ht(_e,$e){var Ve=f&&f.telemetryTrace&&f.telemetryTrace.traceID||Ln(),We=Ln().substr(0,16),tt=new xh(Ve,We,$[xa]());tt.requestSentTime=_s(),_e instanceof Request?tt.requestUrl=_e?_e.url:"":tt.requestUrl=_e;var ut="GET";$e&&$e.method?ut=$e.method:_e&&_e instanceof Request&&(ut=_e.method),tt.method=ut;var lt={};if(u){var Et=new Headers(($e?$e.headers:0)||(_e instanceof Request?_e.headers||{}:{}));Et.forEach(function(Vt,tr){ie(tr)&&(lt[tr]=Vt)})}return tt.requestHeaders=lt,Je("fetch",tt),tt}c(ht,"q");function Ct(_e){var $e="";try{Oe(_e)||(typeof _e=="string"?$e+="(url: '"+_e+"')":$e+="(url: '"+_e.url+"')")}catch(Ve){As($,Pe.FailedMonitorAjaxOpen,"Failed to grab failed fetch diagnostics message",{exception:mt(Ve)})}return $e}c(Ct,"$");function Ut(_e,$e,Ve,We,tt,ut){if(!We)return;function lt(Et,Vt,tr){var Lr=tr||{};Lr.fetchDiagnosticsMessage=Ct(Ve),Vt&&(Lr.exception=mt(Vt)),Cl($,Et,"Failed to calculate the duration of the fetch call, monitoring data for this fetch call won't be sent.",Lr)}c(lt,"B"),We.responseFinishedTime=_s(),We.status=$e,it("fetch",We,function(){var Et=We.CreateTrackItem("Fetch",u,tt);Et?$[n](Et):lt(Pe.FailedMonitorAjaxDur,null,{requestSentTime:We.requestSentTime,responseFinishedTime:We.responseFinishedTime})},function(Et){lt(Pe.FailedMonitorAjaxGetCorrelationHeader,Et,null)})}c(Ut,"ie");function fn(_e){if(_e&&_e.headers)try{var $e=_e.headers.get(jt.requestContextHeader);return ji.getCorrelationContext($e)}catch(Ve){Cl($,Pe.FailedMonitorAjaxGetCorrelationHeader,"Failed to get Request-Context correlation header as it may be not included in the response or not accessible.",{fetchDiagnosticsMessage:Ct(_e),exception:mt(Ve)})}}c(fn,"Ht")}),r}return c(e,"e"),e.getDefaultConfig=function(){var r={maxAjaxCallsPerView:500,disableAjaxTracking:!1,disableFetchTracking:!0,excludeRequestFromAutoTrackingPatterns:void 0,disableCorrelationHeaders:!1,distributedTracingMode:bn.AI_AND_W3C,correlationHeaderExcludedDomains:["*.blob.core.windows.net","*.blob.core.chinacloudapi.cn","*.blob.core.cloudapi.de","*.blob.core.usgovcloudapi.net"],correlationHeaderDomains:void 0,correlationHeaderExcludePatterns:void 0,appId:void 0,enableCorsCorrelation:!1,enableRequestHeaderTracking:!1,enableResponseHeaderTracking:!1,enableAjaxErrorStatusText:!1,enableAjaxPerfTracking:!1,maxAjaxPerfLookupAttempts:3,ajaxPerfLookupDelay:25,ignoreHeaders:["Authorization","X-API-Key","WWW-Authenticate"]};return r},e.getEmptyConfig=function(){var r=this.getDefaultConfig();return ur(r,function(n){r[n]=void 0}),r},e.prototype.processTelemetry=function(r,n){this.processNext(r,n)},e.identifier="AjaxDependencyPlugin",e}(wo)}),c0=Ae(()=>{G_()}),Ih,Th,l0,u0,kh,d0=Ae(()=>{St(),Fm(),Vm(),o0(),c0(),dr(),Th=["snippet","dependencies","properties","_snippetVersion","appInsightsNew","getSKUDefaults"],l0={Default:0,Required:1,Array:2,Hidden:4},u0={__proto__:null,PropertiesPluginIdentifier:ya,BreezeChannelIdentifier:yl,AnalyticsPluginIdentifier:hh,Util:eh,CorrelationIdHelper:ji,UrlHelper:rm,DateTimeUtils:nm,ConnectionStringParser:cm,FieldType:l0,RequestHeaders:jt,DisabledPropertyName:_o,ProcessLegacy:pa,SampleRate:al,HttpMethod:sl,DEFAULT_BREEZE_ENDPOINT:Gd,AIData:rh,AIBase:th,Envelope:nh,Event:_n,Exception:Wr,Metric:Bn,PageView:xn,PageViewData:ml,RemoteDependencyData:Un,Trace:wi,PageViewPerformance:yi,Data:bi,SeverityLevel:xs,ConfigurationManager:Rm,ContextTagKeys:wl,DataSanitizer:Ug,TelemetryItemCreator:On,CtxTagKeys:zt,Extensions:qr,DistributedTracingModes:bn},kh=function(){function t(e){var r=this;r._snippetVersion=""+(e.sv||e.version||""),e.queue=e.queue||[],e.version=e.version||2;var n=e.config||{};if(n.connectionString){var i=om(n.connectionString),o=i.ingestionendpoint;n.endpointUrl=o?o+"/v2/track":n.endpointUrl,n.instrumentationKey=i.instrumentationkey||n.instrumentationKey}r.appInsights=new ph,r.properties=new _h,r.dependencies=new Ah,r.core=new Nd,r._sender=new yh,r.snippet=e,r.config=n,r.getSKUDefaults()}return c(t,"t"),t.prototype.getCookieMgr=function(){return this.appInsights.getCookieMgr()},t.prototype.trackEvent=function(e,r){this.appInsights.trackEvent(e,r)},t.prototype.trackPageView=function(e){var r=e||{};this.appInsights.trackPageView(r)},t.prototype.trackPageViewPerformance=function(e){var r=e||{};this.appInsights.trackPageViewPerformance(r)},t.prototype.trackException=function(e){e&&!e.exception&&e.error&&(e.exception=e.error),this.appInsights.trackException(e)},t.prototype._onerror=function(e){this.appInsights._onerror(e)},t.prototype.trackTrace=function(e,r){this.appInsights.trackTrace(e,r)},t.prototype.trackMetric=function(e,r){this.appInsights.trackMetric(e,r)},t.prototype.startTrackPage=function(e){this.appInsights.startTrackPage(e)},t.prototype.stopTrackPage=function(e,r,n,i){this.appInsights.stopTrackPage(e,r,n,i)},t.prototype.startTrackEvent=function(e){this.appInsights.startTrackEvent(e)},t.prototype.stopTrackEvent=function(e,r,n){this.appInsights.stopTrackEvent(e,r,n)},t.prototype.addTelemetryInitializer=function(e){return this.appInsights.addTelemetryInitializer(e)},t.prototype.setAuthenticatedUserContext=function(e,r,n){n===void 0&&(n=!1),this.properties.context.user.setAuthenticatedUserContext(e,r,n)},t.prototype.clearAuthenticatedUserContext=function(){this.properties.context.user.clearAuthenticatedUserContext()},t.prototype.trackDependencyData=function(e){this.dependencies.trackDependencyData(e)},t.prototype.flush=function(e){var r=this;e===void 0&&(e=!0),aa(this.core,function(){return"AISKU.flush"},function(){bt(r.core.getTransmissionControls(),function(n){bt(n,function(i){i.flush(e)})})},null,e)},t.prototype.onunloadFlush=function(e){e===void 0&&(e=!0),bt(this.core.getTransmissionControls(),function(r){bt(r,function(n){n.onunloadFlush?n.onunloadFlush():n.flush(e)})})},t.prototype.loadAppInsights=function(e,r,n){var i=this;e===void 0&&(e=!1);var o=this;function a(s){if(s){var l="";Oe(o._snippetVersion)||(l+=o._snippetVersion),e&&(l+=".lg"),o.context&&o.context.internal&&(o.context.internal.snippetVer=l||"-"),ur(o,function(u,d){yt(u)&&!Tt(d)&&u&&u[0]!=="_"&&Th.indexOf(u)===-1&&(s[u]=d)})}}return c(a,"o"),e&&o.config.extensions&&o.config.extensions.length>0&&Nn("Extensions not allowed in legacy mode"),aa(o.core,function(){return"AISKU.loadAppInsights"},function(){var s=[];s.push(o._sender),s.push(o.properties),s.push(o.dependencies),s.push(o.appInsights),o.core.initialize(o.config,s,r,n),o.context=o.properties.context,Ih&&o.context&&(o.context.internal.sdkSrc=Ih),a(o.snippet),o.emptyQueue(),o.pollInternalLogs(),o.addHousekeepingBeforeUnload(i)}),o},t.prototype.updateSnippetDefinitions=function(e){Wp(e,this,function(r){return r&&Th.indexOf(r)===-1})},t.prototype.emptyQueue=function(){var e=this;try{if(fi(e.snippet.queue)){for(var r=e.snippet.queue.length,n=0;n<r;n++){var i=e.snippet.queue[n];i()}e.snippet.queue=void 0,delete e.snippet.queue}}catch(a){var o={};a&&Tt(a.toString)&&(o.exception=a.toString())}},t.prototype.pollInternalLogs=function(){this.core.pollInternalLogs()},t.prototype.addHousekeepingBeforeUnload=function(e){if(Hc()||jp()){var r=c(function(){e.onunloadFlush(!1),bt(e.appInsights.core._extensions,function(i){if(i.identifier===ya)return i&&i.context&&i.context._sessionManager&&i.context._sessionManager.backup(),-1})},"r");if(!e.appInsights.config.disableFlushOnBeforeUnload){var n=bo("beforeunload",r);n=bo("unload",r)||n,n=bo("pagehide",r)||n,n=bo("visibilitychange",r)||n,!n&&!bb()&&e.appInsights.core.logger.throwInternal(Ue.CRITICAL,Pe.FailedToAddHandlerForOnBeforeUnload,"Could not add handler for beforeunload and pagehide")}e.appInsights.config.disableFlushOnUnload||(bo("pagehide",r),bo("visibilitychange",r))}},t.prototype.getSender=function(){return this._sender},t.prototype.getSKUDefaults=function(){var e=this;e.config.diagnosticLogInterval=e.config.diagnosticLogInterval&&e.config.diagnosticLogInterval>0?e.config.diagnosticLogInterval:1e4},t}(),function(){var t=null,e=!1,r=["://js.monitor.azure.com/","://az416426.vo.msecnd.net/"];try{var n=(document||{}).currentScript;n&&(t=n.src)}catch(s){}if(t)try{var i=t.toLowerCase();if(i){for(var o="",a=0;a<r.length;a++)if(i.indexOf(r[a])!==-1){o="cdn"+(a+1),i.indexOf("/scripts/")===-1&&(i.indexOf("/next/")!==-1?o+="-next":i.indexOf("/beta/")!==-1&&(o+="-beta")),Ih=o+(e?".mod":"");break}}}catch(s){}}()}),h0,f0,K_=Ae(()=>{dr(),St(),h0=["snippet","getDefaultConfig","_hasLegacyInitializers","_queue","_processLegacyInitializers"],f0=function(){function t(e,r){this._hasLegacyInitializers=!1,this._queue=[],this.config=t.getDefaultConfig(e.config),this.appInsightsNew=r,this.context={addTelemetryInitializer:this.addTelemetryInitializers.bind(this)}}return c(t,"t"),t.getDefaultConfig=function(e){return e||(e={}),e.endpointUrl=e.endpointUrl||"https://dc.services.visualstudio.com/v2/track",e.sessionRenewalMs=30*60*1e3,e.sessionExpirationMs=24*60*60*1e3,e.maxBatchSizeInBytes=e.maxBatchSizeInBytes>0?e.maxBatchSizeInBytes:102400,e.maxBatchInterval=isNaN(e.maxBatchInterval)?15e3:e.maxBatchInterval,e.enableDebug=Bt(e.enableDebug),e.disableExceptionTracking=Bt(e.disableExceptionTracking),e.disableTelemetry=Bt(e.disableTelemetry),e.verboseLogging=Bt(e.verboseLogging),e.emitLineDelimitedJson=Bt(e.emitLineDelimitedJson),e.diagnosticLogInterval=e.diagnosticLogInterval||1e4,e.autoTrackPageVisitTime=Bt(e.autoTrackPageVisitTime),(isNaN(e.samplingPercentage)||e.samplingPercentage<=0||e.samplingPercentage>=100)&&(e.samplingPercentage=100),e.disableAjaxTracking=Bt(e.disableAjaxTracking),e.maxAjaxCallsPerView=isNaN(e.maxAjaxCallsPerView)?500:e.maxAjaxCallsPerView,e.isBeaconApiDisabled=Bt(e.isBeaconApiDisabled,!0),e.disableCorrelationHeaders=Bt(e.disableCorrelationHeaders),e.correlationHeaderExcludedDomains=e.correlationHeaderExcludedDomains||["*.blob.core.windows.net","*.blob.core.chinacloudapi.cn","*.blob.core.cloudapi.de","*.blob.core.usgovcloudapi.net"],e.disableFlushOnBeforeUnload=Bt(e.disableFlushOnBeforeUnload),e.disableFlushOnUnload=Bt(e.disableFlushOnUnload,e.disableFlushOnBeforeUnload),e.enableSessionStorageBuffer=Bt(e.enableSessionStorageBuffer,!0),e.isRetryDisabled=Bt(e.isRetryDisabled),e.isCookieUseDisabled=Bt(e.isCookieUseDisabled),e.isStorageUseDisabled=Bt(e.isStorageUseDisabled),e.isBrowserLinkTrackingEnabled=Bt(e.isBrowserLinkTrackingEnabled),e.enableCorsCorrelation=Bt(e.enableCorsCorrelation),e},t.prototype.addTelemetryInitializers=function(e){var r=this;this._hasLegacyInitializers||(this.appInsightsNew.addTelemetryInitializer(function(n){r._processLegacyInitializers(n)}),this._hasLegacyInitializers=!0),this._queue.push(e)},t.prototype.getCookieMgr=function(){return this.appInsightsNew.getCookieMgr()},t.prototype.startTrackPage=function(e){this.appInsightsNew.startTrackPage(e)},t.prototype.stopTrackPage=function(e,r,n,i){this.appInsightsNew.stopTrackPage(e,r,n)},t.prototype.trackPageView=function(e,r,n,i,o){var a={name:e,uri:r,properties:n,measurements:i};this.appInsightsNew.trackPageView(a)},t.prototype.trackEvent=function(e,r,n){this.appInsightsNew.trackEvent({name:e})},t.prototype.trackDependency=function(e,r,n,i,o,a,s){this.appInsightsNew.trackDependencyData({id:e,target:n,type:i,duration:o,properties:{HttpMethod:r},success:a,responseCode:s})},t.prototype.trackException=function(e,r,n,i,o){this.appInsightsNew.trackException({exception:e})},t.prototype.trackMetric=function(e,r,n,i,o,a){this.appInsightsNew.trackMetric({name:e,average:r,sampleCount:n,min:i,max:o})},t.prototype.trackTrace=function(e,r,n){this.appInsightsNew.trackTrace({message:e,severityLevel:n})},t.prototype.flush=function(e){this.appInsightsNew.flush(e)},t.prototype.setAuthenticatedUserContext=function(e,r,n){this.appInsightsNew.context.user.setAuthenticatedUserContext(e,r,n)},t.prototype.clearAuthenticatedUserContext=function(){this.appInsightsNew.context.user.clearAuthenticatedUserContext()},t.prototype._onerror=function(e,r,n,i,o){this.appInsightsNew._onerror({message:e,url:r,lineNumber:n,columnNumber:i,error:o})},t.prototype.startTrackEvent=function(e){this.appInsightsNew.startTrackEvent(e)},t.prototype.stopTrackEvent=function(e,r,n){this.appInsightsNew.stopTrackEvent(e,r,n)},t.prototype.downloadAndSetup=function(e){Nn("downloadAndSetup not implemented in web SKU")},t.prototype.updateSnippetDefinitions=function(e){Wp(e,this,function(r){return r&&h0.indexOf(r)===-1})},t.prototype.loadAppInsights=function(){var e=this;if(this.config.iKey){var r=this.trackPageView;this.trackPageView=function(o,a,s){r.apply(e,[null,o,a,s])}}var n="logPageView";typeof this.snippet[n]=="function"&&(this[n]=function(o,a,s){e.trackPageView(null,o,a,s)});var i="logEvent";return typeof this.snippet[i]=="function"&&(this[i]=function(o,a,s){e.trackEvent(o,a,s)}),this},t.prototype._processLegacyInitializers=function(e){return e.tags[pa]=this._queue,e},t}()}),p0,Z_=Ae(()=>{K_(),d0(),St(),p0=function(){function t(){}return c(t,"t"),t.getAppInsights=function(e,r){var n=new kh(e),i=r!==2;if(da(),r===2)return n.updateSnippetDefinitions(e),n.loadAppInsights(i),n;var o=new f0(e,n);return o.updateSnippetDefinitions(e),n.loadAppInsights(i),o},t}()}),g0={};Zy(g0,{AppInsightsCore:()=>Nd,ApplicationAnalytics:()=>ph,ApplicationInsights:()=>kh,ApplicationInsightsContainer:()=>p0,BaseCore:()=>Fd,BaseTelemetryPlugin:()=>wo,CoreUtils:()=>il,DependenciesPlugin:()=>Ah,DistributedTracingModes:()=>bn,Event:()=>_n,Exception:()=>Wr,LoggingSeverity:()=>Ue,Metric:()=>Bn,NotificationManager:()=>Pd,PageView:()=>xn,PageViewPerformance:()=>yi,PerfEvent:()=>sa,PerfManager:()=>gd,PropertiesPlugin:()=>_h,RemoteDependencyData:()=>Un,Sender:()=>yh,SeverityLevel:()=>xs,Telemetry:()=>u0,Trace:()=>wi,Util:()=>eh,_InternalMessageId:()=>Pe,doPerf:()=>aa});var Q_=Ae(()=>{d0(),Z_(),St(),dr(),Vm(),Fm(),o0(),c0()}),an;(function(t){t.ON="on",t.ERROR="error",t.OFF="off"})(an||(an={}));function Dh(){let t="telemetry",e="enableTelemetry";return h.env.isTelemetryEnabled!==void 0?h.env.isTelemetryEnabled?an.ON:an.OFF:h.workspace.getConfiguration(t).get(e)?an.ON:an.OFF}c(Dh,"jr");var X_=c(class{constructor(t,e,r,n,i){this.extensionId=t,this.extensionVersion=e,this.telemetryAppender=r,this.osShim=n,this.firstParty=!1,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this.firstParty=!!i,this.updateUserOptStatus(),h.env.onDidChangeTelemetryEnabled!==void 0?(this.disposables.push(h.env.onDidChangeTelemetryEnabled(()=>this.updateUserOptStatus())),this.disposables.push(h.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))):this.disposables.push(h.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))}updateUserOptStatus(){let t=Dh();this.userOptIn=t===an.ON,this.errorOptIn=t===an.ERROR||t===an.ON,(this.userOptIn||this.errorOptIn)&&this.telemetryAppender.instantiateAppender()}cleanRemoteName(t){if(!t)return"none";let e="other";return["ssh-remote","dev-container","attached-container","wsl"].forEach(r=>{t.indexOf(`${r}+`)===0&&(e=r)}),e}get extension(){return this._extension===void 0&&(this._extension=h.extensions.getExtension(this.extensionId)),this._extension}cloneAndChange(t,e){if(t===null||typeof t!="object"||typeof e!="function")return t;let r={};for(let n in t)r[n]=e(n,t[n]);return r}shouldSendErrorTelemetry(){return this.errorOptIn===!1?!1:this.firstParty?this.cleanRemoteName(h.env.remoteName)!=="other"?!0:!(this.extension===void 0||this.extension.extensionKind===h.ExtensionKind.Workspace||h.env.uiKind===h.UIKind.Web):!0}getCommonProperties(){let t=Object.create(null);if(t["common.os"]=this.osShim.platform,t["common.platformversion"]=(this.osShim.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),t["common.extname"]=this.extensionId,t["common.extversion"]=this.extensionVersion,h&&h.env){switch(t["common.vscodemachineid"]=h.env.machineId,t["common.vscodesessionid"]=h.env.sessionId,t["common.vscodeversion"]=h.version,t["common.isnewappinstall"]=h.env.isNewAppInstall?h.env.isNewAppInstall.toString():"false",t["common.product"]=h.env.appHost,h.env.uiKind){case h.UIKind.Web:t["common.uikind"]="web";break;case h.UIKind.Desktop:t["common.uikind"]="desktop";break;default:t["common.uikind"]="unknown"}t["common.remotename"]=this.cleanRemoteName(h.env.remoteName)}return t}anonymizeFilePaths(t,e){let r;if(t==null)return"";let n=[];h.env.appRoot!==""&&n.push(new RegExp(h.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")),this.extension&&n.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));let i=t;if(e){let o=[];for(let u of n)for(;(r=u.exec(t))&&r;)o.push([r.index,u.lastIndex]);let a=/^[\\/]?(node_modules|node_modules\.asar)[\\/]/,s=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-._]+(\\\\|\\|\/))+[\w-._]*/g,l=0;for(i="";(r=s.exec(t))&&r;)r[0]&&!a.test(r[0])&&o.every(([u,d])=>r.index<u||r.index>=d)&&(i+=t.substring(l,r.index)+"<REDACTED: user-file-path>",l=s.lastIndex);l<t.length&&(i+=t.substr(l))}for(let o of n)i=i.replace(o,"");return i}removePropertiesWithPossibleUserInfo(t){if(typeof t!="object")return;let e=Object.create(null);for(let r of Object.keys(t)){let n=t[r];if(!n)continue;let i=/@[a-zA-Z0-9-.]+/;/\S*(key|token|sig|password|passwd|pwd)[="':\s]+\S*/.test(n.toLowerCase())?e[r]="<REDACTED: secret>":i.test(n)?e[r]="<REDACTED: email>":e[r]=n}return e}sendTelemetryEvent(t,e,r){if(this.userOptIn&&t!==""){e={...e,...this.getCommonProperties()};let n=this.cloneAndChange(e,(i,o)=>this.anonymizeFilePaths(o,this.firstParty));this.telemetryAppender.logEvent(`${this.extensionId}/${t}`,{properties:this.removePropertiesWithPossibleUserInfo(n),measurements:r})}}sendTelemetryErrorEvent(t,e,r,n){if(this.errorOptIn&&t!==""){e={...e,...this.getCommonProperties()};let i=this.cloneAndChange(e,(o,a)=>this.shouldSendErrorTelemetry()?this.anonymizeFilePaths(a,this.firstParty):n===void 0||n.indexOf(o)!==-1?"REDACTED":this.anonymizeFilePaths(a,this.firstParty));this.telemetryAppender.logEvent(`${this.extensionId}/${t}`,{properties:this.removePropertiesWithPossibleUserInfo(i),measurements:r})}}sendTelemetryException(t,e,r){if(this.shouldSendErrorTelemetry()&&this.errorOptIn&&t){e={...e,...this.getCommonProperties()};let n=this.cloneAndChange(e,(i,o)=>this.anonymizeFilePaths(o,this.firstParty));t.stack&&(t.stack=this.anonymizeFilePaths(t.stack,this.firstParty)),this.telemetryAppender.logException(t,{properties:this.removePropertiesWithPossibleUserInfo(n),measurements:r})}}dispose(){return this.telemetryAppender.flush(),Promise.all(this.disposables.map(t=>t.dispose()))}},"bi"),Y_=c(class{constructor(t){this._key=t,this._isInstantiated=!1,Dh()!==an.OFF&&this.instantiateAppender()}logEvent(t,e){!this._aiClient||this._aiClient.trackEvent({name:t},{...e.properties,...e.measurements})}logException(t,e){!this._aiClient||this._aiClient.trackException({exception:t,properties:{...e.properties,...e.measurements}})}flush(){return this._aiClient&&(this._aiClient.flush(),this._aiClient=void 0),Promise.resolve(void 0)}instantiateAppender(){this._isInstantiated||Promise.resolve().then(()=>(Q_(),g0)).then(t=>{let e;this._key&&this._key.indexOf("AIF-")===0&&(e="https://vortex.data.microsoft.com/collect/v1"),this._aiClient=new t.ApplicationInsights({config:{instrumentationKey:this._key,endpointUrl:e,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!0,disableInstrumentationKeyValidation:!0}}),this._aiClient.loadAppInsights();let r=Dh();e&&(r===an.ON||r===an.ERROR)&&fetch(e).catch(()=>this._aiClient=void 0),this._isInstantiated=!0})}},"du"),J_=c(class extends X_{constructor(t,e,r,n){let i=new Y_(r);r&&r.indexOf("AIF-")===0&&(n=!0);super(t,e,i,{release:navigator.appVersion,platform:"web"},n)}},"mu");/*!
 * Microsoft Dynamic Proto Utility, 1.1.4
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */const ex="Type of classified event does not match event properties",Fh=c(class{constructor(t){this.sharedProperties={},Fh._instance=this,this.reporter=new J_(t.extension.id,t.extension.packageJSON.version,Fh.aiKey,!0)}static get instance(){return this._instance}dispose(){this.reporter.dispose()}publicLog2(t,e){e!==ex&&this.reporter.sendTelemetryEvent(t,{...this.sharedProperties,...e})}sendEvent(t,e,r){this.reporter.sendTelemetryEvent(t,{...this.sharedProperties,...e},r)}sendErrorEvent(t,e,r){this.reporter.sendTelemetryErrorEvent(t,{...this.sharedProperties,...e},r)}sendException(t,e,r){this.reporter.sendTelemetryException(t,{...this.sharedProperties,...e},r)}setSharedProperty(t,e){this.sharedProperties[t]=e}},"_TelemetryService");let Ts=Fh;Ts.aiKey="AIF-d9b70cd4-b9f9-4d70-929b-a071c400b217";function tx(t,e){h.env.appHost==="github.dev"&&(V.debug(`Executing ${t}`),e={...e,errorDetail:e.errorDetail instanceof Error?e.errorDetail.name:void 0},h.commands.executeCommand(t,e).then(r=>{},r=>{V.debug(`Failed to execute ${t}`,r)}))}c(tx,"reportWorkbenchLoadResult");const El=(0,Me.loadMessageBundle)();let Sn;var Ph;(function(t){function e(r){const n=ix(r);return Sn=h.env.uiKind===h.UIKind.Web,V.warn(`Running on the ${Sn?"web":"desktop"}${r.extensionRuntime!==h.ExtensionRuntime.Node?" in a webworker":""}; workspaceId=${n}; storageUri=${r.globalStorageUri.toString(!0)}`),n}c(e,"configure"),t.configure=e})(Ph||(Ph={}));function rx(){var t,e;return(e=(t=h.workspace.workspaceFolders)==null?void 0:t.every(r=>r.uri.scheme===Xt.scheme))!=null?e:!1}c(rx,"isVirtualWorkspace");const nx=/\/workspaceStorage\/(?<id>[^/]+)/i;function ix(t){var e;if(t.storageUri===void 0)return"";const r=nx.exec(t.storageUri.path);let n;if((e=r==null?void 0:r.groups)==null?void 0:e.id)n=r.groups.id;else{n=t.storageUri.path;const i=Oy(t.globalStorageUri.path,n),o=`/${t.extension.id}`;n.endsWith(o)?n=n.slice(i,-o.length):n=n.substr(i)}return/-[0-9]$/.test(n)?n.slice(0,-2):n}c(ix,"getWorkspaceId");async function sn(t,e){var r,n,i,o,a;if(Ts.instance.sendEvent("openWorkspace",{location:t.location}),t.location===W.AddToWorkspace){const l=(n=(r=h.workspace.workspaceFolders)==null?void 0:r.length)!=null?n:0;return void h.workspace.updateWorkspaceFolders(l,0,{uri:t.uri,name:t.name})}if(t.location===W.CurrentWindow&&!(e==null?void 0:e.skipChangesPrompt)){const l=await rs.instance.getWorkspaceProvidersWithChanges();if(l.length){const u={title:El("continue","Continue")},d={title:El("cancel","Cancel"),isCloseAffordance:!0};if(await h.window.showWarningMessage(Sn?El("open folder uncommitted changes web",`You have uncommitted changes.

If you want to see your changes on {0} or from other browsers or machines, commit them before leaving this workspace. Otherwise, you can re-open this workspace anytime and pick up right where you left off.

Do you want to continue opening a new workspace?`,l.map(p=>p.name).join(", ")):El("open folder uncommitted changes",`You have uncommitted changes.

If you want to see your changes on {0} or from other machines, commit them before leaving this workspace. Otherwise, you can re-open this workspace anytime and pick up right where you left off.

Do you want to continue opening a new workspace?`,l.map(p=>p.name).join(", ")),{modal:!0,useCustom:!0},u,d)!==u){Ts.instance.sendEvent("openWorkspace.abort",{reason:"abandoned uncommitted changes prompt"});return}}}const s=h.env.remoteName?!0:void 0;return t.filesToOpen&&(t.location===W.CurrentWindow&&s===void 0&&((i=h.workspace.workspaceFolders)==null?void 0:i.length)===1&&h.workspace.workspaceFolders[0].uri.toString()===t.uri.toString()?await((o=vu())==null?void 0:o.openPendingFiles(t.uri,t.filesToOpen)):await((a=vu())==null?void 0:a.setPendingFilesToOpen(t.uri,t.filesToOpen))),Ts.instance.sendEvent("openWorkspace.success",{location:t.location,forceLocalWindow:String(s)}),void h.commands.executeCommand("vscode.openFolder",t.uri,{forceNewWindow:t.location===W.NewWindow,forceLocalWindow:s})}c(sn,"openWorkspace");var Hn;(function(t){t.HasVirtualFolders="remoteHub:hasVirtualFolders",t.HasSearchIndexes="remoteHub:hasSearchIndexes",t.EnabledSomeSearchIndexes="remoteHub:enabledSomeSearchIndexes",t.EnabledAllSearchIndexes="remoteHub:enabledAllSearchIndexes",t.VirtualFolderProviders="remoteHub:virtualFolderProviders",t.HasPullRequestExtension="remoteHub:hasPullRequestExtension",t.HasWriteableScmProvider="remoteHub:hasWriteableScmProvider",t.HasRecentRepositories="remoteHub:hasRecentRepositories"})(Hn||(Hn={}));const m0=new Map;function Ca(t){return t==="isWeb"?Sn:t==="remoteName"?h.env.remoteName:t==="virtualWorkspace"?rx():t.startsWith("config.")?ke.getAny(t.substr(7)):m0.get(t)}c(Ca,"getContext");function Ea(t){return t==="isWeb"||t==="remoteName"||t==="virtualWorkspace"||t.startsWith("config.")||t.startsWith("remoteHub:")||t.startsWith("continueOn:")}c(Ea,"isSupportedContextKey");async function xi(t,e){m0.set(t,e),!t.startsWith("continueOn:")&&await h.commands.executeCommand("setContext",t,e)}c(xi,"setContext");class v0{constructor(e){this.menuItem=e}get label(){return`${this.menuItem.icon?`${this.menuItem.icon} `:""}${this.menuItem.title}`}get description(){return this.menuItem.extension.builtin?"Built-in":this.menuItem.extension.name||this.menuItem.extension.id}async execute(e){return void await h.commands.executeCommand(this.menuItem.command,e)}}c(v0,"ContinueOnCommandQuickPickItem");var Nh;(function(t){async function e(r,n,i){const o=ox(r).map(l=>new v0(l)),a=h.window.createQuickPick(),s=[];try{return await new Promise(u=>{s.push(a.onDidHide(()=>u(void 0)),a.onDidAccept(()=>{if(a.activeItems.length!==0){const[d]=a.activeItems;u(d)}})),a.title=i,a.placeholder=n,a.items=o,a.show()})}finally{a.dispose(),s.forEach(l=>void l.dispose())}}c(e,"show"),t.show=e})(Nh||(Nh={}));function ox(t){var e,r,n,i,o;const a=new Map,[,s]=t.split(".");for(const u of h.extensions.all){const{name:d,displayName:f,contributes:p}=u.packageJSON;if(!p)continue;const g=(r=(e=p.virtualWorkspaces)==null?void 0:e.menus)==null?void 0:r.continueOn;if(g==null?void 0:g.length){const S=new Map(((n=p.commands)!=null?n:[]).map(y=>[y.command,y]));for(const y of g){if(!y.command)continue;if(a.has(y.command)){V.warn(`Duplicate 'continueOn' menu command: ${y.command}`);continue}const b=S.get(y.command);if(!b){V.warn(`Unable to find 'continueOn' menu command: ${y.command}`);continue}if(!ax(y.when))continue;const _=(o=(i=y.group)==null?void 0:i.lastIndexOf("@"))!=null?o:-1;a.set(y.command,{extension:{id:d,name:f,builtin:d===s},command:b.command,title:b.title,icon:typeof b.icon=="string"?b.icon:void 0,group:_>0?y.group.substr(0,_):y.group,order:_>0?Number(y.group.substr(_+1)):0,category:b.category})}}}function l(u,d){const f=u.group,p=d.group;if(f!==p){if(!f)return 1;if(!p||f==="navigation")return-1;if(p==="navigation")return 1;const g=f.localeCompare(p);if(g!==0)return g}return u.order<d.order?-1:u.order>d.order?1:u.title.localeCompare(d.title)}return c(l,"compareMenuItems"),[...a.values()].sort(l)}c(ox,"getContinueOnContributions");function ax(t){return t?t.split("&&").every(e=>{const r=/^(?:(!)?(\S+)|(\S+)\s?(==|!=|=~)\s?(\S+))$/.exec(e.trim());if(!r)return!0;const[,n,i,o,a,s]=r;if(i){if(i==="false")return!1;if(!Ea(i))return!0;const l=Ca(i);return n?!l:l}if(o&&a&&s)switch(a){case"==":return!Ea(o)||!Ea(s)||Ca(o)==Ca(s);case"!=":return!Ea(o)||!Ea(s)||Ca(o)!=Ca(s);case"=~":{if(!Ea(o))return!0;const l=Ca(o);try{return new RegExp(s.slice(1,-1)).test(String(l!=null?l:""))}catch{return!1}}}return!0}):!0}c(ax,"evaluateWhenClause");class Rl{constructor(e){this.defaultDelay=e}dispose(){this.cancelTimeout()}debounce(e,r=this.defaultDelay){return this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((n,i)=>{this.resolver=n,this.rejecter=i}).then(()=>{if(this.completionPromise=void 0,this.resolver=void 0,this.task){const n=this.task;return this.task=void 0,n()}})),this.timeout=setTimeout(()=>{var n;this.timeout=void 0,(n=this.resolver)==null||n.call(this,void 0)},r),this.completionPromise}cancel(){var e;this.cancelTimeout(),this.completionPromise&&((e=this.rejecter)==null||e.call(this,new Error("Canceled")),this.completionPromise=void 0)}cancelTimeout(){this.timeout!==void 0&&(clearTimeout(this.timeout),this.timeout=void 0)}}c(Rl,"TaskDebouncer");const Wn=(0,Me.loadMessageBundle)(),Mh=Symbol("QuickPickGoBack");var $h;(function(t){async function e(r,n,i,o,a,s){const l=r.getRemoteWorkspaceSourceProviders();let u=[];l.length===0?u=[]:u=l.map(S=>new Lh(S));const d=await n.getRemoteWorkspaceSourceProvider();if(d){const S=await d.provideSources();S&&u.push({label:Wn("remote url picker separator recently opened","recently opened"),kind:h.QuickPickItemKind.Separator},...S.map(y=>({label:`${y.icon?`${y.icon} `:""}${y.name}`,description:y.description,detail:y.detail,url:y.url,workspace:y.url?void 0:y.workspace,buttons:[Cn.OpenInNewWindow]})))}const f=h.window.createQuickPick();f.ignoreFocusOut=!0;const p=[];let g=i;try{for(;;){const S=await new Promise(y=>{p.push(f.onDidHide(()=>y(void 0)),f.onDidChangeValue(b=>{b=b.trim(),b.length===0?f.items=u:f.activeItems.length===0||f.activeItems[0]instanceof Ra?f.items=[new Ra(r,b),...u]:f.items=u}),f.onDidAccept(()=>{if(f.activeItems.length!==0){const[b]=f.activeItems;(!(b instanceof Ra)||b.validate())&&y(b)}}),f.onDidChangeActive(()=>{if(g!==void 0||!(s==null?void 0:s.allowAddToWorkspace))return;const[b]=f.activeItems;let _=!0;if(b===void 0?_=Boolean(f.value):_=b instanceof Ra,_){if(f.buttons.length===1)return;f.buttons=[Cn.AddToWorkspace]}else{if(f.buttons.length===0)return;f.buttons=[]}}),f.onDidTriggerButton(b=>{if(b===Cn.AddToWorkspace){const[_]=f.activeItems;if(!(_ instanceof Ra))return;_.validate()&&(g=W.AddToWorkspace,y(_))}}),f.onDidTriggerItemButton(b=>{switch(b.button){case Cn.OpenInNewWindow:g=W.NewWindow,y(b.item);break;default:break}})),f.title=a,f.placeholder=o,f.matchOnDescription=!0,f.items=u,f.sortByLabel=!1,f.show()});if(S instanceof Lh){const y=await S.show(g,S.placeholder,a,s);if(y===Mh)continue;return y}return[S,g]}}finally{f.dispose(),p.forEach(S=>void S.dispose())}}c(e,"show"),t.show=e})($h||($h={}));class Lh{constructor(e){this.provider=e}get label(){return`${this.provider.icon?`${this.provider.icon} `:""}${this.provider.label}`}get placeholder(){return this.provider.placeholder}async show(e,r,n,i){const o=h.window.createQuickPick(),a=new Rl(500),s=[a];async function l(b,_,C,k,F){const $=await b.provideSources(_,C,k,F);return $==null?void 0:$.map(ne=>({label:`${ne.icon?`${ne.icon} `:""}${ne.name}`,description:ne.description,detail:ne.detail,url:ne.url,workspace:ne.workspace,buttons:[Cn.OpenInNewWindow]}))}c(l,"getItems");async function u(b){var _;g=void 0;const C=o.activeItems;o.items=(_=b!=null?b:await y)!=null?_:[],p&&C.length!==0&&(o.activeItems=o.items.filter(k=>C.some(F=>F.url===k.url))),o.busy=!1}c(u,"setItems");let d,f;if(this.provider.provideOrganization&&this.provider.provideProject){if(d=await this.provider.provideOrganization(),!d)return[void 0,void 0];if(f=await this.provider.provideProject(d),!f)return[void 0,void 0]}let p=!1,g,S=e;const y=l(this.provider,d,f,void 0,{sort:"updated"});try{const b=await new Promise(_=>{s.push(o.onDidHide(()=>_(void 0)),o.onDidChangeValue(C=>{p=!1,C=C.trim(),o.busy=!0;const k=a.debounce(C?()=>l(this.provider,d,f,C,{sort:"stars"}):()=>y);g===void 0&&(g=k.then(F=>u(F)))}),o.onDidAccept(()=>{if(o.activeItems.length!==0){const[C]=o.activeItems;_(C)}}),o.onDidChangeActive(()=>{if(p=o.activeItems.length!==0,S!==void 0||!(i==null?void 0:i.allowAddToWorkspace))return;const[C]=o.activeItems;if(C===void 0){if(o.buttons.length===1)return;o.buttons=[h.QuickInputButtons.Back]}else{if(o.buttons.length===2)return;o.buttons=[h.QuickInputButtons.Back,Cn.AddToWorkspace]}}),o.onDidTriggerButton(C=>{if(C===h.QuickInputButtons.Back){_(Mh);return}if(C===Cn.AddToWorkspace){const[k]=o.activeItems;if(k===void 0)return;S=W.AddToWorkspace,_(k)}}),o.onDidTriggerItemButton(C=>{switch(C.button){case Cn.OpenInNewWindow:S=W.NewWindow,_(C.item);break;default:break}})),o.title=n,o.placeholder=r,o.matchOnDetail=!0,o.ignoreFocusOut=!0,o.sortByLabel=!1,o.buttons=[h.QuickInputButtons.Back],o.busy=!0,o.show(),g=a.debounce(()=>y,0).then(C=>u(C))});return b===Mh?b:[b,S]}finally{o.dispose(),s.forEach(b=>void b.dispose())}}}c(Lh,"RemoteSourceProviderPickerItem");class Ra{constructor(e,r){this.url=r,this.alwaysShow=!0,this.canOpenResult=e.canOpenRemoteUrl(r)}get buttons(){return[Cn.OpenInNewWindow]}get label(){if(this.canOpenResult){const{provider:e,urlType:r}=this.canOpenResult;switch(r){case le.Branch:return Wn("remote url picker open branch","Open Branch from {0} Repository",e.name);case le.Tag:return Wn("remote url picker open tag","Open Tag from {0} Repository",e.name);case le.Commit:return Wn("remote url picker open commit","Open Commit from {0} Repository",e.name);case le.File:return Wn("remote url picker open file","Open File from {0} Repository",e.name);case le.PullRequest:return Wn("remote url picker open pull request","Open Pull Request from {0} Repository",e.name);default:return Wn("remote url picker open repository","Open {0} Repository",e.name)}}return Wn("remote url picker open unknown","Enter a Remote Url")}get description(){return this.url}validate(){return this.canOpenResult!==void 0}}c(Ra,"RemoteUrlQuickPickItem");var Cn;(function(t){t.AddToWorkspace={iconPath:new h.ThemeIcon("plus"),tooltip:Wn("remote url picker button add to workspace","Add to Workspace")},t.OpenInNewWindow={iconPath:new h.ThemeIcon("empty-window"),tooltip:Wn("remote picker open in new window","Open in New Window")}})(Cn||(Cn={}));var sx=Object.defineProperty,cx=Object.getOwnPropertyDescriptor,qn=c((t,e,r,n)=>{for(var i=n>1?void 0:n?cx(e,r):e,o=t.length-1,a;o>=0;o--)(a=t[o])&&(i=(n?a(e,r,i):a(i))||i);return n&&i&&sx(e,r,i),i},"messages_decorateClass");const Yt=(0,Me.loadMessageBundle)();class cn{showGitHubStatus500Message(){return h.window.showErrorMessage(Yt("github 500 error notification","GitHub failed to respond and might be experiencing issues. Visit the [GitHub status page](https://githubstatus.com) for more information."),Yt("ok","OK")),Promise.resolve()}async showStatus401Message(e){if(!e)return void h.window.showErrorMessage(Yt("401 error notification","The provided credentials are either invalid or expired."),Yt("ok","OK"));const r=Yt("401 error notification confirm","Reauthenticate");await h.window.showErrorMessage(Yt("401 error notification with reauth","The provided credentials are either invalid or expired. Would you like to reauthenticate?"),r)===r&&e()}async showStatus403Message(e){if(!e)return void h.window.showErrorMessage(Yt("403 error notification","The provided credentials do not have the required access."),Yt("ok","OK"));const r=Yt("403 error notification confirm","Reauthenticate");await h.window.showErrorMessage(Yt("403 error notification with reauth","The provided credentials do not have the required access. Would you like to reauthenticate to grant additional access?"),r)===r&&e()}async showRepositoryEmptyMessage(e){const r=Yt("repository empty open","Open Repository");await h.window.showErrorMessage(Yt("repository empty","Repository '{0}' is empty and cannot be opened. Would you like to open another repository?",e),r)===r&&h.commands.executeCommand("remoteHub.openRepository")}async showPullRequestNotFoundMessage(e,r){const n=Yt("pull request not found open","Open Pull Request");await h.window.showErrorMessage(Yt("pull request not found","Unable to find pull request {1} on repository '{0}'. Would you like to open another pull request?",e,r),n)===n&&h.commands.executeCommand("remoteHub.openRepository")}async showPullRequestHeadNotFoundMessage(e,r){const n=Yt("pull request head not found ok","OK");await h.window.showWarningMessage(Yt("pull request head not found","Unable to find the source branch for pull request {1} on repository '{0}'.",e,r),n)}async showRepositoryForbiddenMessage(e){const r=Yt("repository forbidden open","Open Repository");await h.window.showErrorMessage(Yt("repository forbidden","You don't have access to repository '{0}'. Would you like to open another repository?",e),r)===r&&h.commands.executeCommand("remoteHub.openRepository")}async showRepositoryNotFoundMessage(e){const r=Yt("repository not found confirm","Open Repository");await h.window.showErrorMessage(Yt("repository not found","Unable to find repository '{0}'. Would you like to open another repository?",e),r)===r&&h.commands.executeCommand("remoteHub.openRepository")}async showUnableToOpenRepositoryMessage(e){const r=Yt("unable to open repo confirm","Open Repository");await h.window.showErrorMessage(Yt("unable to open repo","Unable to open repository. {0}. Would you like to open another repository?",String(e)),r)===r&&h.commands.executeCommand("remoteHub.openRepository")}async showProviderNotFoundMessage(e){if(e.id==="azurerepos"&&h.extensions.getExtension("ms-vscode.azure-repos")===void 0){const r=Yt("azure repos install extension","Install");if(await h.window.showInformationMessage(Yt("azure repos not installed","Extension 'Azure Repos' is not installed. Would you like to install the extension and reload the window to open this workspace?"),{modal:!0},r)!==r)return;await h.commands.executeCommand("workbench.extensions.installExtension","ms-vscode.azure-repos"),await h.commands.executeCommand("workbench.action.reloadWindow")}}}c(cn,"Messages"),qn([ft(()=>"")],cn.prototype,"showGitHubStatus500Message",1),qn([ft(()=>"")],cn.prototype,"showStatus401Message",1),qn([ft(()=>"")],cn.prototype,"showStatus403Message",1),qn([ft()],cn.prototype,"showRepositoryEmptyMessage",1),qn([ft()],cn.prototype,"showPullRequestNotFoundMessage",1),qn([ft()],cn.prototype,"showPullRequestHeadNotFoundMessage",1),qn([ft()],cn.prototype,"showRepositoryForbiddenMessage",1),qn([ft()],cn.prototype,"showRepositoryNotFoundMessage",1),qn([ft()],cn.prototype,"showUnableToOpenRepositoryMessage",1),qn([ft()],cn.prototype,"showProviderNotFoundMessage",1);const Pr=new cn,fr=(0,Me.loadMessageBundle)();function lx(t,e,r,n,i){async function o(s){const[l,u]=await $h.show(t,r,s,fr("open repo placeholder","Enter a remote url, or select a remote provider"),s===W.AddToWorkspace?fr("open repo title add to workspace","Add Remote Repository to Workspace"):fr("open repo title current window","Open Remote Repository"),{allowAddToWorkspace:!1});if(!l){i.sendEvent("openRepository.abort",{reason:"abandoned"});return}try{let d;if(l.workspace)d=l.workspace,d.location=u!=null?u:d.location;else if(d=await t.createWorkspaceForRemoteUrl(l.url,void 0,u!=null?u:s),!d){i.sendEvent("openRepository.abort",{reason:"aborted invalid url"});return}await sn(d)}catch(d){if(i.sendException(d),d instanceof Ie){const{reauthenticate:f}=d;Pr.showStatus401Message(()=>f());return}if(d instanceof It){Pr.showRepositoryNotFoundMessage(d.name);return}if(d instanceof Dt){Pr.showRepositoryForbiddenMessage(d.name);return}if(d instanceof Nt){Pr.showRepositoryEmptyMessage(d.name);return}if(d instanceof ct){Pr.showPullRequestNotFoundMessage(d.name,d.id);return}V.error(d)}}c(o,"openRepository");async function a(s,l,u){if(u==null?void 0:u.workspaceFolder){const f=t.getRepository(u.workspaceFolder,l);if(f!==void 0)return f}const d=l?t.repositories.filter(f=>f.provider.id===l):t.repositories;if(d.length!==0){if(d.length>1){const f=await h.window.showQuickPick(d.map(p=>({label:p.name,description:p.provider.name,repository:p})),{placeHolder:s});return f?f.repository:void 0}return d[0]}}return c(a,"getRepository"),[h.commands.registerCommand("remoteHub.openRepository",()=>(i.sendEvent("command.openRepository"),o())),h.commands.registerCommand("remoteHub.continueOn.openRepository",()=>(i.sendEvent("command.continueOn.openRepository"),o())),h.commands.registerCommand("remoteHub.addRepositoryToWorkspace",()=>{i.sendEvent("command.continueOn.openRepository")}),h.commands.registerCommand("remoteHub.continueOn.addRepositoryToWorkspace",()=>{i.sendEvent("command.continueOn.openRepository")}),h.commands.registerCommand("remoteHub.continueOn",async()=>{const s=await a(fr("continue on choose repository placeholder","Choose which repository to continue working on elsewhere"));if(s===void 0)return;i.sendEvent("command.continueOn");const l=await Nh.show(n,fr("continue on placeholder","Choose how you would like to continue working"),fr("continue on title","Continue '{0}' on",s.name));if(!l){i.sendEvent("command.continueOn.abort",{reason:"abandoned"});return}if(await e.hasChanges(s.uri)){const f={title:fr("continue","Continue")},p={title:fr("cancel","Cancel"),isCloseAffordance:!0};if(await h.window.showWarningMessage(fr("continue on uncommitted changes",`You have uncommitted changes.

Unless you commit those changes, you won't be able see them from elsewhere.`),{modal:!0,useCustom:!0},f,p)!==f){i.sendEvent("command.continueOn.abort",{reason:"abandoned uncommitted changes prompt"});return}}const u=t.getRemoteUri(s.provider.id,{repo:s.id}),{HEAD:d}=await s.getMetadata();await l.execute({provider:s.provider,workspaceFolder:s.uri,name:s.name,url:u==null?void 0:u.toString(!0),ref:d.name})}),h.commands.registerCommand("remoteHub.openOnDesktop",async s=>{if(!Sn)return;const l=await a(fr("continue on desktop choose repository placeholder","Choose which repository to open on the desktop"),void 0,s);if(l===void 0)return;const u=await t.getBestRemoteUri(l.uri);u!==void 0&&(i.sendEvent("command.openOnDesktop"),h.env.openExternal(h.Uri.parse(`${h.env.uriScheme}://${n}/open?url=${encodeURIComponent(u.toString(!0))}`)))}),h.commands.registerCommand("remoteHub.openOnWeb",async s=>{if(Sn)return;const l=await a(fr("continue on web choose repository placeholder","Choose which repository to open on the web"),void 0,s);if(l===void 0)return;const u=await t.getBestRemoteUri(l.uri);u!==void 0&&(i.sendEvent("command.openOnWeb"),h.env.openExternal(u))}),h.commands.registerCommand("remoteHub.goToRepository",async()=>{var s,l,u;i.sendEvent("command.goToRepository");const d=await a(fr("open on remote choose repository placeholder","Choose which repository to open on the remote"));if(!d)return;const f=await t.getMetadata(d.uri);let p;const g={provider:d.provider,repo:d.id,path:((s=h.window.activeTextEditor)==null?void 0:s.document.uri)?t.getRelativeFilePath((l=h.window.activeTextEditor)==null?void 0:l.document.uri):void 0};return f.HEAD.type===q.Branch&&(((u=h.window.activeTextEditor)==null?void 0:u.document)||f.defaultBranch.name!==f.HEAD.name)?p={...g,branch:f.HEAD.name}:f.HEAD.type===q.Tag?p={...g,tag:f.HEAD.name}:f.HEAD.type===q.Commit?p={...g,sha:f.HEAD.sha}:p={...g},h.commands.executeCommand("remoteHub.openOnRemote",p)}),h.commands.registerCommand("remoteHub.openOnRemote",async s=>{i.sendEvent("command.openOnRemote");const{provider:l,...u}=s,d=t.getRemoteUri(l.id,u);if(d){await h.env.openExternal(d);return}h.window.showErrorMessage(fr("open on remote command provider not supported","Unable to open the resource on {0}",s.provider.name))}),h.commands.registerCommand("remoteHub.clone",async s=>{const l=await a(fr("clone placeholder","Choose which repository to clone"),void 0,s);if(l!==void 0){if(i.sendEvent("command.clone"),s===void 0&&await e.hasChanges(l.uri)){const u={title:fr("continue","Continue")},d={title:fr("cancel","Cancel"),isCloseAffordance:!0};if(await h.window.showWarningMessage(fr("clone uncommitted changes",`You have uncommitted changes.

Unless you commit those changes, you won't be able see them in your local clone.`),{modal:!0,useCustom:!0},u,d)!==u){i.sendEvent("command.clone.abort",{reason:"abandoned uncommitted changes prompt"});return}}await t.clone(l.uri)}}),h.commands.registerCommand("remoteHub.refresh",()=>void t.refresh()),h.commands.registerCommand("remoteHub.enableDebugLogging",()=>ke.updateEffective("logLevel",ze.Debug)),h.commands.registerCommand("remoteHub.disableDebugLogging",()=>ke.updateEffective("logLevel",ze.Warn)),h.commands.registerCommand("remoteHub.exportDebugInfo",async()=>{await r.exportDebugInfo(),await e.exportDebugInfo()}),h.commands.registerCommand("remoteHub.setContext",async(s,l)=>{if(!s.startsWith("continueOn:"))throw new Error("Key must start with 'continueOn:'");await xi(s,l)}),h.commands.registerCommand("remoteHub.notebook.continueOn",async()=>{const s={title:fr("continue on","Continue Working On...")};await h.window.showInformationMessage(fr("notebook continue on","Running notebook cells is not available in the web editor. To run this cell, you will need to continue in an environment that can run code, like a codespace or local VS Code."),{modal:!0},s)===s&&await h.commands.executeCommand("remoteHub.continueOn")}),h.commands.registerCommand("remoteHub.remoteHelp.getStarted",()=>Sn?"https://aka.ms/vscode-web-docs":"https://aka.ms/vscode-remote/remote-repositories/getting-started")]}c(lx,"registerCommands");function En(t){return t}c(En,"command");async function Bh(t,e){return h.commands.executeCommand(t,e)}c(Bh,"executeCommand");class w0{constructor(){this._timeout=0,this._disposable=ke.onDidChange(this.onConfigurationChanged,this),this.maybeQueueFetch()}dispose(){this._disposable.dispose(),this._timeout&&clearTimeout(this._timeout)}get config(){var e;if(this._config===void 0){const r=ke.get("autoFetch");this._config={enabled:(e=r.enabled)!=null?e:!0,interval:r.interval*1e3}}return this._config}onConfigurationChanged(e){!ke.changed(e,"autoFetch")||(this._config=void 0,this.maybeQueueFetch())}async fetchAll(){try{await Bh("remoteHub.fetchAll",{automated:!0})}catch(e){V.error(e,"Autofetch failed")}this.maybeQueueFetch()}maybeQueueFetch(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),!!this.config.enabled&&(this._timeout=setTimeout(()=>this.fetchAll(),this.config.interval))}}c(w0,"AutoFetchService");class y0{constructor(e,r){this.providerService=e,this.changeStore=r,this.providers=[],this.handledRepositories=new Set,this.services=new Map,this.disposable=h.Disposable.from(e.onDidChangeRepositories(n=>{for(const i of n.added)this.repositoryOpened(i);for(const i of n.removed)this.repositoryClosed(i)}),ke.onDidChange(n=>{for(const i of this.services.values()){const o=i.service.getRepository();n.affectsConfiguration("remoteHub.richNavigation.indexMode",o.uri)&&i.service.updateIndexMode().catch(a=>{V.error(a)})}}));for(const n of this.providerService.repositories)this.repositoryOpened(n)}dispose(){this.disposable.dispose()}register(e){const r=this.providers.length;return this.providers.push(e),{dispose:()=>this.providers.splice(r,1)}}async repositoryOpened(e){const r=E(e.uri);if(!this.handledRepositories.has(r)){this.handledRepositories.add(r);for(const n of this.providers){const i=await n.createNavigationService(this.providerService,e,this.changeStore);if(i!==void 0){const o=i();this.services.set(r,{service:o});break}}}}repositoryClosed(e){const r=E(e.uri);this.handledRepositories.delete(r);const n=this.services.get(r);n!==void 0&&(n.service.dispose(),this.services.delete(E(e.uri)))}}c(y0,"CodeNavigationServices");const ks=globalThis.fetch;async function b0(t,e,r){const n=new AbortController;r.onCancellationRequested(()=>n.abort());try{return globalThis.fetch(t,{...e,signal:n.signal})}catch(i){throw r.isCancellationRequested?new h.CancellationError:i}}c(b0,"fetchWithCancellation");async function _0(t,e,r,n){if(r===0)throw new h.CancellationError;const i=new h.CancellationTokenSource;n.onCancellationRequested(()=>i.cancel());const o=await b0(t,e,i.token);if(o.body){const a=[];let s=0;const l=o.body.getReader();for(;;){let{done:u,value:d}=await l.read();if(u){const f=a.reduce((S,y)=>S+y.length,0),p=new Uint8Array(f);let g=0;for(const S of a)p.set(S,g),g+=S.length;return p}if(d&&(a.push(d),s+=d.length),r!==void 0&&s>r)throw l.cancel(),i.cancel(),new h.CancellationError}}throw new h.CancellationError}c(_0,"fetchUInt8ArrayWithMaxSizeAndCancellation");/*! (c) Andrea Giammarchi - ISC */var Al={};try{(function(t,e){if(new t("q=%2B").get("q")!==e||new t({q:e}).get("q")!==e||new t([["q",e]]).get("q")!==e||new t(`q=
`).toString()!=="q=%0A"||new t({q:" &"}).toString()!=="q=+%26"||new t({q:"%zx"}).toString()!=="q=%25zx")throw t;Al.URLSearchParams=t})(URLSearchParams,"+")}catch(t){(function(e,r,n){"use strict";var i=e.create,o=e.defineProperty,a=/[!'\(\)~]|%20|%00/g,s=/%(?![0-9a-fA-F]{2})/g,l=/\+/g,u={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"},d={append:function(C,k){S(this._ungap,C,k)},delete:function(C){delete this._ungap[C]},get:function(C){return this.has(C)?this._ungap[C][0]:null},getAll:function(C){return this.has(C)?this._ungap[C].slice(0):[]},has:function(C){return C in this._ungap},set:function(C,k){this._ungap[C]=[r(k)]},forEach:function(C,k){var F=this;for(var $ in F._ungap)F._ungap[$].forEach(ne,$);function ne(ie){C.call(k,ie,r($),F)}c(ne,"invoke")},toJSON:function(){return{}},toString:function(){var C=[];for(var k in this._ungap)for(var F=b(k),$=0,ne=this._ungap[k];$<ne.length;$++)C.push(F+"="+b(ne[$]));return C.join("&")}};for(var f in d)o(p.prototype,f,{configurable:!0,writable:!0,value:d[f]});Al.URLSearchParams=p;function p(C){var k=i(null);switch(o(this,"_ungap",{value:k}),!0){case!C:break;case typeof C=="string":C.charAt(0)==="?"&&(C=C.slice(1));for(var F=C.split("&"),$=0,ne=F.length;$<ne;$++){var ie=F[$],Q=ie.indexOf("=");-1<Q?S(k,y(ie.slice(0,Q)),y(ie.slice(Q+1))):ie.length&&S(k,y(ie),"")}break;case n(C):for(var $=0,ne=C.length;$<ne;$++){var ie=C[$];S(k,ie[0],ie[1])}break;case"forEach"in C:C.forEach(g,k);break;default:for(var me in C)S(k,me,C[me])}}c(p,"URLSearchParams");function g(C,k){S(this,k,C)}c(g,"addEach");function S(C,k,F){var $=n(F)?F.join(","):F;k in C?C[k].push($):C[k]=[$]}c(S,"appendTo");function y(C){return decodeURIComponent(C.replace(s,"%25").replace(l," "))}c(y,"decode");function b(C){return encodeURIComponent(C).replace(a,_)}c(b,"encode");function _(C){return u[C]}c(_,"replacer")})(Object,String,Array.isArray)}(function(t){var e=!1;try{e=!!Symbol.iterator}catch(n){}"forEach"in t||(t.forEach=c(function(i,o){var a=this,s=Object.create(null);this.toString().replace(/=[\s\S]*?(?:&|$)/g,"=").split("=").forEach(function(l){!l.length||l in s||(s[l]=a.getAll(l)).forEach(function(u){i.call(o,u,l,a)})})},"forEach")),"keys"in t||(t.keys=c(function(){return r(this,function(i,o){this.push(o)})},"keys")),"values"in t||(t.values=c(function(){return r(this,function(i,o){this.push(i)})},"values")),"entries"in t||(t.entries=c(function(){return r(this,function(i,o){this.push([o,i])})},"entries")),e&&!(Symbol.iterator in t)&&(t[Symbol.iterator]=t.entries),"sort"in t||(t.sort=c(function(){for(var i=this.entries(),o=i.next(),a=o.done,s=[],l=Object.create(null),u,d,f;!a;)f=o.value,d=f[0],s.push(d),d in l||(l[d]=[]),l[d].push(f[1]),o=i.next(),a=o.done;for(s.sort(),u=0;u<s.length;u++)this.delete(s[u]);for(u=0;u<s.length;u++)d=s[u],this.append(d,l[d].shift())},"sort"));function r(n,i){var o=[];return n.forEach(i,o),e?o[Symbol.iterator]():{next:function(){var a=o.shift();return{done:a===void 0,value:a}}}}c(r,"iterator"),function(n){var i=n.defineProperty,o=n.getOwnPropertyDescriptor,a=c(function(f){function p(y,b){t.append.call(this,y,b),y=this.toString(),f.set.call(this._usp,y?"?"+y:"")}c(p,"append");function g(y){t.delete.call(this,y),y=this.toString(),f.set.call(this._usp,y?"?"+y:"")}c(g,"del");function S(y,b){t.set.call(this,y,b),y=this.toString(),f.set.call(this._usp,y?"?"+y:"")}return c(S,"set"),function(y,b){return y.append=p,y.delete=g,y.set=S,i(y,"_usp",{configurable:!0,writable:!0,value:b})}},"createSearchParamsPollute"),s=c(function(f){return function(p,g){return i(p,"_searchParams",{configurable:!0,writable:!0,value:f(g,p)}),g}},"createSearchParamsCreate"),l=c(function(f){var p=f.append;f.append=t.append,URLSearchParams.call(f,f._usp.search.slice(1)),f.append=p},"updateSearchParams"),u=c(function(f,p){if(!(f instanceof p))throw new TypeError("'searchParams' accessed on an object that does not implement interface "+p.name)},"verifySearchParams"),d=c(function(f){var p=f.prototype,g=o(p,"searchParams"),S=o(p,"href"),y=o(p,"search"),b;!g&&y&&y.set&&(b=s(a(y)),n.defineProperties(p,{href:{get:function(){return S.get.call(this)},set:function(_){var C=this._searchParams;S.set.call(this,_),C&&l(C)}},search:{get:function(){return y.get.call(this)},set:function(_){var C=this._searchParams;y.set.call(this,_),C&&l(C)}},searchParams:{get:function(){return u(this,f),this._searchParams||b(this,new URLSearchParams(this.search.slice(1)))},set:function(_){u(this,f),b(this,_)}}}))},"upgradeClass");try{d(HTMLAnchorElement),/^function|object$/.test(typeof URL)&&URL.prototype&&d(URL)}catch(f){}}(Object)})(Al.URLSearchParams.prototype,Object);const x0=Al.URLSearchParams;var Il,ux=new Uint8Array(16);function dx(){if(!Il&&(Il=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Il))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Il(ux)}c(dx,"rng");const hx=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function fx(t){return typeof t=="string"&&hx.test(t)}c(fx,"validate");const px=fx;for(var Cr=[],Uh=0;Uh<256;++Uh)Cr.push((Uh+256).toString(16).substr(1));function gx(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(Cr[t[e+0]]+Cr[t[e+1]]+Cr[t[e+2]]+Cr[t[e+3]]+"-"+Cr[t[e+4]]+Cr[t[e+5]]+"-"+Cr[t[e+6]]+Cr[t[e+7]]+"-"+Cr[t[e+8]]+Cr[t[e+9]]+"-"+Cr[t[e+10]]+Cr[t[e+11]]+Cr[t[e+12]]+Cr[t[e+13]]+Cr[t[e+14]]+Cr[t[e+15]]).toLowerCase();if(!px(r))throw TypeError("Stringified UUID is invalid");return r}c(gx,"stringify");const mx=gx;function vx(t,e,r){t=t||{};var n=t.random||(t.rng||dx)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(var i=0;i<16;++i)e[r+i]=n[i];return e}return mx(n)}c(vx,"v4");const S0=vx;var wx=__webpack_require__(6822);const nt=(0,Me.loadMessageBundle)(),Oh=60,Hh=Oh*60,Ds=Hh*24,C0=Ds*7,E0=Ds*30,R0=Ds*365;function Fs(t,e){typeof t!="number"&&(t=t.getTime());const r=Math.round((new Date().getTime()-t)/1e3);if(r<-30)return nt("date.fromNow.in","in {0}",Fs(new Date().getTime()+r*1e3,{ago:!1,short:e==null?void 0:e.short}));if(r<30)return(e==null?void 0:e.ago)?(e==null?void 0:e.short)?nt("date.fromNow.seconds.short.ago","secs ago"):nt("date.fromNow.seconds.ago","A few seconds ago"):(e==null?void 0:e.short)?nt("date.fromNow.now.short","now"):nt("date.fromNow.now","Just now");let n;return r<Oh?(n=r,(e==null?void 0:e.ago)?n===1?(e==null?void 0:e.short)?nt("date.fromNow.seconds.singular.short.ago","{0} sec ago",n):nt("date.fromNow.seconds.singular.ago","{0} second ago",n):(e==null?void 0:e.short)?nt("date.fromNow.seconds.plural.short.ago","{0} secs ago",n):nt("date.fromNow.seconds.plural.ago","{0} seconds ago",n):n===1?(e==null?void 0:e.short)?nt("date.fromNow.seconds.singular.short","{0} sec",n):nt("date.fromNow.seconds.singular","{0} second",n):(e==null?void 0:e.short)?nt("date.fromNow.seconds.plural.short","{0} secs",n):nt("date.fromNow.seconds.plural","{0} seconds",n)):r<Hh?(n=Math.floor(r/Oh),(e==null?void 0:e.ago)?n===1?(e==null?void 0:e.short)?nt("date.fromNow.minutes.singular.short.ago","{0} min ago",n):nt("date.fromNow.minutes.singular.ago","{0} minute ago",n):(e==null?void 0:e.short)?nt("date.fromNow.minutes.plural.short.ago","{0} mins ago",n):nt("date.fromNow.minutes.plural.ago","{0} minutes ago",n):n===1?(e==null?void 0:e.short)?nt("date.fromNow.minutes.singular.short","{0} min",n):nt("date.fromNow.minutes.singular","{0} minute",n):(e==null?void 0:e.short)?nt("date.fromNow.minutes.plural.short","{0} mins",n):nt("date.fromNow.minutes.plural","{0} minutes",n)):r<Ds?(n=Math.floor(r/Hh),(e==null?void 0:e.ago)?n===1?(e==null?void 0:e.short)?nt("date.fromNow.hours.singular.short.ago","{0} hr ago",n):nt("date.fromNow.hours.singular.ago","{0} hour ago",n):(e==null?void 0:e.short)?nt("date.fromNow.hours.plural.short.ago","{0} hrs ago",n):nt("date.fromNow.hours.plural.ago","{0} hours ago",n):n===1?(e==null?void 0:e.short)?nt("date.fromNow.hours.singular.short","{0} hr",n):nt("date.fromNow.hours.singular","{0} hour",n):(e==null?void 0:e.short)?nt("date.fromNow.hours.plural.short","{0} hrs",n):nt("date.fromNow.hours.plural","{0} hours",n)):r<C0?(n=Math.floor(r/Ds),(e==null?void 0:e.ago)?n===1?nt("date.fromNow.days.singular.ago","{0} day ago",n):nt("date.fromNow.days.plural.ago","{0} days ago",n):n===1?nt("date.fromNow.days.singular","{0} day",n):nt("date.fromNow.days.plural","{0} days",n)):r<E0?(n=Math.floor(r/C0),(e==null?void 0:e.ago)?n===1?(e==null?void 0:e.short)?nt("date.fromNow.weeks.singular.short.ago","{0} wk ago",n):nt("date.fromNow.weeks.singular.ago","{0} week ago",n):(e==null?void 0:e.short)?nt("date.fromNow.weeks.plural.short.ago","{0} wks ago",n):nt("date.fromNow.weeks.plural.ago","{0} weeks ago",n):n===1?(e==null?void 0:e.short)?nt("date.fromNow.weeks.singular.short","{0} wk",n):nt("date.fromNow.weeks.singular","{0} week",n):(e==null?void 0:e.short)?nt("date.fromNow.weeks.plural.short","{0} wks",n):nt("date.fromNow.weeks.plural","{0} weeks",n)):r<R0?(n=Math.floor(r/E0),(e==null?void 0:e.ago)?n===1?(e==null?void 0:e.short)?nt("date.fromNow.months.singular.short.ago","{0} mo ago",n):nt("date.fromNow.months.singular.ago","{0} month ago",n):(e==null?void 0:e.short)?nt("date.fromNow.months.plural.short.ago","{0} mos ago",n):nt("date.fromNow.months.plural.ago","{0} months ago",n):n===1?(e==null?void 0:e.short)?nt("date.fromNow.months.singular.short","{0} mo",n):nt("date.fromNow.months.singular","{0} month",n):(e==null?void 0:e.short)?nt("date.fromNow.months.plural.short","{0} mos",n):nt("date.fromNow.months.plural","{0} months",n)):(n=Math.floor(r/R0),(e==null?void 0:e.ago)?n===1?(e==null?void 0:e.short)?nt("date.fromNow.years.singular.short.ago","{0} yr ago",n):nt("date.fromNow.years.singular.ago","{0} year ago",n):(e==null?void 0:e.short)?nt("date.fromNow.years.plural.short.ago","{0} yrs ago",n):nt("date.fromNow.years.plural.ago","{0} years ago",n):n===1?(e==null?void 0:e.short)?nt("date.fromNow.years.singular.short","{0} yr",n):nt("date.fromNow.years.singular","{0} year",n):(e==null?void 0:e.short)?nt("date.fromNow.years.plural.short","{0} yrs",n):nt("date.fromNow.years.plural","{0} years",n))}c(Fs,"fromNow");var A0,Nr;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(Nr||(Nr={}));class I0{constructor(){this[A0]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)==null?void 0:e.value}get last(){var e;return(e=this._tail)==null?void 0:e.value}has(e){return this._map.has(e)}get(e,r=Nr.None){const n=this._map.get(e);if(!!n)return r!==Nr.None&&this.touch(n,r),n.value}set(e,r,n=Nr.None){let i=this._map.get(e);if(i)i.value=r,n!==Nr.None&&this.touch(i,n);else{switch(i={key:e,value:r,next:void 0,previous:void 0},n){case Nr.None:this.addItemLast(i);break;case Nr.First:this.addItemFirst(i);break;case Nr.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return Boolean(this.remove(e))}remove(e){const r=this._map.get(e);if(!!r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){const n=this._state;let i=this._head;for(;i;){if(r?e.bind(r)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){const e=this._state;let r=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){const i={value:r.key,done:!1};return r=r.next,i}return{value:void 0,done:!0}}};return n}values(){const e=this._state;let r=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){const i={value:r.value,done:!1};return r=r.next,i}return{value:void 0,done:!0}}};return n}entries(){const e=this._state;let r=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){const i={value:[r.key,r.value],done:!1};return r=r.next,i}return{value:void 0,done:!0}}};return n}[(A0=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==Nr.First&&r!==Nr.Last)){if(r===Nr.First){if(e===this._head)return;const n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===Nr.Last){if(e===this._tail)return;const n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(const[r,n]of e)this.set(r,n)}}c(I0,"LinkedMap");class Si extends I0{constructor(e,r=1){super();this._limit=e,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,r=Nr.AsNew){return super.get(e,r)}peek(e){return super.get(e,Nr.None)}set(e,r){return super.set(e,r,Nr.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}c(Si,"LRUCache");function yx(t,e,r){return new Zi(new Wh(t),new Wh(e)).ComputeDiff(r).changes}c(yx,"stringDiff");class Ci{constructor(e,r,n,i){this.originalStart=e,this.originalLength=r,this.modifiedStart=n,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}c(Ci,"DiffChange");var T0;(function(t){t[t.MAX_SAFE_SMALL_INTEGER=1073741824]="MAX_SAFE_SMALL_INTEGER",t[t.MIN_SAFE_SMALL_INTEGER=-1073741824]="MIN_SAFE_SMALL_INTEGER",t[t.MAX_UINT_8=255]="MAX_UINT_8",t[t.MAX_UINT_16=65535]="MAX_UINT_16",t[t.MAX_UINT_32=4294967295]="MAX_UINT_32",t[t.UNICODE_SUPPLEMENTARY_PLANE_BEGIN=65536]="UNICODE_SUPPLEMENTARY_PLANE_BEGIN"})(T0||(T0={}));function k0(t,e){return(e<<5)-e+t|0}c(k0,"numberHash");function bx(t,e){e=k0(149417,e);for(let r=0,n=t.length;r<n;r++)e=k0(t.charCodeAt(r),e);return e}c(bx,"stringHash");class Wh{constructor(e){this.source=e}getElements(){const e=this.source,r=new Int32Array(e.length);for(let n=0,i=e.length;n<i;n++)r[n]=e.charCodeAt(n);return r}}c(Wh,"StringDiffSequence");class Ro{static Assert(e,r){if(!e)throw new Error(r)}}c(Ro,"Debug");class Ao{static Copy(e,r,n,i,o){for(let a=0;a<o;a++)n[i+a]=e[r+a]}static Copy2(e,r,n,i,o){for(let a=0;a<o;a++)n[i+a]=e[r+a]}}c(Ao,"MyArray");var D0;(function(t){t[t.MaxDifferencesHistory=1447]="MaxDifferencesHistory"})(D0||(D0={}));class qh{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new Ci(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,r){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,r),this.m_originalCount++}AddModifiedElement(e,r){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,r),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}c(qh,"DiffChangeHelper");class Zi{constructor(e,r,n=null){this.ContinueProcessingPredicate=n,this._originalSequence=e,this._modifiedSequence=r;const[i,o,a]=Zi._getElements(e),[s,l,u]=Zi._getElements(r);this._hasStrings=a&&u,this._originalStringElements=i,this._originalElementsOrHash=o,this._modifiedStringElements=s,this._modifiedElementsOrHash=l,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const r=e.getElements();if(Zi._isStringArray(r)){const n=new Int32Array(r.length);for(let i=0,o=r.length;i<o;i++)n[i]=bx(r[i],0);return[r,n,!0]}return r instanceof Int32Array?[[],r,!1]:[[],new Int32Array(r),!1]}ElementsAreEqual(e,r){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[r]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[r]:!0}ElementsAreStrictEqual(e,r){if(!this.ElementsAreEqual(e,r))return!1;const n=Zi._getStrictElement(this._originalSequence,e),i=Zi._getStrictElement(this._modifiedSequence,r);return n===i}static _getStrictElement(e,r){return typeof e.getStrictElement=="function"?e.getStrictElement(r):null}OriginalElementsAreEqual(e,r){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[r]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[r]:!0}ModifiedElementsAreEqual(e,r){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[r]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[r]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,r,n,i,o){const a=[!1];let s=this.ComputeDiffRecursive(e,r,n,i,a);return o&&(s=this.PrettifyChanges(s)),{quitEarly:a[0],changes:s}}ComputeDiffRecursive(e,r,n,i,o){for(o[0]=!1;e<=r&&n<=i&&this.ElementsAreEqual(e,n);)e++,n++;for(;r>=e&&i>=n&&this.ElementsAreEqual(r,i);)r--,i--;if(e>r||n>i){let f;return n<=i?(Ro.Assert(e===r+1,"originalStart should only be one more than originalEnd"),f=[new Ci(e,0,n,i-n+1)]):e<=r?(Ro.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),f=[new Ci(e,r-e+1,n,0)]):(Ro.Assert(e===r+1,"originalStart should only be one more than originalEnd"),Ro.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),f=[]),f}const a=[0],s=[0],l=this.ComputeRecursionPoint(e,r,n,i,a,s,o),u=a[0],d=s[0];if(l!==null)return l;if(!o[0]){const f=this.ComputeDiffRecursive(e,u,n,d,o);let p=[];return o[0]?p=[new Ci(u+1,r-(u+1)+1,d+1,i-(d+1)+1)]:p=this.ComputeDiffRecursive(u+1,r,d+1,i,o),this.ConcatenateChanges(f,p)}return[new Ci(e,r-e+1,n,i-n+1)]}WALKTRACE(e,r,n,i,o,a,s,l,u,d,f,p,g,S,y,b,_,C){let k=null,F=null,$=new qh,ne=r,ie=n,Q=g[0]-b[0]-i,me=-1073741824,se=this.m_forwardHistory.length-1;do{const fe=Q+e;fe===ne||fe<ie&&u[fe-1]<u[fe+1]?(f=u[fe+1],S=f-Q-i,f<me&&$.MarkNextChange(),me=f,$.AddModifiedElement(f+1,S),Q=fe+1-e):(f=u[fe-1]+1,S=f-Q-i,f<me&&$.MarkNextChange(),me=f-1,$.AddOriginalElement(f,S+1),Q=fe-1-e),se>=0&&(u=this.m_forwardHistory[se],e=u[0],ne=1,ie=u.length-1)}while(--se>=-1);if(k=$.getReverseChanges(),C[0]){let fe=g[0]+1,xe=b[0]+1;if(k!==null&&k.length>0){const Ge=k[k.length-1];fe=Math.max(fe,Ge.getOriginalEnd()),xe=Math.max(xe,Ge.getModifiedEnd())}F=[new Ci(fe,p-fe+1,xe,y-xe+1)]}else{$=new qh,ne=a,ie=s,Q=g[0]-b[0]-l,me=1073741824,se=_?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const fe=Q+o;fe===ne||fe<ie&&d[fe-1]>=d[fe+1]?(f=d[fe+1]-1,S=f-Q-l,f>me&&$.MarkNextChange(),me=f+1,$.AddOriginalElement(f+1,S+1),Q=fe+1-o):(f=d[fe-1],S=f-Q-l,f>me&&$.MarkNextChange(),me=f,$.AddModifiedElement(f+1,S+1),Q=fe-1-o),se>=0&&(d=this.m_reverseHistory[se],o=d[0],ne=1,ie=d.length-1)}while(--se>=-1);F=$.getChanges()}return this.ConcatenateChanges(k,F)}ComputeRecursionPoint(e,r,n,i,o,a,s){let l=0,u=0,d=0,f=0,p=0,g=0;e--,n--,o[0]=0,a[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const S=r-e+(i-n),y=S+1,b=new Int32Array(y),_=new Int32Array(y),C=i-n,k=r-e,F=e-n,$=r-i,ie=(k-C)%2==0;b[C]=e,_[k]=r,s[0]=!1;for(let Q=1;Q<=S/2+1;Q++){let me=0,se=0;d=this.ClipDiagonalBound(C-Q,Q,C,y),f=this.ClipDiagonalBound(C+Q,Q,C,y);for(let xe=d;xe<=f;xe+=2){xe===d||xe<f&&b[xe-1]<b[xe+1]?l=b[xe+1]:l=b[xe-1]+1,u=l-(xe-C)-F;const Ge=l;for(;l<r&&u<i&&this.ElementsAreEqual(l+1,u+1);)l++,u++;if(b[xe]=l,l+u>me+se&&(me=l,se=u),!ie&&Math.abs(xe-k)<=Q-1&&l>=_[xe])return o[0]=l,a[0]=u,Ge<=_[xe]&&1447>0&&Q<=1447+1?this.WALKTRACE(C,d,f,F,k,p,g,$,b,_,l,r,o,u,i,a,ie,s):null}const fe=(me-e+(se-n)-Q)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(me,fe))return s[0]=!0,o[0]=me,a[0]=se,fe>0&&1447>0&&Q<=1447+1?this.WALKTRACE(C,d,f,F,k,p,g,$,b,_,l,r,o,u,i,a,ie,s):(e++,n++,[new Ci(e,r-e+1,n,i-n+1)]);p=this.ClipDiagonalBound(k-Q,Q,k,y),g=this.ClipDiagonalBound(k+Q,Q,k,y);for(let xe=p;xe<=g;xe+=2){xe===p||xe<g&&_[xe-1]>=_[xe+1]?l=_[xe+1]-1:l=_[xe-1],u=l-(xe-k)-$;const Ge=l;for(;l>e&&u>n&&this.ElementsAreEqual(l,u);)l--,u--;if(_[xe]=l,ie&&Math.abs(xe-C)<=Q&&l<=b[xe])return o[0]=l,a[0]=u,Ge>=b[xe]&&1447>0&&Q<=1447+1?this.WALKTRACE(C,d,f,F,k,p,g,$,b,_,l,r,o,u,i,a,ie,s):null}if(Q<=1447){let xe=new Int32Array(f-d+2);xe[0]=C-d+1,Ao.Copy2(b,d,xe,1,f-d+1),this.m_forwardHistory.push(xe),xe=new Int32Array(g-p+2),xe[0]=k-p+1,Ao.Copy2(_,p,xe,1,g-p+1),this.m_reverseHistory.push(xe)}}return this.WALKTRACE(C,d,f,F,k,p,g,$,b,_,l,r,o,u,i,a,ie,s)}PrettifyChanges(e){for(let r=0;r<e.length;r++){const n=e[r],i=r<e.length-1?e[r+1].originalStart:this._originalElementsOrHash.length,o=r<e.length-1?e[r+1].modifiedStart:this._modifiedElementsOrHash.length,a=n.originalLength>0,s=n.modifiedLength>0;for(;n.originalStart+n.originalLength<i&&n.modifiedStart+n.modifiedLength<o&&(!a||this.OriginalElementsAreEqual(n.originalStart,n.originalStart+n.originalLength))&&(!s||this.ModifiedElementsAreEqual(n.modifiedStart,n.modifiedStart+n.modifiedLength));){const u=this.ElementsAreStrictEqual(n.originalStart,n.modifiedStart);if(this.ElementsAreStrictEqual(n.originalStart+n.originalLength,n.modifiedStart+n.modifiedLength)&&!u)break;n.originalStart++,n.modifiedStart++}let l=[null];if(r<e.length-1&&this.ChangesOverlap(e[r],e[r+1],l)){e[r]=l[0],e.splice(r+1,1),r--;continue}}for(let r=e.length-1;r>=0;r--){const n=e[r];let i=0,o=0;if(r>0){const f=e[r-1];i=f.originalStart+f.originalLength,o=f.modifiedStart+f.modifiedLength}const a=n.originalLength>0,s=n.modifiedLength>0;let l=0,u=this._boundaryScore(n.originalStart,n.originalLength,n.modifiedStart,n.modifiedLength);for(let f=1;;f++){const p=n.originalStart-f,g=n.modifiedStart-f;if(p<i||g<o||a&&!this.OriginalElementsAreEqual(p,p+n.originalLength)||s&&!this.ModifiedElementsAreEqual(g,g+n.modifiedLength))break;const y=(p===i&&g===o?5:0)+this._boundaryScore(p,n.originalLength,g,n.modifiedLength);y>u&&(u=y,l=f)}n.originalStart-=l,n.modifiedStart-=l;const d=[null];if(r>0&&this.ChangesOverlap(e[r-1],e[r],d)){e[r-1]=d[0],e.splice(r,1),r++;continue}}if(this._hasStrings)for(let r=1,n=e.length;r<n;r++){const i=e[r-1],o=e[r],a=o.originalStart-i.originalStart-i.originalLength,s=i.originalStart,l=o.originalStart+o.originalLength,u=l-s,d=i.modifiedStart,f=o.modifiedStart+o.modifiedLength,p=f-d;if(a<5&&u<20&&p<20){const g=this._findBetterContiguousSequence(s,u,d,p,a);if(g){const[S,y]=g;(S!==i.originalStart+i.originalLength||y!==i.modifiedStart+i.modifiedLength)&&(i.originalLength=S-i.originalStart,i.modifiedLength=y-i.modifiedStart,o.originalStart=S+a,o.modifiedStart=y+a,o.originalLength=l-o.originalStart,o.modifiedLength=f-o.modifiedStart)}}}return e}_findBetterContiguousSequence(e,r,n,i,o){if(r<o||i<o)return null;const a=e+r-o+1,s=n+i-o+1;let l=0,u=0,d=0;for(let f=e;f<a;f++)for(let p=n;p<s;p++){const g=this._contiguousSequenceScore(f,p,o);g>0&&g>l&&(l=g,u=f,d=p)}return l>0?[u,d]:null}_contiguousSequenceScore(e,r,n){let i=0;for(let o=0;o<n;o++){if(!this.ElementsAreEqual(e+o,r+o))return 0;i+=this._originalStringElements[e+o].length}return i}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,r){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(r>0){const n=e+r;if(this._OriginalIsBoundary(n-1)||this._OriginalIsBoundary(n))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,r){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(r>0){const n=e+r;if(this._ModifiedIsBoundary(n-1)||this._ModifiedIsBoundary(n))return!0}return!1}_boundaryScore(e,r,n,i){const o=this._OriginalRegionIsBoundary(e,r)?1:0,a=this._ModifiedRegionIsBoundary(n,i)?1:0;return o+a}ConcatenateChanges(e,r){let n=[];if(e.length===0||r.length===0)return r.length>0?r:e;if(this.ChangesOverlap(e[e.length-1],r[0],n)){const i=new Array(e.length+r.length-1);return Ao.Copy(e,0,i,0,e.length-1),i[e.length-1]=n[0],Ao.Copy(r,1,i,e.length,r.length-1),i}else{const i=new Array(e.length+r.length);return Ao.Copy(e,0,i,0,e.length),Ao.Copy(r,0,i,e.length,r.length),i}}ChangesOverlap(e,r,n){if(Ro.Assert(e.originalStart<=r.originalStart,"Left change is not less than or equal to right change"),Ro.Assert(e.modifiedStart<=r.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=r.originalStart||e.modifiedStart+e.modifiedLength>=r.modifiedStart){const i=e.originalStart;let o=e.originalLength;const a=e.modifiedStart;let s=e.modifiedLength;return e.originalStart+e.originalLength>=r.originalStart&&(o=r.originalStart+r.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=r.modifiedStart&&(s=r.modifiedStart+r.modifiedLength-e.modifiedStart),n[0]=new Ci(i,o,a,s),!0}else return n[0]=null,!1}ClipDiagonalBound(e,r,n,i){if(e>=0&&e<i)return e;const o=n,a=i-n-1,s=r%2==0;if(e<0){const l=o%2==0;return s===l?0:1}else{const l=a%2==0;return s===l?i-1:i-2}}}c(Zi,"LcsDiff");var zh;(function(t){function e(n,i){return n instanceof Aa?i:new h.Position(i.line,i.character)}c(e,"makePosition"),t.makePosition=e;function r(n,i){return n instanceof Aa?i:new h.Range(i.start.line,i.start.character,i.end.line,i.end.character)}c(r,"makeRange"),t.makeRange=r})(zh||(zh={}));var F0;(function(t){t[t.index2code=1]="index2code",t[t.code2Index=2]="code2Index"})(F0||(F0={}));const P0=c(class{constructor(t,e,r,n){this.diffCache=new Si(32),this.indexDocumentCache=new Si(32),this.codeDocumentCache=new Si(32),this.providerService=t,this.rootUri=e,this.index=r,this.code=n,this.changes=this.computeChanges()}async computeChanges(){if(this.index===this.code)return new Map;const t=await this.providerService.compareCommits(this.rootUri,{base:this.index,compare:this.code});return t===void 0?new Map:new Map(t.map(e=>[e.uri.toString(),e.type]))}async needsMapping(t){const e=t.uri;if(!e.toString().startsWith(this.rootUri.toString()))return!1;if((await this.changes).get(e.toString())!==void 0)return!0;const i=await this.getIndexDocument(e);return i===void 0?!0:this.getDiff(1,i,t).length!==0}async mapPositionFromCodeToIndex(t,e){const r=t.uri;if(!r.toString().startsWith(this.rootUri.toString()))return;const i=(await this.changes).get(r.toString());if(i===I.Created||i===I.Deleted)return;const o=await this.getIndexDocument(r);if(o===void 0)return;const a=this.getDiff(2,o,t);if(a.length===0)return e;const s=t.offsetAt(new h.Position(e.line,e.character));let l=s;for(const p of a){if(p.modifiedStart<=s&&s<p.modifiedStart+p.modifiedLength)return;if(l<p.modifiedStart)break;l=l-(p.modifiedLength-p.originalLength)}const u=o.positionAt(l),d=this.getWordAtOffset(o.lineAt(u.line).text,u.character),f=this.getWordAtOffset(t.lineAt(e.line).text,e.character);if(!(d===void 0||f===void 0||d!==f))return new h.Position(u.line,u.character)}async mapRangeFromIndexToCode(t,e){const r=t instanceof h.Uri?t:t.uri;if(!r.toString().startsWith(this.rootUri.toString()))return;const i=(await this.changes).get(r.toString());if(i===I.Created||i===I.Deleted)return;const[o,a]=await Promise.all([this.getIndexDocument(r),this.getCodeDocument(t)]);if(o===void 0||a===void 0)return;const s=this.getDiff(1,o,a);if(s.length===0)return e;const l=o.offsetAt(e.start);let u=l;const d=o.offsetAt(e.end);let f=d;for(const b of s){if(f<b.originalStart)break;const _=b.modifiedLength-b.originalLength;if(b.originalStart<=l){if(l<b.originalStart+b.originalLength)return;u+=_}else if(d<b.originalStart+b.originalLength)return;if(b.originalStart<=d){if(d<b.originalStart+b.originalLength)return;f+=_}}const p=a.positionAt(u),g=a.positionAt(f),S=o.getText(e),y=a.getText(zh.makeRange(a,{start:p,end:g}));if(S===y)return new h.Range(p.line,p.character,g.line,g.character)}async getIndexDocument(t){return this.getDocument(this.indexDocumentCache,t,this.index)}async getCodeDocument(t){return t instanceof h.Uri?this.getDocument(this.codeDocumentCache,t,this.code):t}async getDocument(t,e,r){let n=t.get(e.toString());if(n!==null)return n!==void 0||(n=this._getDocument(e,r),t.set(e.toString(),n),n.then(i=>{i===void 0&&t.set(e.toString(),null)},void 0)),n}async _getDocument(t,e){const r=t.toString().substr(this.rootUri.toString().length);return this.providerService.getFileContent(this.rootUri,e,r).then(n=>new Aa(t,Number.MAX_VALUE,P0.textDecoder.decode(n)),()=>{})}getDiff(t,e,r){if(e.uri.toString()!==r.uri.toString())throw new Error(`Original (${e.uri.toString()}) and modified (${r.uri.toString()}) are pointing to a different document`);const n=`${t}${e.uri.toString()}`;let i=this.diffCache.get(n);return i!==void 0&&i.original===e.version&&i.modified===r.version||(i={original:e.version,modified:r.version,changes:yx(e.getText(),r.getText(),!0)},this.diffCache.set(n,i)),i.changes}getWordAtOffset(t,e){let r="findStart",n=0,i=t.length,o=0;for(;o<t.length&&r!=="endFound";){switch(o===e&&(r="findEnd"),t[o]){case" ":case"	":case"(":case")":case"[":case"]":case"{":case"}":case"'":case'"':case"`":switch(r){case"findStart":n=o+1;break;case"findEnd":i=o,r="endFound";break}break}o++}return r==="endFound"?t.substring(n,i):void 0}},"_DiffMapper");let N0=P0;N0.textDecoder=new TextDecoder("utf8");var M0;(function(t){t[t.LineFeed=10]="LineFeed",t[t.CarriageReturn=13]="CarriageReturn"})(M0||(M0={}));class Aa{static computeLineOffsets(e,r,n=0){const i=r?[n]:[];for(let o=0;o<e.length;o++){const a=e.charCodeAt(o);(a===13||a===10)&&(a===13&&o+1<e.length&&e.charCodeAt(o+1)===10&&o++,i.push(n+o+1))}return i}constructor(e,r,n){this._content=n,this.uri=e,this.version=r,this._lineOffsets=void 0}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=Aa.computeLineOffsets(this._content,!0)),this._lineOffsets}getText(e){if(e){const r=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(r,n)}return this._content}lineAt(e){const r=this.getLineOffsets();if(e>=r.length)return{lineNumber:e,text:""};const n=r[e],i=r[e+1];if(i===void 0)return{lineNumber:e,text:this._content.substring(n)};const o=this._content.substring(n,i);let a=o.length-1;for(;a>=0&&(o[a]===`
`||o[a]==="\r");)a--;return{lineNumber:e,text:o.substr(0,a+1)}}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);const r=this.getLineOffsets();let n=0,i=r.length;if(i===0)return{line:0,character:e};for(;n<i;){const a=Math.floor((n+i)/2);r[a]>e?i=a:n=a+1}const o=n-1;return{line:o,character:e-r[o]}}offsetAt(e){const r=this.getLineOffsets();if(e.line>=r.length)return this._content.length;if(e.line<0)return 0;const n=r[e.line],i=e.line+1<r.length?r[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,i),n)}get lineCount(){return this.getLineOffsets().length}}c(Aa,"TextDocument");var $0;(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647})($0||($0={}));var Tl;(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647})(Tl||(Tl={}));var zn;(function(t){function e(n,i){return n===Number.MAX_VALUE&&(n=Tl.MAX_VALUE),i===Number.MAX_VALUE&&(i=Tl.MAX_VALUE),{line:n,character:i}}c(e,"create"),t.create=e;function r(n){var i=n;return ge.objectLiteral(i)&&ge.uinteger(i.line)&&ge.uinteger(i.character)}c(r,"is"),t.is=r})(zn||(zn={}));var Er;(function(t){function e(n,i,o,a){if(ge.uinteger(n)&&ge.uinteger(i)&&ge.uinteger(o)&&ge.uinteger(a))return{start:zn.create(n,i),end:zn.create(o,a)};if(zn.is(n)&&zn.is(i))return{start:n,end:i};throw new Error("Range#create called with invalid arguments["+n+", "+i+", "+o+", "+a+"]")}c(e,"create"),t.create=e;function r(n){var i=n;return ge.objectLiteral(i)&&zn.is(i.start)&&zn.is(i.end)}c(r,"is"),t.is=r})(Er||(Er={}));var jh;(function(t){function e(n,i){return{uri:n,range:i}}c(e,"create"),t.create=e;function r(n){var i=n;return ge.defined(i)&&Er.is(i.range)&&(ge.string(i.uri)||ge.undefined(i.uri))}c(r,"is"),t.is=r})(jh||(jh={}));var kl;(function(t){function e(n,i,o,a){return{targetUri:n,targetRange:i,targetSelectionRange:o,originSelectionRange:a}}c(e,"create"),t.create=e;function r(n){var i=n;return ge.defined(i)&&Er.is(i.targetRange)&&ge.string(i.targetUri)&&(Er.is(i.targetSelectionRange)||ge.undefined(i.targetSelectionRange))&&(Er.is(i.originSelectionRange)||ge.undefined(i.originSelectionRange))}c(r,"is"),t.is=r})(kl||(kl={}));var Vh;(function(t){function e(n,i,o,a){return{red:n,green:i,blue:o,alpha:a}}c(e,"create"),t.create=e;function r(n){var i=n;return ge.numberRange(i.red,0,1)&&ge.numberRange(i.green,0,1)&&ge.numberRange(i.blue,0,1)&&ge.numberRange(i.alpha,0,1)}c(r,"is"),t.is=r})(Vh||(Vh={}));var L0;(function(t){function e(n,i){return{range:n,color:i}}c(e,"create"),t.create=e;function r(n){var i=n;return Er.is(i.range)&&Vh.is(i.color)}c(r,"is"),t.is=r})(L0||(L0={}));var B0;(function(t){function e(n,i,o){return{label:n,textEdit:i,additionalTextEdits:o}}c(e,"create"),t.create=e;function r(n){var i=n;return ge.string(i.label)&&(ge.undefined(i.textEdit)||Qi.is(i))&&(ge.undefined(i.additionalTextEdits)||ge.typedArray(i.additionalTextEdits,Qi.is))}c(r,"is"),t.is=r})(B0||(B0={}));var Ps;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(Ps||(Ps={}));var U0;(function(t){function e(n,i,o,a,s){var l={startLine:n,endLine:i};return ge.defined(o)&&(l.startCharacter=o),ge.defined(a)&&(l.endCharacter=a),ge.defined(s)&&(l.kind=s),l}c(e,"create"),t.create=e;function r(n){var i=n;return ge.uinteger(i.startLine)&&ge.uinteger(i.startLine)&&(ge.undefined(i.startCharacter)||ge.uinteger(i.startCharacter))&&(ge.undefined(i.endCharacter)||ge.uinteger(i.endCharacter))&&(ge.undefined(i.kind)||ge.string(i.kind))}c(r,"is"),t.is=r})(U0||(U0={}));var Gh;(function(t){function e(n,i){return{location:n,message:i}}c(e,"create"),t.create=e;function r(n){var i=n;return ge.defined(i)&&jh.is(i.location)&&ge.string(i.message)}c(r,"is"),t.is=r})(Gh||(Gh={}));var Ia;(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(Ia||(Ia={}));var Dl;(function(t){t.Unnecessary=1,t.Deprecated=2})(Dl||(Dl={}));var Kh;(function(t){function e(r){var n=r;return n!=null&&ge.string(n.href)}c(e,"is"),t.is=e})(Kh||(Kh={}));var Fl;(function(t){function e(n,i,o,a,s,l){var u={range:n,message:i};return ge.defined(o)&&(u.severity=o),ge.defined(a)&&(u.code=a),ge.defined(s)&&(u.source=s),ge.defined(l)&&(u.relatedInformation=l),u}c(e,"create"),t.create=e;function r(n){var i,o=n;return ge.defined(o)&&Er.is(o.range)&&ge.string(o.message)&&(ge.number(o.severity)||ge.undefined(o.severity))&&(ge.integer(o.code)||ge.string(o.code)||ge.undefined(o.code))&&(ge.undefined(o.codeDescription)||ge.string((i=o.codeDescription)===null||i===void 0?void 0:i.href))&&(ge.string(o.source)||ge.undefined(o.source))&&(ge.undefined(o.relatedInformation)||ge.typedArray(o.relatedInformation,Gh.is))}c(r,"is"),t.is=r})(Fl||(Fl={}));var Ns;(function(t){function e(n,i){for(var o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];var s={title:n,command:i};return ge.defined(o)&&o.length>0&&(s.arguments=o),s}c(e,"create"),t.create=e;function r(n){var i=n;return ge.defined(i)&&ge.string(i.title)&&ge.string(i.command)}c(r,"is"),t.is=r})(Ns||(Ns={}));var Qi;(function(t){function e(o,a){return{range:o,newText:a}}c(e,"replace"),t.replace=e;function r(o,a){return{range:{start:o,end:o},newText:a}}c(r,"insert"),t.insert=r;function n(o){return{range:o,newText:""}}c(n,"del"),t.del=n;function i(o){var a=o;return ge.objectLiteral(a)&&ge.string(a.newText)&&Er.is(a.range)}c(i,"is"),t.is=i})(Qi||(Qi={}));var Ta;(function(t){function e(n,i,o){var a={label:n};return i!==void 0&&(a.needsConfirmation=i),o!==void 0&&(a.description=o),a}c(e,"create"),t.create=e;function r(n){var i=n;return i!==void 0&&ge.objectLiteral(i)&&ge.string(i.label)&&(ge.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(ge.string(i.description)||i.description===void 0)}c(r,"is"),t.is=r})(Ta||(Ta={}));var Mr;(function(t){function e(r){var n=r;return typeof n=="string"}c(e,"is"),t.is=e})(Mr||(Mr={}));var Xi;(function(t){function e(o,a,s){return{range:o,newText:a,annotationId:s}}c(e,"replace"),t.replace=e;function r(o,a,s){return{range:{start:o,end:o},newText:a,annotationId:s}}c(r,"insert"),t.insert=r;function n(o,a){return{range:o,newText:"",annotationId:a}}c(n,"del"),t.del=n;function i(o){var a=o;return Qi.is(a)&&(Ta.is(a.annotationId)||Mr.is(a.annotationId))}c(i,"is"),t.is=i})(Xi||(Xi={}));var Ms;(function(t){function e(n,i){return{textDocument:n,edits:i}}c(e,"create"),t.create=e;function r(n){var i=n;return ge.defined(i)&&Nl.is(i.textDocument)&&Array.isArray(i.edits)}c(r,"is"),t.is=r})(Ms||(Ms={}));var ka;(function(t){function e(n,i,o){var a={kind:"create",uri:n};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(a.options=i),o!==void 0&&(a.annotationId=o),a}c(e,"create"),t.create=e;function r(n){var i=n;return i&&i.kind==="create"&&ge.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||ge.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||ge.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||Mr.is(i.annotationId))}c(r,"is"),t.is=r})(ka||(ka={}));var Da;(function(t){function e(n,i,o,a){var s={kind:"rename",oldUri:n,newUri:i};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(s.options=o),a!==void 0&&(s.annotationId=a),s}c(e,"create"),t.create=e;function r(n){var i=n;return i&&i.kind==="rename"&&ge.string(i.oldUri)&&ge.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||ge.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||ge.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||Mr.is(i.annotationId))}c(r,"is"),t.is=r})(Da||(Da={}));var Fa;(function(t){function e(n,i,o){var a={kind:"delete",uri:n};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(a.options=i),o!==void 0&&(a.annotationId=o),a}c(e,"create"),t.create=e;function r(n){var i=n;return i&&i.kind==="delete"&&ge.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||ge.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||ge.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||Mr.is(i.annotationId))}c(r,"is"),t.is=r})(Fa||(Fa={}));var Zh;(function(t){function e(r){var n=r;return n&&(n.changes!==void 0||n.documentChanges!==void 0)&&(n.documentChanges===void 0||n.documentChanges.every(function(i){return ge.string(i.kind)?ka.is(i)||Da.is(i)||Fa.is(i):Ms.is(i)}))}c(e,"is"),t.is=e})(Zh||(Zh={}));var Pl=function(){function t(e,r){this.edits=e,this.changeAnnotations=r}return c(t,"TextEditChangeImpl"),t.prototype.insert=function(e,r,n){var i,o;if(n===void 0?i=Qi.insert(e,r):Mr.is(n)?(o=n,i=Xi.insert(e,r,n)):(this.assertChangeAnnotations(this.changeAnnotations),o=this.changeAnnotations.manage(n),i=Xi.insert(e,r,o)),this.edits.push(i),o!==void 0)return o},t.prototype.replace=function(e,r,n){var i,o;if(n===void 0?i=Qi.replace(e,r):Mr.is(n)?(o=n,i=Xi.replace(e,r,n)):(this.assertChangeAnnotations(this.changeAnnotations),o=this.changeAnnotations.manage(n),i=Xi.replace(e,r,o)),this.edits.push(i),o!==void 0)return o},t.prototype.delete=function(e,r){var n,i;if(r===void 0?n=Qi.del(e):Mr.is(r)?(i=r,n=Xi.del(e,r)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(r),n=Xi.del(e,i)),this.edits.push(n),i!==void 0)return i},t.prototype.add=function(e){this.edits.push(e)},t.prototype.all=function(){return this.edits},t.prototype.clear=function(){this.edits.splice(0,this.edits.length)},t.prototype.assertChangeAnnotations=function(e){if(e===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},t}(),O0=function(){function t(e){this._annotations=e===void 0?Object.create(null):e,this._counter=0,this._size=0}return c(t,"ChangeAnnotations"),t.prototype.all=function(){return this._annotations},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),t.prototype.manage=function(e,r){var n;if(Mr.is(e)?n=e:(n=this.nextId(),r=e),this._annotations[n]!==void 0)throw new Error("Id "+n+" is already in use.");if(r===void 0)throw new Error("No annotation provided for id "+n);return this._annotations[n]=r,this._size++,n},t.prototype.nextId=function(){return this._counter++,this._counter.toString()},t}(),YE=function(){function t(e){var r=this;this._textEditChanges=Object.create(null),e!==void 0?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new O0(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach(function(n){if(Ms.is(n)){var i=new Pl(n.edits,r._changeAnnotations);r._textEditChanges[n.textDocument.uri]=i}})):e.changes&&Object.keys(e.changes).forEach(function(n){var i=new Pl(e.changes[n]);r._textEditChanges[n]=i})):this._workspaceEdit={}}return c(t,"WorkspaceChange"),Object.defineProperty(t.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),t.prototype.getTextEditChange=function(e){if(Nl.is(e)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var r={uri:e.uri,version:e.version},n=this._textEditChanges[r.uri];if(!n){var i=[],o={textDocument:r,edits:i};this._workspaceEdit.documentChanges.push(o),n=new Pl(i,this._changeAnnotations),this._textEditChanges[r.uri]=n}return n}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var n=this._textEditChanges[e];if(!n){var i=[];this._workspaceEdit.changes[e]=i,n=new Pl(i),this._textEditChanges[e]=n}return n}},t.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new O0,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},t.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},t.prototype.createFile=function(e,r,n){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;Ta.is(r)||Mr.is(r)?i=r:n=r;var o,a;if(i===void 0?o=ka.create(e,n):(a=Mr.is(i)?i:this._changeAnnotations.manage(i),o=ka.create(e,n,a)),this._workspaceEdit.documentChanges.push(o),a!==void 0)return a},t.prototype.renameFile=function(e,r,n,i){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var o;Ta.is(n)||Mr.is(n)?o=n:i=n;var a,s;if(o===void 0?a=Da.create(e,r,i):(s=Mr.is(o)?o:this._changeAnnotations.manage(o),a=Da.create(e,r,i,s)),this._workspaceEdit.documentChanges.push(a),s!==void 0)return s},t.prototype.deleteFile=function(e,r,n){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;Ta.is(r)||Mr.is(r)?i=r:n=r;var o,a;if(i===void 0?o=Fa.create(e,n):(a=Mr.is(i)?i:this._changeAnnotations.manage(i),o=Fa.create(e,n,a)),this._workspaceEdit.documentChanges.push(o),a!==void 0)return a},t}(),H0;(function(t){function e(n){return{uri:n}}c(e,"create"),t.create=e;function r(n){var i=n;return ge.defined(i)&&ge.string(i.uri)}c(r,"is"),t.is=r})(H0||(H0={}));var W0;(function(t){function e(n,i){return{uri:n,version:i}}c(e,"create"),t.create=e;function r(n){var i=n;return ge.defined(i)&&ge.string(i.uri)&&ge.integer(i.version)}c(r,"is"),t.is=r})(W0||(W0={}));var Nl;(function(t){function e(n,i){return{uri:n,version:i}}c(e,"create"),t.create=e;function r(n){var i=n;return ge.defined(i)&&ge.string(i.uri)&&(i.version===null||ge.integer(i.version))}c(r,"is"),t.is=r})(Nl||(Nl={}));var q0;(function(t){function e(n,i,o,a){return{uri:n,languageId:i,version:o,text:a}}c(e,"create"),t.create=e;function r(n){var i=n;return ge.defined(i)&&ge.string(i.uri)&&ge.string(i.languageId)&&ge.integer(i.version)&&ge.string(i.text)}c(r,"is"),t.is=r})(q0||(q0={}));var Ei;(function(t){t.PlainText="plaintext",t.Markdown="markdown"})(Ei||(Ei={})),function(t){function e(r){var n=r;return n===t.PlainText||n===t.Markdown}c(e,"is"),t.is=e}(Ei||(Ei={}));var Qh;(function(t){function e(r){var n=r;return ge.objectLiteral(r)&&Ei.is(n.kind)&&ge.string(n.value)}c(e,"is"),t.is=e})(Qh||(Qh={}));var z0;(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(z0||(z0={}));var j0;(function(t){t.PlainText=1,t.Snippet=2})(j0||(j0={}));var V0;(function(t){t.Deprecated=1})(V0||(V0={}));var G0;(function(t){function e(n,i,o){return{newText:n,insert:i,replace:o}}c(e,"create"),t.create=e;function r(n){var i=n;return i&&ge.string(i.newText)&&Er.is(i.insert)&&Er.is(i.replace)}c(r,"is"),t.is=r})(G0||(G0={}));var K0;(function(t){t.asIs=1,t.adjustIndentation=2})(K0||(K0={}));var Z0;(function(t){function e(r){return{label:r}}c(e,"create"),t.create=e})(Z0||(Z0={}));var Q0;(function(t){function e(r,n){return{items:r||[],isIncomplete:!!n}}c(e,"create"),t.create=e})(Q0||(Q0={}));var Ml;(function(t){function e(n){return n.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}c(e,"fromPlainText"),t.fromPlainText=e;function r(n){var i=n;return ge.string(i)||ge.objectLiteral(i)&&ge.string(i.language)&&ge.string(i.value)}c(r,"is"),t.is=r})(Ml||(Ml={}));var X0;(function(t){function e(r){var n=r;return!!n&&ge.objectLiteral(n)&&(Qh.is(n.contents)||Ml.is(n.contents)||ge.typedArray(n.contents,Ml.is))&&(r.range===void 0||Er.is(r.range))}c(e,"is"),t.is=e})(X0||(X0={}));var Y0;(function(t){function e(r,n){return n?{label:r,documentation:n}:{label:r}}c(e,"create"),t.create=e})(Y0||(Y0={}));var J0;(function(t){function e(r,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a={label:r};return ge.defined(n)&&(a.documentation=n),ge.defined(i)?a.parameters=i:a.parameters=[],a}c(e,"create"),t.create=e})(J0||(J0={}));var $s;(function(t){t.Text=1,t.Read=2,t.Write=3})($s||($s={}));var ev;(function(t){function e(r,n){var i={range:r};return ge.number(n)&&(i.kind=n),i}c(e,"create"),t.create=e})(ev||(ev={}));var Xh;(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(Xh||(Xh={}));var Yh;(function(t){t.Deprecated=1})(Yh||(Yh={}));var tv;(function(t){function e(r,n,i,o,a){var s={name:r,kind:n,location:{uri:o,range:i}};return a&&(s.containerName=a),s}c(e,"create"),t.create=e})(tv||(tv={}));var rv;(function(t){function e(n,i,o,a,s,l){var u={name:n,detail:i,kind:o,range:a,selectionRange:s};return l!==void 0&&(u.children=l),u}c(e,"create"),t.create=e;function r(n){var i=n;return i&&ge.string(i.name)&&ge.number(i.kind)&&Er.is(i.range)&&Er.is(i.selectionRange)&&(i.detail===void 0||ge.string(i.detail))&&(i.deprecated===void 0||ge.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}c(r,"is"),t.is=r})(rv||(rv={}));var jn;(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(jn||(jn={}));var nv;(function(t){function e(n,i){var o={diagnostics:n};return i!=null&&(o.only=i),o}c(e,"create"),t.create=e;function r(n){var i=n;return ge.defined(i)&&ge.typedArray(i.diagnostics,Fl.is)&&(i.only===void 0||ge.typedArray(i.only,ge.string))}c(r,"is"),t.is=r})(nv||(nv={}));var iv;(function(t){function e(n,i,o){var a={title:n},s=!0;return typeof i=="string"?(s=!1,a.kind=i):Ns.is(i)?a.command=i:a.edit=i,s&&o!==void 0&&(a.kind=o),a}c(e,"create"),t.create=e;function r(n){var i=n;return i&&ge.string(i.title)&&(i.diagnostics===void 0||ge.typedArray(i.diagnostics,Fl.is))&&(i.kind===void 0||ge.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||Ns.is(i.command))&&(i.isPreferred===void 0||ge.boolean(i.isPreferred))&&(i.edit===void 0||Zh.is(i.edit))}c(r,"is"),t.is=r})(iv||(iv={}));var ov;(function(t){function e(n,i){var o={range:n};return ge.defined(i)&&(o.data=i),o}c(e,"create"),t.create=e;function r(n){var i=n;return ge.defined(i)&&Er.is(i.range)&&(ge.undefined(i.command)||Ns.is(i.command))}c(r,"is"),t.is=r})(ov||(ov={}));var av;(function(t){function e(n,i){return{tabSize:n,insertSpaces:i}}c(e,"create"),t.create=e;function r(n){var i=n;return ge.defined(i)&&ge.uinteger(i.tabSize)&&ge.boolean(i.insertSpaces)}c(r,"is"),t.is=r})(av||(av={}));var sv;(function(t){function e(n,i,o){return{range:n,target:i,data:o}}c(e,"create"),t.create=e;function r(n){var i=n;return ge.defined(i)&&Er.is(i.range)&&(ge.undefined(i.target)||ge.string(i.target))}c(r,"is"),t.is=r})(sv||(sv={}));var cv;(function(t){function e(n,i){return{range:n,parent:i}}c(e,"create"),t.create=e;function r(n){var i=n;return i!==void 0&&Er.is(i.range)&&(i.parent===void 0||t.is(i.parent))}c(r,"is"),t.is=r})(cv||(cv={}));var JE=null,lv;(function(t){function e(o,a,s,l){return new _x(o,a,s,l)}c(e,"create"),t.create=e;function r(o){var a=o;return!!(ge.defined(a)&&ge.string(a.uri)&&(ge.undefined(a.languageId)||ge.string(a.languageId))&&ge.uinteger(a.lineCount)&&ge.func(a.getText)&&ge.func(a.positionAt)&&ge.func(a.offsetAt))}c(r,"is"),t.is=r;function n(o,a){for(var s=o.getText(),l=i(a,function(S,y){var b=S.range.start.line-y.range.start.line;return b===0?S.range.start.character-y.range.start.character:b}),u=s.length,d=l.length-1;d>=0;d--){var f=l[d],p=o.offsetAt(f.range.start),g=o.offsetAt(f.range.end);if(g<=u)s=s.substring(0,p)+f.newText+s.substring(g,s.length);else throw new Error("Overlapping edit");u=p}return s}c(n,"applyEdits"),t.applyEdits=n;function i(o,a){if(o.length<=1)return o;var s=o.length/2|0,l=o.slice(0,s),u=o.slice(s);i(l,a),i(u,a);for(var d=0,f=0,p=0;d<l.length&&f<u.length;){var g=a(l[d],u[f]);g<=0?o[p++]=l[d++]:o[p++]=u[f++]}for(;d<l.length;)o[p++]=l[d++];for(;f<u.length;)o[p++]=u[f++];return o}c(i,"mergeSort")})(lv||(lv={}));var _x=function(){function t(e,r,n,i){this._uri=e,this._languageId=r,this._version=n,this._content=i,this._lineOffsets=void 0}return c(t,"FullTextDocument"),Object.defineProperty(t.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),t.prototype.getText=function(e){if(e){var r=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(r,n)}return this._content},t.prototype.update=function(e,r){this._content=e.text,this._version=r,this._lineOffsets=void 0},t.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var e=[],r=this._content,n=!0,i=0;i<r.length;i++){n&&(e.push(i),n=!1);var o=r.charAt(i);n=o==="\r"||o===`
`,o==="\r"&&i+1<r.length&&r.charAt(i+1)===`
`&&i++}n&&r.length>0&&e.push(r.length),this._lineOffsets=e}return this._lineOffsets},t.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var r=this.getLineOffsets(),n=0,i=r.length;if(i===0)return zn.create(0,e);for(;n<i;){var o=Math.floor((n+i)/2);r[o]>e?i=o:n=o+1}var a=n-1;return zn.create(a,e-r[a])},t.prototype.offsetAt=function(e){var r=this.getLineOffsets();if(e.line>=r.length)return this._content.length;if(e.line<0)return 0;var n=r[e.line],i=e.line+1<r.length?r[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,i),n)},Object.defineProperty(t.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),t}(),ge;(function(t){var e=Object.prototype.toString;function r(g){return typeof g!="undefined"}c(r,"defined"),t.defined=r;function n(g){return typeof g=="undefined"}c(n,"undefined"),t.undefined=n;function i(g){return g===!0||g===!1}c(i,"boolean"),t.boolean=i;function o(g){return e.call(g)==="[object String]"}c(o,"string"),t.string=o;function a(g){return e.call(g)==="[object Number]"}c(a,"number"),t.number=a;function s(g,S,y){return e.call(g)==="[object Number]"&&S<=g&&g<=y}c(s,"numberRange"),t.numberRange=s;function l(g){return e.call(g)==="[object Number]"&&-2147483648<=g&&g<=2147483647}c(l,"integer"),t.integer=l;function u(g){return e.call(g)==="[object Number]"&&0<=g&&g<=2147483647}c(u,"uinteger"),t.uinteger=u;function d(g){return e.call(g)==="[object Function]"}c(d,"func"),t.func=d;function f(g){return g!==null&&typeof g=="object"}c(f,"objectLiteral"),t.objectLiteral=f;function p(g,S){return Array.isArray(g)&&g.every(S)}c(p,"typedArray"),t.typedArray=p})(ge||(ge={}));var Ls;(function(t){function e(n){return typeof n=="string"||n instanceof String}c(e,"string"),t.string=e;function r(n){return typeof n=="number"||n instanceof Number}c(r,"number"),t.number=r})(Ls||(Ls={}));var Jh;(function(t){function e(r){const n=r;return n!=null&&(Ls.number(n.value)||Ls.string(n.value))&&Ls.string(n.target)}c(e,"is"),t.is=e})(Jh||(Jh={}));class uv extends h.Diagnostic{constructor(e,r,n,i){super(e,r,n);this.data=i,this.hasDiagnosticCode=!1}}c(uv,"ProtocolDiagnostic");var Vn;(function(t){const e=Object.prototype.toString;function r(d){return typeof d!="undefined"}c(r,"defined"),t.defined=r;function n(d){return d===!0||d===!1}c(n,"boolean"),t.boolean=n;function i(d){return e.call(d)==="[object String]"}c(i,"string"),t.string=i;function o(d){return e.call(d)==="[object Number]"}c(o,"number"),t.number=o;function a(d){return d!==null&&typeof d=="object"}c(a,"objectLiteral"),t.objectLiteral=a;function s(d){return Array.isArray(d)}c(s,"array"),t.array=s;function l(d){return s(d)&&d.every(f=>i(f))}c(l,"stringArray"),t.stringArray=l;function u(d,f){return Array.isArray(d)&&d.every(f)}c(u,"typedArray"),t.typedArray=u})(Vn||(Vn={}));var $l;(function(t){function e(r){const n=r;return n&&Vn.string(n.language)&&Vn.string(n.value)}c(e,"is"),t.is=e})($l||($l={}));function xx(t){const e=c(U=>h.Uri.parse(U),"nullConverter"),r=t!=null?t:e;function n(U){return r(U)}c(n,"asUri");function i(U){return U.map(o)}c(i,"asDiagnostics");function o(U){const De=new uv(f(U.range),U.message,g(U.severity),U.data);return U.code!==void 0&&(Kh.is(U.codeDescription)?De.code={value:U.code,target:n(U.codeDescription.href)}:Jh.is(U.code)?(De.hasDiagnosticCode=!0,De.code={value:U.code.value,target:n(U.code.target)}):De.code=U.code),U.source&&(De.source=U.source),U.relatedInformation&&(De.relatedInformation=a(U.relatedInformation)),Array.isArray(U.tags)&&(De.tags=l(U.tags)),De}c(o,"asDiagnostic");function a(U){return U.map(s)}c(a,"asRelatedInformation");function s(U){return new h.DiagnosticRelatedInformation(Q(U.location),U.message)}c(s,"asDiagnosticRelatedInformation");function l(U){if(!U)return;const De=[];for(const vt of U){const Ar=u(vt);Ar!==void 0&&De.push(Ar)}return De.length>0?De:void 0}c(l,"asDiagnosticTags");function u(U){switch(U){case Dl.Unnecessary:return h.DiagnosticTag.Unnecessary;case Dl.Deprecated:return h.DiagnosticTag.Deprecated;default:return}}c(u,"asDiagnosticTag");function d(U){if(!!U)return new h.Position(U.line,U.character)}c(d,"asPosition");function f(U){if(!!U)return new h.Range(d(U.start),d(U.end))}c(f,"asRange");function p(U){return U.map(De=>f(De))}c(p,"asRanges");function g(U){if(U==null)return h.DiagnosticSeverity.Error;switch(U){case Ia.Error:return h.DiagnosticSeverity.Error;case Ia.Warning:return h.DiagnosticSeverity.Warning;case Ia.Information:return h.DiagnosticSeverity.Information;case Ia.Hint:return h.DiagnosticSeverity.Hint}return h.DiagnosticSeverity.Error}c(g,"asDiagnosticSeverity");function S(U){if(Vn.string(U))return new h.MarkdownString(U);if($l.is(U))return new h.MarkdownString().appendCodeblock(U.value,U.language);if(Array.isArray(U)){const vt=[];for(const Ar of U){const pc=new h.MarkdownString;$l.is(Ar)?pc.appendCodeblock(Ar.value,Ar.language):pc.appendMarkdown(Ar),vt.push(pc)}return vt}let De;switch(U.kind){case Ei.Markdown:return new h.MarkdownString(U.value);case Ei.PlainText:return De=new h.MarkdownString,De.appendText(U.value),De;default:return De=new h.MarkdownString,De.appendText(`Unsupported Markup content received. Kind is: ${U.kind}`),De}}c(S,"asHoverContent");function y(U){if(Vn.string(U))return U;switch(U.kind){case Ei.Markdown:return new h.MarkdownString(U.value);case Ei.PlainText:return U.value;default:return`Unsupported Markup content received. Kind is: ${U.kind}`}}c(y,"asDocumentation");function b(U){if(!!U)return new h.Hover(S(U.contents),f(U.range))}c(b,"asHover");function _(U){if(!!U)return new h.TextEdit(f(U.range),U.newText)}c(_,"asTextEdit");function C(U){if(!!U)return U.map(_)}c(C,"asTextEdits");function k(U){if(!U)return;const De=new h.SignatureHelp;return Vn.number(U.activeSignature)?De.activeSignature=U.activeSignature:De.activeSignature=0,Vn.number(U.activeParameter)?De.activeParameter=U.activeParameter:De.activeParameter=0,U.signatures&&(De.signatures=F(U.signatures)),De}c(k,"asSignatureHelp");function F(U){return U.map($)}c(F,"asSignatureInformations");function $(U){const De=new h.SignatureInformation(U.label);return U.documentation!==void 0&&(De.documentation=y(U.documentation)),U.parameters!==void 0&&(De.parameters=ne(U.parameters)),U.activeParameter!==void 0&&(De.activeParameter=U.activeParameter),De}c($,"asSignatureInformation");function ne(U){return U.map(ie)}c(ne,"asParameterInformations");function ie(U){const De=new h.ParameterInformation(U.label);return U.documentation&&(De.documentation=y(U.documentation)),De}c(ie,"asParameterInformation");function Q(U){if(!!U)return new h.Location(r(U.uri),f(U.range))}c(Q,"asLocation");function me(U){if(!!U)return xe(U)}c(me,"asDeclarationResult");function se(U){if(!!U)return xe(U)}c(se,"asDefinitionResult");function fe(U){if(!U)return;const De={targetUri:r(U.targetUri),targetRange:f(U.targetSelectionRange),originSelectionRange:f(U.originSelectionRange),targetSelectionRange:f(U.targetSelectionRange)};if(!De.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return De}c(fe,"asLocationLink");function xe(U){if(!!U)return Vn.array(U)?U.length===0?[]:kl.is(U[0])?U.map(Ar=>fe(Ar)):U.map(vt=>Q(vt)):kl.is(U)?[fe(U)]:Q(U)}c(xe,"asLocationResult");function Ge(U){if(!!U)return U.map(De=>Q(De))}c(Ge,"asReferences");function ce(U){if(!!U)return U.map(Se)}c(ce,"asDocumentHighlights");function Se(U){const De=new h.DocumentHighlight(f(U.range));return Vn.number(U.kind)&&(De.kind=Ne(U.kind)),De}c(Se,"asDocumentHighlight");function Ne(U){switch(U){case $s.Text:return h.DocumentHighlightKind.Text;case $s.Read:return h.DocumentHighlightKind.Read;case $s.Write:return h.DocumentHighlightKind.Write}return h.DocumentHighlightKind.Text}c(Ne,"asDocumentHighlightKind");function Fe(U,De){if(!!U)return U.map(vt=>Ct(vt,De))}c(Fe,"asSymbolInformations");function Je(U){return U<=Xh.TypeParameter?U-1:h.SymbolKind.Property}c(Je,"asSymbolKind");function it(U){switch(U){case Yh.Deprecated:return h.SymbolTag.Deprecated;default:return}}c(it,"asSymbolTag");function ht(U){if(U==null)return;const De=[];for(const vt of U){const Ar=it(vt);Ar!==void 0&&De.push(Ar)}return De.length===0?void 0:De}c(ht,"asSymbolTags");function Ct(U,De){const vt=new h.SymbolInformation(U.name,Je(U.kind),f(U.location.range),U.location.uri?r(U.location.uri):De);return _e(vt,U),U.containerName&&(vt.containerName=U.containerName),vt}c(Ct,"asSymbolInformation");function Ut(U){if(U!=null)return U.map(fn)}c(Ut,"asDocumentSymbols");function fn(U){var De;const vt=new h.DocumentSymbol(U.name,(De=U.detail)!=null?De:"",Je(U.kind),f(U.range),f(U.selectionRange));if(_e(vt,U),U.children!==void 0&&U.children.length>0){const Ar=[];for(const pc of U.children)Ar.push(fn(pc));vt.children=Ar}return vt}c(fn,"asDocumentSymbol");function _e(U,De){U.tags=ht(De.tags),De.deprecated&&(U.tags?U.tags.includes(h.SymbolTag.Deprecated)||(U.tags=U.tags.concat(h.SymbolTag.Deprecated)):U.tags=[h.SymbolTag.Deprecated])}c(_e,"fillTags");function $e(U){const De={title:U.title,command:U.command};return U.arguments&&(De.arguments=U.arguments),De}c($e,"asCommand");function Ve(U){if(!!U)return U.map($e)}c(Ve,"asCommands");const We=new Map;We.set(jn.Empty,h.CodeActionKind.Empty),We.set(jn.QuickFix,h.CodeActionKind.QuickFix),We.set(jn.Refactor,h.CodeActionKind.Refactor),We.set(jn.RefactorExtract,h.CodeActionKind.RefactorExtract),We.set(jn.RefactorInline,h.CodeActionKind.RefactorInline),We.set(jn.RefactorRewrite,h.CodeActionKind.RefactorRewrite),We.set(jn.Source,h.CodeActionKind.Source),We.set(jn.SourceOrganizeImports,h.CodeActionKind.SourceOrganizeImports);function tt(U){if(U==null)return;let De=We.get(U);if(De)return De;const vt=U.split(".");De=h.CodeActionKind.Empty;for(const Ar of vt)De=De.append(Ar);return De}c(tt,"asCodeActionKind");function ut(U){if(U!=null)return U.map(De=>tt(De))}c(ut,"asCodeActionKinds");function lt(U){if(U==null)return;const De=new h.CodeAction(U.title);return U.kind!==void 0&&(De.kind=tt(U.kind)),U.diagnostics&&(De.diagnostics=i(U.diagnostics)),U.edit&&(De.edit=Et(U.edit)),U.command&&(De.command=$e(U.command)),U.isPreferred!==void 0&&(De.isPreferred=U.isPreferred),De}c(lt,"asCodeAction");function Et(U){if(!U)return;const De=new h.WorkspaceEdit;return U.documentChanges?U.documentChanges.forEach(vt=>{if(ka.is(vt))De.createFile(r(vt.uri),vt.options);else if(Da.is(vt))De.renameFile(r(vt.oldUri),r(vt.newUri),vt.options);else if(Fa.is(vt))De.deleteFile(r(vt.uri),vt.options);else if(Ms.is(vt))De.set(r(vt.textDocument.uri),C(vt.edits));else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(vt,void 0,4)}`)}):U.changes&&Object.keys(U.changes).forEach(vt=>{De.set(r(vt),C(U.changes[vt]))}),De}c(Et,"asWorkspaceEdit");function Vt(U){return new h.Color(U.red,U.green,U.blue,U.alpha)}c(Vt,"asColor");function tr(U){return new h.ColorInformation(f(U.range),Vt(U.color))}c(tr,"asColorInformation");function Lr(U){if(Array.isArray(U))return U.map(tr)}c(Lr,"asColorInformations");function Di(U){const De=new h.ColorPresentation(U.label);return De.additionalTextEdits=C(U.additionalTextEdits),U.textEdit&&(De.textEdit=_(U.textEdit)),De}c(Di,"asColorPresentation");function wu(U){if(Array.isArray(U))return U.map(Di)}c(wu,"asColorPresentations");function ja(U){if(U)switch(U){case Ps.Comment:return h.FoldingRangeKind.Comment;case Ps.Imports:return h.FoldingRangeKind.Imports;case Ps.Region:return h.FoldingRangeKind.Region}}c(ja,"asFoldingRangeKind");function pn(U){return new h.FoldingRange(U.startLine,U.endLine,ja(U.kind))}c(pn,"asFoldingRange");function sp(U){if(Array.isArray(U))return U.map(pn)}c(sp,"asFoldingRanges");function cp(U){return new h.SelectionRange(f(U.range),U.parent?cp(U.parent):void 0)}c(cp,"asSelectionRange");function jE(U){if(!Array.isArray(U))return[];const De=[];for(const vt of U)De.push(cp(vt));return De}return c(jE,"asSelectionRanges"),{asUri:n,asDiagnostics:i,asDiagnostic:o,asRange:f,asRanges:p,asPosition:d,asDiagnosticSeverity:g,asDiagnosticTag:u,asHover:b,asTextEdit:_,asTextEdits:C,asSignatureHelp:k,asSignatureInformations:F,asSignatureInformation:$,asParameterInformations:ne,asParameterInformation:ie,asDeclarationResult:me,asDefinitionResult:se,asLocation:Q,asReferences:Ge,asDocumentHighlights:ce,asDocumentHighlight:Se,asDocumentHighlightKind:Ne,asSymbolKind:Je,asSymbolTag:it,asSymbolTags:ht,asSymbolInformations:Fe,asSymbolInformation:Ct,asDocumentSymbols:Ut,asDocumentSymbol:fn,asCommand:$e,asCommands:Ve,asCodeAction:lt,asCodeActionKind:tt,asCodeActionKinds:ut,asWorkspaceEdit:Et,asFoldingRangeKind:ja,asFoldingRange:pn,asFoldingRanges:sp,asColor:Vt,asColorInformation:tr,asColorInformations:Lr,asColorPresentation:Di,asColorPresentations:wu,asSelectionRange:cp,asSelectionRanges:jE}}c(xx,"createConverter");const sr=(0,wx.loadMessageBundle)();var Gn;(function(t){function e(n,i){const{provider:o,repo:a}=i instanceof h.Uri?n.getVirtualUriMetadata(i):i;return n.getRemoteUri(o.id,{repo:a})}c(e,"externalUri"),t.externalUri=e;function r(n,i){const{provider:o,repo:a}=i instanceof h.Uri?n.getVirtualUriMetadata(i):i;return n.getRemoteUri(o.id,{repo:a})}c(r,"externalIndexUri"),t.externalIndexUri=r})(Gn||(Gn={}));var Yi;(function(t){function e(i){if(i.HEAD.type===q.Branch||i.HEAD.type===q.RemoteBranch)return i.HEAD.name}c(e,"getBranchName"),t.getBranchName=e;function r(i){if(i.HEAD.type!==q.Branch)return;if(i.pullRequest!==void 0)return i.HEAD.name;const o=i.HEAD.name;return o===void 0||o.startsWith("refs/heads/")?o:`refs/heads/${o}`}c(r,"getIndexBranchName"),t.getIndexBranchName=r;async function n(i,o,a=pr.timeout){const s=await i.getMetadata(o),l=Gn.externalIndexUri(i,s),u=t.getIndexBranchName(s);if(!(l===void 0||u===void 0))return pr.getIndexedTip(l,u,{authentication:i.getAuthentication(o)},a)}c(n,"getIndexedTip"),t.getIndexedTip=n})(Yi||(Yi={}));var Bs;(function(t){const e=new Si(1024);function r(a,s,l){let u=e.get(l);return u!==void 0||(u=a.getCommit(s,l),e.set(l,u)),u}c(r,"get"),t.get=r;async function n(a,s,l){const u=[];for(const f of l)u.push(r(a,s,f));const d=[];for(const f of await Promise.all(u))f!==void 0&&d.push(f);return d}c(n,"all"),t.all=n;function i(a,s){const l=a.commitDate,u=s.commitDate;return l===void 0&&u===void 0?0:l===void 0?1:u===void 0?-1:l<u?1:l>u?-1:0}c(i,"sort"),t.sort=i;function o(a){const s=a.authorName!==void 0?`  \u2022  ${a.authorName}`:"",l=a.commitDate!==void 0?`  \u2022  ${Fs(a.commitDate,{ago:!0})}`:"",u=a.branchName!==void 0?` - ${a.branchName}`:"",d=a.tags!==void 0?typeof a.tags=="string"?`  \u2022  ${a.tags}`:`  \u2022  ${a.tags.join(" ")}`:"";return{author:s,date:l,branch:u,tag:d}}c(o,"getCommitInfo"),t.getCommitInfo=o})(Bs||(Bs={}));var dv;(function(t){t[t.Unknown=0]="Unknown",t[t.New=1]="New",t[t.Failed=2]="Failed",t[t.Partial=3]="Partial",t[t.InProgress=4]="InProgress",t[t.Complete=5]="Complete",t[t.PartialIndex=6]="PartialIndex",t[t.CompleteIndex=7]="CompleteIndex"})(dv||(dv={}));var Ll;(function(t){function e(n){return{workspaceId:n.WorkspaceId,snapshotId:n.SnapshotId,state:n.State,commitId:n.commitId.toLowerCase(),branchName:r(n.BranchName),creationDate:new Date(n._ts*1e3)}}c(e,"asWorkspaceSnapshot"),t.asWorkspaceSnapshot=e;function r(n){if(n!==null)return n.startsWith("refs/heads/")?n.substr(11):n}c(r,"getBranchName")})(Ll||(Ll={}));var pr;(function(t){t.timeout=5*60*1e3;const e=new Si(32),r=new Si(32);async function n(d,f,p,g=t.timeout){const S=await i(d,f,p,g);if(!(S===void 0||S.length===0))return S[0]}c(n,"getIndexedTip"),t.getIndexedTip=n;async function i(d,f,p,g=t.timeout){const S=a(d,f);let y=e.get(S);if(y===void 0||y!==void 0&&Date.now()-y.time>g){const b=ln.getAllWorkspaceSnapshots(d,p,f);y={time:Date.now(),promise:b,snapshots:void 0},e.set(S,y)}if(y.snapshots!==null){if(y.snapshots===void 0){let b=await y.promise;if(b===void 0){y.snapshots=null;return}b.sort((_,C)=>C.creationDate.getTime()-_.creationDate.getTime()),b=b.filter(_=>_.state===5||_.state===3),y.snapshots=b}return y.snapshots}}c(i,"all"),t.all=i;async function o(d,f,p,g,S=t.timeout){const y=d.toString();let b=r.get(y);if(b===null)return;if(b!==void 0)return b;const _=a(d,p),C=e.get(_);if(C!==void 0&&Date.now()-C.time<=S){if(C.snapshots===null)return;const k=C.snapshots!==void 0?C.snapshots:await i(d,p,g);if(k!==void 0){for(const F of k)if(F.commitId===f)return F}return}if(b=await ln.getWorkspaceSnapshot(f,g),b===void 0){r.set(y,null);return}return r.set(y,b),b}c(o,"single"),t.single=o;function a(d,f){return f!==void 0?`${f}\\${d.toString()}`:d.toString()}c(a,"getAllCacheKey");async function s(d,f,p,g=t.timeout){return await o(d,f,void 0,p,g)!==void 0}c(s,"exists"),t.exists=s;async function l(d,f,p,g=t.timeout){return await i(d,f,p,g)!==void 0}c(l,"branch"),t.branch=l;async function u(d,f,p){const g=new Map(p.map(b=>[b.commitId,b])),S=await Bs.all(d,f.uri,p.map(b=>b.commitId));if(S.length===0)return;const y=[];for(const b of S){const _=g.get(b.hash);_!==void 0&&y.push({..._,commit:b})}if(y.length!==0)return y}c(u,"resolve"),t.resolve=u})(pr||(pr={}));var Kn;(function(t){function e(r=!1){return{hoverProvider:r,declarationProvider:r,definitionProvider:r,typeDefinitionProvider:r,referencesProvider:r,documentSymbolProvider:r,foldingRangeProvider:r,diagnosticProvider:r}}c(e,"create"),t.create=e})(Kn||(Kn={}));var ln;(function(t){const e="v0.1",r="https://prod.richnav.vsengsaas.visualstudio.com/api";async function n(_,C,k){var F;const $=await ks(_,{method:"POST",body:JSON.stringify(C),headers:{"Content-Type":"application/json",...(await k.authentication).getRichNavigationHeaders(),"x-correlation-id":(F=k.correlationId)!=null?F:S0()}});if(!!$.ok)return $.json()}c(n,"postRequest");async function i(_,C,k){const F=await ks(_,{method:"POST",body:C,headers:(await k.authentication).getRichNavigationHeaders()});if(!!F.ok)return await F.json()}c(i,"postForm");function o(_,C){return`${r}/${e}/HttpLanguageService/${_}/${C}`}c(o,"makeRequestUrl");async function a(_,C){const k=await ks(`${r}/${e}/WorkspaceSnapshot?commitId=${_}`,{headers:(await C.authentication).getRichNavigationHeaders()});if(k.ok){const F=await k.json();return{workspaceId:F.workspaceId,snapshotId:F.snapshotId,state:F.state,commitId:_.toLowerCase(),branchName:void 0,creationDate:new Date}}}c(a,"getWorkspaceSnapshot"),t.getWorkspaceSnapshot=a;async function s(_,C,k){const F=new x0;F.append("uriString",_.toString(!0)),k!==void 0&&F.append("branchName",k);try{const $=await i(`${r}/${e}/WorkspaceSnapshot/all`,F,C);return $===void 0?void 0:$.map(Ll.asWorkspaceSnapshot)}catch($){V.error($);return}}c(s,"getAllWorkspaceSnapshots"),t.getAllWorkspaceSnapshots=s;async function l(_,C,k){const F=new x0;F.append("uriString",_.toString(!0)),k!==void 0&&F.append("branchName",k);try{const $=await i(`${r}/${e}/WorkspaceSnapshot/latest`,F,C);return $===void 0?void 0:Ll.asWorkspaceSnapshot($)}catch($){V.error($);return}}c(l,"getLatestWorkspaceSnapshot"),t.getLatestWorkspaceSnapshot=l;async function u(_,C,k){try{return n(o(_,"textDocument/capabilities"),C,k)}catch(F){V.error(F);return}}c(u,"capabilities"),t.capabilities=u;async function d(_,C,k){try{return n(o(_,"textDocument/hover"),C,k)}catch(F){V.error(F);return}}c(d,"provideHover"),t.provideHover=d;async function f(_,C,k){try{return n(o(_,"textDocument/definition"),C,k)}catch(F){V.error(F);return}}c(f,"provideDefinition"),t.provideDefinition=f;async function p(_,C,k){try{return n(o(_,"textDocument/declaration"),C,k)}catch(F){V.error(F);return}}c(p,"provideDeclaration"),t.provideDeclaration=p;async function g(_,C,k){try{return n(o(_,"textDocument/typeDefinition"),C,k)}catch(F){V.error(F);return}}c(g,"provideTypeDefinition"),t.provideTypeDefinition=g;async function S(_,C,k){try{return n(o(_,"textDocument/references"),C,k)}catch(F){V.error(F);return}}c(S,"provideReferences"),t.provideReferences=S;async function y(_,C,k){try{return n(o(_,"textDocument/foldingRange"),C,k)}catch(F){V.error(F);return}}c(y,"providerFoldingRanges"),t.providerFoldingRanges=y;async function b(_,C,k){const F=h.Uri.from({scheme:"https",authority:"prod.richnav.vsengsaas.visualstudio.com",path:`/api/${e}/Workspace/${_}/${C}/assets/designtime`,query:`id=${k}`});try{const $=await ks(F.toString().replace("?id%3D","?id="),{method:"GET",headers:{accept:"text/plain"}});return $.ok?$.text():void 0}catch($){V.error($);return}}c(b,"getDesignTimeFileContent"),t.getDesignTimeFileContent=b})(ln||(ln={}));class hv{constructor(e,r){this.providerService=e,this.telemetryService=r,this.metadata=new Map;const n=[];n.push(this.providerService.onDidChangeRepositories(i=>{var o;for(const a of i.added){const s=a.uri,l=ke.getIndexMemento(s);if(l!==void 0){const u=Gn.externalIndexUri(this.providerService,s);u!==void 0&&(typeof((o=l.branch)==null?void 0:o.name)=="string"?pr.all(u,l.branch.name,{authentication:this.providerService.getAuthentication(s)}).catch(void 0):typeof l.ref=="string"&&T(l.ref)&&pr.single(u,l.ref,void 0,{authentication:this.providerService.getAuthentication(s)}).catch(void 0))}this.providerService.getMetadata(s).then(u=>{const d={},f=u.pullRequest===void 0?Yi.getIndexBranchName(u):void 0;f!==void 0?d.branch={name:f}:d.ref=u.HEAD.sha,ke.setIndexMemento(s,d).then(void 0,void 0)},void 0)}})),n.push(this.providerService.onDidChangeRepository(i=>{const o=i.repository.uri,a=E(o);this.metadata.delete(a),this.getIndexMetadata(o).catch(void 0)})),this.disposable=h.Disposable.from(...n)}dispose(){this.disposable.dispose()}async resolveIndexRef(e,r){const n=await this.providerService.getModeRefType(e),i=ii.decode(e);if(i!==void 0){if(i.type===cr.Latest)return n===oe.Branch?this.getIndexedTip(e,r?0:pr.timeout):void 0;if(i.type===cr.SHA){const a=Gn.externalIndexUri(this.providerService,e);return a===void 0?void 0:await pr.exists(a,i.sha,{authentication:this.providerService.getAuthentication(e)},r?0:pr.timeout)?i.sha:void 0}}if(this.providerService.getModeConfig(e,n).index===qe.Latest)return this.getIndexedTip(e,r?0:pr.timeout)}refresh(e){for(const r of e)this.metadata.delete(r.toString())}getIndexMetadata(e){const r=this.providerService.getVirtualRootUri(e),n=E(r);let i=this.metadata.get(n);return i!==void 0||(i=this.createIndexMetadata(e),this.metadata.set(n,i)),i}async getIndexedTip(e,r=pr.timeout){const n=await Yi.getIndexedTip(this.providerService,e,r);return n!==void 0?n.commitId:void 0}async createIndexMetadata(e){const r=new Z(`RichNavIndexProvider.createIndexMetadata(${e.toString()})`);try{const n=Gn.externalIndexUri(this.providerService,e);if(n===void 0)return;r.logStep("Getting metadata");const i=this.providerService.getMetadata(e),o=this.providerService.getModeRefType(e,i),a=await i;r.logStep("Getting snapshot",{suffix:" \u2022 Getting snapshot..."});const s=this.providerService.getAuthentication(e),l=a.pullRequest===void 0?Yi.getIndexBranchName(a):void 0,u=await pr.single(n,a.HEAD.sha,l,{authentication:this.providerService.getAuthentication(e)});if(a.HEAD.type===q.Branch||a.HEAD.type===q.RemoteBranch){const g=ii.decode(e);if(g!==void 0)return r.logStep("Handle legacy encoding",{suffix:" \u2022 Handle legacy encoding..."}),u===void 0?g.type===cr.Latest?(r.logStep("Getting branch snapshot",{suffix:" \u2022 Getting branch snapshot..."}),l!==void 0&&await pr.branch(n,l,{authentication:this.providerService.getAuthentication(e)})?{type:wt.Indexed}:{type:wt.NotIndexed}):{type:wt.NotIndexed}:g.type===cr.Latest||g.type===cr.SHA?{type:wt.Active,sha:Promise.resolve(u.commitId),branch:{name:u.branchName}}:{type:wt.Match,sha:Promise.resolve(u.commitId),branch:{name:u.branchName}}}r.logStep("Getting mode config",{suffix:" \u2022 Getting mode config..."});const f=this.providerService.getModeConfig(e,await o),p=this.providerService.getVirtualUriMetadata(e);if((f.index===qe.Latest||f.index===qe.Match)&&u!==void 0)return{type:wt.Active,sha:Promise.resolve(u.commitId),branch:{name:u.branchName}};if(f.index===qe.TipPlusLatest&&p.provider.id==="github"){if(u!==void 0&&u.commitId===a.HEAD.sha)return{type:wt.Active,sha:Promise.resolve(u.commitId),branch:{name:u.branchName}};if(a.HEAD.type===q.Branch&&l!==void 0){r.logStep("Getting closest index",{suffix:" \u2022 Getting closest index..."});const g=await pr.all(n,l,{authentication:s});if(g!==void 0&&g.length>0)return{type:wt.Active,sha:this.computeClosestIndex(e,a.HEAD.sha,g),branch:{name:l}}}}return u!==void 0?{type:wt.Indexed}:a.HEAD.type===q.Branch&&(r.logStep("Getting branch snapshot",{suffix:" \u2022 Getting branch snapshot..."}),l!==void 0&&await pr.branch(n,l,{authentication:s}))?{type:wt.Indexed}:{type:wt.NotIndexed}}finally{r.stop()}}async computeClosestIndex(e,r,n){if(n.length===0)throw new Error("At least on snapshot should exist");const i=new Set(n.map(d=>d.commitId)),o=await this.providerService.getCommits(e,{ref:r,limit:100});if(o===void 0)return;let a;for(const d of o.commits)if(d.hash===r){a=d;break}if(a===void 0)return;const s=new Map(o.commits.map(d=>[d.hash,d])),l=[a];let u;for(;l.length>0;){for(u=l.shift();u!==void 0&&!i.has(u.hash);)if(u.parents.length>0){for(let d=1;d<u.parents.length;d++){const f=s.get(u.parents[d]);f!==void 0&&l.push(f)}u=s.get(u.parents[0])}if(u!==void 0)break}return u!==void 0?u.hash:void 0}async getSnapshots(e,r){const n=Gn.externalIndexUri(this.providerService,e);if(n===void 0)return[];const i=await pr.all(n,void 0,{authentication:this.providerService.getAuthentication(e)});if(i===void 0)return[];const o=[];for(const a of i)a.branchName!==void 0&&o.push({workspaceId:a.workspaceId,snapshotId:a.snapshotId,hash:a.commitId,branch:{name:a.branchName}});return o}async getStatusBarContributions(e){const r=await this.providerService.getMetadata(e),[n,i]=await Promise.all([this.getIndexMetadata(e),this.providerService.getModeRefType(e,r)]),o=this.providerService.getModeConfig(e,i);if(n===void 0)return[];const{HEAD:a}=r,s=[];if(n!==void 0){let l;const u=[`${P(a.sha)}`];if(n.type===wt.Active){const d=await n.sha;o.index===qe.Latest||o.index===qe.Match?(l=o.display===ot.Browse?"$(layers-active)\u2009\u2009$(lock)":"$(layers-active)",u.push(sr("statusbar.active",`The commit is indexed and rich code navigation features are enabled.
The files in the workspace are readonly.`))):o.index===qe.TipPlusLatest&&(l="$(layers-dot)",d!==r.HEAD.sha?u.push(sr("statusbar.tipPlusLatest","The commit is not indexed. Rich code navigation features are enabled using a former indexed commit which might lead to fuzzy results.")):u.push(sr("statusbar.tipPlusLatest","The commit is indexed. Rich code navigation features are enabled. Files in the workspace can be modified which might lead to fuzzy results.")))}else n.type===wt.Match?(l="$(layers)",u.push(sr("statusbar.match",`The commit you are on is indexed, but rich navigation is not enabled.
Click the status bar item to enable it.`))):n.type===wt.Indexed&&(l="$(layers)",u.push(sr("statusbar.indexed",`The branch you are on is indexed, but rich navigation is not enabled.
Click the status bar item to enable it.`)));l&&s.push(En({command:"remoteHub.indexMode.select",title:l,tooltip:u.join(`
`),arguments:[{uri:e}]}))}return s}}c(hv,"RichNavIndexProvider");var Io;(function(t){let e;function r(){return e=h.window.createStatusBarItem(h.StatusBarAlignment.Right),e.text="$(compass)",e.command="remoteHub.indexMode.select",e.hide(),[e,h.window.onDidChangeActiveTextEditor(()=>{l()}),h.commands.registerCommand("remoteHub.indexMode.select",d=>{u(d).catch(f=>V.log("Selecting index mode failed.",f))})]}c(r,"create"),t.create=r;const n=new Map;function i(d){n.set(d.key(),d)}c(i,"addService"),t.addService=i;function o(d){n.delete(d.key())}c(o,"removeService"),t.removeService=o;function a(d){return n.get(E(d))}c(a,"getService");async function s(d){for(const f of n.values())if(await f.handles(d))return f}c(s,"getServiceForDocument");async function l(){try{let d=c(function(S){const y=S.lastIndexOf("/");return y<=0?S:S.substr(y+1)},"basename");const f=h.window.activeTextEditor;if(f===void 0){e.hide();return}const p=await s(f.document);if(p===void 0){e.hide();return}const g=await p.isDocumentIndexed(f.document);g===Bl.Indexed?(e.text="$(compass)",e.tooltip=new h.MarkdownString(sr("isIndexed","The source file '{0}' is indexed and provides rich code navigation features like Go to Declaration and Find all References.",d(f.document.uri.path))),e.show()):g===Bl.IndexMapped?(e.text="$(compass-dot)",e.tooltip=new h.MarkdownString(sr("isIndexed","The source file '{0}' provides rich code navigation features using an earlier indexed commit. Navigation results might be fuzzy.",d(f.document.uri.path))),e.show()):e.hide()}catch(d){e.hide()}}c(l,"updateStatusBarItem"),t.updateStatusBarItem=l;async function u(d){var f;const p=d.uri,g=a(p);if(g===void 0)return;const[S,y,b,_]=await Promise.all([g.getBranchName(),g.getMetadata(),g.getIndexMetadata(),g.getModeRefType(p)]);if(b===void 0||!wt.hasIndex(b.type))return;let C,k=!1;const F=ii.decode(p);(F==null?void 0:F.type)===cr.Latest||(F==null?void 0:F.type)===cr.SHA?(k=!0,C={display:ot.Browse,index:F.type===cr.Latest?qe.Latest:qe.Match}):C=(f=g.getCurrentIndexMode())!=null?f:g.getModeConfig(p,_);const $=g.getUriMetadata(),ne=sr("current item","{0} current","$(check)"),ie={indexKind:"disable",label:sr("RichNavStatus.disable.label","Disable"),description:C.index===qe.None?`  \u2022  ${ne}`:void 0,detail:sr("RichNavStatus.disable.detail","Disable rich navigation. {0}",$.provider.id==="github"?"Files will be writable.":"Files will be read-only.")};let Q,me;if(_===oe.PullRequestBranch||_===oe.PullRequestRemoteBranch||_===oe.Commit||_===oe.Tag){const se={indexKind:"match",label:sr("RichNavStatus.match.label","Current indexed commit - readonly"),description:C.index===qe.Match&&C.display===ot.Browse?`  \u2022  ${ne}`:void 0,detail:sr("RichNavStatus.match.detail","Enable rich navigation only if the current commit is indexed. Files will be read-only.")},fe={indexKind:"match+writeable",label:sr("RichNavStatus.matchWritable.label","Current indexed commit - writable"),description:C.index===qe.Match&&C.display===ot.Edit?`  \u2022  ${ne}`:void 0,detail:sr("RichNavStatus.match.detail","Enable rich navigation only if the current commit is indexed. Files will be writable.")};let xe=$.provider.id==="github";xe&&(xe=y.HEAD.type===q.RemoteBranch?y.HEAD.branch.remote.accessLevel>=z.Write:!0);const Ge=xe?[se,fe,ie]:[se,ie];me=await h.window.showQuickPick(Ge,{placeHolder:"Pick a rich navigation mode"})}else if(_===oe.Branch||_===oe.RemoteBranch){const se={indexKind:"latest",label:sr("RichNavStatus.latestIndexed.label","Latest indexed commit"),description:C.index===qe.Latest?`  \u2022  ${ne}`:void 0,detail:sr("RichNavStatus.latestIndexed.detail","Enable rich navigation on the latest indexed commit. Files will be read-only.")},fe={indexKind:"tip+latest",label:sr("RichNavStatus.matchLatestIndexed.label","Current commit & latest index"),description:C.index===qe.TipPlusLatest?`  \u2022  ${ne}`:void 0,detail:sr("RichNavStatus.matchLatestIndexed.detail","Enable rich navigation on the current commit using the latest index. Files will be writeable.")},xe=$.provider.id==="github"?[se,fe,ie]:[se,ie];me=await h.window.showQuickPick(xe,{placeHolder:sr("RichNavStatus.placeHolder","Pick a rich navigation mode for branch {0}",S)})}if(me!==void 0&&(me.indexKind==="disable"?Q={display:ot.Edit,index:qe.None}:me.indexKind==="match"?Q={display:ot.Browse,index:qe.Match}:me.indexKind==="match+writeable"?Q={display:ot.Edit,index:qe.Match}:me.indexKind==="tip+latest"?Q={display:ot.Edit,index:qe.TipPlusLatest}:me.indexKind==="latest"&&(Q={display:ot.Browse,index:qe.Latest}),Q!==void 0&&!Rt.equals(C,Q))){if(await g.hasChanges()&&Q.display===ot.Browse){await h.window.showInformationMessage("The repository has outgoing changes. Commit them first before switching to browse mode.",{modal:!0,useCustom:!0});return}if(await g.updateIndexMode(Q),k){const se=await g.getNonIndexedWorkspaceDescriptor();se!==void 0&&sn(se)}}}c(u,"toggleIndexMode")})(Io||(Io={}));class ef{constructor(e){this.telemetryService=e}static createStatus(){return Io.create()}async createNavigationService(e,r,n){const i=await e.getIndexMetadata(r.uri);if(!(i===void 0||i.type===wt.NotIndexed))return()=>new rf(e,r,n,this.telemetryService)}}c(ef,"RichNavServiceProvider");var Us;(function(t){const e=new RegExp("^vsck:\\/\\/([a-fA-F0-9]+)\\/(latest|[a-fA-F0-9]{15})\\/designtime\\/([a-fA-F0-9]+)(\\/?.*)$");function r(i){const o=e.exec(i);if(o===null||o.length!==5)return;const a={v:1,w:o[1],s:o[2],a:o[3]};return h.Uri.from({scheme:Ri.scheme,authority:X(JSON.stringify(a)),path:o[4]})}c(r,"toVSCode"),t.toVSCode=r;function n(i){if(i.scheme!==Ri.scheme)return;let o;try{return o=JSON.parse(ve(i.authority)),o===void 0?void 0:{workspaceId:o.w,snapshotId:o.s,assetId:`${o.a}${i.path}`}}catch{return}}c(n,"toRichNavComponents"),t.toRichNavComponents=n})(Us||(Us={}));const tf=c(class{constructor(){this._onDidChangeFile=new h.EventEmitter,this.cache=new Si(64),this.textEncoder=new TextEncoder}get onDidChangeFile(){return this._onDidChangeFile.event}watch(t,e){return tf.emptyDisposable}async stat(t){const e=await this.getFile(t);if(e===void 0)throw h.FileSystemError.FileNotFound();return{type:h.FileType.File,mtime:e.time,ctime:e.time,size:e.content.length,permissions:h.FilePermission.Readonly}}readDirectory(t){return[]}createDirectory(t){throw h.FileSystemError.NoPermissions()}async readFile(t){const e=await this.getFile(t);if(e===void 0)throw h.FileSystemError.FileNotFound();return e.content}writeFile(t,e,r){throw h.FileSystemError.NoPermissions()}delete(t,e){throw h.FileSystemError.NoPermissions()}rename(t,e,r){throw h.FileSystemError.NoPermissions()}async getFile(t){let e=this.cache.get(t.toString());if(e!==void 0)return e;if(t.scheme!==tf.scheme)return;const r=Us.toRichNavComponents(t);if(r===void 0)return;const n=await ln.getDesignTimeFileContent(r.workspaceId,r.snapshotId,r.assetId);if(n!==void 0)return e={content:this.textEncoder.encode(n),time:Date.now()},this.cache.set(t.toString(),e),e}},"_RichNavFileSystemProvider");let Ri=tf;Ri.scheme="vsck-fs",Ri.emptyDisposable={dispose:()=>{}};var Bl;(function(t){t[t.NotIndexed=0]="NotIndexed",t[t.IndexMapped=1]="IndexMapped",t[t.Indexed=2]="Indexed"})(Bl||(Bl={}));const Zn=c(class{static registerCapability(t,e,r){var n;const i=this.disabledCapabilities.get(t);if(i==null?void 0:i[e])return!1;const o=this.localCapabilities.get(t);return(o==null?void 0:o[e])?!1:(n=r[e])!=null?n:!1}constructor(t,e,r,n){this.providerService=t,this.repository=e,this.changeStore=r,this.telemetryService=n,this.repositoryRoot=`${e.uri.toString()}/`;const i=c((a=!1)=>{const s=this.repository.uri;a||(this.metadata=this.providerService.getMetadata(s),this.indexMetadata=this.providerService.getIndexMetadata(s)),Promise.all([this.metadata,this.indexMetadata,this.providerService.getModeRefType(s,this.metadata)]).then(async l=>{var u,d;const[f,p,g]=this.currentlyResolved,[S,y,b]=l,_=this.providerService.getModeConfig(s,b);if(f!==void 0&&p!==void 0&&g!==void 0&&f.HEAD.sha===S.HEAD.sha&&y!==void 0&&p.type===y.type&&g.index===_.index&&g.display===_.display){const k=(p==null?void 0:p.type)===wt.Active?await p.sha:void 0,F=(y==null?void 0:y.type)===wt.Active?await y.sha:void 0;if(k===F)return}const C={newDisplayMode:_.display,newIndexMode:_.index,newIndexType:(y==null?void 0:y.type)===void 0?"undefined":wt[y==null?void 0:y.type],currentDisplayMode:(u=g==null?void 0:g.display)!=null?u:"undefined",currentIndexMode:(d=g==null?void 0:g.index)!=null?d:"undefined",currentIndexType:(p==null?void 0:p.type)===void 0?"undefined":wt[p==null?void 0:p.type]};this.telemetryService.publicLog2("codex.handleRepositoryChanged",C),this.currentlyResolved=[S,y,_];for(const k of this.registeredFeatures.values())k.dispose();if(this.registeredFeatures.clear(),this.pendingCapabilitiesRequests.clear(),this.documentListeners!==void 0&&this.documentListeners.dispose(),this.workspaceSnapshot=void 0,this.mapper=void 0,Pi.isActive(y)){const k=Gn.externalIndexUri(this.providerService,S),F=await y.sha;if(k!==void 0&&F!==void 0){const $=await pr.single(k,F,Yi.getIndexBranchName(S),{authentication:this.providerService.getAuthentication(s)});$!==void 0&&(this.telemetryService.publicLog2("codex.foundSnapshot",{snapshotId:$.snapshotId}),this.workspaceSnapshot=$,this.documentListeners=this.installDocumentListeners(),((_==null?void 0:_.display)===ot.Edit||S.HEAD.sha!==F)&&(this.mapper=new N0(this.providerService,s,F,S.HEAD.sha)))}}await Io.updateStatusBarItem()}).then(void 0,void 0)},"handleRepositoryChanged");this.metadata=this.providerService.getMetadata(this.repository.uri),this.indexMetadata=this.providerService.getIndexMetadata(this.repository.uri),this.currentlyResolved=[void 0,void 0,void 0],this.registeredFeatures=new Map,this.pendingCapabilitiesRequests=new Map,this.capabilitiesCache=new Si(2048),this.knownDesignTimeFiles=new Set;const o=[];o.push(this.providerService.onDidChangeRepository(a=>{E(a.repository.uri)===E(this.repository.uri)&&i()})),o.push(this.providerService.onDidRefresh(a=>{for(const s of a)if(E(s)===E(this.repository.uri)){i();break}})),this.environmentListeners=h.Disposable.from(...o),i(!0),Io.addService(this),this.indexMetadata.then(async a=>{var s;const l=this.repository.uri;let u=!1;const d=ii.decode(this.repository.uri);if(d!==void 0&&a!==void 0&&(d.type===cr.Latest&&a.type!==wt.Active||d.type===cr.SHA&&(a.type!==wt.Active||await a.sha!==d.sha))&&(u=!0),!u){await this.metadata;const f=await this.providerService.getModeRefType(l,this.metadata),p=(s=this.currentlyResolved[2])!=null?s:this.providerService.getModeConfig(l,f,!0);p!==void 0&&p.display===ot.Browse&&a!==void 0&&p.index!==qe.None&&a.type!==wt.Active?u=!0:(a==null?void 0:a.type)===wt.Active&&await a.sha===void 0&&((p==null?void 0:p.display)===ot.Browse,u=!0)}u&&h.window.showWarningMessage(sr("RichNavService.latest.notIndexed","The repository got opened in rich code navigation mode but no corresponding index is available. Rich code navigation features are disabled.")).then(void 0,void 0)},void 0),Zn.fileSystemProvider===void 0&&(Zn.fileSystemProvider=new Ri,h.workspace.registerFileSystemProvider(Ri.scheme,Zn.fileSystemProvider))}getRepository(){return this.repository}async updateIndexMode(t){const e=this.currentlyResolved[2],r=t!==void 0;if(t===void 0){const n=this.repository.uri,i=await this.providerService.getModeRefType(n,this.metadata);t=this.providerService.getModeConfig(n,i),await new Promise(o=>setTimeout(o,1e3))}if(e===void 0||e.index!==t.index||e.display!==t.display){if(t.index===qe.Latest){await Promise.all([this.metadata,this.indexMetadata]);const n=await this.getIndexedTip();if(n===void 0)return;await this.sync(n.hash)}else t.index===qe.TipPlusLatest&&(await Promise.all([this.metadata,this.indexMetadata]),await this.sync());r&&await ke.setMode(this.repository.uri,t),this.refresh()}}getCurrentIndexMode(){return this.currentlyResolved[2]}key(){return E(this.repository.uri)}dispose(){for(const t of this.registeredFeatures.values())t.dispose();this.registeredFeatures.clear(),Io.removeService(this),this.documentListeners!==void 0&&(this.documentListeners.dispose(),this.documentListeners=void 0),this.environmentListeners!==void 0&&(this.environmentListeners.dispose(),this.environmentListeners=void 0)}handles(t){return t.uri.scheme!==Xt.scheme?Promise.resolve(!1):Promise.resolve(t.uri.toString().startsWith(this.repositoryRoot))}async getBranchName(){return Yi.getBranchName(await this.metadata)}async getMetadata(){return this.metadata}async getIndexMetadata(){return this.indexMetadata}getUriMetadata(){return this.providerService.getVirtualUriMetadata(this.repository.uri)}getModeConfig(t,e){return this.providerService.getModeConfig(t,e)}getModeRefType(t){return this.providerService.getModeRefType(t)}refresh(){return this.providerService.refresh()}async getNonIndexedWorkspaceDescriptor(){const{name:t,repo:e}=await this.metadata,{ref:r}=this.providerService.getVirtualUriMetadata(this.repository.uri);return{name:t,uri:this.providerService.createVirtualUri(this.repository.uri,{repo:e,ref:r}),location:W.CurrentWindow}}async isDocumentIndexed(t){await this.metadata;const e=await this.indexMetadata;if(e===void 0||e.type===wt.NotIndexed||this.workspaceSnapshot===void 0)return 0;const r=this.pendingCapabilitiesRequests.get(t.uri.toString());return r!==void 0&&await r,this.registeredFeatures.has(t.uri.toString())?this.mapper===void 0?2:await this.mapper.needsMapping(t)?1:2:0}async getIndexedTip(){const t=await this.metadata,e=Gn.externalIndexUri(this.providerService,t),r=Yi.getIndexBranchName(t);if(e===void 0||r===void 0)return;const n=await pr.getIndexedTip(e,r,{authentication:this.providerService.getAuthentication(this.repository.uri)});if(n===void 0)return;const i=await Bs.get(this.providerService,this.repository.uri,n.commitId);if(i!==void 0)return{...i,branchName:r}}hasChanges(){return this.changeStore.hasChanges(this.repository.uri)}sync(t){return this.providerService.sync(this.repository.uri,this.changeStore,{to:t,reason:"user"})}async getCommit(t){const e=await this.metadata,r=Gn.externalIndexUri(this.providerService,e);if(r===void 0)return;const[n,i]=await Promise.all([Bs.get(this.providerService,this.repository.uri,t),pr.single(r,t,void 0,{authentication:this.providerService.getAuthentication(this.repository.uri)})]);if(!(n===void 0||i===void 0))return{...n,branchName:i.branchName}}installDocumentListeners(){const t=[],e=c(async r=>{const n=r.uri.scheme;if(Xt.scheme!==n&&Ri.scheme!==n)return;const i=r.uri.toString();if(n===Xt.scheme&&!i.startsWith(this.repositoryRoot)||n===Ri.scheme&&!this.knownDesignTimeFiles.has(i)||this.pendingCapabilitiesRequests.has(i))return;const o=this.workspaceSnapshot!==void 0?this.workspaceSnapshot.commitId:void 0;if(o===void 0)return;let a=this.capabilitiesCache.get(i);if(a!==null){if(a===void 0){const s=this.capabilities(r.uri);this.pendingCapabilitiesRequests.set(i,s),a=await s,this.pendingCapabilitiesRequests.delete(i),this.capabilitiesCache.set(i,a===void 0?null:a)}a===void 0||!h.workspace.textDocuments.some(s=>s===r)||this.registerProviders(r,a,o)}},"openHandler");return t.push(h.workspace.onDidOpenTextDocument(e)),h.workspace.textDocuments.forEach(e),t.push(h.workspace.onDidCloseTextDocument(r=>{const n=r.uri.toString(),i=this.registeredFeatures.get(n);i!==void 0&&(this.registeredFeatures.delete(r.uri.toString()),i.dispose()),this.pendingCapabilitiesRequests.delete(n)})),h.Disposable.from(...t)}registerProviders(t,e,r){if(this.workspaceSnapshot===void 0)return;const n=this.workspaceSnapshot,i=t.languageId,a=[{scheme:this.repository.uri.scheme,pattern:t.uri.fsPath,language:t.languageId,exclusive:!0}],s=[],l=new Promise((y,b)=>{const _=`/${n.snapshotId}/source/`;this.metadata.then(C=>{y(xx(k=>{const F=h.Uri.parse(k);if(C===void 0)return F;try{if(F.scheme==="vsck"&&F.authority===n.workspaceId&&F.path.startsWith(_))return this.repository.createRelativeUri(F.path.substr(_.length));const $=Us.toVSCode(k);return $!==void 0?(this.knownDesignTimeFiles.add($.toString()),$):F}catch($){return F}}))},b)}),u=new RegExp(`^vsck:\\/\\/${n.workspaceId}\\/(?:latest|[a-fA-F0-9]{15})\\/designtime\\/(?:[a-fA-F0-9]+)(\\/?.*)$`);function d(y){const b=u.exec(y);return b===null||b.length===2}c(d,"designTimeFilter");function f(y){if(y==null)return y;if(Array.isArray(y)){if(y.length===0)return[];const b=y[0];return typeof b.uri=="string"?y.filter(k=>d(k.uri)):typeof b.targetUri=="string"?y.filter(k=>d(k.targetUri)):[]}return u.exec(y.uri)===null?y:void 0}c(f,"filterDesignTimeFiles");async function p(y,b,_){var C,k,F;if(_==null||y===void 0)return _;const $=new Map(h.workspace.textDocuments.map(ie=>[ie.uri.toString(!0),ie]));if(Array.isArray(_)){const ie=[],Q=[];if(_.length===0)return[];for(const me of _){const se=me;if(se.uri instanceof h.Uri){const fe=await y.mapRangeFromIndexToCode((C=$.get(se.uri.toString()))!=null?C:se.uri,se.range);fe!==void 0&&ie.push(new h.Location(se.uri,fe))}else{const fe=me,xe=(k=$.get(fe.targetUri.toString()))!=null?k:fe.targetUri,Ge=fe.originSelectionRange?await y.mapRangeFromIndexToCode(b,fe.originSelectionRange):void 0;if(Ge!==void 0||fe.originSelectionRange===void 0){const ce=await y.mapRangeFromIndexToCode(xe,fe.targetRange);if(ce!==void 0){const Se=fe.targetSelectionRange?await y.mapRangeFromIndexToCode(xe,fe.targetSelectionRange):void 0;(Se!==void 0||fe.targetSelectionRange===void 0)&&Q.push({targetUri:fe.targetUri,targetRange:ce,targetSelectionRange:Se,originSelectionRange:Ge})}}}}return ie.length>0?ie:Q}const ne=await y.mapRangeFromIndexToCode((F=$.get(_.uri.toString()))!=null?F:_.uri,_.range);if(ne!==void 0)return new h.Location(_.uri,ne)}c(p,"mapLocations");const g=c(y=>({authentication:this.providerService.getAuthentication(y.uri),correlationId:S0()}),"getRestApiOptions"),S=c((y,b)=>{const _={method:y,correlationId:b.correlationId};this.telemetryService.publicLog2("codex.restAPICall",_)},"sendTelemetry");Zn.registerCapability(i,"hoverProvider",e)&&s.push(h.languages.registerHoverProvider(a,{provideHover:async(y,b)=>{const _=await this.createTextDocumentPositionParams(y,b);if(_===void 0)return;const C=g(y);return S("codex.provideHover",C),(await l).asHover(await ln.provideHover(r,_,C))}})),Zn.registerCapability(i,"definitionProvider",e)&&s.push(h.languages.registerDefinitionProvider(a,{provideDefinition:async(y,b)=>{const _=await this.createTextDocumentPositionParams(y,b);if(_===void 0)return;const C=g(y);return S("codex.provideDefinition",C),p(this.mapper,y,(await l).asDefinitionResult(f(await ln.provideDefinition(r,_,C))))}})),Zn.registerCapability(i,"declarationProvider",e)&&s.push(h.languages.registerDeclarationProvider(a,{provideDeclaration:async(y,b)=>{const _=await this.createTextDocumentPositionParams(y,b);if(_===void 0)return;const C=g(y);return S("codex.provideDeclaration",C),p(this.mapper,y,(await l).asDeclarationResult(f(await ln.provideDeclaration(r,_,C))))}})),Zn.registerCapability(i,"typeDefinitionProvider",e)&&s.push(h.languages.registerTypeDefinitionProvider(a,{provideTypeDefinition:async(y,b)=>{const _=await this.createTextDocumentPositionParams(y,b);if(_===void 0)return;const C=g(y);return S("codex.provideTypeDefinition",C),p(this.mapper,y,(await l).asDefinitionResult(f(await ln.provideTypeDefinition(r,_,C))))}})),Zn.registerCapability(i,"referencesProvider",e)&&s.push(h.languages.registerReferenceProvider(a,{provideReferences:async(y,b,_)=>{const C=this.mapper!==void 0?await this.mapper.mapPositionFromCodeToIndex(y,b):b;if(C===void 0)return;const k={position:{line:C.line,character:C.character},textDocument:{uri:this.createRichNavDocumentUri(y.uri).toString(!0)},context:{includeDeclaration:_.includeDeclaration}},F=g(y);return S("codex.provideReferences",F),p(this.mapper,y,(await l).asReferences(f(await ln.provideReferences(r,k,F))))}})),Zn.registerCapability(i,"foldingRangeProvider",e)&&s.push(h.languages.registerFoldingRangeProvider(a,{provideFoldingRanges:async y=>{if(this.mapper!==void 0&&await this.mapper.needsMapping(y))return;const b=g(y);return S("codex.provideFoldingRanges",b),(await l).asFoldingRanges(await ln.providerFoldingRanges(r,this.createTextDocumentParams(y.uri),b))}})),this.registeredFeatures.set(t.uri.toString(),h.Disposable.from(...s)),Io.updateStatusBarItem()}async capabilities(t){var e;const r=this.workspaceSnapshot!==void 0?this.workspaceSnapshot.commitId:void 0;if(r!==void 0)return(e=await ln.capabilities(r,this.createTextDocumentParams(t),{authentication:this.providerService.getAuthentication(t)}))!=null?e:void 0}createTextDocumentParams(t){return{textDocument:{uri:this.createRichNavDocumentUri(t).toString(!0)}}}async createTextDocumentPositionParams(t,e){const r=this.mapper!==void 0?await this.mapper.mapPositionFromCodeToIndex(t,e):e;if(r!==void 0)return{position:{line:r.line,character:r.character},textDocument:{uri:this.createRichNavDocumentUri(t.uri).toString(!0)}}}createRichNavDocumentUri(t){if(t.scheme===Ri.scheme){const n=Us.toRichNavComponents(t);return n===void 0?t:h.Uri.file(n.assetId)}const e=this.repository.uri.toString(!0),r=t.toString(!0);return h.Uri.file(r.substr(e.length))}},"_RichNavService");let rf=Zn;rf.localCapabilities=new Map([["javascript",Object.assign(Kn.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})],["javascriptreact",Object.assign(Kn.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})],["typescript",Object.assign(Kn.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})],["typescriptreact",Object.assign(Kn.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})]]),rf.disabledCapabilities=new Map([["javascript",Object.assign(Kn.create(),{declarationProvider:!0})],["javascriptreact",Object.assign(Kn.create(),{declarationProvider:!0})],["typescript",Object.assign(Kn.create(),{declarationProvider:!0})],["typescriptreact",Object.assign(Kn.create(),{declarationProvider:!0})]]);var fv=c((t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},"__accessCheck"),Ji=c((t,e,r)=>(fv(t,e,"read from private field"),r?r.call(t):e.get(t)),"__privateGet"),pv=c((t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},"__privateAdd"),gv=c((t,e,r,n)=>(fv(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),"__privateSet"),Qn,Ul;class mv{constructor(e,r){pv(this,Qn,void 0),pv(this,Ul,void 0),gv(this,Qn,e),gv(this,Ul,r)}async loadWorkspaceContents(e){if(e.scheme!=="vscode-vfs")return!1;const r=Ji(this,Qn).getProviderRootUri(e);if(r.scheme!=="github")return!1;try{return await Ji(this,Ul).getTar(r,!1),!0}catch(n){return V.error(n),!1}}async getMetadata(e){const r=Ji(this,Qn).getVirtualUriMetadata(e);if(r===void 0)return;const{provider:n,repo:i}=r;return{provider:{id:n.id,name:n.name},repo:i,getRevision:async()=>{const{HEAD:o}=await Ji(this,Qn).getMetadata(e);return{type:o.type,name:o.name,revision:o.sha}}}}getProvider(e){return Ji(this,Qn).getRegisteredProvider(e)}getProviderUri(e){return de.getProviderUri(e)}getProviderRootUri(e){return Ji(this,Qn).getProviderRootUri(e)}isProviderUri(e,r){return e.scheme!==Xt.scheme&&Ji(this,Qn).hasProvider(e,r)}getVirtualUri(e){return de.getVirtualUri(e)}getVirtualWorkspaceUri(e){return Ji(this,Qn).getVirtualWorkspaceUri(e)}}c(mv,"ExtensionApi"),Qn=new WeakMap,Ul=new WeakMap;var Sx=Object.defineProperty,Cx=Object.getOwnPropertyDescriptor,nf=c((t,e,r,n)=>{for(var i=n>1?void 0:n?Cx(e,r):e,o=t.length-1,a;o>=0;o--)(a=t[o])&&(i=(n?a(e,r,i):a(i))||i);return n&&i&&Sx(e,r,i),i},"fs_decorateClass");const of=h.FileSystemError.FileNotFound().code;class Os{constructor(e,r){this.providerService=e,this.changeStore=r,this._onDidChangeFile=new h.EventEmitter,this.implicitlyWatchedUris=new Map,this.watchedUris=new Map,this.disposable=h.Disposable.from(h.workspace.registerFileSystemProvider(this.scheme,this,{isCaseSensitive:!0}),h.workspace.registerFileSearchProvider(this.scheme,this),h.workspace.registerTextSearchProvider(this.scheme,this),e.onDidChangeRepository(n=>{n.reason==="HEAD"&&this.onRefreshOrRepositoryChanged([n.repository.uri])}),e.onDidRefresh(n=>this.onRefreshOrRepositoryChanged(n)),r.onDidChange(n=>{const i=n.map(o=>{switch(o.type){case I.Created:return{type:h.FileChangeType.Created,uri:o.uri};case I.Changed:return{type:h.FileChangeType.Changed,uri:o.uri};case I.Deleted:return{type:h.FileChangeType.Deleted,uri:o.uri}}});setTimeout(()=>this._onDidChangeFile.fire(i),0)}))}get onDidChangeFile(){return this._onDidChangeFile.event}get scheme(){return Xt.scheme}dispose(){var e;(e=this.disposable)==null||e.dispose()}onRefreshOrRepositoryChanged(e){e=e.filter(r=>r.scheme===this.scheme),e.length!==0&&(V.log(`fs.onRefreshOrRepositoryChanged(${e.map(r=>r.toString()).join(", ")})`),this.updateOpenOrWatchedUris(e))}updateOpenOrWatchedUris(e){const r=de.getOpenUris(this.scheme,e);for(const[i,o]of[...this.watchedUris,...this.implicitlyWatchedUris])e.some(a=>A(o,a))&&(this.implicitlyWatchedUris.delete(i),r.set(i,o));V.debug(`fs.updateOpenOrWatchedUris(${e.map(i=>i.toString()).join(", ")}): uris=${r.size}`);for(const i of e)r.set(E(i),i);const n=[...r.values()].map(i=>({type:h.FileChangeType.Changed,uri:i}));setTimeout(()=>{V.debug(`fs.updateOpenOrWatchedUris: Firing events=${n.map(i=>i.uri.toString()).join(", ")}`),this._onDidChangeFile.fire(n)},0)}watch(e,r){const n=E(e);this.watchedUris.set(n,e);const i=this.providerService.watch(de.getProviderUri(e),r);return{dispose:()=>{this.watchedUris.delete(n),i.dispose()}}}async stat(e){const r=new Z(`fs.stat(${e.toString()})`);let n;try{if(this.changeStore.maybeHasChanges(this.providerService.getVirtualRootUri(e),e)!==!1){if(r.logStep("ChangeStore query"),n=await this.changeStore.stat(e),n!==void 0)return n;r.logStep("Provider query",{message:": Not found \u2022",suffix:" \u2022 Querying provider..."})}else r.logStep("Provider query"),this.implicitlyWatchedUris.set(E(e),e);return n=await this.providerService.stat(de.getProviderUri(e)),n}finally{n===void 0&&this.implicitlyWatchedUris.delete(E(e)),r.stop()}}async readDirectory(e){const r=new Z(`fs.readDirectory(${e.toString()})`);this.implicitlyWatchedUris.set(E(e),e);try{r.logStep("Provider query");let n=await this.providerService.readDirectory(de.getProviderUri(e));return this.changeStore.maybeHasChanges(this.providerService.getVirtualRootUri(e))!==!1&&(r.logStep("Applying changes",{suffix:" \u2022 Applying changes..."}),n=await this.changeStore.updateDirectoryEntries(e,n)),n}finally{r.stop()}}async createDirectory(e){const r=new Z(`fs.createDirectory(${e.toString()})`);try{await this.changeStore.createDirectory(e)}catch(n){throw V.error(n,r.context),n}finally{r.stop()}}async readFile(e){const r=new Z(`fs.readFile(${e.toString()})`),n=E(e);let i;try{if(this.changeStore.maybeHasChanges(this.providerService.getVirtualRootUri(e),e)!==!1){r.logStep("ChangeStore query");const o=await this.changeStore.readFile(e);if(o!==void 0)return o;r.logStep("Provider query",{message:": Not found \u2022",suffix:" \u2022 Querying provider..."})}else r.logStep("Provider query"),this.implicitlyWatchedUris.set(n,e);return i=await this.providerService.readFile(de.getProviderUri(e)),i}catch(o){throw o instanceof Br&&Pr.showProviderNotFoundMessage(o),o}finally{i===void 0&&this.implicitlyWatchedUris.delete(n),r.stop()}}async writeFile(e,r,n){const i=new Z(`fs.writeFile(${e.toString()})`,{},r.length,n);try{let o;try{if(o=await this.stat(e),!n.overwrite)throw h.FileSystemError.FileExists()}catch(a){if(a instanceof h.FileSystemError&&a.code===of){if(!n.create)throw h.FileSystemError.FileNotFound(e)}else throw a}try{if(o===void 0)await this.changeStore.createFile(e,r);else{i.logStep("Provider original query");let a;try{a=await this.providerService.readFile(de.getProviderUri(e))}catch(s){if(s instanceof h.FileSystemError&&s.code===of)a=new Uint8Array;else throw s}i.logStep("Writing file",{suffix:" \u2022 Writing file to Change Store..."}),await this.changeStore.writeFile(e,r,a)}}catch(a){throw V.error(a,i.context),a}}catch(o){throw o instanceof Br&&Pr.showProviderNotFoundMessage(o),o}finally{i.stop()}}async delete(e,r){const n=new Z(`fs.delete(${e.toString()})`,{},r);try{switch((await this.stat(e)).type){case h.FileType.File:await this.changeStore.deleteFile(e);break;case h.FileType.Directory:{await this.deleteDirectory(e,r);break}default:throw h.FileSystemError.NoPermissions()}}catch(i){throw V.error(i,n.context),i}finally{n.stop()}}async deleteDirectory(e,r){const n=new Z(`fs.deleteDirectory(${e.toString()})`,{},r);try{const i=await this.readDirectory(e);if(i.length!==0){if(!r.recursive&&i.some(([,o])=>o===h.FileType.Directory))throw h.FileSystemError.NoPermissions();for(const[o,a]of i)a===h.FileType.Directory?await this.deleteDirectory(h.Uri.joinPath(e,o),r):await this.changeStore.deleteFile(h.Uri.joinPath(e,o))}await this.changeStore.deleteDirectory(e)}catch(i){throw V.error(i,n.context),i}finally{n.stop()}}async rename(e,r,n){const i=new Z(`fs.rename(${e.toString()} -> ${r.toString()})`,{},n);try{switch((await this.stat(e)).type){case h.FileType.File:{const a=await this.readFile(e);await this.writeFile(r,a,{create:!0,overwrite:n.overwrite}),await this.delete(e,{recursive:!1});break}case h.FileType.Directory:{await this.renameDirectory(e,r,n);break}default:throw h.FileSystemError.NoPermissions()}}catch(o){throw V.error(o,i.context),o}finally{i.stop()}}async renameDirectory(e,r,n){const i=new Z(`fs.renameDirectory(${e.toString()} -> ${r.toString()})`,{},n);try{await this.copyDirectory(e,r,n),await this.delete(e,{recursive:!0})}catch(o){throw V.error(o,i.context),o}finally{i.stop()}}async copy(e,r,n){const i=new Z(`fs.copy(${e.toString()} -> ${r.toString()})`,{},n);try{switch((await this.stat(e)).type){case h.FileType.File:{const a=await this.readFile(e);await this.writeFile(r,a,{create:!0,overwrite:n.overwrite});break}case h.FileType.Directory:{await this.copyDirectory(e,r,n);break}default:throw h.FileSystemError.NoPermissions()}}catch(o){throw V.error(o,i.context),o}finally{i.stop()}}async copyDirectory(e,r,n){const i=new Z(`fs.copyDirectory(${e.toString()} -> ${r.toString()})`,{},n);try{if(await this.exists(r))throw h.FileSystemError.FileExists();try{await this.createDirectory(r);const o=await this.readDirectory(e);for(const[a,s]of o)s===h.FileType.Directory?await this.copyDirectory(h.Uri.joinPath(e,a),h.Uri.joinPath(r,a),n):await this.copy(h.Uri.joinPath(e,a),h.Uri.joinPath(r,a),n)}catch(o){throw V.error(o,i.context),o}}finally{i.stop()}}async exists(e){try{return await this.stat(e),!0}catch(r){if(r instanceof h.FileSystemError&&r.code===of)return!1;throw r}}async provideFileSearchResults(e,r,n){var i;const o=new Z(`fs.provideFileSearchResults(${e.pattern}, ${r.folder.toString()})`,{logLevel:ze.Debug});let a;try{return a=await this.providerService.provideFileSearchResults(e,{...r,folder:de.getProviderUri(r.folder)},n),a==null?void 0:a.map(s=>de.getVirtualUri(s))}catch(s){throw V.error(s,o.context),s}finally{o.stop({suffix:` \u2022 ${(i=a==null?void 0:a.length)!=null?i:0} results found`})}}provideTextSearchResults(e,r,n,i){return this.providerService.provideTextSearchResults(e,{...r,folder:de.getProviderUri(r.folder)},{report:o=>n.report({...o,uri:de.getVirtualUri(o.uri)})},i)}}c(Os,"ChangeTrackingFileSystem"),nf([be()],Os.prototype,"stat",1),nf([be()],Os.prototype,"readDirectory",1),nf([be()],Os.prototype,"readFile",1);var af=__webpack_require__(7360),Ex=__webpack_require__(919),sf=__webpack_require__.n(Ex);function vv(t,e,r){if(!(e==null?void 0:e.length)&&!(r==null?void 0:r.length))return new Set(t);let n;if(e==null?void 0:e.length){const i=new Set([...e,...e.map(a=>`${a}/**`)]),o=sf()(t,[...i],{dot:!0,nocase:!0});n=new Set(o)}if(r==null?void 0:r.length){const i=new Set([...r,...r.map(o=>`${o}/**`)]);if(n===void 0){const o=sf().not(t,[...i],{dot:!0,nocase:!0});n=new Set(o)}else sf()(t,[...i],{dot:!0,nocase:!0}).forEach(n.delete,n)}return n}c(vv,"globFilter");function Rx(t){return t.replace(/[\\{}*+?|^$.[\]()]/g,"\\$&")}c(Rx,"escapeRegExpCharacters");function Ax(t,e,r={}){if(!t)throw new Error("Cannot create regex from empty string");e||(t=Rx(t)),r.wholeWord&&(/\B/.test(t.charAt(0))||(t=`\\b${t}`),/\B/.test(t.charAt(t.length-1))||(t=`${t}\\b`));let n="gmu";return r.matchCase||(n+="i"),new RegExp(t,n)}c(Ax,"createRegExp");let wv,yv,cf;const Ix=c((t,e,r,n)=>{const i=`${e.join("--")};;;;${r.join("--")}`,o=t.map(s=>s.path).join("::");if(wv===o&&i==yv&&cf)return cf;const a=vv((n?t.filter(s=>s.size<n):t).map(s=>s.path),e,r);return wv=o,yv=i,cf=a,a},"generateIncludeSet"),Tx=c((t,e,r,n)=>{var i;const o=[];let a;if(typeof t=="string")a=t;else{const d=t;if(d[0]==255&&d[1]==254)a=new TextDecoder("utf-16le").decode(d);else if(d[0]==254&&d[1]==255)a=new TextDecoder("utf-16be").decode(d);else if(a=new TextDecoder("utf8").decode(d),a.slice(0,1e3).includes("\uFFFD")&&d.includes(0))return[]}const s=[];let l=null,u=n.remainingResultQuota;for(;(u===void 0||u>=0)&&(l=r.exec(a));)s.push({matchStartIndex:l.index,matchedText:l[0]}),u!==void 0&&u--;if(s.length){const d=new Set,f=new Set,p=[],g=c(C=>a.slice(p[C].start,p[C].end),"readLine");let S=0,y=null;const b=/\r?\n/g;for(;y=b.exec(a);)p.push({start:S,end:y.index}),S=y.index+y[0].length;S<a.length&&p.push({start:S,end:a.length});let _=0;for(const{matchStartIndex:C,matchedText:k}of s){if(u!==void 0&&u<0)break;for(;Boolean(p[_+1])&&C>p[_].end;)_++;let F=_;for(;Boolean(p[F+1])&&C+k.length>p[F].end;)F++;if(n.beforeContext)for(let se=Math.max(0,_-n.beforeContext);se<_;se++)d.add(se);let $="",ne=0;for(let se=_;se<=F;se++){let fe=g(se);((i=n.previewOptions)==null?void 0:i.charsPerLine)&&fe.length>n.previewOptions.charsPerLine&&(ne=Math.max(C-p[_].start-20,0),fe=fe.substr(ne,n.previewOptions.charsPerLine)),$+=`${fe}
`,f.add(se)}const ie=new h.Range(_,C-p[_].start,F,C+k.length-p[F].start),Q=new h.Range(0,C-p[_].start-ne,F-_,C+k.length-p[F].start-(F===_?ne:0)),me={uri:h.Uri.file(e),ranges:ie,preview:{text:$,matches:Q}};if(o.push(me),n.afterContext)for(let se=F+1;se<=Math.min(F+n.afterContext,p.length-1);se++)d.add(se)}for(const C of d)f.has(C)||o.push({uri:h.Uri.file(e),text:g(C),lineNumber:C+1})}return o},"getFileResults");/*! pako 2.0.4 https://github.com/nodeca/pako @license (MIT AND Zlib) */const kx=4,bv=0,_v=1,Dx=2;function Pa(t){let e=t.length;for(;--e>=0;)t[e]=0}c(Pa,"zero$1");const Fx=0,xv=1,Px=2,Nx=3,Mx=258,lf=29,Hs=256,Ws=Hs+1+lf,Na=30,uf=19,Sv=2*Ws+1,To=15,df=16,$x=7,hf=256,Cv=16,Ev=17,Rv=18,ff=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Ol=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Lx=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Av=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Bx=512,Ai=new Array((Ws+2)*2);Pa(Ai);const qs=new Array(Na*2);Pa(qs);const zs=new Array(Bx);Pa(zs);const js=new Array(Mx-Nx+1);Pa(js);const pf=new Array(lf);Pa(pf);const Hl=new Array(Na);Pa(Hl);function gf(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}c(gf,"StaticTreeDesc");let Iv,Tv,kv;function mf(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}c(mf,"TreeDesc");const Dv=c(t=>t<256?zs[t]:zs[256+(t>>>7)],"d_code"),Vs=c((t,e)=>{t.pending_buf[t.pending++]=e&255,t.pending_buf[t.pending++]=e>>>8&255},"put_short"),Kr=c((t,e,r)=>{t.bi_valid>df-r?(t.bi_buf|=e<<t.bi_valid&65535,Vs(t,t.bi_buf),t.bi_buf=e>>df-t.bi_valid,t.bi_valid+=r-df):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)},"send_bits"),Xn=c((t,e,r)=>{Kr(t,r[e*2],r[e*2+1])},"send_code"),Fv=c((t,e)=>{let r=0;do r|=t&1,t>>>=1,r<<=1;while(--e>0);return r>>>1},"bi_reverse"),Ux=c(t=>{t.bi_valid===16?(Vs(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=t.bi_buf&255,t.bi_buf>>=8,t.bi_valid-=8)},"bi_flush"),Ox=c((t,e)=>{const r=e.dyn_tree,n=e.max_code,i=e.stat_desc.static_tree,o=e.stat_desc.has_stree,a=e.stat_desc.extra_bits,s=e.stat_desc.extra_base,l=e.stat_desc.max_length;let u,d,f,p,g,S,y=0;for(p=0;p<=To;p++)t.bl_count[p]=0;for(r[t.heap[t.heap_max]*2+1]=0,u=t.heap_max+1;u<Sv;u++)d=t.heap[u],p=r[r[d*2+1]*2+1]+1,p>l&&(p=l,y++),r[d*2+1]=p,!(d>n)&&(t.bl_count[p]++,g=0,d>=s&&(g=a[d-s]),S=r[d*2],t.opt_len+=S*(p+g),o&&(t.static_len+=S*(i[d*2+1]+g)));if(y!==0){do{for(p=l-1;t.bl_count[p]===0;)p--;t.bl_count[p]--,t.bl_count[p+1]+=2,t.bl_count[l]--,y-=2}while(y>0);for(p=l;p!==0;p--)for(d=t.bl_count[p];d!==0;)f=t.heap[--u],!(f>n)&&(r[f*2+1]!==p&&(t.opt_len+=(p-r[f*2+1])*r[f*2],r[f*2+1]=p),d--)}},"gen_bitlen"),Pv=c((t,e,r)=>{const n=new Array(To+1);let i=0,o,a;for(o=1;o<=To;o++)n[o]=i=i+r[o-1]<<1;for(a=0;a<=e;a++){let s=t[a*2+1];s!==0&&(t[a*2]=Fv(n[s]++,s))}},"gen_codes"),Hx=c(()=>{let t,e,r,n,i;const o=new Array(To+1);for(r=0,n=0;n<lf-1;n++)for(pf[n]=r,t=0;t<1<<ff[n];t++)js[r++]=n;for(js[r-1]=n,i=0,n=0;n<16;n++)for(Hl[n]=i,t=0;t<1<<Ol[n];t++)zs[i++]=n;for(i>>=7;n<Na;n++)for(Hl[n]=i<<7,t=0;t<1<<Ol[n]-7;t++)zs[256+i++]=n;for(e=0;e<=To;e++)o[e]=0;for(t=0;t<=143;)Ai[t*2+1]=8,t++,o[8]++;for(;t<=255;)Ai[t*2+1]=9,t++,o[9]++;for(;t<=279;)Ai[t*2+1]=7,t++,o[7]++;for(;t<=287;)Ai[t*2+1]=8,t++,o[8]++;for(Pv(Ai,Ws+1,o),t=0;t<Na;t++)qs[t*2+1]=5,qs[t*2]=Fv(t,5);Iv=new gf(Ai,ff,Hs+1,Ws,To),Tv=new gf(qs,Ol,0,Na,To),kv=new gf(new Array(0),Lx,0,uf,$x)},"tr_static_init"),Nv=c(t=>{let e;for(e=0;e<Ws;e++)t.dyn_ltree[e*2]=0;for(e=0;e<Na;e++)t.dyn_dtree[e*2]=0;for(e=0;e<uf;e++)t.bl_tree[e*2]=0;t.dyn_ltree[hf*2]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},"init_block"),Mv=c(t=>{t.bi_valid>8?Vs(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},"bi_windup"),Wx=c((t,e,r,n)=>{Mv(t),n&&(Vs(t,r),Vs(t,~r)),t.pending_buf.set(t.window.subarray(e,e+r),t.pending),t.pending+=r},"copy_block"),$v=c((t,e,r,n)=>{const i=e*2,o=r*2;return t[i]<t[o]||t[i]===t[o]&&n[e]<=n[r]},"smaller"),vf=c((t,e,r)=>{const n=t.heap[r];let i=r<<1;for(;i<=t.heap_len&&(i<t.heap_len&&$v(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!$v(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n},"pqdownheap"),Lv=c((t,e,r)=>{let n,i,o=0,a,s;if(t.last_lit!==0)do n=t.pending_buf[t.d_buf+o*2]<<8|t.pending_buf[t.d_buf+o*2+1],i=t.pending_buf[t.l_buf+o],o++,n===0?Xn(t,i,e):(a=js[i],Xn(t,a+Hs+1,e),s=ff[a],s!==0&&(i-=pf[a],Kr(t,i,s)),n--,a=Dv(n),Xn(t,a,r),s=Ol[a],s!==0&&(n-=Hl[a],Kr(t,n,s)));while(o<t.last_lit);Xn(t,hf,e)},"compress_block"),wf=c((t,e)=>{const r=e.dyn_tree,n=e.stat_desc.static_tree,i=e.stat_desc.has_stree,o=e.stat_desc.elems;let a,s,l=-1,u;for(t.heap_len=0,t.heap_max=Sv,a=0;a<o;a++)r[a*2]!==0?(t.heap[++t.heap_len]=l=a,t.depth[a]=0):r[a*2+1]=0;for(;t.heap_len<2;)u=t.heap[++t.heap_len]=l<2?++l:0,r[u*2]=1,t.depth[u]=0,t.opt_len--,i&&(t.static_len-=n[u*2+1]);for(e.max_code=l,a=t.heap_len>>1;a>=1;a--)vf(t,r,a);u=o;do a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],vf(t,r,1),s=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=s,r[u*2]=r[a*2]+r[s*2],t.depth[u]=(t.depth[a]>=t.depth[s]?t.depth[a]:t.depth[s])+1,r[a*2+1]=r[s*2+1]=u,t.heap[1]=u++,vf(t,r,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],Ox(t,e),Pv(r,l,t.bl_count)},"build_tree"),Bv=c((t,e,r)=>{let n,i=-1,o,a=e[0*2+1],s=0,l=7,u=4;for(a===0&&(l=138,u=3),e[(r+1)*2+1]=65535,n=0;n<=r;n++)o=a,a=e[(n+1)*2+1],!(++s<l&&o===a)&&(s<u?t.bl_tree[o*2]+=s:o!==0?(o!==i&&t.bl_tree[o*2]++,t.bl_tree[Cv*2]++):s<=10?t.bl_tree[Ev*2]++:t.bl_tree[Rv*2]++,s=0,i=o,a===0?(l=138,u=3):o===a?(l=6,u=3):(l=7,u=4))},"scan_tree"),Uv=c((t,e,r)=>{let n,i=-1,o,a=e[0*2+1],s=0,l=7,u=4;for(a===0&&(l=138,u=3),n=0;n<=r;n++)if(o=a,a=e[(n+1)*2+1],!(++s<l&&o===a)){if(s<u)do Xn(t,o,t.bl_tree);while(--s!=0);else o!==0?(o!==i&&(Xn(t,o,t.bl_tree),s--),Xn(t,Cv,t.bl_tree),Kr(t,s-3,2)):s<=10?(Xn(t,Ev,t.bl_tree),Kr(t,s-3,3)):(Xn(t,Rv,t.bl_tree),Kr(t,s-11,7));s=0,i=o,a===0?(l=138,u=3):o===a?(l=6,u=3):(l=7,u=4)}},"send_tree"),qx=c(t=>{let e;for(Bv(t,t.dyn_ltree,t.l_desc.max_code),Bv(t,t.dyn_dtree,t.d_desc.max_code),wf(t,t.bl_desc),e=uf-1;e>=3&&t.bl_tree[Av[e]*2+1]===0;e--);return t.opt_len+=3*(e+1)+5+5+4,e},"build_bl_tree"),zx=c((t,e,r,n)=>{let i;for(Kr(t,e-257,5),Kr(t,r-1,5),Kr(t,n-4,4),i=0;i<n;i++)Kr(t,t.bl_tree[Av[i]*2+1],3);Uv(t,t.dyn_ltree,e-1),Uv(t,t.dyn_dtree,r-1)},"send_all_trees"),jx=c(t=>{let e=4093624447,r;for(r=0;r<=31;r++,e>>>=1)if(e&1&&t.dyn_ltree[r*2]!==0)return bv;if(t.dyn_ltree[9*2]!==0||t.dyn_ltree[10*2]!==0||t.dyn_ltree[13*2]!==0)return _v;for(r=32;r<Hs;r++)if(t.dyn_ltree[r*2]!==0)return _v;return bv},"detect_data_type");let Ov=!1;const Vx=c(t=>{Ov||(Hx(),Ov=!0),t.l_desc=new mf(t.dyn_ltree,Iv),t.d_desc=new mf(t.dyn_dtree,Tv),t.bl_desc=new mf(t.bl_tree,kv),t.bi_buf=0,t.bi_valid=0,Nv(t)},"_tr_init$1"),Hv=c((t,e,r,n)=>{Kr(t,(Fx<<1)+(n?1:0),3),Wx(t,e,r,!0)},"_tr_stored_block$1"),Gx=c(t=>{Kr(t,xv<<1,3),Xn(t,hf,Ai),Ux(t)},"_tr_align$1"),Kx=c((t,e,r,n)=>{let i,o,a=0;t.level>0?(t.strm.data_type===Dx&&(t.strm.data_type=jx(t)),wf(t,t.l_desc),wf(t,t.d_desc),a=qx(t),i=t.opt_len+3+7>>>3,o=t.static_len+3+7>>>3,o<=i&&(i=o)):i=o=r+5,r+4<=i&&e!==-1?Hv(t,e,r,n):t.strategy===kx||o===i?(Kr(t,(xv<<1)+(n?1:0),3),Lv(t,Ai,qs)):(Kr(t,(Px<<1)+(n?1:0),3),zx(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),Lv(t,t.dyn_ltree,t.dyn_dtree)),Nv(t),n&&Mv(t)},"_tr_flush_block$1"),Zx=c((t,e,r)=>(t.pending_buf[t.d_buf+t.last_lit*2]=e>>>8&255,t.pending_buf[t.d_buf+t.last_lit*2+1]=e&255,t.pending_buf[t.l_buf+t.last_lit]=r&255,t.last_lit++,e===0?t.dyn_ltree[r*2]++:(t.matches++,e--,t.dyn_ltree[(js[r]+Hs+1)*2]++,t.dyn_dtree[Dv(e)*2]++),t.last_lit===t.lit_bufsize-1),"_tr_tally$1");var Qx=Vx,Xx=Hv,Yx=Kx,Jx=Zx,e1=Gx,t1={_tr_init:Qx,_tr_stored_block:Xx,_tr_flush_block:Yx,_tr_tally:Jx,_tr_align:e1},Gs=c((t,e,r,n)=>{let i=t&65535|0,o=t>>>16&65535|0,a=0;for(;r!==0;){a=r>2e3?2e3:r,r-=a;do i=i+e[n++]|0,o=o+i|0;while(--a);i%=65521,o%=65521}return i|o<<16|0},"adler32");const r1=c(()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e},"makeTable"),n1=new Uint32Array(r1());var br=c((t,e,r,n)=>{const i=n1,o=n+r;t^=-1;for(let a=n;a<o;a++)t=t>>>8^i[(t^e[a])&255];return t^-1},"crc32"),ko={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Do={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:i1,_tr_stored_block:o1,_tr_flush_block:a1,_tr_tally:eo,_tr_align:s1}=t1,{Z_NO_FLUSH:Fo,Z_PARTIAL_FLUSH:c1,Z_FULL_FLUSH:l1,Z_FINISH:to,Z_BLOCK:Wv,Z_OK:Yn,Z_STREAM_END:qv,Z_STREAM_ERROR:un,Z_DATA_ERROR:u1,Z_BUF_ERROR:yf,Z_DEFAULT_COMPRESSION:d1,Z_FILTERED:h1,Z_HUFFMAN_ONLY:Wl,Z_RLE:f1,Z_FIXED:p1,Z_DEFAULT_STRATEGY:g1,Z_UNKNOWN:m1,Z_DEFLATED:ql}=Do,v1=9,w1=15,y1=8,b1=29,bf=256+1+b1,_1=30,x1=19,S1=2*bf+1,C1=15,At=3,ro=258,Rn=ro+At+1,E1=32,zl=42,_f=69,jl=73,Vl=91,Gl=103,Po=113,Ks=666,gr=1,Zs=2,No=3,Ma=4,R1=3,no=c((t,e)=>(t.msg=ko[e],e),"err"),zv=c(t=>(t<<1)-(t>4?9:0),"rank"),io=c(t=>{let e=t.length;for(;--e>=0;)t[e]=0},"zero");let oo=c((t,e,r)=>(e<<t.hash_shift^r)&t.hash_mask,"HASH_ZLIB");const ao=c(t=>{const e=t.state;let r=e.pending;r>t.avail_out&&(r=t.avail_out),r!==0&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+r),t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,e.pending===0&&(e.pending_out=0))},"flush_pending"),Rr=c((t,e)=>{a1(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,ao(t.strm)},"flush_block_only"),Ft=c((t,e)=>{t.pending_buf[t.pending++]=e},"put_byte"),Qs=c((t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=e&255},"putShortMSB"),A1=c((t,e,r,n)=>{let i=t.avail_in;return i>n&&(i=n),i===0?0:(t.avail_in-=i,e.set(t.input.subarray(t.next_in,t.next_in+i),r),t.state.wrap===1?t.adler=Gs(t.adler,e,i,r):t.state.wrap===2&&(t.adler=br(t.adler,e,i,r)),t.next_in+=i,t.total_in+=i,i)},"read_buf"),jv=c((t,e)=>{let r=t.max_chain_length,n=t.strstart,i,o,a=t.prev_length,s=t.nice_match;const l=t.strstart>t.w_size-Rn?t.strstart-(t.w_size-Rn):0,u=t.window,d=t.w_mask,f=t.prev,p=t.strstart+ro;let g=u[n+a-1],S=u[n+a];t.prev_length>=t.good_match&&(r>>=2),s>t.lookahead&&(s=t.lookahead);do if(i=e,!(u[i+a]!==S||u[i+a-1]!==g||u[i]!==u[n]||u[++i]!==u[n+1])){n+=2,i++;do;while(u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&n<p);if(o=ro-(p-n),n=p-ro,o>a){if(t.match_start=e,a=o,o>=s)break;g=u[n+a-1],S=u[n+a]}}while((e=f[e&d])>l&&--r!=0);return a<=t.lookahead?a:t.lookahead},"longest_match"),Mo=c(t=>{const e=t.w_size;let r,n,i,o,a;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-Rn)){t.window.set(t.window.subarray(e,e+e),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,n=t.hash_size,r=n;do i=t.head[--r],t.head[r]=i>=e?i-e:0;while(--n);n=e,r=n;do i=t.prev[--r],t.prev[r]=i>=e?i-e:0;while(--n);o+=e}if(t.strm.avail_in===0)break;if(n=A1(t.strm,t.window,t.strstart+t.lookahead,o),t.lookahead+=n,t.lookahead+t.insert>=At)for(a=t.strstart-t.insert,t.ins_h=t.window[a],t.ins_h=oo(t,t.ins_h,t.window[a+1]);t.insert&&(t.ins_h=oo(t,t.ins_h,t.window[a+At-1]),t.prev[a&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=a,a++,t.insert--,!(t.lookahead+t.insert<At)););}while(t.lookahead<Rn&&t.strm.avail_in!==0)},"fill_window"),I1=c((t,e)=>{let r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Mo(t),t.lookahead===0&&e===Fo)return gr;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;const n=t.block_start+r;if((t.strstart===0||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,Rr(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-Rn&&(Rr(t,!1),t.strm.avail_out===0))return gr}return t.insert=0,e===to?(Rr(t,!0),t.strm.avail_out===0?No:Ma):(t.strstart>t.block_start&&(Rr(t,!1),t.strm.avail_out===0),gr)},"deflate_stored"),xf=c((t,e)=>{let r,n;for(;;){if(t.lookahead<Rn){if(Mo(t),t.lookahead<Rn&&e===Fo)return gr;if(t.lookahead===0)break}if(r=0,t.lookahead>=At&&(t.ins_h=oo(t,t.ins_h,t.window[t.strstart+At-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),r!==0&&t.strstart-r<=t.w_size-Rn&&(t.match_length=jv(t,r)),t.match_length>=At)if(n=eo(t,t.strstart-t.match_start,t.match_length-At),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=At){t.match_length--;do t.strstart++,t.ins_h=oo(t,t.ins_h,t.window[t.strstart+At-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!=0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=oo(t,t.ins_h,t.window[t.strstart+1]);else n=eo(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(Rr(t,!1),t.strm.avail_out===0))return gr}return t.insert=t.strstart<At-1?t.strstart:At-1,e===to?(Rr(t,!0),t.strm.avail_out===0?No:Ma):t.last_lit&&(Rr(t,!1),t.strm.avail_out===0)?gr:Zs},"deflate_fast"),$a=c((t,e)=>{let r,n,i;for(;;){if(t.lookahead<Rn){if(Mo(t),t.lookahead<Rn&&e===Fo)return gr;if(t.lookahead===0)break}if(r=0,t.lookahead>=At&&(t.ins_h=oo(t,t.ins_h,t.window[t.strstart+At-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=At-1,r!==0&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-Rn&&(t.match_length=jv(t,r),t.match_length<=5&&(t.strategy===h1||t.match_length===At&&t.strstart-t.match_start>4096)&&(t.match_length=At-1)),t.prev_length>=At&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-At,n=eo(t,t.strstart-1-t.prev_match,t.prev_length-At),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=i&&(t.ins_h=oo(t,t.ins_h,t.window[t.strstart+At-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!=0);if(t.match_available=0,t.match_length=At-1,t.strstart++,n&&(Rr(t,!1),t.strm.avail_out===0))return gr}else if(t.match_available){if(n=eo(t,0,t.window[t.strstart-1]),n&&Rr(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return gr}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=eo(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<At-1?t.strstart:At-1,e===to?(Rr(t,!0),t.strm.avail_out===0?No:Ma):t.last_lit&&(Rr(t,!1),t.strm.avail_out===0)?gr:Zs},"deflate_slow"),T1=c((t,e)=>{let r,n,i,o;const a=t.window;for(;;){if(t.lookahead<=ro){if(Mo(t),t.lookahead<=ro&&e===Fo)return gr;if(t.lookahead===0)break}if(t.match_length=0,t.lookahead>=At&&t.strstart>0&&(i=t.strstart-1,n=a[i],n===a[++i]&&n===a[++i]&&n===a[++i])){o=t.strstart+ro;do;while(n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<o);t.match_length=ro-(o-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=At?(r=eo(t,1,t.match_length-At),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=eo(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(Rr(t,!1),t.strm.avail_out===0))return gr}return t.insert=0,e===to?(Rr(t,!0),t.strm.avail_out===0?No:Ma):t.last_lit&&(Rr(t,!1),t.strm.avail_out===0)?gr:Zs},"deflate_rle"),k1=c((t,e)=>{let r;for(;;){if(t.lookahead===0&&(Mo(t),t.lookahead===0)){if(e===Fo)return gr;break}if(t.match_length=0,r=eo(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(Rr(t,!1),t.strm.avail_out===0))return gr}return t.insert=0,e===to?(Rr(t,!0),t.strm.avail_out===0?No:Ma):t.last_lit&&(Rr(t,!1),t.strm.avail_out===0)?gr:Zs},"deflate_huff");function Jn(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i}c(Jn,"Config");const Xs=[new Jn(0,0,0,0,I1),new Jn(4,4,8,4,xf),new Jn(4,5,16,8,xf),new Jn(4,6,32,32,xf),new Jn(4,4,16,16,$a),new Jn(8,16,32,32,$a),new Jn(8,16,128,128,$a),new Jn(8,32,128,256,$a),new Jn(32,128,258,1024,$a),new Jn(32,258,258,4096,$a)],D1=c(t=>{t.window_size=2*t.w_size,io(t.head),t.max_lazy_match=Xs[t.level].max_lazy,t.good_match=Xs[t.level].good_length,t.nice_match=Xs[t.level].nice_length,t.max_chain_length=Xs[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=At-1,t.match_available=0,t.ins_h=0},"lm_init");function F1(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ql,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(S1*2),this.dyn_dtree=new Uint16Array((2*_1+1)*2),this.bl_tree=new Uint16Array((2*x1+1)*2),io(this.dyn_ltree),io(this.dyn_dtree),io(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(C1+1),this.heap=new Uint16Array(2*bf+1),io(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*bf+1),io(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}c(F1,"DeflateState");const Vv=c(t=>{if(!t||!t.state)return no(t,un);t.total_in=t.total_out=0,t.data_type=m1;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?zl:Po,t.adler=e.wrap===2?0:1,e.last_flush=Fo,i1(e),Yn},"deflateResetKeep"),Gv=c(t=>{const e=Vv(t);return e===Yn&&D1(t.state),e},"deflateReset"),P1=c((t,e)=>!t||!t.state||t.state.wrap!==2?un:(t.state.gzhead=e,Yn),"deflateSetHeader"),Kv=c((t,e,r,n,i,o)=>{if(!t)return un;let a=1;if(e===d1&&(e=6),n<0?(a=0,n=-n):n>15&&(a=2,n-=16),i<1||i>v1||r!==ql||n<8||n>15||e<0||e>9||o<0||o>p1)return no(t,un);n===8&&(n=9);const s=new F1;return t.state=s,s.strm=t,s.wrap=a,s.gzhead=null,s.w_bits=n,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+At-1)/At),s.window=new Uint8Array(s.w_size*2),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=s.lit_bufsize*4,s.pending_buf=new Uint8Array(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=(1+2)*s.lit_bufsize,s.level=e,s.strategy=o,s.method=r,Gv(t)},"deflateInit2"),N1=c((t,e)=>Kv(t,e,ql,w1,y1,g1),"deflateInit"),M1=c((t,e)=>{let r,n;if(!t||!t.state||e>Wv||e<0)return t?no(t,un):un;const i=t.state;if(!t.output||!t.input&&t.avail_in!==0||i.status===Ks&&e!==to)return no(t,t.avail_out===0?yf:un);i.strm=t;const o=i.last_flush;if(i.last_flush=e,i.status===zl)if(i.wrap===2)t.adler=0,Ft(i,31),Ft(i,139),Ft(i,8),i.gzhead?(Ft(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),Ft(i,i.gzhead.time&255),Ft(i,i.gzhead.time>>8&255),Ft(i,i.gzhead.time>>16&255),Ft(i,i.gzhead.time>>24&255),Ft(i,i.level===9?2:i.strategy>=Wl||i.level<2?4:0),Ft(i,i.gzhead.os&255),i.gzhead.extra&&i.gzhead.extra.length&&(Ft(i,i.gzhead.extra.length&255),Ft(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=br(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=_f):(Ft(i,0),Ft(i,0),Ft(i,0),Ft(i,0),Ft(i,0),Ft(i,i.level===9?2:i.strategy>=Wl||i.level<2?4:0),Ft(i,R1),i.status=Po);else{let a=ql+(i.w_bits-8<<4)<<8,s=-1;i.strategy>=Wl||i.level<2?s=0:i.level<6?s=1:i.level===6?s=2:s=3,a|=s<<6,i.strstart!==0&&(a|=E1),a+=31-a%31,i.status=Po,Qs(i,a),i.strstart!==0&&(Qs(i,t.adler>>>16),Qs(i,t.adler&65535)),t.adler=1}if(i.status===_f)if(i.gzhead.extra){for(r=i.pending;i.gzindex<(i.gzhead.extra.length&65535)&&!(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(t.adler=br(t.adler,i.pending_buf,i.pending-r,r)),ao(t),r=i.pending,i.pending===i.pending_buf_size));)Ft(i,i.gzhead.extra[i.gzindex]&255),i.gzindex++;i.gzhead.hcrc&&i.pending>r&&(t.adler=br(t.adler,i.pending_buf,i.pending-r,r)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=jl)}else i.status=jl;if(i.status===jl)if(i.gzhead.name){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(t.adler=br(t.adler,i.pending_buf,i.pending-r,r)),ao(t),r=i.pending,i.pending===i.pending_buf_size)){n=1;break}i.gzindex<i.gzhead.name.length?n=i.gzhead.name.charCodeAt(i.gzindex++)&255:n=0,Ft(i,n)}while(n!==0);i.gzhead.hcrc&&i.pending>r&&(t.adler=br(t.adler,i.pending_buf,i.pending-r,r)),n===0&&(i.gzindex=0,i.status=Vl)}else i.status=Vl;if(i.status===Vl)if(i.gzhead.comment){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(t.adler=br(t.adler,i.pending_buf,i.pending-r,r)),ao(t),r=i.pending,i.pending===i.pending_buf_size)){n=1;break}i.gzindex<i.gzhead.comment.length?n=i.gzhead.comment.charCodeAt(i.gzindex++)&255:n=0,Ft(i,n)}while(n!==0);i.gzhead.hcrc&&i.pending>r&&(t.adler=br(t.adler,i.pending_buf,i.pending-r,r)),n===0&&(i.status=Gl)}else i.status=Gl;if(i.status===Gl&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&ao(t),i.pending+2<=i.pending_buf_size&&(Ft(i,t.adler&255),Ft(i,t.adler>>8&255),t.adler=0,i.status=Po)):i.status=Po),i.pending!==0){if(ao(t),t.avail_out===0)return i.last_flush=-1,Yn}else if(t.avail_in===0&&zv(e)<=zv(o)&&e!==to)return no(t,yf);if(i.status===Ks&&t.avail_in!==0)return no(t,yf);if(t.avail_in!==0||i.lookahead!==0||e!==Fo&&i.status!==Ks){let a=i.strategy===Wl?k1(i,e):i.strategy===f1?T1(i,e):Xs[i.level].func(i,e);if((a===No||a===Ma)&&(i.status=Ks),a===gr||a===No)return t.avail_out===0&&(i.last_flush=-1),Yn;if(a===Zs&&(e===c1?s1(i):e!==Wv&&(o1(i,0,0,!1),e===l1&&(io(i.head),i.lookahead===0&&(i.strstart=0,i.block_start=0,i.insert=0))),ao(t),t.avail_out===0))return i.last_flush=-1,Yn}return e!==to?Yn:i.wrap<=0?qv:(i.wrap===2?(Ft(i,t.adler&255),Ft(i,t.adler>>8&255),Ft(i,t.adler>>16&255),Ft(i,t.adler>>24&255),Ft(i,t.total_in&255),Ft(i,t.total_in>>8&255),Ft(i,t.total_in>>16&255),Ft(i,t.total_in>>24&255)):(Qs(i,t.adler>>>16),Qs(i,t.adler&65535)),ao(t),i.wrap>0&&(i.wrap=-i.wrap),i.pending!==0?Yn:qv)},"deflate$2"),$1=c(t=>{if(!t||!t.state)return un;const e=t.state.status;return e!==zl&&e!==_f&&e!==jl&&e!==Vl&&e!==Gl&&e!==Po&&e!==Ks?no(t,un):(t.state=null,e===Po?no(t,u1):Yn)},"deflateEnd"),L1=c((t,e)=>{let r=e.length;if(!t||!t.state)return un;const n=t.state,i=n.wrap;if(i===2||i===1&&n.status!==zl||n.lookahead)return un;if(i===1&&(t.adler=Gs(t.adler,e,r,0)),n.wrap=0,r>=n.w_size){i===0&&(io(n.head),n.strstart=0,n.block_start=0,n.insert=0);let l=new Uint8Array(n.w_size);l.set(e.subarray(r-n.w_size,r),0),e=l,r=n.w_size}const o=t.avail_in,a=t.next_in,s=t.input;for(t.avail_in=r,t.next_in=0,t.input=e,Mo(n);n.lookahead>=At;){let l=n.strstart,u=n.lookahead-(At-1);do n.ins_h=oo(n,n.ins_h,n.window[l+At-1]),n.prev[l&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=l,l++;while(--u);n.strstart=l,n.lookahead=At-1,Mo(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=At-1,n.match_available=0,t.next_in=a,t.input=s,t.avail_in=o,n.wrap=i,Yn},"deflateSetDictionary");var B1=N1,U1=Kv,O1=Gv,H1=Vv,W1=P1,q1=M1,z1=$1,j1=L1,V1="pako deflate (from Nodeca project)",Ys={deflateInit:B1,deflateInit2:U1,deflateReset:O1,deflateResetKeep:H1,deflateSetHeader:W1,deflate:q1,deflateEnd:z1,deflateSetDictionary:j1,deflateInfo:V1};const G1=c((t,e)=>Object.prototype.hasOwnProperty.call(t,e),"_has");var K1=c(function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(!!r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)G1(r,n)&&(t[n]=r[n])}}return t},"pako_esm_assign"),Z1=c(t=>{let e=0;for(let n=0,i=t.length;n<i;n++)e+=t[n].length;const r=new Uint8Array(e);for(let n=0,i=0,o=t.length;n<o;n++){let a=t[n];r.set(a,i),i+=a.length}return r},"flattenChunks"),Kl={assign:K1,flattenChunks:Z1};let Zv=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){Zv=!1}const Js=new Uint8Array(256);for(let t=0;t<256;t++)Js[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Js[254]=Js[254]=1;var Q1=c(t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,r,n,i,o,a=t.length,s=0;for(i=0;i<a;i++)r=t.charCodeAt(i),(r&64512)==55296&&i+1<a&&(n=t.charCodeAt(i+1),(n&64512)==56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),s+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(s),o=0,i=0;o<s;i++)r=t.charCodeAt(i),(r&64512)==55296&&i+1<a&&(n=t.charCodeAt(i+1),(n&64512)==56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?e[o++]=r:r<2048?(e[o++]=192|r>>>6,e[o++]=128|r&63):r<65536?(e[o++]=224|r>>>12,e[o++]=128|r>>>6&63,e[o++]=128|r&63):(e[o++]=240|r>>>18,e[o++]=128|r>>>12&63,e[o++]=128|r>>>6&63,e[o++]=128|r&63);return e},"string2buf");const X1=c((t,e)=>{if(e<65534&&t.subarray&&Zv)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r},"buf2binstring");var Y1=c((t,e)=>{const r=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,i;const o=new Array(r*2);for(i=0,n=0;n<r;){let a=t[n++];if(a<128){o[i++]=a;continue}let s=Js[a];if(s>4){o[i++]=65533,n+=s-1;continue}for(a&=s===2?31:s===3?15:7;s>1&&n<r;)a=a<<6|t[n++]&63,s--;if(s>1){o[i++]=65533;continue}a<65536?o[i++]=a:(a-=65536,o[i++]=55296|a>>10&1023,o[i++]=56320|a&1023)}return X1(o,i)},"buf2string"),J1=c((t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let r=e-1;for(;r>=0&&(t[r]&192)==128;)r--;return r<0||r===0?e:r+Js[t[r]]>e?r:e},"utf8border"),ec={string2buf:Q1,buf2string:Y1,utf8border:J1};function eS(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}c(eS,"ZStream");var Qv=eS;const Xv=Object.prototype.toString,{Z_NO_FLUSH:tS,Z_SYNC_FLUSH:rS,Z_FULL_FLUSH:nS,Z_FINISH:iS,Z_OK:Zl,Z_STREAM_END:oS,Z_DEFAULT_COMPRESSION:aS,Z_DEFAULT_STRATEGY:sS,Z_DEFLATED:cS}=Do;function tc(t){this.options=Kl.assign({level:aS,method:cS,chunkSize:16384,windowBits:15,memLevel:8,strategy:sS},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Qv,this.strm.avail_out=0;let r=Ys.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==Zl)throw new Error(ko[r]);if(e.header&&Ys.deflateSetHeader(this.strm,e.header),e.dictionary){let n;if(typeof e.dictionary=="string"?n=ec.string2buf(e.dictionary):Xv.call(e.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(e.dictionary):n=e.dictionary,r=Ys.deflateSetDictionary(this.strm,n),r!==Zl)throw new Error(ko[r]);this._dict_set=!0}}c(tc,"Deflate$1"),tc.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize;let i,o;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?iS:tS,typeof t=="string"?r.input=ec.string2buf(t):Xv.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){if(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(o===rS||o===nS)&&r.avail_out<=6){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(i=Ys.deflate(r,o),i===oS)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),i=Ys.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Zl;if(r.avail_out===0){this.onData(r.output);continue}if(o>0&&r.next_out>0){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(r.avail_in===0)break}return!0},tc.prototype.onData=function(t){this.chunks.push(t)},tc.prototype.onEnd=function(t){t===Zl&&(this.result=Kl.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function Sf(t,e){const r=new tc(e);if(r.push(t,!0),r.err)throw r.msg||ko[r.err];return r.result}c(Sf,"deflate$1");function lS(t,e){return e=e||{},e.raw=!0,Sf(t,e)}c(lS,"deflateRaw$1");function uS(t,e){return e=e||{},e.gzip=!0,Sf(t,e)}c(uS,"gzip$1");var dS=tc,hS=Sf,fS=lS,pS=uS,gS=Do,mS={Deflate:dS,deflate:hS,deflateRaw:fS,gzip:pS,constants:gS};const Ql=30,vS=12;var wS=c(function(e,r){let n,i,o,a,s,l,u,d,f,p,g,S,y,b,_,C,k,F,$,ne,ie,Q,me,se;const fe=e.state;n=e.next_in,me=e.input,i=n+(e.avail_in-5),o=e.next_out,se=e.output,a=o-(r-e.avail_out),s=o+(e.avail_out-257),l=fe.dmax,u=fe.wsize,d=fe.whave,f=fe.wnext,p=fe.window,g=fe.hold,S=fe.bits,y=fe.lencode,b=fe.distcode,_=(1<<fe.lenbits)-1,C=(1<<fe.distbits)-1;e:do{S<15&&(g+=me[n++]<<S,S+=8,g+=me[n++]<<S,S+=8),k=y[g&_];t:for(;;){if(F=k>>>24,g>>>=F,S-=F,F=k>>>16&255,F===0)se[o++]=k&65535;else if(F&16){$=k&65535,F&=15,F&&(S<F&&(g+=me[n++]<<S,S+=8),$+=g&(1<<F)-1,g>>>=F,S-=F),S<15&&(g+=me[n++]<<S,S+=8,g+=me[n++]<<S,S+=8),k=b[g&C];r:for(;;){if(F=k>>>24,g>>>=F,S-=F,F=k>>>16&255,F&16){if(ne=k&65535,F&=15,S<F&&(g+=me[n++]<<S,S+=8,S<F&&(g+=me[n++]<<S,S+=8)),ne+=g&(1<<F)-1,ne>l){e.msg="invalid distance too far back",fe.mode=Ql;break e}if(g>>>=F,S-=F,F=o-a,ne>F){if(F=ne-F,F>d&&fe.sane){e.msg="invalid distance too far back",fe.mode=Ql;break e}if(ie=0,Q=p,f===0){if(ie+=u-F,F<$){$-=F;do se[o++]=p[ie++];while(--F);ie=o-ne,Q=se}}else if(f<F){if(ie+=u+f-F,F-=f,F<$){$-=F;do se[o++]=p[ie++];while(--F);if(ie=0,f<$){F=f,$-=F;do se[o++]=p[ie++];while(--F);ie=o-ne,Q=se}}}else if(ie+=f-F,F<$){$-=F;do se[o++]=p[ie++];while(--F);ie=o-ne,Q=se}for(;$>2;)se[o++]=Q[ie++],se[o++]=Q[ie++],se[o++]=Q[ie++],$-=3;$&&(se[o++]=Q[ie++],$>1&&(se[o++]=Q[ie++]))}else{ie=o-ne;do se[o++]=se[ie++],se[o++]=se[ie++],se[o++]=se[ie++],$-=3;while($>2);$&&(se[o++]=se[ie++],$>1&&(se[o++]=se[ie++]))}}else if((F&64)==0){k=b[(k&65535)+(g&(1<<F)-1)];continue r}else{e.msg="invalid distance code",fe.mode=Ql;break e}break}}else if((F&64)==0){k=y[(k&65535)+(g&(1<<F)-1)];continue t}else if(F&32){fe.mode=vS;break e}else{e.msg="invalid literal/length code",fe.mode=Ql;break e}break}}while(n<i&&o<s);$=S>>3,n-=$,S-=$<<3,g&=(1<<S)-1,e.next_in=n,e.next_out=o,e.avail_in=n<i?5+(i-n):5-(n-i),e.avail_out=o<s?257+(s-o):257-(o-s),fe.hold=g,fe.bits=S},"inflate_fast");const La=15,Yv=852,Jv=592,ew=0,Cf=1,tw=2,yS=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),bS=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),_S=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),xS=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var rc=c((t,e,r,n,i,o,a,s)=>{const l=s.bits;let u=0,d=0,f=0,p=0,g=0,S=0,y=0,b=0,_=0,C=0,k,F,$,ne,ie,Q=null,me=0,se;const fe=new Uint16Array(La+1),xe=new Uint16Array(La+1);let Ge=null,ce=0,Se,Ne,Fe;for(u=0;u<=La;u++)fe[u]=0;for(d=0;d<n;d++)fe[e[r+d]]++;for(g=l,p=La;p>=1&&fe[p]===0;p--);if(g>p&&(g=p),p===0)return i[o++]=1<<24|64<<16|0,i[o++]=1<<24|64<<16|0,s.bits=1,0;for(f=1;f<p&&fe[f]===0;f++);for(g<f&&(g=f),b=1,u=1;u<=La;u++)if(b<<=1,b-=fe[u],b<0)return-1;if(b>0&&(t===ew||p!==1))return-1;for(xe[1]=0,u=1;u<La;u++)xe[u+1]=xe[u]+fe[u];for(d=0;d<n;d++)e[r+d]!==0&&(a[xe[e[r+d]]++]=d);if(t===ew?(Q=Ge=a,se=19):t===Cf?(Q=yS,me-=257,Ge=bS,ce-=257,se=256):(Q=_S,Ge=xS,se=-1),C=0,d=0,u=f,ie=o,S=g,y=0,$=-1,_=1<<g,ne=_-1,t===Cf&&_>Yv||t===tw&&_>Jv)return 1;for(;;){Se=u-y,a[d]<se?(Ne=0,Fe=a[d]):a[d]>se?(Ne=Ge[ce+a[d]],Fe=Q[me+a[d]]):(Ne=32+64,Fe=0),k=1<<u-y,F=1<<S,f=F;do F-=k,i[ie+(C>>y)+F]=Se<<24|Ne<<16|Fe|0;while(F!==0);for(k=1<<u-1;C&k;)k>>=1;if(k!==0?(C&=k-1,C+=k):C=0,d++,--fe[u]==0){if(u===p)break;u=e[r+a[d]]}if(u>g&&(C&ne)!==$){for(y===0&&(y=g),ie+=f,S=u-y,b=1<<S;S+y<p&&(b-=fe[S+y],!(b<=0));)S++,b<<=1;if(_+=1<<S,t===Cf&&_>Yv||t===tw&&_>Jv)return 1;$=C&ne,i[$]=g<<24|S<<16|ie-o|0}}return C!==0&&(i[ie+C]=u-y<<24|64<<16|0),s.bits=g,0},"inflate_table");const SS=0,rw=1,nw=2,{Z_FINISH:iw,Z_BLOCK:CS,Z_TREES:Xl,Z_OK:$o,Z_STREAM_END:ES,Z_NEED_DICT:RS,Z_STREAM_ERROR:dn,Z_DATA_ERROR:ow,Z_MEM_ERROR:aw,Z_BUF_ERROR:AS,Z_DEFLATED:sw}=Do,cw=1,lw=2,uw=3,dw=4,hw=5,fw=6,pw=7,gw=8,mw=9,vw=10,Yl=11,Ii=12,Ef=13,ww=14,Rf=15,yw=16,bw=17,_w=18,xw=19,Jl=20,eu=21,Sw=22,Cw=23,Ew=24,Rw=25,Aw=26,Af=27,Iw=28,Tw=29,Jt=30,kw=31,IS=32,TS=852,kS=592,DS=15,Dw=c(t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24),"zswap32");function FS(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}c(FS,"InflateState");const Fw=c(t=>{if(!t||!t.state)return dn;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=cw,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(TS),e.distcode=e.distdyn=new Int32Array(kS),e.sane=1,e.back=-1,$o},"inflateResetKeep"),Pw=c(t=>{if(!t||!t.state)return dn;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,Fw(t)},"inflateReset"),Nw=c((t,e)=>{let r;if(!t||!t.state)return dn;const n=t.state;return e<0?(r=0,e=-e):(r=(e>>4)+1,e<48&&(e&=15)),e&&(e<8||e>15)?dn:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,Pw(t))},"inflateReset2"),Mw=c((t,e)=>{if(!t)return dn;const r=new FS;t.state=r,r.window=null;const n=Nw(t,e);return n!==$o&&(t.state=null),n},"inflateInit2"),PS=c(t=>Mw(t,DS),"inflateInit");let $w=!0,If,Tf;const NS=c(t=>{if($w){If=new Int32Array(512),Tf=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(rc(rw,t.lens,0,288,If,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;rc(nw,t.lens,0,32,Tf,0,t.work,{bits:5}),$w=!1}t.lencode=If,t.lenbits=9,t.distcode=Tf,t.distbits=5},"fixedtables"),Lw=c((t,e,r,n)=>{let i;const o=t.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),n>=o.wsize?(o.window.set(e.subarray(r-o.wsize,r),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>n&&(i=n),o.window.set(e.subarray(r-n,r-n+i),o.wnext),n-=i,n?(o.window.set(e.subarray(r-n,r),0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0},"updatewindow"),MS=c((t,e)=>{let r,n,i,o,a,s,l,u,d,f,p,g,S,y,b=0,_,C,k,F,$,ne,ie,Q;const me=new Uint8Array(4);let se,fe;const xe=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!t||!t.state||!t.output||!t.input&&t.avail_in!==0)return dn;r=t.state,r.mode===Ii&&(r.mode=Ef),a=t.next_out,i=t.output,l=t.avail_out,o=t.next_in,n=t.input,s=t.avail_in,u=r.hold,d=r.bits,f=s,p=l,Q=$o;e:for(;;)switch(r.mode){case cw:if(r.wrap===0){r.mode=Ef;break}for(;d<16;){if(s===0)break e;s--,u+=n[o++]<<d,d+=8}if(r.wrap&2&&u===35615){r.check=0,me[0]=u&255,me[1]=u>>>8&255,r.check=br(r.check,me,2,0),u=0,d=0,r.mode=lw;break}if(r.flags=0,r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){t.msg="incorrect header check",r.mode=Jt;break}if((u&15)!==sw){t.msg="unknown compression method",r.mode=Jt;break}if(u>>>=4,d-=4,ie=(u&15)+8,r.wbits===0)r.wbits=ie;else if(ie>r.wbits){t.msg="invalid window size",r.mode=Jt;break}r.dmax=1<<r.wbits,t.adler=r.check=1,r.mode=u&512?vw:Ii,u=0,d=0;break;case lw:for(;d<16;){if(s===0)break e;s--,u+=n[o++]<<d,d+=8}if(r.flags=u,(r.flags&255)!==sw){t.msg="unknown compression method",r.mode=Jt;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=Jt;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&(me[0]=u&255,me[1]=u>>>8&255,r.check=br(r.check,me,2,0)),u=0,d=0,r.mode=uw;case uw:for(;d<32;){if(s===0)break e;s--,u+=n[o++]<<d,d+=8}r.head&&(r.head.time=u),r.flags&512&&(me[0]=u&255,me[1]=u>>>8&255,me[2]=u>>>16&255,me[3]=u>>>24&255,r.check=br(r.check,me,4,0)),u=0,d=0,r.mode=dw;case dw:for(;d<16;){if(s===0)break e;s--,u+=n[o++]<<d,d+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&(me[0]=u&255,me[1]=u>>>8&255,r.check=br(r.check,me,2,0)),u=0,d=0,r.mode=hw;case hw:if(r.flags&1024){for(;d<16;){if(s===0)break e;s--,u+=n[o++]<<d,d+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&(me[0]=u&255,me[1]=u>>>8&255,r.check=br(r.check,me,2,0)),u=0,d=0}else r.head&&(r.head.extra=null);r.mode=fw;case fw:if(r.flags&1024&&(g=r.length,g>s&&(g=s),g&&(r.head&&(ie=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(o,o+g),ie)),r.flags&512&&(r.check=br(r.check,n,g,o)),s-=g,o+=g,r.length-=g),r.length))break e;r.length=0,r.mode=pw;case pw:if(r.flags&2048){if(s===0)break e;g=0;do ie=n[o+g++],r.head&&ie&&r.length<65536&&(r.head.name+=String.fromCharCode(ie));while(ie&&g<s);if(r.flags&512&&(r.check=br(r.check,n,g,o)),s-=g,o+=g,ie)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=gw;case gw:if(r.flags&4096){if(s===0)break e;g=0;do ie=n[o+g++],r.head&&ie&&r.length<65536&&(r.head.comment+=String.fromCharCode(ie));while(ie&&g<s);if(r.flags&512&&(r.check=br(r.check,n,g,o)),s-=g,o+=g,ie)break e}else r.head&&(r.head.comment=null);r.mode=mw;case mw:if(r.flags&512){for(;d<16;){if(s===0)break e;s--,u+=n[o++]<<d,d+=8}if(u!==(r.check&65535)){t.msg="header crc mismatch",r.mode=Jt;break}u=0,d=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=Ii;break;case vw:for(;d<32;){if(s===0)break e;s--,u+=n[o++]<<d,d+=8}t.adler=r.check=Dw(u),u=0,d=0,r.mode=Yl;case Yl:if(r.havedict===0)return t.next_out=a,t.avail_out=l,t.next_in=o,t.avail_in=s,r.hold=u,r.bits=d,RS;t.adler=r.check=1,r.mode=Ii;case Ii:if(e===CS||e===Xl)break e;case Ef:if(r.last){u>>>=d&7,d-=d&7,r.mode=Af;break}for(;d<3;){if(s===0)break e;s--,u+=n[o++]<<d,d+=8}switch(r.last=u&1,u>>>=1,d-=1,u&3){case 0:r.mode=ww;break;case 1:if(NS(r),r.mode=Jl,e===Xl){u>>>=2,d-=2;break e}break;case 2:r.mode=bw;break;case 3:t.msg="invalid block type",r.mode=Jt}u>>>=2,d-=2;break;case ww:for(u>>>=d&7,d-=d&7;d<32;){if(s===0)break e;s--,u+=n[o++]<<d,d+=8}if((u&65535)!=(u>>>16^65535)){t.msg="invalid stored block lengths",r.mode=Jt;break}if(r.length=u&65535,u=0,d=0,r.mode=Rf,e===Xl)break e;case Rf:r.mode=yw;case yw:if(g=r.length,g){if(g>s&&(g=s),g>l&&(g=l),g===0)break e;i.set(n.subarray(o,o+g),a),s-=g,o+=g,l-=g,a+=g,r.length-=g;break}r.mode=Ii;break;case bw:for(;d<14;){if(s===0)break e;s--,u+=n[o++]<<d,d+=8}if(r.nlen=(u&31)+257,u>>>=5,d-=5,r.ndist=(u&31)+1,u>>>=5,d-=5,r.ncode=(u&15)+4,u>>>=4,d-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=Jt;break}r.have=0,r.mode=_w;case _w:for(;r.have<r.ncode;){for(;d<3;){if(s===0)break e;s--,u+=n[o++]<<d,d+=8}r.lens[xe[r.have++]]=u&7,u>>>=3,d-=3}for(;r.have<19;)r.lens[xe[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,se={bits:r.lenbits},Q=rc(SS,r.lens,0,19,r.lencode,0,r.work,se),r.lenbits=se.bits,Q){t.msg="invalid code lengths set",r.mode=Jt;break}r.have=0,r.mode=xw;case xw:for(;r.have<r.nlen+r.ndist;){for(;b=r.lencode[u&(1<<r.lenbits)-1],_=b>>>24,C=b>>>16&255,k=b&65535,!(_<=d);){if(s===0)break e;s--,u+=n[o++]<<d,d+=8}if(k<16)u>>>=_,d-=_,r.lens[r.have++]=k;else{if(k===16){for(fe=_+2;d<fe;){if(s===0)break e;s--,u+=n[o++]<<d,d+=8}if(u>>>=_,d-=_,r.have===0){t.msg="invalid bit length repeat",r.mode=Jt;break}ie=r.lens[r.have-1],g=3+(u&3),u>>>=2,d-=2}else if(k===17){for(fe=_+3;d<fe;){if(s===0)break e;s--,u+=n[o++]<<d,d+=8}u>>>=_,d-=_,ie=0,g=3+(u&7),u>>>=3,d-=3}else{for(fe=_+7;d<fe;){if(s===0)break e;s--,u+=n[o++]<<d,d+=8}u>>>=_,d-=_,ie=0,g=11+(u&127),u>>>=7,d-=7}if(r.have+g>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=Jt;break}for(;g--;)r.lens[r.have++]=ie}}if(r.mode===Jt)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=Jt;break}if(r.lenbits=9,se={bits:r.lenbits},Q=rc(rw,r.lens,0,r.nlen,r.lencode,0,r.work,se),r.lenbits=se.bits,Q){t.msg="invalid literal/lengths set",r.mode=Jt;break}if(r.distbits=6,r.distcode=r.distdyn,se={bits:r.distbits},Q=rc(nw,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,se),r.distbits=se.bits,Q){t.msg="invalid distances set",r.mode=Jt;break}if(r.mode=Jl,e===Xl)break e;case Jl:r.mode=eu;case eu:if(s>=6&&l>=258){t.next_out=a,t.avail_out=l,t.next_in=o,t.avail_in=s,r.hold=u,r.bits=d,wS(t,p),a=t.next_out,i=t.output,l=t.avail_out,o=t.next_in,n=t.input,s=t.avail_in,u=r.hold,d=r.bits,r.mode===Ii&&(r.back=-1);break}for(r.back=0;b=r.lencode[u&(1<<r.lenbits)-1],_=b>>>24,C=b>>>16&255,k=b&65535,!(_<=d);){if(s===0)break e;s--,u+=n[o++]<<d,d+=8}if(C&&(C&240)==0){for(F=_,$=C,ne=k;b=r.lencode[ne+((u&(1<<F+$)-1)>>F)],_=b>>>24,C=b>>>16&255,k=b&65535,!(F+_<=d);){if(s===0)break e;s--,u+=n[o++]<<d,d+=8}u>>>=F,d-=F,r.back+=F}if(u>>>=_,d-=_,r.back+=_,r.length=k,C===0){r.mode=Aw;break}if(C&32){r.back=-1,r.mode=Ii;break}if(C&64){t.msg="invalid literal/length code",r.mode=Jt;break}r.extra=C&15,r.mode=Sw;case Sw:if(r.extra){for(fe=r.extra;d<fe;){if(s===0)break e;s--,u+=n[o++]<<d,d+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=Cw;case Cw:for(;b=r.distcode[u&(1<<r.distbits)-1],_=b>>>24,C=b>>>16&255,k=b&65535,!(_<=d);){if(s===0)break e;s--,u+=n[o++]<<d,d+=8}if((C&240)==0){for(F=_,$=C,ne=k;b=r.distcode[ne+((u&(1<<F+$)-1)>>F)],_=b>>>24,C=b>>>16&255,k=b&65535,!(F+_<=d);){if(s===0)break e;s--,u+=n[o++]<<d,d+=8}u>>>=F,d-=F,r.back+=F}if(u>>>=_,d-=_,r.back+=_,C&64){t.msg="invalid distance code",r.mode=Jt;break}r.offset=k,r.extra=C&15,r.mode=Ew;case Ew:if(r.extra){for(fe=r.extra;d<fe;){if(s===0)break e;s--,u+=n[o++]<<d,d+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=Jt;break}r.mode=Rw;case Rw:if(l===0)break e;if(g=p-l,r.offset>g){if(g=r.offset-g,g>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=Jt;break}g>r.wnext?(g-=r.wnext,S=r.wsize-g):S=r.wnext-g,g>r.length&&(g=r.length),y=r.window}else y=i,S=a-r.offset,g=r.length;g>l&&(g=l),l-=g,r.length-=g;do i[a++]=y[S++];while(--g);r.length===0&&(r.mode=eu);break;case Aw:if(l===0)break e;i[a++]=r.length,l--,r.mode=eu;break;case Af:if(r.wrap){for(;d<32;){if(s===0)break e;s--,u|=n[o++]<<d,d+=8}if(p-=l,t.total_out+=p,r.total+=p,p&&(t.adler=r.check=r.flags?br(r.check,i,p,a-p):Gs(r.check,i,p,a-p)),p=l,(r.flags?u:Dw(u))!==r.check){t.msg="incorrect data check",r.mode=Jt;break}u=0,d=0}r.mode=Iw;case Iw:if(r.wrap&&r.flags){for(;d<32;){if(s===0)break e;s--,u+=n[o++]<<d,d+=8}if(u!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=Jt;break}u=0,d=0}r.mode=Tw;case Tw:Q=ES;break e;case Jt:Q=ow;break e;case kw:return aw;case IS:default:return dn}return t.next_out=a,t.avail_out=l,t.next_in=o,t.avail_in=s,r.hold=u,r.bits=d,(r.wsize||p!==t.avail_out&&r.mode<Jt&&(r.mode<Af||e!==iw))&&Lw(t,t.output,t.next_out,p-t.avail_out),f-=t.avail_in,p-=t.avail_out,t.total_in+=f,t.total_out+=p,r.total+=p,r.wrap&&p&&(t.adler=r.check=r.flags?br(r.check,i,p,t.next_out-p):Gs(r.check,i,p,t.next_out-p)),t.data_type=r.bits+(r.last?64:0)+(r.mode===Ii?128:0)+(r.mode===Jl||r.mode===Rf?256:0),(f===0&&p===0||e===iw)&&Q===$o&&(Q=AS),Q},"inflate$2"),$S=c(t=>{if(!t||!t.state)return dn;let e=t.state;return e.window&&(e.window=null),t.state=null,$o},"inflateEnd"),LS=c((t,e)=>{if(!t||!t.state)return dn;const r=t.state;return(r.wrap&2)==0?dn:(r.head=e,e.done=!1,$o)},"inflateGetHeader"),BS=c((t,e)=>{const r=e.length;let n,i,o;return!t||!t.state||(n=t.state,n.wrap!==0&&n.mode!==Yl)?dn:n.mode===Yl&&(i=1,i=Gs(i,e,r,0),i!==n.check)?ow:(o=Lw(t,e,r,r),o?(n.mode=kw,aw):(n.havedict=1,$o))},"inflateSetDictionary");var US=Pw,OS=Nw,HS=Fw,WS=PS,qS=Mw,zS=MS,jS=$S,VS=LS,GS=BS,KS="pako inflate (from Nodeca project)",Ti={inflateReset:US,inflateReset2:OS,inflateResetKeep:HS,inflateInit:WS,inflateInit2:qS,inflate:zS,inflateEnd:jS,inflateGetHeader:VS,inflateSetDictionary:GS,inflateInfo:KS};function ZS(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}c(ZS,"GZheader");var QS=ZS;const Bw=Object.prototype.toString,{Z_NO_FLUSH:XS,Z_FINISH:YS,Z_OK:nc,Z_STREAM_END:kf,Z_NEED_DICT:Df,Z_STREAM_ERROR:JS,Z_DATA_ERROR:Uw,Z_MEM_ERROR:eC}=Do;function ic(t){this.options=Kl.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)==0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Qv,this.strm.avail_out=0;let r=Ti.inflateInit2(this.strm,e.windowBits);if(r!==nc)throw new Error(ko[r]);if(this.header=new QS,Ti.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=ec.string2buf(e.dictionary):Bw.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=Ti.inflateSetDictionary(this.strm,e.dictionary),r!==nc)))throw new Error(ko[r])}c(ic,"Inflate$1"),ic.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let o,a,s;if(this.ended)return!1;for(e===~~e?a=e:a=e===!0?YS:XS,Bw.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),o=Ti.inflate(r,a),o===Df&&i&&(o=Ti.inflateSetDictionary(r,i),o===nc?o=Ti.inflate(r,a):o===Uw&&(o=Df));r.avail_in>0&&o===kf&&r.state.wrap>0&&t[r.next_in]!==0;)Ti.inflateReset(r),o=Ti.inflate(r,a);switch(o){case JS:case Uw:case Df:case eC:return this.onEnd(o),this.ended=!0,!1}if(s=r.avail_out,r.next_out&&(r.avail_out===0||o===kf))if(this.options.to==="string"){let l=ec.utf8border(r.output,r.next_out),u=r.next_out-l,d=ec.buf2string(r.output,l);r.next_out=u,r.avail_out=n-u,u&&r.output.set(r.output.subarray(l,l+u),0),this.onData(d)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(o===nc&&s===0)){if(o===kf)return o=Ti.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(r.avail_in===0)break}}return!0},ic.prototype.onData=function(t){this.chunks.push(t)},ic.prototype.onEnd=function(t){t===nc&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Kl.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function Ff(t,e){const r=new ic(e);if(r.push(t),r.err)throw r.msg||ko[r.err];return r.result}c(Ff,"inflate$1");function tC(t,e){return e=e||{},e.raw=!0,Ff(t,e)}c(tC,"inflateRaw$1");var rC=ic,nC=Ff,iC=tC,oC=Ff,aC=Do,sC={Inflate:rC,inflate:nC,inflateRaw:iC,ungzip:oC,constants:aC};const{Deflate:cC,deflate:lC,deflateRaw:uC,gzip:dC}=mS,{Inflate:hC,inflate:fC,inflateRaw:pC,ungzip:gC}=sC;var mC=cC,vC=lC,wC=uC,yC=dC,bC=hC,_C=fC,xC=pC,Ow=gC,SC=Do,aR={Deflate:mC,deflate:vC,deflateRaw:wC,gzip:yC,Inflate:bC,inflate:_C,inflateRaw:xC,ungzip:Ow,constants:SC};class Pf{constructor(e){this.bytes=e,this.byteIndexCurrent=0}hasMoreBytes(){return this.byteIndexCurrent<this.bytes.length}readBytes(e){const r=this.byteIndexCurrent;return this.byteIndexCurrent+=e,this.bytes.slice(r,this.byteIndexCurrent)}readByte(){const e=this.bytes[this.byteIndexCurrent];return this.byteIndexCurrent++,e}readString(e){const r=[],n=this.byteIndexCurrent+e;let i=this.byteIndexCurrent;for(;i<n;){const o=this.bytes[i++];if(o===0)break;let a=0,s=0;if((o&128)==0)a=o,s=0;else if((o&224)==192)a=o&31,s=1;else if((o&240)==224)a=o&15,s=2;else if((o&248)==240)a=o&7,s=3;else throw Error(`Invalid unicode, unknown multibyte encoding header ${o.toString(2)} at offset ${i}`);for(;s>0;){const l=this.bytes[i++];if((l&192)!=128)throw Error(`Invalid unicode, unexpected multibyte encoding trailer ${l.toString(2)} at offset ${i}`);a=a<<6|l&63,s--}r.push(String.fromCodePoint(a))}return this.byteIndexCurrent=n,r.join("")}}c(Pf,"ByteStream");class $r{constructor(e,r){this.value=e,this.id=`_${this.value}`,this.name=r}static Instances(){return $r._instances==null&&($r._instances=new Hw),$r._instances}}c($r,"TarFileTypeFlag");class Hw{constructor(){this.Normal=new $r("0","Normal"),this.HardLink=new $r("1","Hard Link"),this.SymbolicLink=new $r("2","Symbolic Link"),this.CharacterSpecial=new $r("3","Character Special"),this.BlockSpecial=new $r("4","Block Special"),this.Directory=new $r("5","Directory"),this.FIFO=new $r("6","FIFO"),this.ContiguousFile=new $r("7","Contiguous File"),this.LongFilePath=new $r("L","././@LongLink"),this._All=[this.Normal,this.HardLink,this.SymbolicLink,this.CharacterSpecial,this.BlockSpecial,this.Directory,this.FIFO,this.ContiguousFile,this.LongFilePath];for(let e=0;e<this._All.length;e++){const r=this._All[e];this._All[r.id]=r}}}c(Hw,"TarFileTypeFlag_Instances");class tu{constructor(e,r,n,i,o,a,s,l,u,d,f,p,g,S,y,b){this.fileName=e,this.fileMode=r,this.userIDOfOwner=n,this.userIDOfGroup=i,this.fileSizeInBytes=o,this.timeModifiedInUnixFormat=a,this.checksum=s,this.typeFlag=l,this.nameOfLinkedFile=u,this.uStarIndicator=d,this.uStarVersion=f,this.userNameOfOwner=p,this.groupNameOfOwner=g,this.deviceNumberMajor=S,this.deviceNumberMinor=y,this.filenamePrefix=b,this.fullFileName=b.length?b.endsWith("/")?b+e:`${b}/${e}`:e}static fromBytes(e){const r=new Pf(e),n=r.readString(100).trim(),i=r.readString(8),o=r.readString(8),a=r.readString(8),s=r.readString(12),l=r.readBytes(12),u=r.readString(8),d=r.readString(1),f=r.readString(100),p=r.readString(6),g=r.readString(2),S=r.readString(32),y=r.readString(32),b=r.readString(8),_=r.readString(8),C=r.readString(155),k=r.readBytes(12),F=parseInt(s.trim(),8),$=parseInt(u,8),ne=$r.Instances()._All,ie=`_${d}`,Q=ne[ie];return new tu(n,i,o,a,F,l,$,Q,f,p,g,S,y,b,_,C)}}c(tu,"TarFileEntryHeader");const Ww=512;class ru{constructor(e,r){this.header=e,this.dataAsBytes=r}static fromBytes(e,r){const n=Ww,i=tu.fromBytes(e),o=i.fileSizeInBytes,s=Math.ceil(o/n)*n,l=r.readBytes(s).slice(0,o);return new ru(i,l)}}c(ru,"TarFileEntry");class nu{constructor(e){var r;this.entries=e,this.consolidateLongPathEntries();for(const n of this.entries)((r=n.header.typeFlag)==null?void 0:r.name)==="Normal"&&(n.header.fullFileName=n.header.fullFileName.replace(/^[^/]+\/?/,""));this.entryMap=new Map;for(const n of this.entries)this.entryMap.set(n.header.fullFileName,n)}static async fromBytes(e){const r=new Pf(e),n=[],i=Ww;let o=0,a=0;for(;r.hasMoreBytes()==!0;){++o%1e3==0&&await new Promise(u=>setTimeout(u,10));const s=r.readBytes(i);let l=!0;for(let u=0;u<s.length;u++)if(s[u]!=0){l=!1;break}if(l==!0){if(a++,a==2)break}else{a=0;const u=ru.fromBytes(s,r);n.push(u)}}return new nu(n)}consolidateLongPathEntries(){var e;const r=$r.Instances().LongFilePath.name,n=this.entries;for(let i=0;i<n.length;i++){const o=n[i];if(((e=o.header.typeFlag)==null?void 0:e.name)==r){const a=n[i+1];a.header.fileName=o.dataAsBytes.reduce((s,l)=>s+=String.fromCharCode(l),""),a.header.fileName=a.header.fileName.replace(/\0/g,""),n.splice(i,1),i--}}}}c(nu,"TarFile");const CC=c(t=>nu.fromBytes(t),"readTar"),Zr=(0,Me.loadMessageBundle)(),iu=new TextDecoder,Nf=new TextEncoder;class qw{constructor(e,r=0){this.retainFor=r;try{this.weakRef=new WeakRef(e)}catch{}this.retain(e)}retain(e){this.retainTimeout&&clearTimeout(this.retainTimeout),this.strongRef=e,this.retainTimeout=setTimeout(()=>{this.strongRef=void 0,this.retainTimeout=void 0},this.retainFor)}deref(){var e,r;const n=(r=this.strongRef)!=null?r:(e=this.weakRef)==null?void 0:e.deref();return n&&this.retain(n),n}}c(qw,"TimedRetainingRef");class zw{constructor(e,r){this.root=e,this.providerService=r,this._onDidChangeIndexingEnablement=new h.EventEmitter,this._onDidDownloadTar=new h.EventEmitter,this.ongoingDiskRequests=new Map,this.ongoingNetworkRequests=new Map,this.indexingDisabled=!1,this.usageFile=h.Uri.joinPath(this.root,"usageHistory.json"),this.indexingAllowanceFile=h.Uri.joinPath(this.root,"indexAllowances.json"),this._disposable=h.Disposable.from(...this.registerCommands()),this.updateContext()}get onDidChangeIndexingEnablement(){return this._onDidChangeIndexingEnablement.event}get onDidDownloadTar(){return this._onDidDownloadTar.event}async updateContext(){await xi(Hn.HasSearchIndexes,(await this.listTars()).length>0);const e=this.providerService.repositories.map(i=>i.name),r=await this.getIndexingEnabledRepos(),n=r.has("*")||e.every(i=>r.has(i));await xi(Hn.EnabledSomeSearchIndexes,r.size>0),await xi(Hn.EnabledAllSearchIndexes,n)}dispose(){this._disposable.dispose()}registerCommands(){return[h.commands.registerCommand("remoteHub.configureIndexingAllowedRepos",async()=>{await this.configureIndexingAllowedRepos()}),h.commands.registerCommand("remoteHub.disableIndexingForSession",()=>(this.temporarilyDisableIndexing(),{triggerSearch:!0})),h.commands.registerCommand("remoteHub.enableIndexing",async()=>{const e={title:Zr("search download prompt enable","Enable")},r={title:Zr("search download prompt configure","Configure")},n={title:Zr("search download prompt cancel","Cancel"),isCloseAffordance:!0},i=await h.window.showInformationMessage(Zr("search download prompt",`Indexing creates a copy of this repository in your browser's storage in order to provide enhanced text searches.

Without indexing, searches will use GitHub's text search, which is imprecise.

Do you want to enable creating local indexes for this repository on this browser?`),{modal:!0,useCustom:!0},e,r,n);if(i===r&&await h.commands.executeCommand("workbench.action.openSettings","remoteHub.search.download"),i===e)return await this.markIndexingEnablementForRepos(!0),{triggerSearch:!0}}),h.commands.registerCommand("remoteHub.deleteLocalRepositoryData",async()=>{const e=c(i=>{const o=[{power:9,name:"GB"},{power:6,name:"MB"},{power:3,name:"kB"},{power:0,name:"B"}];for(const a of o)if(i>10**a.power)return`${Math.round(i/10**a.power)} ${a.name}`;return"Unknown size"},"humanReadableSize"),r=await this.listTars();if(r.length===0){await h.window.showInformationMessage("No Repository Indexes Found");return}const n=h.window.createQuickPick();n.canSelectMany=!0,n.items=r.map(({name:i,size:o,path:a})=>({label:i,path:a,description:o?e(o):void 0})),n.show(),n.onDidAccept(async()=>{n.hide();for(const{label:i,path:o}of n.selectedItems){const a=h.workspace.fs.delete(o),s=h.window.setStatusBarMessage(`$(loading) Deleting ${i}`,a);await a,s.dispose()}this.updateContext()}),n.onDidHide(()=>n.dispose())}),h.commands.registerCommand("remoteHub.deleteAllLocalRepositoryData",()=>h.window.withProgress({location:h.ProgressLocation.Notification,title:"Deleting Repository Indexes..."},async()=>{this.lastReadKey=void 0,this.lastReadValue=void 0;try{await Promise.all([h.workspace.fs.delete(this.root,{recursive:!0})])}catch(e){V.error(e)}finally{this.updateContext()}}))]}getTarFromMemory(e){var r;if(e===this.lastReadKey){const n=(r=this.lastReadValue)==null?void 0:r.deref();if(n)return n;V.log("Weakref deallocated.")}}async getTarFromDisk(e){try{const r=await h.workspace.fs.readFile(e);return!r||!r.length?void 0:r}catch(r){(!(r instanceof h.FileSystemError)||r.code!==h.FileSystemError.FileNotFound.name)&&(h.window.showWarningMessage(Zr("diskReadUnexpectedError","Unexpected error reading index from disk, attempting to reload from network")),V.error(r,"Unexpected error reading tarball from disk"));return}}async getTarFromNetwork(e,r){try{const n=await this.isIndexingEnabledForRepo(e);if(n){const i=await this.providerService.getTarGz(e);if(i)return i}else if(n===void 0){const i=ke.get("experimental.fs.maxAutoDownloadSize");if(i===null)throw new h.CancellationError;if(i)try{const a=await this.providerService.getTarGz(e,i*1024*1024);if(a)return a}catch(a){if(!(a instanceof h.CancellationError))throw a}const o=await h.window.showWarningMessage(Zr("bigRepo","This repository is big! Continue download?"),{modal:r,useCustom:!0,detail:Zr("downloadUse","Full text search and workspace symbol navigation require a copy of the repository. If you choose not to download, limited versions of these services will be provided.")},{id:"no",title:Zr("no","No"),isCloseAffordance:!0},{id:"configure",title:Zr("configure","Configure")},{id:"one",title:Zr("once","Download Once")},{id:"repo",title:Zr("inrepo","Download in Repository")});switch(o==null?void 0:o.id){case"repo":await this.markIndexingEnablementForRepos(!0);case"one":{const a=await this.providerService.getTarGz(e);if(a)return a;break}case"configure":await h.commands.executeCommand("workbench.action.openSettings","remoteHub.experimental.fs.maxAutoDownloadSize");break;case"no":await this.markIndexingEnablementForRepos(!1)}}throw new h.CancellationError}finally{this.updateContext()}}async getTar(e,r,n){n===void 0&&({HEAD:{sha:n}}=await this.providerService.getMetadata(e));const i=this.getTarStorageUri(e,n),o=await this.getTarCacheKey(e,n);try{let a=this.ongoingNetworkRequests.get(o);return a===void 0&&(a=this.getTarCore(e,n,i,{blocking:r}),this.ongoingNetworkRequests.set(o,a)),await a}finally{this.ongoingNetworkRequests.delete(o)}}async getInMemoryTar(e){return this.getTarFromMemory(await this.getTarCacheKey(e))}async getCachedTar(e,r){const n=await this.getTarCacheKey(e,r),i=this.getTarStorageUri(e,r);try{let o=this.ongoingDiskRequests.get(n);return o===void 0&&(o=this.getTarCore(e,r,i,{skipDownload:!0,blocking:!1})),await o}finally{this.ongoingDiskRequests.delete(n)}}async getTarCore(e,r,n,i){const o=this.providerService.getCanonicalUri(e),a=`${B(o,{excludeScheme:!0})}/${r}`,s=new Z(`TarPit.getTar(${a})`),l=await this.getTarCacheKey(e,r),u=Date.now();let d,f;try{if(s.logStep("Getting .tar from memory",{suffix:" \u2022 Getting .tar from memory..."}),f=this.getTarFromMemory(l),f)return d=" \u2022 Got .tar from memory",f;s.logStep("Getting .tar from disk",{message:": Not found \u2022",suffix:" \u2022 Getting .tar from disk..."});let p=!1,g=await this.getTarFromDisk(n);if(g==null?void 0:g.length)d=" \u2022 Got .tar from disk";else{if(i==null?void 0:i.skipDownload){d=" \u2022 Skipped download";return}s.logStep("Getting .tar from network",{message:": Not found \u2022",suffix:" \u2022 Getting .tar from network..."}),g=await this.getTarFromNetwork(e,i.blocking),p=!0,d=" \u2022 Got .tar from network",h.workspace.fs.writeFile(n,g).then(()=>V.debug(`Sucessfully wrote tarball to disk in ${Date.now()-u}ms`),y=>V.error(y,`Error writing tarball to disk in ${Date.now()-u}ms`))}if(!(g==null?void 0:g.length))throw new Error("Internal Error: Invalid repository index. Try deleting repository data and running operation again: `GitHub Repositories: Delete Local Repository Data...`");s.logStep("Unzipping .tar",{suffix:" \u2022 Unzipping .tar..."});const S=Ow(g);return s.logStep("Parsing .tar",{suffix:" \u2022 Parsing .tar..."}),f=await CC(S),s.stop({message:"Finished getting tar"}),this.lastReadValue=new qw(f,10*(Date.now()-u)),this.lastReadKey=l,p&&setTimeout(()=>this._onDidDownloadTar.fire({rootUri:e,sha:r}),0),f}catch(p){throw d=` \u2022 Failed; ${String(p)}`,p}finally{f&&(this.markCacheEntryUsed(`${a}`).catch(p=>V.log(`Error marking entry used: ${p}`)),this.cleanUpCache().catch(p=>V.log(`Error cleaning cache: ${p}`))),s.stop(d?{suffix:d}:void 0)}}async getTarCacheKey(e,r){return r===void 0&&({HEAD:{sha:r}}=await this.providerService.getMetadata(e)),this.getTarStorageUri(e,r).toString()}getTarStorageUri(e,r){return h.Uri.joinPath(this.root,"tars",B(this.providerService.getCanonicalUri(e),{excludeScheme:!0}),r)}async readDir(e){try{return(await h.workspace.fs.readDirectory(e)).map(r=>h.Uri.joinPath(e,r[0]))}catch{return[]}}temporarilyDisableIndexing(){this.indexingDisabled=!0}async isIndexingEnabledForRepo(e){if(this.indexingDisabled)return!1;const r=await this.getIndexingEnabledRepos();if(r.has("*"))return!0;const{name:n}=this.providerService.getVirtualUriMetadata(e);if(!!n){if(r.has(n))return!0;if(r.has(`-${n}`))return!1}}async configureIndexingAllowedRepos(){const e=[...(await this.getIndexingEnabledRepos()).values()],r=await h.window.showQuickPick(e.map(n=>({picked:!0,label:n.startsWith("-")?`${Zr("disallowed","Disallowed:")} ${n.slice(1)}`:`${Zr("disallowed","Allowed:")} ${n}`})),{canPickMany:!0,title:Zr("select repos where indexing is allowed","Repository index allowance overrides")});r&&await this.writeIndexEnablementData(r.map(n=>n.label))}async getIndexingEnabledRepos(){let e;try{e=JSON.parse(iu.decode(await h.workspace.fs.readFile(this.indexingAllowanceFile)))}catch(r){r instanceof h.FileSystemError&&r.code!==h.FileSystemError.FileNotFound().code&&V.error(r,"Error reading index allowance data."),e=[]}return new Set(e)}async listTars(){const e=await this.readDir(h.Uri.joinPath(this.root,"tars")).catch(()=>[]),r=(await Promise.all(e.map(o=>this.readDir(o)))).flat(),n=(await Promise.all(r.map(o=>this.readDir(o)))).flat(),i=(await Promise.all(n.map(o=>this.readDir(o)))).flat();return Promise.all(i.map(async o=>({name:o.path.replace(/^.*\/tars\//,""),path:o,size:(await h.workspace.fs.stat(o)).size})))}async markIndexingEnablementForRepos(e){let r;try{r=JSON.parse(iu.decode(await h.workspace.fs.readFile(this.indexingAllowanceFile)))}catch(o){o instanceof h.FileSystemError&&o.code!==h.FileSystemError.FileNotFound().code&&V.error(o,"Error reading index allowance data."),r=[]}const n=e?this.providerService.repositories.map(o=>o.name):[],i=e?[]:this.providerService.repositories.map(o=>o.name);r=[...r,...n].filter(o=>o.startsWith("-")?!n.includes(o.slice(1)):!i.includes(`-${o}`));for(const o of i)r.push(`-${o}`);this.indexingDisabled=!1,await this.writeIndexEnablementData(r)}async writeIndexEnablementData(e){await h.workspace.fs.writeFile(this.indexingAllowanceFile,Nf.encode(JSON.stringify(e))),await this.updateContext(),setTimeout(()=>this._onDidChangeIndexingEnablement.fire(),0)}async markCacheEntryUsed(e){let r;try{r=JSON.parse(iu.decode(await h.workspace.fs.readFile(this.usageFile)))}catch(n){n instanceof h.FileSystemError&&n.code!==h.FileSystemError.FileNotFound().code&&V.error(n,"Error reading usage data."),r={}}r[e]=Number(Date.now()),await h.workspace.fs.writeFile(this.usageFile,Nf.encode(JSON.stringify(r)))}async cleanUpCache(){var e,r;V.log("Cleaning up search cache...");const n=await this.listTars();let i;try{i=JSON.parse(iu.decode(await h.workspace.fs.readFile(this.usageFile)))}catch(f){f instanceof h.FileSystemError&&f.code!==h.FileSystemError.FileNotFound().code&&V.error(f,"Error reading usage data. All existing indexes will be discarded."),i={}}const o=[];n.forEach(f=>{var p;const g=/^([^/]*\/[^/]*)\//.exec(f.name);if(!g)throw Error("Unexpected repo entry");const S=g[1],y=(p=i[f.name])!=null?p:0;o.push({...f,lastUsed:y,repo:S})}),o.sort((f,p)=>p.lastUsed-f.lastUsed);let a=0;const s=[],l=new Map,u=((e=ke.get("search.download.sizeLimit"))!=null?e:100)*1024*1024,d=(r=ke.get("search.download.repoLimit"))!=null?r:4;o.forEach(f=>{var p,g;(f.lastUsed===0||a>u||((p=l.get(f.repo))!=null?p:0)>d)&&s.push(f),a+=f.size,l.set(f.repo,((g=l.get(f.repo))!=null?g:0)+1)}),await Promise.all(s.map(async f=>{try{await h.workspace.fs.delete(f.path,{recursive:!0}),delete i[f.name],V.log(`Deleted cache entry for ${f.name}`)}catch(p){V.log(`Deleting cache entry for ${f.name} failed; ${String(p)}`)}})),await h.workspace.fs.writeFile(this.usageFile,Nf.encode(JSON.stringify(i))),await this.updateContext()}}c(zw,"TarPit");const EC=(0,Me.loadMessageBundle)();async function RC(t,e,r,n,i,o,a){return Mf("provideTextSearchResults",async()=>{const s=Ax(n.pattern,Boolean(n.isRegExp),{matchCase:n.isCaseSensitive,wholeWord:n.isWordMatch,multiline:n.isMultiline,global:!0});let l;try{l=await Mf("fetch tarball",()=>r.getTar(i.folder,!0))}catch(b){if(b instanceof h.CancellationError)throw b;return{limitHit:!1,message:{type:h.TextSearchCompleteMessageType.Warning,trusted:!0,text:EC("indexNotAvailable","Repository index not available. [Retry with indexing disabled]({0}).","command:remoteHub.disableIndexingForSession")}}}if(a.isCancellationRequested)return{limitHit:!1};const{maxResults:u,maxFileSize:d,includes:f,excludes:p}=i,g=await AC(i.folder,t,l,e);if(a.isCancellationRequested)return{limitHit:!0};let S=u;const y=Ix(g,f,p,d);return Mf("searchFiles",async()=>{var b,_;let C=0;for(const k of g){if(!y.has(k.path))continue;const F=Tx(k.contents,k.path,s,{beforeContext:(b=i.beforeContext)!=null?b:0,afterContext:(_=i.afterContext)!=null?_:0,previewOptions:i.previewOptions,remainingResultQuota:S});for(const $ of F)o.report({...$,uri:h.Uri.joinPath(i.folder,$.uri.path)});if(S!==void 0&&(S-=F.length,S<=0))return{limitHit:!0};if(C++,C%1e4==0&&(await new Promise($=>setTimeout($,0)),a.isCancellationRequested))return{limitHit:!1}}return{limitHit:!1}})})}c(RC,"provideTextSearchResults");async function AC(t,e,r,n){const i=r.entries,o=e.getVirtualRootUri(t),a=await n.getChanges(o,{predicate:f=>f.fileType===h.FileType.File});if(a.length===0)return i.map(f=>({contents:f.dataAsBytes,path:f.header.fullFileName,size:f.dataAsBytes.byteLength}));const s=await Promise.all(Oo(a,f=>{if(f.type===I.Created)return n.getContent(f.uri).then(p=>({path:e.getRelativeFilePath(o,f.uri),size:p.length,contents:p}))})),l=await Promise.all(Oo(a,f=>{if(f.type===I.Changed)return n.getContent(f.uri).then(p=>({path:e.getRelativeFilePath(o,f.uri),size:p.length,contents:p}))})),u=new Set(_u(oi(l,f=>f.path),Oo(a,f=>{if(f.type===I.Deleted)return e.getRelativeFilePath(o,f.uri)})));return[...Oo(i,f=>{if(!u.has(f.header.fullFileName))return{contents:f.dataAsBytes,path:f.header.fullFileName,size:f.dataAsBytes.byteLength}}),...s,...l]}c(AC,"listAllFiles");function sR(t,e){const r=Date.now(),n=e();return Logger.log(`${t} time: ${Date.now()-r}`),n}c(sR,"timeSync");async function Mf(t,e){const r=Date.now(),n=await e();return V.log(`${t} time: ${Date.now()-r}`),n}c(Mf,"time");var IC=Object.defineProperty,TC=Object.getOwnPropertyDescriptor,$f=c((t,e,r,n)=>{for(var i=n>1?void 0:n?TC(e,r):e,o=t.length-1,a;o>=0;o--)(a=t[o])&&(i=(n?a(e,r,i):a(i))||i);return n&&i&&IC(e,r,i),i},"github_fs_decorateClass");const Lf=(0,Me.loadMessageBundle)(),kC=h.FileSystemError.FileNotFound().code,DC=/(\/|\\)/g,jw=".vscode/.github-pull-request.rec";class oc{constructor(e,r,n,i){this.providerService=e,this.github=r,this.changeStore=n,this.tarPit=i,this._onDidChangeFile=new h.EventEmitter,this.fileSearchCache=new Map,this.pendingUriRequests=new Map,this.pendingUriRequestsEventDelay=10,this.implicitlyWatchedUris=new Map,this.watchedUris=new Map,this.disposable=h.Disposable.from(h.workspace.registerFileSystemProvider(this.scheme,this,{isCaseSensitive:!0,isReadonly:!0}),h.workspace.registerFileSearchProvider(this.scheme,this),h.workspace.registerTextSearchProvider(this.scheme,this),e.onDidChangeRepository(o=>{o.reason==="HEAD"&&this.onRefreshOrRepositoryChanged([o.repository.uri])}),e.onDidRefresh(o=>this.onRefreshOrRepositoryChanged(o)))}get onDidChangeFile(){return this._onDidChangeFile.event}get scheme(){return this.github.scheme}dispose(){var e;(e=this.disposable)==null||e.dispose()}onRefreshOrRepositoryChanged(e){if(e=e.filter(r=>Xt.getProviderId(r)===this.scheme).map(r=>de.getProviderUri(r)),e.length!==0){V.log(`GitHubFS.onRefreshOrRepositoryChanged(${e.map(r=>r.toString()).join(", ")})`),this.fileSearchCache.clear();for(const[r,n]of[...this.pendingUriRequests])e.some(i=>A(n.uri,i))&&(this.pendingUriRequests.delete(r),n.outdated=!0);this.updateOpenOrWatchedUris(e)}}updateOpenOrWatchedUris(e){const r=de.getOpenUris(this.scheme,e);for(const[i,o]of[...this.watchedUris,...this.implicitlyWatchedUris])e.some(a=>A(o,a))&&(this.implicitlyWatchedUris.delete(i),r.set(i,o));V.debug(`GitHubFS.updateOpenOrWatchedUris(${e.map(i=>i.toString()).join(", ")}): uris=${r.size}`);for(const i of e)r.set(E(i),i);const n=[...r.values()].map(i=>({type:h.FileChangeType.Changed,uri:i}));setTimeout(()=>{V.debug(`GitHubFS.updateOpenOrWatchedUris: Firing events=${n.map(i=>i.uri.toString()).join(", ")}`),this._onDidChangeFile.fire(n)},0)}watch(e,r){const n=E(e);return this.watchedUris.set(n,e),{dispose:()=>{this.watchedUris.delete(n)}}}async stat(e){var r,n;const i=E(e);this.implicitlyWatchedUris.set(i,e);const o=this.providerService.getRelativeFilePath(e),a={uri:e,outdated:!1};try{this.pendingUriRequests.set(`stat:${i}`,a);const s=await this.github.getFileTree(e),l=await s.get(o);if(l==null?void 0:l.stat)return l==null?void 0:l.stat;if(this.implicitlyWatchedUris.delete(i),e.query==="~")return{type:h.FileType.File,size:0,ctime:0,mtime:(r=s.timestamp)!=null?r:Date.now(),permissions:h.FilePermission.Readonly};if(o===jw){const{ref:u}=this.providerService.getVirtualUriMetadata(e);if((u==null?void 0:u.type)===G.PullRequest)return{type:h.FileType.File,size:0,ctime:0,mtime:(n=s.timestamp)!=null?n:Date.now(),permissions:h.FilePermission.Readonly}}throw h.FileSystemError.FileNotFound(e)}finally{this.pendingUriRequests.delete(`stat:${i}`),(a==null?void 0:a.outdated)&&setTimeout(()=>{V.log(`GitHubFS.stat(${e.toString()}): Repository changed; firing change event...`),this._onDidChangeFile.fire([{type:h.FileChangeType.Changed,uri:e}])},this.pendingUriRequestsEventDelay)}}async readDirectory(e,r){this.implicitlyWatchedUris.set(E(e),e);const n=await this.github.getFileTree(e),i=this.providerService.getRelativeFilePath(e),o=(await n.getChildren(i,r)).map(([a,{stat:{type:s}}])=>[a,s]);return i===""&&Z.stop("Time to root directory"),o}createDirectory(e){throw h.FileSystemError.NoPermissions()}async readFile(e){const r=E(e);this.implicitlyWatchedUris.set(r,e);const n={uri:e,outdated:!1};try{return this.pendingUriRequests.set(r,n),await this.github.getFileContent(e)}catch(i){if(this.implicitlyWatchedUris.delete(r),i instanceof h.FileSystemError&&i.code===kC){if(e.query==="~")return new Uint8Array(0);if(this.providerService.getRelativeFilePath(e)===jw){const{ref:a}=this.providerService.getVirtualUriMetadata(e);if((a==null?void 0:a.type)===G.PullRequest)return new Uint8Array(0)}}throw i}finally{this.pendingUriRequests.delete(r),(n==null?void 0:n.outdated)&&setTimeout(()=>{V.log(`GitHubFS.readFile(${e.toString()}): Repository changed; firing change event...`),this._onDidChangeFile.fire([{type:h.FileChangeType.Changed,uri:e}])},this.pendingUriRequestsEventDelay)}}writeFile(e,r,n){throw h.FileSystemError.NoPermissions()}delete(e,r){throw h.FileSystemError.NoPermissions()}rename(e,r,n){throw h.FileSystemError.NoPermissions()}copy(e,r,n){throw h.FileSystemError.NoPermissions()}async provideFileSearchResults(e,{folder:r,maxResults:n,includes:i,excludes:o},a){const s=`${E(r)}|${JSON.stringify({includes:i,excludes:o})}`;let l=this.fileSearchCache.get(s);if(l===void 0){const d=this.providerService.getRelativeFilePath(r);let f;await this.github.hasFileTree(r)&&(f=await this.github.getFileTree(r));let p;if(f===void 0||f.loading||!f.hasEntireTree?p=await this.github.getFileList(r,d):p=(await f.getChildren(d,{filter:h.FileType.File,recursive:!0})).map(([g])=>g),p.length===0||a.isCancellationRequested)return[];((i==null?void 0:i.length)||(o==null?void 0:o.length))&&(p=[...vv(p,i,o)]),l=p.map(g=>af.prepareSlow(g)),this.fileSearchCache.set(s,l)}let u;return e.pattern===""?u=l.map(d=>h.Uri.joinPath(r,d.target)):(u=af.go(e.pattern.replace(DC,"/"),l,{allowTypo:!0,limit:n}).map(d=>h.Uri.joinPath(r,d.target)),af.cleanup()),n!==void 0&&n!==0&&n<u.length&&(u=u.slice(0,n)),u}async provideTextSearchResults(e,r,n,i){const o=[];if(await this.tarPit.isIndexingEnabledForRepo(r.folder)!==!1)try{return await RC(this.providerService,this.changeStore,this.tarPit,e,r,n,i)}catch(l){l instanceof h.CancellationError||o.push({text:Lf("index error","Error searching index, falling back to GitHub search. Try [deleting this repo's data]({0}) or [deleting all local data]({1}) to rebuild the index.","command:remoteHub.deleteLocalRepositoryData","command:remoteHub.deleteAllLocalRepositoryData"),type:h.TextSearchCompleteMessageType.Warning})}e.isCaseSensitive||e.isRegExp||e.isWordMatch?o.push({text:Lf("flags not supported","Search flags are not supported by GitHub search. [Enable indexing]({0}) for full search features and exact text searches.","command:remoteHub.enableIndexing"),type:h.TextSearchCompleteMessageType.Warning,trusted:!0}):o.push({text:Lf("enable index","Partial results shown. [Enable indexing]({0}) for exact text searches.","command:remoteHub.enableIndexing"),type:h.TextSearchCompleteMessageType.Information,trusted:!0});const a=await this.github.searchCodeQuery(e.pattern,r.folder,{maxResults:r.maxResults,context:{before:r.beforeContext,after:r.afterContext}});if(a.warnings&&a.warnings.forEach(l=>{o.push({text:l,trusted:!0,type:h.TextSearchCompleteMessageType.Warning})}),a===void 0)return{limitHit:!0,message:o};let s;for(const l of a.matches)s=h.Uri.joinPath(r.folder,l.path),n.report({uri:s,ranges:l.ranges,preview:{text:l.preview,matches:l.matches}});return{limitHit:!1,message:o}}}c(oc,"GitHubFS"),$f([be()],oc.prototype,"stat",1),$f([be()],oc.prototype,"readDirectory",1),$f([be()],oc.prototype,"readFile",1);var FC=__webpack_require__(6470),ac=__webpack_require__(4155);function ou(){return typeof navigator=="object"&&"userAgent"in navigator?navigator.userAgent:typeof ac=="object"&&"version"in ac?`Node.js/${ac.version.substr(1)} (${ac.platform}; ${ac.arch})`:"<environment undetectable>"}c(ou,"getUserAgent");var PC=__webpack_require__(5186);/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function Vw(t){return Object.prototype.toString.call(t)==="[object Object]"}c(Vw,"isObject");function Gw(t){var e,r;return Vw(t)===!1?!1:(e=t.constructor,e===void 0?!0:(r=e.prototype,!(Vw(r)===!1||r.hasOwnProperty("isPrototypeOf")===!1)))}c(Gw,"isPlainObject");function NC(t){return t?Object.keys(t).reduce((e,r)=>(e[r.toLowerCase()]=t[r],e),{}):{}}c(NC,"lowercaseKeys");function Kw(t,e){const r=Object.assign({},t);return Object.keys(e).forEach(n=>{Gw(e[n])?n in t?r[n]=Kw(t[n],e[n]):Object.assign(r,{[n]:e[n]}):Object.assign(r,{[n]:e[n]})}),r}c(Kw,"mergeDeep");function Zw(t){for(const e in t)t[e]===void 0&&delete t[e];return t}c(Zw,"removeUndefinedProperties");function Bf(t,e,r){if(typeof e=="string"){let[i,o]=e.split(" ");r=Object.assign(o?{method:i,url:o}:{url:i},r)}else r=Object.assign({},e);r.headers=NC(r.headers),Zw(r),Zw(r.headers);const n=Kw(t||{},r);return t&&t.mediaType.previews.length&&(n.mediaType.previews=t.mediaType.previews.filter(i=>!n.mediaType.previews.includes(i)).concat(n.mediaType.previews)),n.mediaType.previews=n.mediaType.previews.map(i=>i.replace(/-preview/,"")),n}c(Bf,"dist_web_merge");function MC(t,e){const r=/\?/.test(t)?"&":"?",n=Object.keys(e);return n.length===0?t:t+r+n.map(i=>i==="q"?"q="+e.q.split("+").map(encodeURIComponent).join("+"):`${i}=${encodeURIComponent(e[i])}`).join("&")}c(MC,"addQueryParameters");const $C=/\{[^}]+\}/g;function LC(t){return t.replace(/^\W+|\W+$/g,"").split(/,/)}c(LC,"removeNonChars");function BC(t){const e=t.match($C);return e?e.map(LC).reduce((r,n)=>r.concat(n),[]):[]}c(BC,"extractUrlVariableNames");function Qw(t,e){return Object.keys(t).filter(r=>!e.includes(r)).reduce((r,n)=>(r[n]=t[n],r),{})}c(Qw,"omit");function Xw(t){return t.split(/(%[0-9A-Fa-f]{2})/g).map(function(e){return/%[0-9A-Fa-f]/.test(e)||(e=encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]")),e}).join("")}c(Xw,"encodeReserved");function Ba(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}c(Ba,"encodeUnreserved");function sc(t,e,r){return e=t==="+"||t==="#"?Xw(e):Ba(e),r?Ba(r)+"="+e:e}c(sc,"encodeValue");function Ua(t){return t!=null}c(Ua,"isDefined");function Uf(t){return t===";"||t==="&"||t==="?"}c(Uf,"isKeyOperator");function UC(t,e,r,n){var i=t[r],o=[];if(Ua(i)&&i!=="")if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")i=i.toString(),n&&n!=="*"&&(i=i.substring(0,parseInt(n,10))),o.push(sc(e,i,Uf(e)?r:""));else if(n==="*")Array.isArray(i)?i.filter(Ua).forEach(function(a){o.push(sc(e,a,Uf(e)?r:""))}):Object.keys(i).forEach(function(a){Ua(i[a])&&o.push(sc(e,i[a],a))});else{const a=[];Array.isArray(i)?i.filter(Ua).forEach(function(s){a.push(sc(e,s))}):Object.keys(i).forEach(function(s){Ua(i[s])&&(a.push(Ba(s)),a.push(sc(e,i[s].toString())))}),Uf(e)?o.push(Ba(r)+"="+a.join(",")):a.length!==0&&o.push(a.join(","))}else e===";"?Ua(i)&&o.push(Ba(r)):i===""&&(e==="&"||e==="?")?o.push(Ba(r)+"="):i===""&&o.push("");return o}c(UC,"getValues");function OC(t){return{expand:HC.bind(null,t)}}c(OC,"parseUrl");function HC(t,e){var r=["+","#",".","/",";","?","&"];return t.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(n,i,o){if(i){let s="";const l=[];if(r.indexOf(i.charAt(0))!==-1&&(s=i.charAt(0),i=i.substr(1)),i.split(/,/g).forEach(function(u){var d=/([^:\*]*)(?::(\d+)|(\*))?/.exec(u);l.push(UC(e,s,d[1],d[2]||d[3]))}),s&&s!=="+"){var a=",";return s==="?"?a="&":s!=="#"&&(a=s),(l.length!==0?s:"")+l.join(a)}else return l.join(",")}else return Xw(o)})}c(HC,"expand");function Yw(t){let e=t.method.toUpperCase(),r=(t.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),n=Object.assign({},t.headers),i,o=Qw(t,["method","baseUrl","url","headers","request","mediaType"]);const a=BC(r);r=OC(r).expand(o),/^http/.test(r)||(r=t.baseUrl+r);const s=Object.keys(t).filter(d=>a.includes(d)).concat("baseUrl"),l=Qw(o,s);if(!/application\/octet-stream/i.test(n.accept)&&(t.mediaType.format&&(n.accept=n.accept.split(/,/).map(d=>d.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${t.mediaType.format}`)).join(",")),t.mediaType.previews.length)){const d=n.accept.match(/[\w-]+(?=-preview)/g)||[];n.accept=d.concat(t.mediaType.previews).map(f=>{const p=t.mediaType.format?`.${t.mediaType.format}`:"+json";return`application/vnd.github.${f}-preview${p}`}).join(",")}return["GET","HEAD"].includes(e)?r=MC(r,l):"data"in l?i=l.data:Object.keys(l).length?i=l:n["content-length"]=0,!n["content-type"]&&typeof i!="undefined"&&(n["content-type"]="application/json; charset=utf-8"),["PATCH","PUT"].includes(e)&&typeof i=="undefined"&&(i=""),Object.assign({method:e,url:r,headers:n},typeof i!="undefined"?{body:i}:null,t.request?{request:t.request}:null)}c(Yw,"parse");function WC(t,e,r){return Yw(Bf(t,e,r))}c(WC,"endpointWithDefaults");function Jw(t,e){const r=Bf(t,e),n=WC.bind(null,r);return Object.assign(n,{DEFAULTS:r,defaults:Jw.bind(null,r),merge:Bf.bind(null,r),parse:Yw})}c(Jw,"withDefaults");const qC=`octokit-endpoint.js/6.0.12 ${ou()}`,zC=Jw(null,{method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":qC},mediaType:{format:"",previews:[]}});var jC=__webpack_require__(3300),VC=__webpack_require__.n(jC);class Of extends Error{constructor(e){super(e);Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="Deprecation"}}c(Of,"Deprecation");var GC=__webpack_require__(447),ey=__webpack_require__.n(GC);const KC=ey()(t=>console.warn(t)),ZC=ey()(t=>console.warn(t));class ei extends Error{constructor(e,r,n){super(e);Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="HttpError",this.status=r;let i;"headers"in n&&typeof n.headers!="undefined"&&(i=n.headers),"response"in n&&(this.response=n.response,i=n.response.headers);const o=Object.assign({},n.request);n.request.headers.authorization&&(o.headers=Object.assign({},n.request.headers,{authorization:n.request.headers.authorization.replace(/ .*$/," [REDACTED]")})),o.url=o.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=o,Object.defineProperty(this,"code",{get(){return KC(new Of("[@octokit/request-error] `error.code` is deprecated, use `error.status`.")),r}}),Object.defineProperty(this,"headers",{get(){return ZC(new Of("[@octokit/request-error] `error.headers` is deprecated, use `error.response.headers`.")),i||{}}})}}c(ei,"RequestError");const QC="5.6.1";function XC(t){return t.arrayBuffer()}c(XC,"getBufferResponse");function ty(t){const e=t.request&&t.request.log?t.request.log:console;(Gw(t.body)||Array.isArray(t.body))&&(t.body=JSON.stringify(t.body));let r={},n,i;return(t.request&&t.request.fetch||VC())(t.url,Object.assign({method:t.method,body:t.body,headers:t.headers,redirect:t.redirect},t.request)).then(async a=>{i=a.url,n=a.status;for(const s of a.headers)r[s[0]]=s[1];if("deprecation"in r){const s=r.link&&r.link.match(/<([^>]+)>; rel="deprecation"/),l=s&&s.pop();e.warn(`[@octokit/request] "${t.method} ${t.url}" is deprecated. It is scheduled to be removed on ${r.sunset}${l?`. See ${l}`:""}`)}if(!(n===204||n===205)){if(t.method==="HEAD"){if(n<400)return;throw new ei(a.statusText,n,{response:{url:i,status:n,headers:r,data:void 0},request:t})}if(n===304)throw new ei("Not modified",n,{response:{url:i,status:n,headers:r,data:await Hf(a)},request:t});if(n>=400){const s=await Hf(a);throw new ei(YC(s),n,{response:{url:i,status:n,headers:r,data:s},request:t})}return Hf(a)}}).then(a=>({status:n,url:i,headers:r,data:a})).catch(a=>{throw a instanceof ei?a:new ei(a.message,500,{request:t})})}c(ty,"fetchWrapper");async function Hf(t){const e=t.headers.get("content-type");return/application\/json/.test(e)?t.json():!e||/^text\/|charset=utf-8$/.test(e)?t.text():XC(t)}c(Hf,"getResponseData");function YC(t){return typeof t=="string"?t:"message"in t?Array.isArray(t.errors)?`${t.message}: ${t.errors.map(JSON.stringify).join(", ")}`:t.message:`Unknown error: ${JSON.stringify(t)}`}c(YC,"toErrorMessage");function Wf(t,e){const r=t.defaults(e);return Object.assign(c(function(i,o){const a=r.merge(i,o);if(!a.request||!a.request.hook)return ty(r.parse(a));const s=c((l,u)=>ty(r.parse(r.merge(l,u))),"request");return Object.assign(s,{endpoint:r,defaults:Wf.bind(null,r)}),a.request.hook(s,a)},"newApi"),{endpoint:r,defaults:Wf.bind(null,r)})}c(Wf,"dist_web_withDefaults");const au=Wf(zC,{headers:{"user-agent":`octokit-request.js/${QC} ${ou()}`}}),JC="4.8.0";function eE(t){return`Request failed due to following response errors:
`+t.errors.map(e=>` - ${e.message}`).join(`
`)}c(eE,"_buildMessageForResponseErrors");class Oa extends Error{constructor(e,r,n){super(eE(n));this.request=e,this.headers=r,this.response=n,this.name="GraphqlResponseError",this.errors=n.errors,this.data=n.data,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}c(Oa,"GraphqlResponseError");const tE=["method","baseUrl","url","headers","request","query","mediaType"],rE=["query","method","url"],ry=/\/api\/v3\/?$/;function nE(t,e,r){if(r){if(typeof e=="string"&&"query"in r)return Promise.reject(new Error('[@octokit/graphql] "query" cannot be used as variable name'));for(const a in r)if(!!rE.includes(a))return Promise.reject(new Error(`[@octokit/graphql] "${a}" cannot be used as variable name`))}const n=typeof e=="string"?Object.assign({query:e},r):e,i=Object.keys(n).reduce((a,s)=>tE.includes(s)?(a[s]=n[s],a):(a.variables||(a.variables={}),a.variables[s]=n[s],a),{}),o=n.baseUrl||t.endpoint.DEFAULTS.baseUrl;return ry.test(o)&&(i.url=o.replace(ry,"/api/graphql")),t(i).then(a=>{if(a.data.errors){const s={};for(const l of Object.keys(a.headers))s[l]=a.headers[l];throw new Oa(i,s,a.data)}return a.data.data})}c(nE,"graphql");function qf(t,e){const r=t.defaults(e);return Object.assign(c((i,o)=>nE(r,i,o),"newApi"),{defaults:qf.bind(null,r),endpoint:au.endpoint})}c(qf,"graphql_dist_web_withDefaults");const uR=qf(au,{headers:{"user-agent":`octokit-graphql.js/${JC} ${ou()}`},method:"POST",url:"/graphql"});function iE(t){return qf(t,{method:"POST",url:"/graphql"})}c(iE,"withCustomRequest");const oE=/^v1\./,aE=/^ghs_/,sE=/^ghu_/;async function cE(t){const e=t.split(/\./).length===3,r=oE.test(t)||aE.test(t),n=sE.test(t);return{type:"token",token:t,tokenType:e?"app":r?"installation":n?"user-to-server":"oauth"}}c(cE,"auth");function lE(t){return t.split(/\./).length===3?`bearer ${t}`:`token ${t}`}c(lE,"withAuthorizationPrefix");async function uE(t,e,r,n){const i=e.endpoint.merge(r,n);return i.headers.authorization=lE(t),e(i)}c(uE,"hook");const dE=c(function(e){if(!e)throw new Error("[@octokit/auth-token] No token passed to createTokenAuth");if(typeof e!="string")throw new Error("[@octokit/auth-token] Token passed to createTokenAuth is not a string");return e=e.replace(/^(token|bearer) +/i,""),Object.assign(cE.bind(null,e),{hook:uE.bind(null,e)})},"createTokenAuth"),ny="3.5.1";class cc{constructor(e={}){const r=new PC.Collection,n={baseUrl:au.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},e.request,{hook:r.bind(null,"request")}),mediaType:{previews:[],format:""}};if(n.headers["user-agent"]=[e.userAgent,`octokit-core.js/${ny} ${ou()}`].filter(Boolean).join(" "),e.baseUrl&&(n.baseUrl=e.baseUrl),e.previews&&(n.mediaType.previews=e.previews),e.timeZone&&(n.headers["time-zone"]=e.timeZone),this.request=au.defaults(n),this.graphql=iE(this.request).defaults(n),this.log=Object.assign({debug:()=>{},info:()=>{},warn:console.warn.bind(console),error:console.error.bind(console)},e.log),this.hook=r,e.authStrategy){const{authStrategy:o,...a}=e,s=o(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:a},e.auth));r.wrap("request",s.hook),this.auth=s}else if(!e.auth)this.auth=async()=>({type:"unauthenticated"});else{const o=dE(e.auth);r.wrap("request",o.hook),this.auth=o}this.constructor.plugins.forEach(o=>{Object.assign(this,o(this,e))})}static defaults(e){return c(class extends this{constructor(...n){const i=n[0]||{};if(typeof e=="function"){super(e(i));return}super(Object.assign({},e,i,i.userAgent&&e.userAgent?{userAgent:`${i.userAgent} ${e.userAgent}`}:null))}},"OctokitWithDefaults")}static plugin(...e){var r;const n=this.plugins;return r=c(class extends this{},"_a"),r.plugins=n.concat(e.filter(o=>!n.includes(o))),r}}c(cc,"Octokit"),cc.VERSION=ny,cc.plugins=[];var iy;(function(t){t[t.Force=0]="Force",t[t.ForceWithLease=1]="ForceWithLease"})(iy||(iy={}));var so;(function(t){t[t.Head=0]="Head",t[t.RemoteHead=1]="RemoteHead",t[t.Tag=2]="Tag"})(so||(so={}));var lc;(function(t){t[t.INDEX_MODIFIED=0]="INDEX_MODIFIED",t[t.INDEX_ADDED=1]="INDEX_ADDED",t[t.INDEX_DELETED=2]="INDEX_DELETED",t[t.INDEX_RENAMED=3]="INDEX_RENAMED",t[t.INDEX_COPIED=4]="INDEX_COPIED",t[t.MODIFIED=5]="MODIFIED",t[t.DELETED=6]="DELETED",t[t.UNTRACKED=7]="UNTRACKED",t[t.IGNORED=8]="IGNORED",t[t.INTENT_TO_ADD=9]="INTENT_TO_ADD",t[t.ADDED_BY_US=10]="ADDED_BY_US",t[t.ADDED_BY_THEM=11]="ADDED_BY_THEM",t[t.DELETED_BY_US=12]="DELETED_BY_US",t[t.DELETED_BY_THEM=13]="DELETED_BY_THEM",t[t.BOTH_ADDED=14]="BOTH_ADDED",t[t.BOTH_DELETED=15]="BOTH_DELETED",t[t.BOTH_MODIFIED=16]="BOTH_MODIFIED"})(lc||(lc={}));var oy;(function(t){t.BadConfigFile="BadConfigFile",t.AuthenticationFailed="AuthenticationFailed",t.NoUserNameConfigured="NoUserNameConfigured",t.NoUserEmailConfigured="NoUserEmailConfigured",t.NoRemoteRepositorySpecified="NoRemoteRepositorySpecified",t.NotAGitRepository="NotAGitRepository",t.NotAtRepositoryRoot="NotAtRepositoryRoot",t.Conflict="Conflict",t.StashConflict="StashConflict",t.UnmergedChanges="UnmergedChanges",t.PushRejected="PushRejected",t.RemoteConnectionError="RemoteConnectionError",t.DirtyWorkTree="DirtyWorkTree",t.CantOpenResource="CantOpenResource",t.GitNotFound="GitNotFound",t.CantCreatePipe="CantCreatePipe",t.PermissionDenied="PermissionDenied",t.CantAccessRemote="CantAccessRemote",t.RepositoryNotFound="RepositoryNotFound",t.RepositoryIsLocked="RepositoryIsLocked",t.BranchNotFullyMerged="BranchNotFullyMerged",t.NoRemoteReference="NoRemoteReference",t.InvalidBranchName="InvalidBranchName",t.BranchAlreadyExists="BranchAlreadyExists",t.NoLocalChanges="NoLocalChanges",t.NoStashFound="NoStashFound",t.LocalChangesOverwritten="LocalChangesOverwritten",t.NoUpstreamBranch="NoUpstreamBranch",t.IsInSubmodule="IsInSubmodule",t.WrongCase="WrongCase",t.CantLockRef="CantLockRef",t.CantRebaseMultipleBranches="CantRebaseMultipleBranches",t.PatchDoesNotApply="PatchDoesNotApply",t.NoPathFound="NoPathFound",t.UnknownPath="UnknownPath"})(oy||(oy={}));function hE(t,e){return t.reduce((n,i)=>{const o=e(i),a=n.get(o);return a===void 0?n.set(o,[i]):a.push(i),n},new Map)}c(hE,"groupBy");function fE(t){let e=0;for(const r of t){if(r===0)return!0;if(e++,e>8e3)break}return!1}c(fE,"isBinary");function zf(t,e,r=n=>n){return[...t.reduce((i,o)=>{const a=e(o),s=i.get(a);if(s===void 0)i.set(a,o);else{const l=r(s,o);l!==void 0&&i.set(a,l)}return i},new Map).values()]}c(zf,"uniqueBy");const jf=c(class{constructor(t){this.storageService=t,this._onDidChange=new h.EventEmitter,this.cache=new Map}get onDidChange(){return this._onDidChange.event}async delete(t){const e=E(t),r=this.cache.has(e);this.cache.delete(e);try{await this.storageService.delete(this.getStorageKey(e))}catch(n){throw V.error(n,`Failed to delete repository metadata for ${e}`),n}!r||setTimeout(()=>this._onDidChange.fire({uri:t}),0)}async get(t){this.assertMatchingScheme(t);const e=E(t),r=this.cache.get(e);if(r!==void 0)return r;let n;try{n=this.fromStorage(await this.storageService.get(this.getStorageKey(e)))}catch(i){throw V.error(i,`Failed to get repository metadata for ${e}`),i}return n?this.cache.set(e,{revision:n}):this.cache.delete(e),{revision:n}}async set(t,e,r,n){this.assertMatchingScheme(t);const i=(await this.get(t)).revision!==e?"revision":void 0,o=E(t);if(r!==void 0&&!this.validate(r))throw new Error(`Metadata validation failed for ${t.toString()}`);const a={revision:e,cachedMetadata:r};this.cache.set(o,a);try{await this.storageService.store(this.getStorageKey(o),this.toStorage(e))}catch(s){throw this.cache.delete(o),V.error(s,`Failed to save repository metadata for ${o}`),s}(n==null?void 0:n.silent)||setTimeout(()=>this._onDidChange.fire({uri:t,reason:i}),0)}refresh(){this.cache.clear()}validate(t){var e,r,n,i,o,a,s,l;return typeof t.version=="number"&&t.version>=jf.schemaVersion&&typeof t.timestamp=="number"&&typeof((e=t.provider)==null?void 0:e.id)=="string"&&typeof t.provider.name=="string"&&typeof t.name=="string"&&t.repo&&typeof t.user=="string"&&typeof t.accessLevel=="number"&&typeof((r=t.HEAD)==null?void 0:r.type)=="number"&&typeof((n=t.HEAD)==null?void 0:n.name)=="string"&&typeof((i=t.HEAD)==null?void 0:i.sha)=="string"&&(typeof((o=t.HEAD.detached)==null?void 0:o.name)=="string"&&typeof((a=t.HEAD.detached)==null?void 0:a.type)=="number"||typeof((s=t.HEAD.branch)==null?void 0:s.name)=="string")&&typeof((l=t.defaultBranch)==null?void 0:l.name)=="string"&&typeof t.defaultBranch.sha=="string"}assertMatchingScheme(t){if(t.scheme!==Xt.scheme)throw new Error(`Uri scheme '${t.scheme}' must match configured scheme '${Xt.scheme}'; uri=${t.toString()}`)}getStorageKey(t){return`metadata/${t}`}fromStorage(t){if(!t)return;const e=JSON.parse(t,(r,n)=>(r==="uri"||r.endsWith("Uri"))&&x(n)?h.Uri.from(n):n);return e==null?void 0:e.revision}toStorage(t){const e={schemaVersion:jf.storageSchemaVersion,revision:t};return JSON.stringify(e)}},"_MetadataStore");let su=jf;su.schemaVersion=Re,su.storageSchemaVersion=1;function Vf(t){const e="$memoize$";return function(...r){return this.hasOwnProperty(e)||Object.defineProperty(this,e,{configurable:!1,enumerable:!1,writable:!1,value:t.apply(this,r)}),this[e]}}c(Vf,"memoize");class Gf{constructor(e,r){this.path=e,this.relativePath=r}}c(Gf,"TrieNode");class ay{constructor(){this.root=new Gf("","")}get(e){var r;e.startsWith("/")?e=e.slice(1,e.endsWith("/")?-1:void 0):e.endsWith("/")&&(e=e.slice(0,-1));let n=this.root;for(const i of e.split("/")){const o=(r=n.children)==null?void 0:r.get(i);if(o===void 0)return;n=o}return n.path===e?n.data:void 0}getChildren(e){var r;e.startsWith("/")?e=e.slice(1,e.endsWith("/")?-1:void 0):e.endsWith("/")&&(e=e.slice(0,-1));let n=this.root;if(e)for(const i of e.split("/")){const o=(r=n.children)==null?void 0:r.get(i);if(o===void 0)return[];n=o}return n.children===void 0?[]:[...n.children.values()].map(i=>[i.relativePath,i.data])}getDescendants(e){var r;e.startsWith("/")?e=e.slice(1,e.endsWith("/")?-1:void 0):e.endsWith("/")&&(e=e.slice(0,-1));let n=this.root;const i=[];if(e)for(const o of e.split("/")){const a=(r=n.children)==null?void 0:r.get(o);if(a===void 0)return i;n=a}if(n.children!==void 0){let o=c(function(a,s,l){for(const u of a.values()){const d=`${s?`${s}/`:""}${u.relativePath}`;u.data&&l.push([d,u.data]),u.children!==void 0&&o(u.children,d,l)}},"getDescendantsCore");o(n.children,"",i)}return i}has(e){var r;e.startsWith("/")?e=e.slice(1,e.endsWith("/")?-1:void 0):e.endsWith("/")&&(e=e.slice(0,-1));let n=this.root;for(const i of e.split("/")){const o=(r=n.children)==null?void 0:r.get(i);if(o===void 0)return!1;n=o}return n.path===e}set(e,r){var n;e.startsWith("/")?e=e.slice(1,e.endsWith("/")?-1:void 0):e.endsWith("/")&&(e=e.slice(0,-1));let i=this.root,o="";for(const a of e.split("/")){let s=(n=i.children)==null?void 0:n.get(a);o=`${o?`${o}/`:""}${a}`,s===void 0&&(i.children===void 0&&(i.children=new Map),s=new Gf(o,a),i.children.set(a,s)),i=s}i.data=r}}c(ay,"Trie");class Kf{constructor(e,r,n,i,o){if(this.rootUri=e,this.sha=r,this.timestamp=n,this.provider=i,this.trie=new ay,this._hasEntireTree=!1,this._isContentCached=!1,i===void 0)return;const a=[i];i.onDidTriggerContentCaching!==void 0&&i.tryCachingContent!==void 0&&a.push(i.onDidTriggerContentCaching(s=>{(!s||E(s.rootUri)===E(this.rootUri)&&s.sha===this.sha)&&!this.loading&&this.hasEntireTree&&!this.isContentCached&&i.tryCachingContent(this.trie.get.bind(this.trie)).then(l=>this._isContentCached=l,()=>this._isContentCached=!0)})),this._loading=this.load(o==null?void 0:o.path,o==null?void 0:o.recursive).then(s=>(this._hasEntireTree=(s==null?void 0:s.success)?s.recursive:!1,this._hasEntireTree&&setTimeout(()=>{var l;return void((l=i.tryCachingContent)==null?void 0:l.call(i,this.trie.get.bind(this.trie)).then(u=>this._isContentCached=u,()=>this._isContentCached=!0))},0),tx("_codespaces.webeditor.connectWorkspace",{result:(s==null?void 0:s.success)?"Success":"Failure",errorMessage:this._hasEntireTree?"":"Unable to load entire tree",errorDetail:(s==null?void 0:s.success)===!1?s.error:void 0}),this._loading=void 0,this.preloading=void 0,this.treeSha=(s==null?void 0:s.success)?s.sha:void 0,this.treeSha)),(o==null?void 0:o.preload)&&(this.preloading=new Map([["",this.load("")],[".vscode",this.load(".vscode")]])),this.disposable=h.Disposable.from(...a)}get hasEntireTree(){return this._hasEntireTree}get isContentCached(){return this._isContentCached}get loading(){return this._loading!==void 0}get permissions(){var e;return(e=this.provider)==null?void 0:e.permissions}dispose(){var e;(e=this.disposable)==null||e.dispose()}async get(e){var r;if(e==="")return{mode:"040000",sha:this.treeSha,stat:{type:h.FileType.Directory,size:0,ctime:0,mtime:(r=this.timestamp)!=null?r:Date.now(),permissions:await this.permissions},getContent:void 0};let n=this.trie.get(e);return n!==void 0||(await this.ensureLoaded(e),n=this.trie.get(e)),n}async getChildren(e,r){await this.ensureLoaded(e,!0);const n=(r==null?void 0:r.recursive)?this.trie.getDescendants(e):this.trie.getChildren(e);return(r==null?void 0:r.filter)===void 0?n:n.filter(([,i])=>i.stat.type===r.filter)}async getTreeSha(){return await this.waitUntilLoaded(),this.treeSha}async waitUntilLoaded(){this._loading!==void 0&&await this._loading}async ensureLoaded(e,r=!1){if(this._loading!==void 0){let i;if(this.preloading!==void 0)if(r)i=this.preloading.get(e);else{const o=bu(this.preloading,([a])=>e.startsWith(a)&&e.lastIndexOf("/")===(a?a.length:-1));i=o==null?void 0:o[1]}await(i!=null?i:this._loading)}if(this.hasEntireTree||e==="")return;let n=this.trie.get(e);if(n)return r&&(n==null?void 0:n.loadChildren)?n.loadChildren():void 0;if(await this.ensureLoaded(e.substr(0,e.lastIndexOf("/")),!0),n=this.trie.get(e),r&&(n==null?void 0:n.loadChildren))return n.loadChildren()}async load(e,r=!1){var n;if(((n=this.provider)==null?void 0:n.getTree)===void 0)return;const i=new Z(`FileTree.load(${this.sha}:${e})`);let o;try{i.logStep("Tree query");const a=await this.provider.getTree(e,r);if(a.truncated){V.warn(`Loading file tree for path=${e} was truncated`),i.logStep("Fixing directories",{message:`: Tree=${a.sha};`,suffix:" \u2022 Fixing directories..."});for(const[l,u]of this.trie.getDescendants(""))u.stat.type===h.FileType.Directory&&(u.loadChildren=Vf(()=>this.load(l).then(()=>u.loadChildren=void 0)));return o=` \u2022 Tree=${a.sha} \u2022 Truncated`,{sha:a.sha,recursive:!1,success:!0}}let s;this.permissions!==void 0&&(i.logStep("Permissions query",{message:`: Tree=${a.sha};`,suffix:" \u2022 Waiting for permissions..."}),s=await this.permissions),i.logStep("Filling trie",{suffix:" \u2022 Filling trie..."});for(let{path:l,item:u}of a.tree)if(l!==void 0){switch(l=e?`${e}/${l}`:l,u.stat.permissions=s,u.stat.type){case h.FileType.File:u.getContent=Vf(()=>this.provider.getContent(u,l));break;case h.FileType.Directory:r||(u.loadChildren=Vf(()=>this.load(l).then(()=>u.loadChildren=void 0)));break}this.trie.set(l,u)}return o=` \u2022 Tree=${a.sha}`,{sha:a.sha,recursive:r,success:!0}}catch(a){return o=`\u2022 Loading for path=${e} failed; ${String(a)}`,{error:a,success:!1}}finally{i.stop(o?{suffix:o}:void 0)}}}c(Kf,"FileTree");var pE=__webpack_require__(7769);const gE="github-pr-owner-number";function mE(t){return`branch.${t}.${gE}`}c(mE,"getMetadataKeyForBranch");const vE=(0,Me.loadMessageBundle)(),sy=new TextDecoder;class cy{constructor(e,r,n,i,o,a){this.providerService=e,this.rootUri=r,this.sourceControl=n,this.metadata=i,this.changeStore=o,this.github=a,this._onDidChangeSelection=new h.EventEmitter,this._onDidChangeState=new h.EventEmitter,this._objects=new Map,this.disposable=h.Disposable.from(this.sourceControl.onDidChangeSelection(()=>this._onDidChangeSelection.fire()),this.providerService.onDidRefresh(u=>{const d=E(this.rootUri);!u.some(f=>E(f)===d)||this.updateState(this.metadata)}),this.providerService.onDidChangeRepository(async({repository:u})=>{E(this.rootUri)===E(u.uri)&&this.updateState(await u.getMetadata())}),this.changeStore.onDidChange(()=>this.updateState(this.metadata)),this._onDidChangeSelection,this._onDidChangeState),this._inputBox={get value(){return n.inputBox.value},set value(u){n.inputBox.value=u}},this._ui={get selected(){return n.selected},onDidChange:this._onDidChangeSelection.event};const{repo:{owner:s,name:l}}=i;this.remote={name:"origin",fetchUrl:`https://github.com/${s}/${l}.git`,isReadOnly:i.accessLevel<z.Write},this.remotes=[this.remote],this._state={HEAD:this.getHEADFromMetadata(i),mergeChanges:[],indexChanges:[],workingTreeChanges:[],onDidChange:this._onDidChangeState.event,rebaseCommit:void 0,refs:[],remotes:this.remotes,submodules:[]},this.updateState(i)}dispose(){this.disposable.dispose()}get inputBox(){return this._inputBox}get state(){return this._state}get ui(){return this._ui}getHEADFromMetadata(e){switch(e.HEAD.type){case q.Branch:return{type:so.Head,commit:e.HEAD.sha,name:e.HEAD.branch.name,upstream:{name:e.HEAD.branch.name,remote:this.remote.name}};case q.RemoteBranch:{const r=e.HEAD.branch.remote.repo.owner,n=e.HEAD.branch.remote.accessLevel<z.Write,i=this.remotes.findIndex(o=>o.name===r);return this.remotes.splice(i===-1?this.remotes.length:i,i===-1?0:1,{name:r,fetchUrl:`https://github.com/${e.HEAD.branch.remote.repo.owner}/${e.HEAD.branch.remote.repo.name}.git`,pushUrl:n?void 0:`https://github.com/${e.HEAD.branch.remote.repo.owner}/${e.HEAD.branch.remote.repo.name}.git`,isReadOnly:n}),{type:so.RemoteHead,commit:e.HEAD.sha,name:e.HEAD.branch.name,upstream:{name:e.HEAD.branch.name,remote:e.HEAD.branch.remote.repo.owner}}}case q.Tag:return{type:so.Tag,name:e.HEAD.detached.name,commit:e.HEAD.sha};case q.Commit:return{type:so.Head,commit:e.HEAD.sha}}}async updateState(e){this.metadata=e;const r=await this.changeStore.getGroupedChanges(this.rootUri,{predicate:s=>s.fileType===h.FileType.File}),n=r.conflicts.map(s=>({uri:s.uri,status:Zf(s.type),originalUri:s.uri,renameUri:s.uri})),i=r.staged.map(s=>({uri:s.uri,status:Zf(s.type),originalUri:s.uri,renameUri:s.uri})),o=r.working.map(s=>({uri:s.uri,status:Zf(s.type),originalUri:s.uri,renameUri:s.uri})),a=ke.get("staging.enabled");this._state={...this._state,HEAD:this.getHEADFromMetadata(e),mergeChanges:n,indexChanges:a?i:[],workingTreeChanges:a?o:[...i,...o]},this._onDidChangeState.fire()}getConfigs(){return Promise.resolve([])}getConfig(e){return this.metadata.HEAD.branch&&this.metadata.pullRequest&&e===mE(this.metadata.HEAD.branch.name)?Promise.resolve(`${this.metadata.repo.owner}#${this.metadata.repo.name}#${this.metadata.pullRequest.id}`):Promise.resolve("")}setConfig(e,r){return Promise.resolve("")}getGlobalConfig(e){throw new Error("Method not implemented.")}async getObjectDetails(e,r){const n=new Z(`IGit.getObjectDetails(${e}, ${r})`);try{return await this.github.getObjectDetails(this.rootUri,e,this.pathToRelativePath(r))}finally{n.stop()}}async detectObjectType(e){var r;const n=new Z(`IGit.detectObjectType(${e})`);try{const i=await this.github.getBlobContent(this.metadata.repo,e);if(!fE(i))return{mimetype:"text/plain"};const a=await(0,pE.fromBuffer)(i);return{mimetype:(r=a==null?void 0:a.mime)!=null?r:"application/octet-stream"}}finally{n.stop()}}async buffer(e,r){const n=new Z(`IGit.buffer(${e}, ${r})`);try{return await this.github.getFileContent(this.rootUri,e,this.pathToRelativePath(r))}finally{n.stop()}}async show(e,r){const n=new Z(`IGit.show(${e}, ${r})`);try{const i=await this.github.getFileContent(this.rootUri,e,this.pathToRelativePath(r));return sy.decode(i)}finally{n.stop()}}async getCommit(e){const r=new Z(`IGit.getCommit(${e})`);try{const n=await this.github.getCommit(this.rootUri,e);if(n===void 0)throw new Error(`Unable to find commit for ref "${e}"`);return n}finally{r.stop()}}clean(e){return this._objects.clear(),Promise.resolve()}async apply(e,r){const n=new Z(`IGit.apply(reverse=${r})`);try{return await this.changeStore.applyPatch(this.rootUri,e,r?{reverse:!0}:void 0)}finally{n.stop()}}async diff(e){const r=new Z(`IGit.diff(${e})`);try{return await this.changeStore.createPatch(this.rootUri,void 0,e?{staged:!0}:void 0)}finally{r.stop()}}diffWithHEAD(e){return e?this.diffBetween("","HEAD",e):this.diffBetween("","HEAD")}diffWith(e,r){return r?this.diffBetween("",e,r):this.diffBetween("",e)}diffIndexWithHEAD(e){return e?this.diffBetween("~","HEAD",e):this.diffBetween("~","HEAD")}diffIndexWith(e,r){return r?this.diffBetween("~",e,r):this.diffBetween("~",e)}async diffBetween(e,r,n){if(!n)throw new Error("Method not implemented.");const i=new Z(`IGit.diffBetween(${e}, ${r}, ${n})`);try{const[o,a]=await Promise.all([this.getContent(e,n),this.getContent(r,n)]);return Bu(n,o,a)}finally{i.stop()}}async diffBlobs(e,r){const n=new Z(`IGit.diffBlobs(${e}, ${r})`);try{const i=await this.getBlobContent(e),o=await this.getBlobContent(r),a=Bu("untitled",i,o);return Promise.resolve(a)}finally{n.stop()}}async getBlobContent(e){const r=new Z(`IGit.getBlobContent(${e})`);try{const n=this._objects.get(e);if(n)return this._objects.delete(e),n;const{repo:i}=this.providerService.getVirtualUriMetadata(this.rootUri),o=await this.github.getBlobContent(i,e);return sy.decode(o)}finally{r.stop()}}async getContent(e,r){const n=new Z(`IGit.getContent(${e}, ${r})`);try{const i=this.pathToRelativeUri(r);if(e===""||e==="~"){const o=await this.changeStore.getChange(i);if(o!==void 0&&(e===""||o.staged))return this.changeStore.getContent(i);e="HEAD"}return await this.show(e==="HEAD"?this.metadata.HEAD.sha:e,r)}finally{n.stop()}}async hashObject(e){const r=new Z("IGit.hashObject");try{const n=X(await es(e));return this._objects.set(n,e),n}finally{r.stop()}}async createBranch(e,r,n){const i=new Z(`IGit.createBranch(${e}, ${r}, ${n})`);try{n||(n=this.metadata.HEAD.sha);const o=await this.github.createBranch(this.rootUri,e,n);r&&await this.checkout(o)}finally{i.stop()}}deleteBranch(e,r){throw new Error("Method not implemented.")}async getBranch(e){const r=new Z(`IGit.getBranch(${e})`);try{const{branches:n}=await this.github.getBranches(this.rootUri,{query:e,limit:1}),[i]=n;if(i===void 0)throw new Error(`Unable to find branch named "${e}"`);return{type:i.type,name:i.name,commit:i.commit,remote:this.remote.name,upstream:{name:i.name,remote:i.commitUrl}}}finally{r.stop()}}async getBranches(e){var r,n;const i=(n=(r=e.contains)!=null?r:e.pattern)!=null?n:"",o=new Z(`IGit.getBranches(${i})`);try{const{branches:a}=await this.github.getBranches(this.rootUri,{query:i,limit:e.count});if(a.length===0)throw new Error(`Unable to find branches for "${i}"`);return a.map(s=>({type:s.type,name:s.name,commit:s.commit}))}finally{o.stop()}}setBranchUpstream(e,r){throw new Error("Method not implemented.")}getMergeBase(e,r){throw new Error("Method not implemented.")}async status(){}async checkout(e){const r=new Z(`IGit.checkout(${e})`);try{if(await this.github.repositoryObjectExists(this.rootUri,e)){const i=await this.github.switchTo(this.rootUri,e,{openInNewWindow:!1});throw i!==void 0&&await sn(i),new Error("User aborted")}const n=/pr\/(?<remote>.+)\/(?<num>\d+)/.exec(e);if(n==null?void 0:n.groups){const{num:i}=n.groups,{provider:o,repo:a}=this.providerService.getVirtualUriMetadata(this.rootUri),s=this.providerService.getRemoteUri(o.id,{repo:a,pullRequest:{id:i}});if(s!==void 0){const l=await this.providerService.createWorkspaceForRemoteUrl(s.toString());l!==void 0&&await sn(l)}}throw new Error("User aborted")}finally{r.stop()}}addRemote(e,r){var n;let i;const o=this.remotes.findIndex(a=>a.name===e);return o!==-1&&([i]=this.remotes.splice(o,1)),this.remotes.push({name:e,fetchUrl:r,isReadOnly:(n=i==null?void 0:i.isReadOnly)!=null?n:!1}),Promise.resolve()}removeRemote(e){const r=this.remotes.findIndex(n=>n.name===e);return r!==-1&&this.remotes.splice(r,1),Promise.resolve()}renameRemote(e,r){const n=this.remotes.findIndex(o=>o.name===e);if(n===-1)return Promise.resolve();const[i]=this.remotes.splice(n,1);return this.remotes.push({...i,name:r}),Promise.resolve()}async fetch(e,r,n){const i=new Z("IGit.fetch");try{return this.github.fetch(this.rootUri)}finally{i.stop()}}async pull(e){const r=new Z("IGit.pull");try{return this.github.sync(this.rootUri,this.changeStore,{conflictResolution:he.Merge})}finally{r.stop()}}push(e,r,n){return Promise.resolve()}blame(e){throw new Error("Method not implemented.")}async log(e){if((e==null?void 0:e.maxEntries)!==1||(e==null?void 0:e.path)!==void 0)throw new Error("The specified log options are not yet supported.");return[await this.getCommit(this.metadata.HEAD.sha)]}async commit(e,r){const n=new Z("IGit.commit");try{if((r==null?void 0:r.amend)!==void 0||(r==null?void 0:r.empty)!==void 0||(r==null?void 0:r.signCommit)!==void 0||(r==null?void 0:r.signoff)!==void 0)throw new Error("The specified commit options are not yet supported.");const i=(await this.providerService.getCommitOperations(this.rootUri,this.changeStore,{staged:(r==null?void 0:r.all)===!1})).filter(o=>o.fileType===h.FileType.File);if(!i.length){h.window.showInformationMessage(vE("no changes to commit","There are no changes to commit."));return}if(ke.getUseNewCommitApi())await this.github.createAndPushCommit(this.rootUri,e,i,void 0,r);else{const o=await this.github.createCommit(this.rootUri,e,i);await this.github.pushCommit(this.rootUri,o)}}finally{n.stop()}}pathToRelativePath(e){return this.providerService.getRelativeFilePath(this.rootUri,this.pathToRelativeUri(e))}pathToRelativeUri(e){return w(this.rootUri,bE(e))}}c(cy,"GitHubRepository");const wE=/^\/?([a-zA-Z])(?::\/)(.*)$/,yE=/\\/g;function bE(t){t=h.Uri.file(t).fsPath.replace(yE,"/");const e=wE.exec(t);return e!==null&&([,,t]=e),t.startsWith("/")?t:`/${t}`}c(bE,"normalizePath");function Zf(t){switch(t){case I.Changed:return lc.MODIFIED;case I.Created:return lc.INTENT_TO_ADD;case I.Deleted:return lc.DELETED}}c(Zf,"opTypeToStatus");var _E=Object.defineProperty,xE=Object.getOwnPropertyDescriptor,ly=c((t,e,r,n)=>{for(var i=n>1?void 0:n?xE(e,r):e,o=t.length-1,a;o>=0;o--)(a=t[o])&&(i=(n?a(e,r,i):a(i))||i);return n&&i&&_E(e,r,i),i},"provider_decorateClass");const Ha=(0,Me.loadMessageBundle)(),uy=/^(?:https?:\/\/)?github\.(?:com|dev)\/(?<owner>[^/]+)\/(?<repo>[^/?#]+)(?:|\.git|\/tree\/(?<tree>[^?#]+)|\/blob\/(?<blob>[^?#]+)|\/commit\/(?<commit>[0-9a-f]{40})|\/pull\/(?<pull>[0-9]+))?(?<extra>[^?#]*)(?:\?(?<query>[^#]*))?(?:#(?<fragment>.*))?$/i,dy=/(?<remoteOwner>[^/:]+)\/?(?<remoteRepo>[^/:]+)?:(?<remoteRef>.*)/,cu=["repo","workflow"],lu=1,hy=Object.freeze({id:"github",name:"GitHub"});function Wa(t){const{scheme:e,metadata:r}=de.decodeAuthority(t,a=>{if(a.v!==void 0)return a;if(typeof a.pr=="string")return{v:lu,ref:{type:G.PullRequest,id:a.pr},idx:a.idx};if(typeof a.ref=="string")return{v:lu,ref:{type:G.Tree,id:a.ref},idx:a.idx}}),[,n,i,...o]=t.path.split("/");return{scheme:e,provider:hy,name:`${n}/${i}`,repo:{owner:n,name:i},path:o.join("/")||"",ref:r==null?void 0:r.ref,idx:r==null?void 0:r.idx}}c(Wa,"getGitHubMetadata");function SE(t,e){const{repo:r}=e!=null?e:Wa(t);return t.with({path:`/${r.owner}/${r.name}`,query:"",fragment:""})}c(SE,"getGitHubRootUri");function Qf(t,e,r){const{repo:{owner:n,name:i}}=t instanceof h.Uri?Wa(t):t;return h.Uri.parse(`github://${de.encodeAuthority("github",{v:lu,ref:{type:G.Commit,id:e}})}/${n}/${i}/${r}`)}c(Qf,"getGitHubRevisionUri");class uu{constructor(e,r){this.providerService=e,this.tarPit=r,this.fileTreeCache=new Map,this.disposable=h.Disposable.from(e.onDidChangeRepository(n=>{n.reason==="HEAD"&&this.onRefreshOrRepositoryChanged([n.repository.uri])}),e.onDidRefresh(n=>this.onRefreshOrRepositoryChanged(n))),Sn&&(this.tarballProxyEndpoint=h.commands.executeCommand("_workbench.getTarballProxyEndpoints").then(n=>n==null?void 0:n["github.com"]))}get isReadonly(){return!1}get scheme(){return"github"}dispose(){this.disposable.dispose()}onRefreshOrRepositoryChanged(e){e=e.filter(r=>Xt.getProviderId(r)===this.scheme),e.length!==0&&(this.fileTreeCache.forEach(r=>r.dispose()),this.fileTreeCache.clear())}async ensureAuthenticated(e=!1){const r=new Z("GitHub.ensureAuthenticated");try{if(this._session===void 0){async function n(){try{return e?await h.authentication.getSession("github",cu,{forceNewSession:e}):await h.authentication.getSession("github",cu,{createIfNone:!0})}catch(o){V.error(o);try{const a=await h.authentication.getSession("github",cu,{createIfNone:!1});if(a!==void 0)return a}catch{}return new Promise(a=>{async function s(){const u=await h.authentication.getSession("github",cu,{createIfNone:!0});u!==void 0&&a(u)}c(s,"getSession");const l=h.authentication.onDidChangeSessions(async u=>{u.provider.id==="github"&&(l.dispose(),await s())})})}}c(n,"waitUntilAuthenticated"),this._session=await n();const i=h.authentication.onDidChangeSessions(o=>{if(this._session===void 0){i.dispose();return}o.provider.id==="github"&&(this.clearAuthenticationSession(),i.dispose())})}return this._session}finally{r.stop()}}async getAuthentication(e){const r=await this.ensureAuthenticated();return{provider:hy,session:r,getRichNavigationHeaders:()=>({"X-Git-GitHub":`Bearer ${r.accessToken}`})}}clearAuthenticationSession(){this._session=void 0,this._octokit=void 0,this._octokitDefaults=void 0}async reauthenticate(){this.clearAuthenticationSession(),await this.ensureAuthenticated(!0)}async octokit(e){if(this._octokitDefaults===void 0){const n=await this.ensureAuthenticated();if(Sn){async function i(o,a){if(a.headers!==void 0){const{"user-agent":s,...l}=a.headers;s&&(a.headers=l)}return ks(o,a)}c(i,"fetchCore"),this._octokitDefaults=cc.defaults({auth:`token ${n.accessToken}`,request:{fetch:i}})}else this._octokitDefaults=cc.defaults({auth:`token ${n.accessToken}`})}const r=new this._octokitDefaults(e);return(V.logLevel===ze.Debug||V.isDebugging)&&r.hook.wrap("request",async(n,i)=>{var o;const a=new Z(`[GITHUB] ${i.method} ${i.url}`,{log:!1});try{return await n(i)}finally{let s;try{if(typeof i.query=="string"){const l=/(^[^({\n]+)/.exec(i.query);s=` ${(o=l==null?void 0:l[1].trim())!=null?o:i.query}`}}catch{}a.stop({message:s})}}),r}async graphql(e,r){this._octokit===void 0&&(this._octokit=await this.octokit());try{return await this._octokit.graphql(e,r)}catch(n){throw this.handleRequestErrors(n),n}}async request(e,r){this._octokit===void 0&&(this._octokit=await this.octokit());try{return await this._octokit.request(e,r)}catch(n){throw this.handleRequestErrors(n),n}}handleRequestErrors(e){var r,n;if(e instanceof ei)switch(e.status){case 500:return e.response&&Pr.showGitHubStatus500Message(),!0;case 401:return Pr.showStatus401Message(()=>void this.reauthenticate()),!0;case 403:return Pr.showStatus403Message(()=>void this.reauthenticate()),!0}else if(e instanceof Oa&&((n=(r=e.errors)==null?void 0:r[0])==null?void 0:n.type)==="FORBIDDEN")return Pr.showStatus403Message(()=>void this.reauthenticate()),!0;return!1}createIGitRepository(e,r,n,i){return new cy(this.providerService,e,r,n,i,this)}async createMetadata(e,r){var n,i,o,a,s,l;const u=new Z(`GitHub.createMetadata(${e.toString()}, ${r})`);let d;try{let{provider:f,name:p,repo:{owner:g,name:S},ref:y}=Wa(e);(!y||y.type===G.Commit&&/HEAD/i.test(y.id))&&(y={type:G.Commit,id:"HEAD"});const b=this.providerService.isInWorkspace(e);let _,C;ke.get("experimental.prefetch")&&b&&(r?_=r:(y.type===G.Commit||y.type===G.Tree)&&(_=y.id),_&&(u.log({suffix:` \u2022 Prefetching tree for ${_}...`}),this.getFileTree(e,void 0,{cache:!0,recursive:!0,prefetched:{metadata:new Promise(ie=>C=ie),repo:{owner:g,name:S},HEAD:{sha:_},timestamp:Date.now()}})));const k=await this.getRepositoryInfo(g,S,b,y.type===G.PullRequest?{pr:Number(y.id)}:{ref:y.id});if(k===void 0)throw d=" \u2022 Aborted; Unable to get repository info",new Error(`Cannot get metadata for Uri(${e.toString()}); Unable to get repository info`);let F;if(r)F=r;else if(y.type===G.Commit||y.type===G.Tree&&k.ref===void 0)F=y.id;else if(F=(i=(n=k.ref)==null?void 0:n.sha)!=null?i:k.defaultBranch.sha,F===void 0)throw d=" \u2022 Aborted; Unable to get repository revision",new Error(`Cannot get metadata for Uri(${e.toString()}); Unable to get repository revision`);let $;if(((o=k.ref)==null?void 0:o.prefix)==="refs/heads/")$={type:q.Branch,name:k.ref.name,sha:F,branch:{name:k.ref.name,sha:k.ref.sha}};else if(((a=k.ref)==null?void 0:a.prefix)==="refs/remotes/"){if(!k.ref.remote)throw d=" \u2022 Aborted; Unable to get remote info",new Error(`Cannot get metadata for Uri(${e.toString()}); Unable to get remote info`);$={type:q.RemoteBranch,name:`${k.ref.remote.repo.owner}${k.ref.remote.repo.name!==S?`/${k.ref.remote.repo.name}`:""}:${k.ref.name}`,sha:F,branch:{name:k.ref.name,sha:k.ref.sha,remote:k.ref.remote}}}else((s=k.ref)==null?void 0:s.prefix)==="refs/tags/"?$={type:q.Tag,name:k.ref.name,sha:F,detached:{type:q.Tag,name:k.ref.name}}:$={type:q.Commit,name:P(F),sha:F,detached:{type:q.Commit,name:P(F)}};if(_!==void 0&&_!==$.sha){const ie=this.asFileTreeKey(e,_),Q=this.fileTreeCache.get(ie);Q&&!T(_)&&$.sha===((l=$.branch)==null?void 0:l.sha)?(u.log({suffix:` \u2022 Updating prefetched tree for ${_}, since HEAD was resolved; HEAD=${$.sha}`}),this.fileTreeCache.set(this.asFileTreeKey(e,$.sha),Q),this.fileTreeCache.delete(ie)):(u.log({suffix:` \u2022 Removing prefetched tree for ${_}, since the HEAD changed; HEAD=${$.sha}`}),this.fileTreeCache.delete(ie),Q==null||Q.dispose())}const ne={version:su.schemaVersion,timestamp:Date.now(),provider:f,name:p,repo:k.repo,user:k.user,accessLevel:k.accessLevel,HEAD:$,defaultBranch:k.defaultBranch,pullRequest:k.pullRequest};return d=` \u2022 HEAD=${$.sha}`,C==null||C(ne),ne}finally{u.stop(d?{suffix:d}:void 0)}}getMetadata(e){return this.providerService.getMetadata(e)}getRemoteWorkspaceSourceProviders(){return[{name:"GitHub",icon:"$(github)",label:Ha("open repo from","Open Repository from {0}","GitHub"),placeholder:Ha("pick repo","Choose a repository"),provideSources:async(e,r,n,i)=>{n=n!=null?n:"";let o;const a=n==null?void 0:n.indexOf("/");return a!==-1&&(o=n.substring(0,a),n=n.substr(a+1)),(await this.searchRepositoriesQuery(n,{...i,user:o})).map(l=>({providerId:"github",name:l.repoWithOwner,icon:"$(repo)",description:`${l.fork?`$(repo-forked) ${l.fork}`:""}${l.stars>0?`${l.fork?" \u2022 ":""}$(star-full) ${l.stars}`:""}`,detail:l.description,url:l.url}))}},{name:"GitHub",icon:"$(github)",label:Ha("open pr from","Open Pull Request from {0}","GitHub"),placeholder:Ha("pick pr","Choose a pull request"),provideSources:async(e,r,n,i)=>{n=n!=null?n:"";let o;const a=n==null?void 0:n.indexOf("/");return a!==-1&&(o=n.substring(0,a),n=n.substr(a+1)),(await this.searchPullRequestsQuery(n,{user:o})).map(l=>({providerId:"azurerepos",name:l.title,icon:"$(git-pull-request)",description:l.reasons.length!==0?l.reasons.sort().join(", "):void 0,detail:`${l.repoWithOwner} #${l.number}`,url:l.url}))}}]}canOpenRemoteUrl(e){const r=uy.exec(e);if((r==null?void 0:r.groups)===void 0)return;const{blob:n,commit:i,pull:o,tree:a}=r.groups;return o?le.PullRequest:i?le.Commit:a?le.Branch:n?le.File:le.Repository}async createWorkspaceForRemoteUrl(e,r=W.CurrentWindow){const n=uy.exec(e);if((n==null?void 0:n.groups)===void 0)return;let{owner:i,repo:o,blob:a,commit:s,pull:l,tree:u,fragment:d}=n.groups;o=o.endsWith(".git")?o.slice(0,o.length-4):o;const f=await this.validateOwnerAndRepoAndSplitRefFromPath(i,o,u!=null?u:a);if(f===void 0)return;let p,g;if({owner:i,repo:o,ref:g,path:p}=f,u||a){if(p&&d&&a){const b=/L(?<start>\d+)(?:-L(?<end>\d+))?/.exec(d);if(b==null?void 0:b.groups){const{start:_,end:C}=b.groups;p+=`:${_}${C!==void 0?`-${C}`:""}`}}}else s?g={type:G.Commit,id:s}:l&&(g={type:G.PullRequest,id:l});const S=this.providerService.createVirtualUri("github",{repo:{owner:i,name:o},ref:g});return{name:(await this.getMetadata(S)).name,uri:S,location:r,filesToOpen:p?[p]:void 0}}createVirtualUri(e,{repo:r,ref:n,idx:i},o){const a=n!==void 0||i!==void 0?{v:lu}:void 0;return a&&(n&&(a.ref={...n,type:n.type===G.Branch||n.type===G.Tag?G.Tree:n.type}),i&&(a.idx=i)),e.with({authority:de.encodeAuthority("github",a),path:`/${r.owner}/${r.name}${(o==null?void 0:o.startsWith("/"))?o:o?`/${o}`:""}`})}getRemoteUri(e){const r=`https://github.com/${e.repo.owner}/${e.repo.name}`,n=e.path?"blob":"tree",i=e.path?`/${e.path}`:"";return e.clone?h.Uri.parse(`${r}.git`):e.pullRequest?h.Uri.parse(`${r}/pull/${e.pullRequest.id}`):e.branch?h.Uri.parse(`${r}/${n}/${e.branch}${i}`):e.tag?h.Uri.parse(`${r}/${n}/${e.tag}${i}`):e.sha?h.Uri.parse(`${r}/${n}/${e.sha}${i}`):h.Uri.parse(r)}getProviderRootUri(e){return SE(e)}getRelativeFilePath(e,r){const{path:n}=Wa(e),{path:i}=Wa(w(e,r));return n.length!==0&&i!==n&&i.startsWith(n)?i.slice(n.length+1):i}getVirtualUriMetadata(e){const{provider:r,name:n,repo:i,ref:o}=Wa(e);return{provider:r,name:n,repo:i,ref:o}}async getModeRefType(e,r){const{HEAD:n,pullRequest:i}=await(r!=null?r:this.getMetadata(e));switch(n.type){case q.Branch:return i!==void 0?oe.PullRequestBranch:oe.Branch;case q.RemoteBranch:return i!==void 0?oe.PullRequestRemoteBranch:oe.RemoteBranch;case q.Tag:return oe.Tag;case q.Commit:return oe.Commit}}async createBranch(e,r,n,i){try{const{repo:{owner:o,name:a}}=i!=null?i:await this.getMetadata(e);return r.startsWith("refs/heads/")||(r=`refs/heads/${r}`),(await this.request("POST /repos/{owner}/{repo}/git/refs",{owner:o,repo:a,ref:r,sha:n})).data.ref.substr(11)}catch(o){throw o instanceof ei&&o.status===422?o.message==="Reference already exists"?new gt(o,!0):new gt(o,!1):(V.error(o),o)}}async createAndPushCommit(e,r,n,i,o,a){var s;const l=new Z(`GitHub.createAndPushCommit(${e.toString()}${a?`, fork=${a.repo.owner}/${a.repo.name}`:""})`);if(n=n.filter(d=>d.fileType===h.FileType.File),n.length===0&&!(o==null?void 0:o.empty))throw l.stop({message:"Aborted; No changes to commit"}),new ni("No changes to commit");let u;try{const d=await this.getMetadata(e);let f;if(i!==void 0)f=i;else{if(d.HEAD.detached&&!d.HEAD.branch)throw new ye("Unable to commit; no current branch");f=d.HEAD.branch.name}let p;if(a)p=`${a.repo.owner}/${a.repo.name}`;else if(d.HEAD.type===q.RemoteBranch&&d.HEAD.branch.remote.accessLevel>=z.Write){const{owner:C,name:k}=d.HEAD.branch.remote.repo;p=`${C}/${k}`}else p=`${d.repo.owner}/${d.repo.name}`;const g=[],S=[];for(const C of n)switch(C.type){case I.Created:case I.Changed:g.push({path:C.path,contents:Rp(await C.content)});break;case I.Deleted:S.push({path:C.path});break}const y={branch:{branchName:f,repositoryNameWithOwner:p},message:{headline:r},fileChanges:{additions:g,deletions:S},expectedHeadOid:d.HEAD.sha},b=`mutation($commitInput: CreateCommitOnBranchInput!) {
	createCommitOnBranch(input: $commitInput) {
		commit {
			oid
		}
		ref {
			name
		}
	}
}`,_=await this.graphql(b,{commitInput:y});if(u=_==null?void 0:_.createCommitOnBranch.commit.oid,!u)throw new co;return i===void 0&&!d.HEAD.detached&&u!==void 0&&await this.fastForwardTo(e,u,d),u}catch(d){if(d instanceof Oa){const f=(s=d.errors)==null?void 0:s[0];if((f==null?void 0:f.type)==="STALE_DATA"&&f.message.includes("Pull and try again"))throw new ri(d)}throw V.error(d),d}finally{l.stop(u?{message:`: Created and pushed commit ${u}`}:void 0)}}async createCommit(e,r,n,i){const o=new Z(`GitHub.createCommit(${e.toString()}${i?`, fork=${i.repo.owner}/${i.repo.name}`:""})`);if(n=n.filter(s=>s.fileType===h.FileType.File),n.length===0)throw o.stop({message:"Aborted; No changes to commit"}),new ni("No changes to commit");let a;try{const s=await this.getMetadata(e);let l,u,d;i?({repo:{owner:l,name:u}}=i,d=await this.getFileTree(this.createVirtualUri(e,i),s.HEAD.sha)):s.HEAD.type===q.RemoteBranch&&s.HEAD.branch.remote.accessLevel>=z.Write?({owner:l,name:u}=s.HEAD.branch.remote.accessLevel===z.WriteToPullRequest?s.repo:s.HEAD.branch.remote.repo,d=await this.getFileTree(this.createVirtualUri(e,{repo:s.HEAD.branch.remote.repo}),s.HEAD.sha)):({repo:{owner:l,name:u}}=s,d=await this.getFileTree(e,s.HEAD.sha));const f=await d.getTreeSha();if(!T(f))throw new Error(`Unable to create commit based on tree sha ${f}`);o.logStep("Creating Blobs",{message:`: Committing ${n.length} changes onto commit ${s.HEAD.sha} based on tree ${f}`,suffix:" \u2022 Creating blobs..."});const p=[];async function g(_){var C;try{const k=await this.request("POST /repos/{owner}/{repo}/git/blobs",{owner:l,repo:u,encoding:"base64",content:Rp(await _.content),mediaType:{format:"raw"}});let F;if(_.type===I.Changed){const $=await d.get(_.path);F=(C=$==null?void 0:$.mode)!=null?C:"100644"}else F="100644";p.push({path:_.path,mode:F,type:"blob",sha:k.data.sha})}catch(k){throw V.error(k,`Failed to create blob for ${_.path}`),k}}c(g,"createOrUpdateBlob");const S=[];for(const _ of n)switch(_.type){case I.Created:case I.Changed:{S.push(g.call(this,_));break}case I.Deleted:{p.push({path:_.path,mode:"100644",type:"blob",sha:null});break}}await Promise.all(S),o.logStep("Creating tree",{message:`: Created ${S.length} blobs;`,suffix:` \u2022 Creating tree based on ${f}...`});const y=await this.request("POST /repos/{owner}/{repo}/git/trees",{owner:l,repo:u,base_tree:f,tree:p});return o.logStep("Creating commit",{message:`: Created tree ${y.data.sha};`,suffix:" \u2022 Creating commit..."}),a=(await this.request("POST /repos/{owner}/{repo}/git/commits",{owner:l,repo:u,message:r,tree:y.data.sha,parents:[s.HEAD.sha]})).data.sha,a}catch(s){throw V.error(s),s}finally{o.stop(a?{message:`: Created commit ${a}`}:void 0)}}async createPullRequest(e,r,n,i,o){var a,s,l;const u=new Z(`GitHub.createPullRequest(${e.toString()}, ${r}${o?`, fork=${o.repo.owner}/${o.repo.name}`:""})`);try{const{repo:{owner:d,name:f},HEAD:{branch:p},defaultBranch:g}=await this.getMetadata(e),S=await this.request("POST /repos/{owner}/{repo}/pulls",{owner:d,repo:f,base:`refs/heads/${(a=p==null?void 0:p.name)!=null?a:g.name}`,head:o?`${o.repo.owner}:${r}`:r,title:n,draft:(s=i==null?void 0:i.draft)!=null?s:!1,maintainer_can_modify:(l=i==null?void 0:i.canMaintainerModify)!=null?l:!0});return{id:S.data.number.toString(),uri:h.Uri.parse(S.data.html_url)}}catch(d){throw V.error(d),d}finally{u.stop()}}async fetch(e,r){const{fetched:n,metadata:i}=await this.fetchCore(e,!1,r);n&&await this.providerService.updateMetadata(e,i)}async fetchCore(e,r,n){var i,o,a,s,l,u,d,f,p;const{force:g,to:S}={...n,force:r||(n==null?void 0:n.force)},y=new Z(`GitHub.fetch(${e.toString()}, force=${g}, to=${S})`);let b;try{const _=await this.getMetadata(e);if(_.HEAD.detached)return b=" \u2022 Skipped; detached HEAD",{fetched:!1,metadata:_};const C=await this.getBranchTips(e);if(!C)throw b=" \u2022 Unable to fetch branch tips",new He(r);if(!g&&!S&&((i=C.defaultBranch)==null?void 0:i.sha)!==void 0&&C.defaultBranch.sha===_.defaultBranch.sha&&((o=C.branch)==null?void 0:o.sha)!==void 0&&C.branch.sha===_.HEAD.branch.sha&&(_.HEAD.sha===_.HEAD.branch.sha||_.state!==void 0))return b=" \u2022 No changes detected",{fetched:!1,metadata:_};let k;if(((a=C.defaultBranch)==null?void 0:a.sha)!==void 0&&C.defaultBranch.sha!==_.defaultBranch.sha&&(k={defaultBranch:{..._.defaultBranch,sha:C.defaultBranch.sha}}),((s=C.branch)==null?void 0:s.sha)===void 0){if(b=" \u2022 Unable to find branch tip",g)throw new He(r);return k!==void 0?{fetched:!0,metadata:{..._,...k}}:{fetched:!1,metadata:_}}if(C.branch.sha!==_.HEAD.branch.sha&&(k={...k,HEAD:{..._.HEAD,branch:{..._.HEAD.branch,sha:C.branch.sha},detached:void 0}}),C.branch.sha===((l=n==null?void 0:n.to)!=null?l:_.HEAD.sha))return b=" \u2022 Up to date",_.state!==void 0||k!==void 0?{fetched:!0,metadata:{..._,...k,state:void 0}}:{fetched:!1,metadata:_};y.logStep("Fetching upstream changes");try{const F=await this.getAheadBehindState(e,_,{base:(u=n==null?void 0:n.to)!=null?u:_.HEAD.sha,head:(p=(f=(d=k==null?void 0:k.HEAD)==null?void 0:d.branch)==null?void 0:f.sha)!=null?p:_.HEAD.branch.sha});return b=` \u2022 Changes detected; ${F==null?void 0:F.behind} commits behind`,{fetched:!0,metadata:{..._,...k,state:F?{ahead:F.ahead,behind:F.behind,incomingChanges:F.incomingChanges}:void 0}}}catch(F){if(b=` \u2022 Failed fetching upstream changes; ${String(F)}`,g)throw new He(r);return k!==void 0?{fetched:!0,metadata:{..._,...k}}:{fetched:!1,metadata:_}}}finally{y.stop(b?{suffix:b}:void 0)}}async fork(e){try{const{repo:{owner:r,name:n}}=await this.getMetadata(e),i=await this.request("POST /repos/{owner}/{repo}/forks",{owner:r,repo:n});let o;for(;;){try{if(o=await this.getRepositoryInfo(i.data.owner.login,i.data.name,!1),o!==void 0)break}catch{}await new Promise(a=>setTimeout(a,250))}return{name:`${i.data.owner.login}/${i.data.name}`,repo:{owner:i.data.owner.login,name:i.data.name},url:i.data.url}}catch(r){throw V.error(r),r}}async getBranches(e,r){var n,i,o;try{const{repo:{owner:a,name:s}}=await this.getMetadata(e),l=`query getBranches(
	$owner: String!
	$repo: String!
	$branchQuery: String!
	$cursor: String
	$limit: Int = 100
) {
	repository(owner: $owner, name: $repo) {
		refs(query: $branchQuery, refPrefix: "refs/heads/", first: $limit, after: $cursor) {
			pageInfo {
				endCursor
				hasNextPage
			}
			nodes {
				name
				target {
					oid
				}
			}
		}
	}
}`,u=await this.graphql(l,{owner:a,repo:s,branchQuery:(n=r==null?void 0:r.query)!=null?n:"",cursor:r==null?void 0:r.cursor,limit:Math.min(100,(i=r==null?void 0:r.limit)!=null?i:100)});if(u===void 0)return{branches:[]};const d=(o=u.repository)==null?void 0:o.refs;if(d===void 0)return{branches:[]};const f=d.nodes.map(p=>({type:so.Head,name:p.name,commit:p.target.oid,commitUrl:p.target.commitUrl}));return{paging:{cursor:d.pageInfo.endCursor,more:d.pageInfo.hasNextPage},branches:f}}catch(a){return{branches:[]}}}async getCommit(e,r){var n;try{const{HEAD:i,repo:{owner:o,name:a}}=await this.getMetadata(e),s=`query getCommit(
	$owner: String!
	$repo: String!
	$ref: GitObjectID!
) {
	repository(name: $repo owner: $owner) {
		object(oid: $ref) {
			...on Commit {
				oid
				message
				parents(first: 100) {
					nodes {
						oid
					}
				}
				author {
					date
					email
					name
				}
				committer {
					date
				}
			}
		}
	}
}`;r.toUpperCase()==="HEAD"&&(r=i.sha);const l=await this.graphql(s,{owner:o,repo:a,ref:r});if(l===void 0)return;const u=(n=l.repository)==null?void 0:n.object;return u===void 0?void 0:{hash:u.oid,message:u.message,parents:u.parents.nodes.map(d=>d.oid),authorDate:new Date(u.author.date),authorEmail:u.author.email,authorName:u.author.name,commitDate:new Date(u.committer.date)}}catch(i){return}}async getCommits(e,r){var n,i,o;try{const{HEAD:a,repo:{owner:s,name:l}}=await this.getMetadata(e),u=`query getCommits(
	$owner: String!
	$repo: String!
	$ref: GitObjectID!
	$path: String
	$cursor: String
	$limit: Int = 100
) {
	repository(name: $repo, owner: $owner) {
		object(oid: $ref) {
			... on Commit {
				history(first: $limit, path: $path, after: $cursor) {
					pageInfo {
						endCursor
						hasNextPage
					}
					nodes {
						... on Commit {
							...commit
						}
					}
				}
			}
		}
	}
}

fragment commit on Commit {
	oid
	message
	parents(first: 100) {
		nodes {
			oid
		}
	}
	author {
		date
		email
		name
	}
	committer {
		date
	}
}
`;let d=r==null?void 0:r.ref;(d==null?void 0:d.toUpperCase())==="HEAD"&&(d=a.sha);const f=await this.graphql(u,{owner:s,repo:l,ref:d,cursor:r==null?void 0:r.cursor,path:r==null?void 0:r.path,limit:Math.min(100,(n=r==null?void 0:r.limit)!=null?n:100)});if(f===void 0)return;const p=(o=(i=f.repository)==null?void 0:i.object)==null?void 0:o.history;if(p===void 0)return;const g=p.nodes.map(S=>({hash:S.oid,message:S.message,parents:S.parents.nodes.map(y=>y.oid),authorDate:new Date(S.author.date),authorEmail:S.author.email,authorName:S.author.name,commitDate:new Date(S.committer.date)}));return{paging:{cursor:p.pageInfo.endCursor,more:p.pageInfo.hasNextPage},commits:g}}catch(a){return}}async getBlobContent(e,r){try{const n=await this.request("GET /repos/{owner}/{repo}/git/blobs/{file_sha}",{owner:e.owner,repo:e.name,file_sha:r});return By(n.data.content)}catch(n){throw V.logLevel===ze.Debug&&V.error(n),n}}async getFileContent(e,r,n){try{let i;if(r&&n&&!this.hasFileTree(e,r)){const o=this.providerService.getProviderRootUri(e);n.startsWith("/")&&(n=n.slice(1));let a=(0,FC.dirname)(n);(a==="."||a==="/")&&(a=""),i=await(await this.getFileTree(o,r,{path:a,cache:!1,recursive:!1})).get(n)}else{const[o,{path:a}]=await Promise.all([this.getFileTree(e,r),n?{path:void 0}:this.providerService.getMetadata(e)]);i=await o.get(n!=null?n:a)}if((i==null?void 0:i.sha)===void 0)throw h.FileSystemError.FileNotFound(e);return await i.getContent()}catch(i){throw V.logLevel===ze.Debug&&V.error(i),i}}async getFileList(e,r,n){const i=new Z(`GitHub.getFileList(${e.toString()}${n?`, ${n}`:""})`);try{const{repo:{owner:o,name:a},HEAD:{sha:s}}=await this.getMetadata(e),l=await this.request("GET /repos/{owner}/{repo}/git/tree-file-list/{treeish}",{owner:o,repo:a,treeish:`${n!=null?n:s}${r?`:${r}`:""}`});return l.status!==200?[]:l.data}catch(o){return V.error(o),[]}finally{i.stop()}}hasFileTree(e,r){return r?this.fileTreeCache.has(this.asFileTreeKey(e,r)):this.getMetadata(e).then(n=>this.fileTreeCache.has(this.asFileTreeKey(e,n.HEAD.sha)))}async getFileTree(e,r,n){var i,o,a,s,l;const u=this.providerService.isInWorkspace(e);let d=(i=n==null?void 0:n.cache)!=null?i:u,f,p,g;if(d||!r){const _=(a=(o=n==null?void 0:n.prefetched)==null?void 0:o.metadata)!=null?a:this.getMetadata(e);f=u?this.getFileTreePermissions(e,_):void 0;let C;({repo:p,HEAD:{sha:C},timestamp:g}=(s=n==null?void 0:n.prefetched)!=null?s:await _),r&&C!==r?(d=!1,g=Date.now()):r=C}else({repo:p}=(l=n==null?void 0:n.prefetched)!=null?l:this.providerService.getVirtualUriMetadata(e)),g=Date.now();const S=this.asFileTreeKey(e,r),y=this.providerService.getProviderRootUri(e),b=new Z(`GitHub.getFileTree(${S}): ${e.toString()}`,{log:!1,logLevel:ze.Debug});try{let _=c(function(){var k;const F=new Z(`GitHub.createFileTree(${S})`);let $,ne;d&&u&&($=new h.EventEmitter,ne=h.Disposable.from(this.tarPit.onDidChangeIndexingEnablement(()=>$.fire()),this.tarPit.onDidDownloadTar(Q=>$.fire({rootUri:this.providerService.getProviderRootUri(Q.rootUri),sha:Q.sha}))));const ie={dispose:()=>ne==null?void 0:ne.dispose(),permissions:f,getContent:async(Q,me)=>{const se=new Z("getFileContents"),fe=ke.get("experimental.fs.useTars");if(fe==="always"||fe==="ifAvailable"){const Ge=await this.tarPit.getInMemoryTar(y);if(Ge){const ce=Ge.entryMap.get(me);if(ce)return se.stop({message:`Retrieved ${me} from memory`}),ce.dataAsBytes}}let xe=!1;return new Promise((Ge,ce)=>{this.getBlobContent(p,Q.sha).then(Se=>{xe||(se.stop({message:`Retrieved ${me} from web`}),xe=!0,Ge(Se))},Se=>ce(Se)),this.tarPit.getCachedTar(y,r).then(Se=>Se===void 0&&fe==="always"&&!xe?this.tarPit.getTar(y,!1):Se).then(Se=>{var Ne;const Fe=(Ne=Se==null?void 0:Se.entryMap.get(me))==null?void 0:Ne.dataAsBytes;Fe&&!xe&&(se.stop({message:`Retrieved ${me} from tar`}),xe=!0,Ge(Fe))},Se=>{})})},getTree:async(Q,me)=>{const se=await this.request("GET /repos/{owner}/{repo}/git/trees/{tree_sha}",{owner:p.owner,repo:p.name,recursive:me?"1":void 0,tree_sha:`${r}${Q?`:${Q}`:""}`});return se.data.truncated?{sha:se.data.sha,truncated:!0}:{sha:se.data.sha,truncated:!1,tree:oi(se.data.tree,fe=>{var xe;return{path:fe.path,item:{mode:fe.mode,sha:fe.sha,stat:{type:EE(fe.type),size:(xe=fe.size)!=null?xe:0,ctime:0,mtime:g,permissions:void 0}}}})}},onDidTriggerContentCaching:$==null?void 0:$.event,tryCachingContent:d&&u?async Q=>{const me=ke.get("experimental.fs.useTars");if(me!=="always"&&me!=="ifAvailable")return!1;const se=new Z(`FileTree.loadAllContent(${r})`);let fe;try{let xe;if(me==="ifAvailable"){if(se.logStep("Tar cache query"),xe=await this.tarPit.getCachedTar(y,r),xe===void 0)return fe=" \u2022 No cached Tar",!1}else se.logStep("Tar query"),xe=await this.tarPit.getTar(y,!1,r);se.logStep("Updating content",{suffix:" \u2022 Updating content..."});for(const Ge of xe.entries){const ce=Q(Ge.header.fullFileName);if(ce===void 0)continue;const Se=Ge.dataAsBytes;ce.getContent=()=>Se}return!0}catch(xe){return fe=` \u2022 Failed ${String(xe)}`,!1}finally{se.stop(fe?{suffix:fe}:void 0)}}:void 0};try{return new Kf(y,r,g,ie,{path:n==null?void 0:n.path,recursive:(k=n==null?void 0:n.recursive)!=null?k:d,preload:d||(n==null?void 0:n.recursive)})}catch(Q){return V.error(Q),new Kf(y,r,g,void 0)}finally{F.stop()}},"createFileTree"),C=this.fileTreeCache.get(S);return C!==void 0||(C=_.call(this),d&&this.fileTreeCache.set(S,C)),C}finally{b.stop()}}async getFileTreePermissions(e,r){if(this.providerService.getModeConfig(e,await this.getModeRefType(e,r)).display===ot.Edit)return;const i=await this.providerService.getIndexMetadata(e);return Pi.isActive(i)?h.FilePermission.Readonly:void 0}async getFork(e){var r,n,i;try{const{repo:{owner:o,name:a}}=await this.getMetadata(e),s=`query getFork(
	$owner: String!
	$repo: String!
) {
	repository(owner: $owner, name: $repo) {
		forks(affiliations: OWNER, first: 1) {
			nodes {
				owner {
					login
				}
				name
				url
			}
		}
	}
}`,l=await this.graphql(s,{owner:o,repo:a});if(l===void 0)return;const[u]=(i=(n=(r=l.repository)==null?void 0:r.forks)==null?void 0:n.nodes)!=null?i:[];return u===void 0?void 0:{name:`${u.owner.login}/${u.name}`,repo:{owner:u.owner.login,name:u.name},url:u.url}}catch(o){return}}async getIncomingChanges(e){var r,n;return(n=(r=(await this.getMetadata(e)).state)==null?void 0:r.incomingChanges)!=null?n:[]}async compareCommits(e,r){const n=await this.getMetadata(e),i=await this.getAheadBehindState(e,n,{base:r.base,head:r.compare});return i==null?void 0:i.incomingChanges}async getAheadBehindState(e,r,n){var i,o,a,s,l;const{base:u,head:d}={base:r.HEAD.sha,head:(i=r.HEAD.branch)==null?void 0:i.sha,...n},f=new Z(`GitHub.getAheadBehindState(${e.toString()}, base=${u}, head=${d})`);let p,g;try{if(!d){p=` \u2022 Skipped; Unsupported HEAD type (${r.HEAD.type})`;return}const S=await this.request("GET /repos/{owner}/{repo}/compare/{base}...{head}",{owner:r.repo.owner,repo:r.repo.name,base:u,head:d}),y=[];for(const b of(o=S.data.files)!=null?o:[])switch(b.status){case"added":case"copied":y.push({uri:h.Uri.joinPath(e,b.filename),type:I.Created});break;case"removed":y.push({uri:h.Uri.joinPath(e,b.filename),type:I.Deleted});break;case"modified":y.push({uri:h.Uri.joinPath(e,b.filename),type:I.Changed});break;case"renamed":y.push({uri:h.Uri.joinPath(e,b.filename),type:I.Created}),y.push({uri:h.Uri.joinPath(e,b.previous_filename),type:I.Deleted});break;default:V.warn(`GitHub.getAheadBehindState(${e.toString()}, base=${u}, head=${d}): Unknown file status encountered '${b.status}'`);break}return g={ahead:(a=S.data.behind_by)!=null?a:0,behind:(s=S.data.ahead_by)!=null?s:0,incomingChanges:y},g}catch(S){throw p=` \u2022 Failed; ${String(S)}`,V.error(S),S}finally{f.stop({suffix:p!=null?p:` \u2022 ${(l=g==null?void 0:g.behind)!=null?l:0} commits behind`})}}async getObjectDetails(e,r,n){var i;try{const o=await this.getFileTree(e,r);n?n=this.providerService.getRelativeFilePath(e,this.providerService.createRelativeUri(e,n)):{path:n}=await this.providerService.getMetadata(e);const a=await o.get(n);if((a==null?void 0:a.mode)===void 0||(a==null?void 0:a.sha)===void 0)throw new Error(`Cannot get details of ${n} in ${r}`);return{mode:a.mode,object:a.sha,size:(i=a.stat.size)!=null?i:0}}catch(o){throw V.error(o),o}}async getPullRequest(e,r){const{repo:{owner:n,name:i}}=await this.getMetadata(e);return this.getPullRequestCore(n,i,r)}async getPullRequestCore(e,r,n){var i,o,a,s,l,u,d;try{const f=`query getPullRequest(
	$owner: String!
	$repo: String!
	$pr: Int!
) {
	repository(name: $repo, owner: $owner) {
		pullRequest(number: $pr) {
			author {
				login
				avatarUrl
				url
			}
			permalink
			number
			title
			state
			updatedAt
			closedAt
			mergedAt
			repository {
				name
				owner {
					login
				}
			}
			baseRef {
				name
			}
			baseRefName
			baseRefOid
			baseRepository {
				name
				owner {
					login
				}
			}
			headRef {
				name
			}
			headRefName
			headRefOid
			headRepository {
				name
				owner {
					login
				}
			}
			headRepositoryOwner {
				login
			}
		}
	}
}`,p=await this.graphql(f,{owner:e,repo:r,number:Number(n)}),g=(i=p==null?void 0:p.repository)==null?void 0:i.pullRequest;return g?{author:{name:g.author.login,avatarUrl:g.author.avatarUrl,url:g.author.url},closedAt:g.closedAt?new Date(g.closedAt):void 0,mergedAt:g.mergedAt?new Date(g.mergedAt):void 0,id:g.number.toString(),repo:{name:g.repository.name,owner:g.repository.owner.login},state:Xf(g.state),title:g.title,updatedAt:new Date(g.updatedAt),url:g.permalink,refs:{base:{owner:g.baseRepository.owner.login,repo:g.baseRepository.name,branch:g.baseRefName,sha:g.baseRefOid,exists:g.baseRef!=null},head:{owner:(l=(s=(o=g.headRepository)==null?void 0:o.owner.login)!=null?s:(a=g.headRepositoryOwner)==null?void 0:a.login)!=null?l:"<unknown>",repo:(d=(u=g.headRepository)==null?void 0:u.name)!=null?d:g.baseRepository.name,branch:g.headRefName,sha:g.headRefOid,exists:g.headRef!=null}}}:void 0}catch(f){V.error(f);return}}async getPullRequestForBranch(e,r,n){var i,o,a,s,l;try{const{repo:{owner:u,name:d}}=await this.getMetadata(e),f=`query getPullRequestForBranch(
	$owner: String!
	$repo: String!
	$branch: String!
	$maxCount: Int!
	$states: [PullRequestState!]
) {
	repository(name: $repo, owner: $owner) {
		refs(query: $branch, refPrefix: "refs/heads/", first: 1) {
			nodes {
				associatedPullRequests(first: $maxCount, orderBy: {field: UPDATED_AT, direction: DESC}, states: $states) {
					nodes {
						author {
							login
							avatarUrl
							url
						}
						permalink
						number
						title
						state
						updatedAt
						closedAt
						mergedAt
						repository {
							isFork
							name
							owner {
								login
							}
						}
					}
				}
			}
		}
	}
}`,p=await this.graphql(f,{owner:u,repo:d,branch:r,maxCount:(i=n==null?void 0:n.maxCount)!=null?i:1,states:CE(n==null?void 0:n.include)}),g=(l=(s=(a=(o=p==null?void 0:p.repository)==null?void 0:o.refs.nodes[0])==null?void 0:a.associatedPullRequests)==null?void 0:s.nodes)==null?void 0:l.filter(y=>!y.repository.isFork||y.repository.owner.login===u);if(g==null||g.length===0)return;g.length>1&&g.sort((y,b)=>(y.repository.owner.login===u?-1:1)-(b.repository.owner.login===u?-1:1)||(y.state==="OPEN"?-1:1)-(b.state==="OPEN"?-1:1)||new Date(b.updatedAt).getTime()-new Date(y.updatedAt).getTime());const[S]=g;return{author:{name:S.author.login,avatarUrl:S.author.avatarUrl,url:S.author.url},closedAt:S.closedAt?new Date(S.closedAt):void 0,mergedAt:S.mergedAt?new Date(S.mergedAt):void 0,id:S.number.toString(),repo:{name:S.repository.name,owner:S.repository.owner.login},state:Xf(S.state),title:S.title,updatedAt:new Date(S.updatedAt),url:S.permalink}}catch(u){V.error(u);return}}async getTags(e,r){var n,i,o;try{const{repo:{owner:a,name:s}}=await this.getMetadata(e),l=`query getTags(
	$owner: String!
	$repo: String!
	$tagQuery: String!
	$cursor: String
	$limit: Int = 100
) {
	repository(owner: $owner, name: $repo) {
		refs(query: $tagQuery, refPrefix: "refs/tags/", first: $limit, after: $cursor, orderBy: { field: TAG_COMMIT_DATE, direction: DESC }) {
			pageInfo {
				endCursor
				hasNextPage
			}
			nodes {
				name
				target {
					oid
				}
			}
		}
	}
}`,u=await this.graphql(l,{owner:a,repo:s,tagQuery:(n=r==null?void 0:r.query)!=null?n:"",cursor:r==null?void 0:r.cursor,limit:Math.min(100,(i=r==null?void 0:r.limit)!=null?i:100)});if(u===void 0)return{tags:[]};const d=(o=u.repository)==null?void 0:o.refs;if(d===void 0)return{tags:[]};const f=d.nodes.map(p=>({type:so.Tag,name:p.name,commit:p.target.oid,commitUrl:p.target.commitUrl}));return{paging:{cursor:d.pageInfo.endCursor,more:d.pageInfo.hasNextPage},tags:f}}catch(a){return{tags:[]}}}async getTarGz(e,r){const{repo:{owner:n,name:i},HEAD:{sha:o}}=await this.getMetadata(e),a=await this.ensureAuthenticated();return h.window.withProgress({location:h.ProgressLocation.Notification,cancellable:!0,title:Ha("fetching index","Fetching repository index...")},async(s,l)=>{try{if(Sn){let f;try{const y=await this.tarballProxyEndpoint;y!==void 0&&(f=y.replace("{owner}",n).replace("{repo}",i).replace("{sha}",o))}catch{}if(!f)throw new Error("Workbench embedder must set `_tarballProxyEndpoints` in workbench construction options to enable GitHub fulltext search.");const g=await(await b0(f,{headers:{"x-proxy-authorization":`Bearer ${a.accessToken}`},credentials:"include"},l)).text();return await _0(g,{},r,l)}const u=`https://api.github.com/repos/${n}/${i}/tarball/${o}`;return await _0(u,{headers:{Authorization:`Bearer ${a.accessToken}`}},r,l)}catch(u){throw V.error(u),u}})}async pushCommit(e,r,n,i){const o=new Z(`GitHub.pushCommit(${e.toString()}, sha=${r}${n?`, ref=${n}`:""}${i?`, fork=${i.repo.owner}/${i.repo.name}`:""})`);let a;try{const s=await this.getMetadata(e);let l,u;if(i?{repo:{owner:l,name:u}}=i:s.HEAD.type===q.RemoteBranch&&s.HEAD.branch.remote.accessLevel>=z.Write?{owner:l,name:u}=s.HEAD.branch.remote.repo:{repo:{owner:l,name:u}}=s,n===void 0&&s.HEAD.detached)throw new ye("Unable to commit; no current branch");(n==null?void 0:n.startsWith("refs/heads/"))&&(n=n.substr(11));const d=await this.request("PATCH /repos/{owner}/{repo}/git/refs/{ref}",{owner:l,repo:u,ref:`heads/${n!=null?n:s.HEAD.branch.name}`,sha:r});return n===void 0&&!s.HEAD.detached&&await this.fastForwardTo(e,r,s),a=d.data.ref,a}catch(s){throw s instanceof ei&&s.status===422&&s.message.includes("Update is not a fast forward")?new ri(s):(V.error(s),s)}finally{o.stop(a?{message:`: Pushed commit to ${a}`}:void 0)}}async queryRepositoryObject(e,r,n,i){var o,a;try{const{repo:{owner:s,name:l},HEAD:{sha:u},path:d}=await this.providerService.getMetadata(e),f=`query ${r}(
	$owner: String!
	$repo: String!
	$expression: String
) {
	repository(owner: $owner, name: $repo) {
		object(expression: $expression) {
			${n}
		}
	}
}`,p=await this.graphql(f,{owner:s,repo:l,expression:i!=null?i:`${u}:${d}`});return(a=(o=p==null?void 0:p.repository)==null?void 0:o.object)!=null?a:void 0}catch(s){V.error(s);return}}async repositoryObjectExists(e,r){return await this.queryRepositoryObject(e,"exists","			__typename",r)!==void 0}async searchPullRequestsQuery(e,r){try{let n=c(function(s,l){return{number:s.number,title:s.title,repoWithOwner:s.repository.nameWithOwner,reasons:l?[l]:[],url:s.url}},"toResult");const i=`query searchPullRequests(
	$authored: String!
	$assigned: String!
	$reviewRequested: String!
	$mentioned: String!
) {
	viewer {
		repositories(first: 100, orderBy: { field: STARGAZERS, direction: DESC }) {
			nodes {
				pullRequests(first: 100, states: OPEN, orderBy: { field: UPDATED_AT, direction: DESC }) {
					nodes {
						number
						title
						url
						repository {
							nameWithOwner
						}
					}
				}
			}
		}
	}
	authored: search(first: 100, query: $authored, type: ISSUE) {
		nodes {
			...on PullRequest {
				number
				title
				url
				repository {
					nameWithOwner
				}
			}
		}
	}
	assigned: search(first: 100, query: $assigned, type: ISSUE) {
		nodes {
			...on PullRequest {
				number
				title
				url
				repository {
					nameWithOwner
				}
			}
		}
	}
	reviewRequested: search(first: 100, query: $reviewRequested, type: ISSUE) {
		nodes {
			...on PullRequest {
				number
				title
				url
				repository {
					nameWithOwner
				}
			}
		}
	}
	mentioned: search(first: 100, query: $mentioned, type: ISSUE) {
		nodes {
			...on PullRequest {
				number
				title
				url
				repository {
					nameWithOwner
				}
			}
		}
	}
}`;e=e.trim(),(r==null?void 0:r.user)&&(e+=` user:${r.user}`);const o=await this.graphql(i,{authored:(e?`${e} is:pr is:open archived:false author:@me`:"is:pr is:open archived:false author:@me").trim(),assigned:(e?`${e} is:pr is:open archived:false assignee:@me`:"is:pr is:open archived:false assignee:@me").trim(),reviewRequested:(e?`${e} is:pr is:open archived:false review-requested:@me`:"is:pr is:open archived:false review-requested:@me").trim(),mentioned:(e?`${e} is:pr is:open archived:false mentions:@me`:"is:pr is:open archived:false mentions:@me").trim()});return o===void 0?[]:zf([...o.assigned.nodes.map(s=>n(s,"assigned")),...o.reviewRequested.nodes.map(s=>n(s,"review requested")),...o.mentioned.nodes.map(s=>n(s,"mentioned")),...o.authored.nodes.map(s=>n(s,"authored")),...gc(o.viewer.repositories.nodes,s=>s.pullRequests.nodes.map(l=>n(l)))],s=>s.url,(s,l)=>(l.reasons.length!==0&&s.reasons.push(...l.reasons),s))}catch(n){return[]}}async searchRepositoriesQuery(e,r){try{const n=`query searchRepositories(
	$search: String!
) {
	viewer {
		repositories(first: 100, orderBy: { field: UPDATED_AT, direction: DESC }) {
			nodes {
				nameWithOwner
				description
				url
				parent {
					nameWithOwner
				}
				stargazerCount
			}
		}
	}
	search(first: 100, query: $search, type: REPOSITORY) {
		nodes {
			...on Repository {
				nameWithOwner
				description
				url
				parent {
					nameWithOwner
				}
				stargazerCount
			}
		}
	}
}`;(r==null?void 0:r.user)&&(e+=` user:${r.user}`),(r==null?void 0:r.sort)&&(e+=` sort:${r.sort}`),e+=" fork:true";const i=await this.graphql(n,{search:e.trim()});return i===void 0?[]:zf((r==null?void 0:r.user)?[...i.search.nodes,...i.viewer.repositories.nodes]:[...i.viewer.repositories.nodes,...i.search.nodes],a=>a.url).map(a=>{var s,l,u;return{repoWithOwner:a.nameWithOwner,description:(s=a.description)!=null?s:void 0,url:a.url,fork:(u=(l=a.parent)==null?void 0:l.nameWithOwner)!=null?u:void 0,stars:a.stargazerCount}})}catch(n){return[]}}async searchCodeQuery(e,r,n){var i,o,a;const{repo:{owner:s,name:l},HEAD:u,defaultBranch:d}=await this.getMetadata(r),f=[];((i=u.branch)==null?void 0:i.name)!==d.name&&f.push(Ha("Cant search branch","Unable to search {0} without index, falling back to {1}.",(a=(o=u.branch)==null?void 0:o.name)!=null?a:u.detached.name,d.name));try{const g=await(await this.octokit({request:{headers:{authorization:`Bearer ${(await this.ensureAuthenticated()).accessToken}`,accept:"application/vnd.github.v3.text-match+json"}}})).request("GET /search/code",{q:`${e} repo:${s}/${l}`}),S=new h.Range(0,0,0,0),y=[];let b=0,_;for(const C of g.data.items)for(const k of C.text_matches){if(b++,n.maxResults!==void 0&&b>n.maxResults)return{matches:y,limitHit:!0};_={path:C.path,ranges:[],preview:k.fragment,matches:[]};for(const F of k.matches){let $=0,ne=0,ie=0;for(let Q=0;Q<F.indices[1];Q++)Q===F.indices[0]&&(ne=ie),k.fragment[Q]===`
`?($++,ie=0):ie++;_.ranges.push(S),_.matches.push(new h.Range($,ne,$,ie))}y.push(_)}return{matches:y,limitHit:!1,warnings:f}}catch(p){return{matches:[],limitHit:!0}}}async switchTo(e,r,n){const{name:i,repo:o,HEAD:{branch:a}}=await this.getMetadata(e);let s;if(!(r!==void 0&&(typeof r=="string"?(r==null?void 0:r.startsWith("refs/heads/"))?(s={type:G.Tree,id:r.substr(11)},r=r.substr(11)):(r==null?void 0:r.startsWith("refs/tags/"))?s={type:G.Tree,id:r.substr(10)}:s={type:G.Tree,id:r}:s={...r,type:r.type===G.Branch||r.type===G.Tag?G.Tree:r.type},(a==null?void 0:a.name)===s.id)))return{name:i,uri:this.providerService.createVirtualUri(e,{repo:o,ref:s}),location:(n==null?void 0:n.openInNewWindow)?W.NewWindow:W.CurrentWindow}}async sync(e,r,n){var i,o,a,s,l,u;const d=new Z(`GitHub.sync(${e.toString()}, resolution=${n.conflictResolution}, to=${n.to})`);let f;try{const{metadata:p}=await this.fetchCore(e,!0,{to:n.to});if(p.HEAD.detached){f=" \u2022 Skipped; detached HEAD";return}if(((o=(i=p==null?void 0:p.state)==null?void 0:i.behind)!=null?o:0)>0&&await r.hasChanges(e)){d.logStep("Fetching upstream changes");const g=[],S=(s=(a=p.state)==null?void 0:a.incomingChanges)!=null?s:[];if(S.length>0){const y=await r.getChanges(e);for(const b of y){const _=this.providerService.getRelativeFilePath(e,b.uri),C=S.find(k=>k.uri.path===_);if(C!==void 0){g.push({path:_,current:b,incomingType:C.type});break}}}if(g.length>0)switch(n.conflictResolution){case he.KeepCurrent:d.logStep("Syncing (keep) upstream changes",{message:`: ${g.length} conflicts; \u2022`,suffix:" \u2022 Syncing (keep) upstream changes..."});for(const y of g)await r.keep(y.current.uri,{type:y.incomingType,providerUri:Qf(p,p.HEAD.branch.sha,y.path)});break;case he.DiscardCurrent:d.logStep("Syncing (discard) upstream changes",{message:`: ${g.length} conflicts; \u2022`,suffix:" \u2022 Syncing (discard) upstream changes..."});for(const y of g)await r.discard(y.current.uri);break;case he.Merge:d.logStep("Syncing (merge) upstream changes",{message:`: ${g.length} conflicts; \u2022`,suffix:" \u2022 Syncing (merge) upstream changes..."});for(const y of g)await r.merge(y.current.uri,{type:y.incomingType,providerUri:Qf(p,p.HEAD.branch.sha,y.path)},{providerUri:Qf(p,p.HEAD.sha,y.path)});break;case he.Abort:default:throw d.logStep("Syncing (abort) upstream changes",{message:`: ${g.length} conflicts; \u2022`,suffix:" \u2022 Syncing (abort) upstream changes..."}),await this.providerService.updateMetadata(e,p),new je}}f=` \u2022 to=${(l=n.to)!=null?l:p.HEAD.branch.sha}`,await this.fastForwardTo(e,(u=n.to)!=null?u:p.HEAD.branch.sha,p)}finally{d.stop(f?{suffix:f}:void 0)}}async fastForwardTo(e,r,n){if(n.HEAD.detached)throw new ye("Unable to fast-forward; no current branch");if(n.HEAD.sha===r&&n.state===void 0)return;const i=this.asFileTreeKey(e,n.HEAD.sha),o=this.fileTreeCache.get(i);this.fileTreeCache.delete(i),o==null||o.dispose(),V.log(`Fast forward to ${r}; rootUri=${e.toString()}`),await this.providerService.updateMetadata(e,{...n,HEAD:{...n.HEAD,detached:void 0,sha:r},state:r!==n.HEAD.branch.sha?n.state:void 0,timestamp:Date.now()}),r!==n.HEAD.branch.sha&&n.state===void 0&&await this.fetchCore(e,!1,{to:r})}async getBranchTips(e,r){try{const{repo:{owner:n,name:i},HEAD:o}=await this.getMetadata(e);r===void 0&&(o.type===q.RemoteBranch?r=`${o.branch.remote.repo.owner}/${o.branch.remote.repo.name}:refs/heads/${o.branch.name}`:r=o.branch?`refs/heads/${o.branch.name}`:"");const a=dy.exec(r);if(a==null?void 0:a.groups)return this.getRemoteBranchTips(n,i,r);const s=`query getBranchTips(
	$owner: String!
	$repo: String!
	$ref: String!
) {
	repository(owner: $owner, name: $repo) {
		defaultBranchRef {
			target {
				oid
			}
		}
		ref(qualifiedName: $ref) {
			target {
				oid
			}
		}
	}
}`,l=await this.graphql(s,{owner:n,repo:i,ref:r});if((l==null?void 0:l.repository)==null)return;const{defaultBranchRef:u,ref:d}=l.repository;return!u&&!d?void 0:{defaultBranch:u?{sha:u.target.oid}:void 0,branch:d?{sha:d.target.oid}:void 0}}catch(n){return}}async getRemoteBranchTips(e,r,n){try{const i=dy.exec(n);if((i==null?void 0:i.groups)==null)return;let{remoteOwner:o,remoteRepo:a,remoteRef:s}=i.groups;a||(a=r);const l=`query getRemoteBranchTips(
	$owner: String!
	$repo: String!
	$remoteOwner: String!
	$remoteRepo: String!
	$remoteRef: String!
) {
	repository(owner: $owner, name: $repo) {
		defaultBranchRef {
			target {
				oid
			}
		}
	}
	remote: repository(owner: $remoteOwner, name: $remoteRepo) {
		ref(qualifiedName: $remoteRef) {
			target {
				oid
			}
		}
	}
}`,u=await this.graphql(l,{owner:e,repo:r,remoteOwner:o,remoteRepo:a,remoteRef:s});if((u==null?void 0:u.repository)==null||(u==null?void 0:u.remote)==null)return;const{repository:{defaultBranchRef:d},remote:{ref:f}}=u;return!d&&!f?void 0:{defaultBranch:d?{sha:d.target.oid}:void 0,branch:f?{sha:f.target.oid}:void 0}}catch(i){return}}async getRepositoryInfo(e,r,n,i){var o,a,s,l,u,d,f,p,g,S,y,b,_,C,k,F;try{const $=`number
title
state
maintainerCanModify
baseRef { name }
baseRefName
baseRefOid
baseRepository {
	name
	owner { login }
	defaultBranchRef {
		name
		target { oid }
	}
	viewerPermission
}
headRef { name }
headRefName
headRefOid
headRepository {
	name
	owner { login }
	defaultBranchRef {
		name
		target { oid }
	}
	viewerPermission
}
mergeCommit { oid }
`,ne=`query getRepository(
	$owner: String!
	$repo: String!
	$ref: String = ""
	$has_pr: Boolean!
	$pr: Int = 0
) {
	viewer { login }
	repository(owner: $owner, name: $repo) {
		name
		owner { login }
		defaultBranchRef {
			name
			target { oid }
		}
		ref(qualifiedName: $ref) {
			name
			prefix
			target { oid }
		}
		viewerPermission
		pullRequest(number: $pr) @include(if: $has_pr) {
			${$}
		}
	}
}`;let ie,Q;try{const xe=await this.graphql(ne,{owner:e,repo:r,ref:(i==null?void 0:i.ref)!=="HEAD"?i==null?void 0:i.ref:void 0,has_pr:Boolean(i==null?void 0:i.pr),pr:(o=i==null?void 0:i.pr)!=null?o:0});if((xe==null?void 0:xe.repository)==null)return;({repository:Q,viewer:{login:ie}}=xe)}catch(xe){if((i==null?void 0:i.pr)&&xe instanceof Oa&&((s=(a=xe.errors)==null?void 0:a[0])==null?void 0:s.type)==="NOT_FOUND"&&((l=xe.errors[0])==null?void 0:l.message.includes("Could not resolve to a PullRequest"))){({repository:Q,viewer:{login:ie}}=xe.data);try{const Ge=await this.graphql(`query getPullRequestFromParentRepository(
	$owner: String!
	$repo: String!
	$pr: Int!
) {
	repository(owner: $owner, name: $repo) {
		parent {
			pullRequest(number: $pr) {
				${$}
			}
		}
	}
}`,{owner:e,repo:r,pr:i==null?void 0:i.pr});if(((d=(u=Ge==null?void 0:Ge.repository)==null?void 0:u.parent)==null?void 0:d.pullRequest)==null)throw xe;Q.pullRequest=Ge.repository.parent.pullRequest}catch{throw xe}}else throw xe}const me=(f=Q.defaultBranchRef)!=null?f:void 0;if((me==null?void 0:me.name)==null)return;const se=Q.pullRequest;let fe;if(Q==null?void 0:Q.ref)fe={prefix:Q.ref.prefix,name:Q.ref.name,sha:Q.ref.target.oid};else if(se==null?void 0:se.headRef){let xe=Yf(se.headRepository.viewerPermission);xe<z.Write&&se.maintainerCanModify&&Yf(Q.viewerPermission)>=z.Write&&(xe=z.WriteToPullRequest),fe=se.headRepository.owner.login===e?{prefix:"refs/heads/",name:se==null?void 0:se.headRef.name,sha:(g=(p=se.mergeCommit)==null?void 0:p.oid)!=null?g:se==null?void 0:se.headRefOid}:{prefix:"refs/remotes/",name:se==null?void 0:se.headRef.name,sha:(y=(S=se.mergeCommit)==null?void 0:S.oid)!=null?y:se==null?void 0:se.headRefOid,remote:{name:`${se.headRepository.owner.login}/${se.headRepository.name}`,accessLevel:xe,repo:{owner:se.headRepository.owner.login,name:se.headRepository.name}}}}else(se==null?void 0:se.baseRef)?(fe={prefix:"refs/heads/",name:se==null?void 0:se.baseRef.name,sha:(_=(b=se.mergeCommit)==null?void 0:b.oid)!=null?_:se==null?void 0:se.baseRefOid},n&&(V.log("Did not find a headRef for PR, falling back to baseRef",se.baseRef),Pr.showPullRequestHeadNotFoundMessage(`${e}/${r}`,`#${i==null?void 0:i.pr}`))):(i==null?void 0:i.ref)==="HEAD"&&(fe={prefix:"refs/heads/",name:me.name,sha:me.target.oid});return{user:ie,repo:{owner:Q.owner.login,name:Q.name},accessLevel:Yf(Q.viewerPermission),ref:fe,defaultBranch:{name:me.name,sha:me.target.oid},pullRequest:se?{id:se.number.toString(),state:Xf(se.state),title:se.title}:void 0}}catch($){if($ instanceof Oa)switch((k=(C=$.errors)==null?void 0:C[0])==null?void 0:k.type){case"NOT_FOUND":{if((i==null?void 0:i.pr)&&((F=$.errors[0])==null?void 0:F.message.includes("Could not resolve to a PullRequest"))){const ie=new ct($,`${e}/${r}`,`#${i==null?void 0:i.pr}`);throw n&&Pr.showPullRequestNotFoundMessage(ie.name,ie.id),ie}const ne=new It($,`${e}/${r}`);throw n&&Pr.showRepositoryNotFoundMessage(ne.name),ne}case"FORBIDDEN":{const ne=new Dt($,`${e}/${r}`);throw n&&Pr.showRepositoryForbiddenMessage(ne.name),ne}}V.error($,`Failed to get repository info for '${e}/${r}'`),!this.handleRequestErrors($)&&n&&Pr.showUnableToOpenRepositoryMessage($);return}}async validateOwnerAndRepoAndSplitRefFromPath(e,r,n){try{const i=await this.request(`GET /repos/{owner}/{repo}/git/extract-ref/${n!=null?n:"HEAD"}`,{owner:e,repo:r});return[e,r]=i.data.name_with_owner.split("/"),n?{owner:e,repo:r,ref:{type:G.Tree,id:i.data.ref},path:i.data.path}:{owner:e,repo:r}}catch(i){if(i instanceof ei)switch(i.status){case 401:throw new Ie(i,()=>void this.reauthenticate());case 403:throw new Dt(i,`${e}/${r}`);case 404:throw new It(i,`${e}/${r}`);case 409:throw new Nt(i,`${e}/${r}`)}return}}asFileTreeKey(e,r){return`${O(this.providerService.getProviderRootUri(e))}:${r}`}}c(uu,"GitHubRepositoryProvider"),ly([ft()],uu.prototype,"ensureAuthenticated",1),ly([ft()],uu.prototype,"octokit",1);function Xf(t){switch(t){case"OPEN":return re.Open;case"CLOSED":return re.Closed;case"MERGED":return re.Merged}}c(Xf,"toPullRequestState");function CE(t){if(t!==void 0)return t.map(e=>{switch(e){case re.Open:return"OPEN";case re.Closed:return"CLOSED";case re.Merged:return"MERGED"}})}c(CE,"fromPullRequestStates");var Lo;(function(t){t.ADMIN="ADMIN",t.MAINTAIN="MAINTAIN",t.WRITE="WRITE",t.TRIAGE="TRIAGE",t.READ="READ",t.NONE="NONE"})(Lo||(Lo={}));function Yf(t){switch(t){case Lo.ADMIN:return z.Admin;case Lo.MAINTAIN:return z.Maintain;case Lo.WRITE:return z.Write;case Lo.TRIAGE:return z.Triage;case Lo.READ:return z.Read;default:return z.None}}c(Yf,"permissionToAccessLevel");function EE(t){switch(t&&(t=t.toLocaleLowerCase()),t){case"blob":return h.FileType.File;case"tree":return h.FileType.Directory;default:return h.FileType.Unknown}}c(EE,"typenameToFileType");const fy=c(class{constructor(t,e,r){this.providerService=t,this.storageService=e,this.changeStore=r,this.lock=new Ja("PendingRepositoryOpenActions"),this.disposable=h.Disposable.from(t.onDidChangeRepositories(n=>n.added.length&&this.onRepositoriesOpened(n.added)))}dispose(){this.disposable.dispose()}async onRepositoriesOpened(t){for(const e of t){const r=await this.getAndDelete(e);(r==null?void 0:r.applyChangeset)&&await this.applyPendingChangeset(e,r.applyChangeset),(r==null?void 0:r.filesToOpen)&&this.openPendingFiles(e.uri,r.filesToOpen),this.fetchOrSync(e)}}async fetchOrSync(t){await this.changeStore.hasChanges(t.uri)?await this.providerService.fetch(t.uri):await this.providerService.sync(t.uri,this.changeStore,{reason:"invoked"})}async get(t){return this.lock.synchronizeRead(()=>this.getCore(t.uri),"PendingRepositoryOpenActions.get")}async getAndDelete(t){V.debug(`RepositoryOpenActionsService.getAndDelete(${t.uri.toString()})`);try{return await this.lock.synchronizeWrite(async()=>{const r=await this.getCore(t.uri);if(r!==void 0)return await this.storeCore(t.uri,void 0),r},"PendingRepositoryOpenActions.getAndDelete")}catch(e){V.error(e,`Failed to get pending actions for ${t.uri.toString()}`);return}}async openPendingFiles(t,e){if(e.length!==0){V.log(`RepositoryOpenActionsService.openPendingFiles(${t.toString()})`,e.join(","));for(let r of e){const n=/:(?<start>\d+)(?:-(?<end>\d+))?$/.exec(r);let i,o;(n==null?void 0:n.groups)!==void 0&&(i=Number(n.groups.start),isNaN(i)&&(i=void 0),o=Number(n.groups.end),isNaN(o)&&(o=void 0),r=r.substring(0,n.index));const a=h.Uri.joinPath(t,r);let s;try{s=await h.workspace.fs.stat(a)}catch{}if((s==null?void 0:s.type)===h.FileType.Directory)h.commands.executeCommand("revealInExplorer",a);else{let l;i!==void 0&&(l={selection:new h.Range(Number(i)-1,0,o!=null?o:i,0)}),h.commands.executeCommand("vscode.open",a,l)}}}}setChangesetToApply(t,e){return V.log(`RepositoryOpenActionsService.setChangesetToApply(${t.toString()})`),this.lock.synchronizeWrite(async()=>{const r=await this.getCore(t);await this.storeCore(t,{...r,applyChangeset:e})},"PendingRepositoryOpenActions.setChangesetToApply")}setPendingFilesToOpen(t,e){return V.log(`RepositoryOpenActionsService.setPendingFilesToOpen(${t.toString()})`,e.length),this.lock.synchronizeWrite(async()=>{const r=await this.getCore(t);await this.storeCore(t,{...r,filesToOpen:e})},"PendingRepositoryOpenActions.setPendingFilesToOpen")}async applyPendingChangeset(t,e){V.log(`RepositoryOpenActionsService.applyPendingChangeset(${t.uri.toString()})`);try{await this.changeStore.applyChangeset(t.uri,e,{save:!0})}catch(r){V.error(r,`Failed to apply pending changeset for ${t.uri.toString()}`)}}async getCore(t){return this.fromStorage(await this.storageService.get(this.getStorageKey(t)))}storeCore(t,e){return e===void 0||e.applyChangeset===void 0&&(e.filesToOpen===void 0||e.filesToOpen.length===0)?this.storageService.delete(this.getStorageKey(t)):this.storageService.store(this.getStorageKey(t),this.toStorage(e))}getStorageKey(t){return`actions/${E(t)}`}fromStorage(t){if(!!t)try{const e=JSON.parse(t,(r,n)=>(r==="uri"||r.endsWith("Uri"))&&x(n)?h.Uri.from(n):n);return{filesToOpen:e.filesToOpen,applyChangeset:e.applyChangeset}}catch(e){return V.error(e,"Failed to deserialize pending repository actions"),{}}}toStorage(t){const e={schemaVersion:fy.storageSchemaVersion,...t};return JSON.stringify(e)}},"_RepositoryOpenActionsService");let py=fy;py.storageSchemaVersion=1;const hn=(0,Me.loadMessageBundle)();class gy{constructor(e,r){this.providerService=e,this.changeStore=r,this._onDidChangeFileDecorations=new h.EventEmitter,this._decorations=new Map,this.disposable=h.Disposable.from(h.window.registerFileDecorationProvider(this),e.onDidChangeRepository(this.onRefresh,this),e.onDidRefresh(this.onRefresh,this),r.onDidChange(this.onUrisChanged,this))}get onDidChangeFileDecorations(){return this._onDidChangeFileDecorations.event}dispose(){this.disposable.dispose(),this._decorations.clear()}onRefresh(){this._decorations.clear(),setTimeout(()=>this._onDidChangeFileDecorations.fire(void 0),0)}onUrisChanged(e){const r=e.map(({uri:n})=>(this._decorations.delete(E(n)),n));setTimeout(()=>this._onDidChangeFileDecorations.fire(r),0)}async provideFileDecoration(e,r){if(e.scheme!==Xt.scheme)return;const n=E(e);let i=this._decorations.get(n);if(i!==void 0)return i!=null?i:void 0;const o=await this.providerService.getIncomingChanges(this.providerService.getVirtualRootUri(e));let a;o.length>0&&(a=o.find(l=>E(l.uri)===n));const s=await this.changeStore.getChange(e);if(s===void 0){if(a!==void 0)switch(a.type){case I.Created:i={badge:"\u2193A",color:new h.ThemeColor("remoteHub.decorations.incomingAddedForegroundColor"),tooltip:hn("decoration tooltip incoming change added","Pending Incoming Changes (Added)")};break;case I.Deleted:i={badge:"\u2193D",color:new h.ThemeColor("remoteHub.decorations.incomingDeletedForegroundColor"),tooltip:hn("decoration tooltip incoming change deleted","Pending Incoming Changes (Deleted)")};break;case I.Changed:i={badge:"\u2193M",color:new h.ThemeColor("remoteHub.decorations.incomingModifiedForegroundColor"),tooltip:hn("decoration tooltip incoming change modified","Pending Incoming Changes (Modified)")};break;default:i={badge:"\u2193~",color:new h.ThemeColor("remoteHub.decorations.incomingModifiedForegroundColor"),tooltip:hn("decoration tooltip incoming change","Pending Incoming Changes")};break}return this._decorations.set(n,i!=null?i:null),i}if(s.conflicts)i={badge:"\u26A0",color:new h.ThemeColor("remoteHub.decorations.conflictForegroundColor"),tooltip:hn("decoration tooltip conflicts","Merge Conflicts ({0})",Gy(s.conflicts.status))};else if(a!==void 0)switch(a.type){case I.Created:i={badge:"\u26A0",color:new h.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:hn("decoration tooltip possible conflict added","Possible Merge Conflicts (Added)")};break;case I.Deleted:i={badge:"\u26A0",color:new h.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:hn("decoration tooltip possible conflict deleted","Possible Merge Conflicts (Deleted)")};break;case I.Changed:i={badge:"\u26A0",color:new h.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:hn("decoration tooltip possible conflict","Possible Merge Conflicts")};break;default:i={badge:"\u26A0",color:new h.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:hn("decoration tooltip possible conflict","Possible Merge Conflicts")}}else switch(s.type){case I.Created:i={badge:"A",color:new h.ThemeColor("remoteHub.decorations.addedForegroundColor"),tooltip:hn("decoration tooltip added","Added")};break;case I.Changed:i={badge:"M",color:new h.ThemeColor("remoteHub.decorations.modifiedForegroundColor"),tooltip:hn("decoration tooltip modified","Modified")};break;case I.Deleted:i={badge:"D",color:new h.ThemeColor("remoteHub.decorations.deletedForegroundColor"),tooltip:hn("decoration tooltip deleted","Deleted")};break}return this._decorations.set(n,i!=null?i:null),i}}c(gy,"ScmDecorationProvider");const RE=(0,Me.loadMessageBundle)();class ki{constructor(e){this.command=e}get label(){return this.command.title}async execute(){var e;return void await h.commands.executeCommand(this.command.command,...(e=this.command.arguments)!=null?e:[])}}c(ki,"CommandQuickPickItem");var du;(function(t){async function e(r,n,i,o,a,s){let l;Array.isArray(a)?l=a:s===void 0&&(l=[],s=a);const u=h.window.createQuickPick(),d=new Rl(500),f=[d],{defaultBranch:p,HEAD:g}=await r.getMetadata(n);async function S(k){var F;const[$,ne,ie]=await Promise.all([r.getBranches(n,{query:k,limit:100}),r.getTags(n,{query:k,limit:100}),r.getSnapshots(n)]),Q=new Set,me=new Set;for(const Ge of ie)Q.add(Ge.hash),me.add(Ge.branch.name);const se=((s==null?void 0:s.filterBranches)?$.branches.filter(s==null?void 0:s.filterBranches):$.branches).filter(Ge=>Ge.name!==p.name),fe=RE("indexedCommit","Open indexed commit"),xe=[{iconPath:new h.ThemeIcon("layers-active"),tooltip:fe}];return[...l,...((F=g.branch)==null?void 0:F.name)!==p.name?[{label:`$(git-branch) ${p.name} (default)`,description:`\u2022$(git-commit) ${P(p.sha)}${me.has(p.name)||Q.has(p.sha)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,alwaysShow:!0,type:G.Branch,name:void 0,sha:p.sha,buttons:me.has(p.name)||Q.has(p.sha)?xe:void 0}]:[],...se.map(Ge=>({label:`$(git-branch) ${Ge.name}`,description:`\u2022$(git-commit) ${P(Ge.commit)}${me.has(Ge.name)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,type:G.Branch,name:Ge.name,sha:Ge.commit,buttons:me.has(Ge.name)?xe:void 0})),...ne.tags.map(Ge=>({label:`$(tag) ${Ge.name}`,description:`\u2022$(git-commit) ${P(Ge.commit)}${Q.has(Ge.commit)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,type:G.Tag,name:Ge.name,sha:Ge.commit,buttons:Q.has(Ge.commit)?xe:void 0}))]}c(S,"getItems");const y=S(void 0);let b,_=!1;async function C(k){b=void 0;const F=u.activeItems;u.items=k!=null?k:await y,_&&F.length!==0&&(u.activeItems=u.items.filter($=>F.some(ne=>ne.label===$.label))),u.busy=!1}c(C,"setItems");try{return await new Promise(F=>{var $;f.push(u.onDidHide(()=>F(void 0)),u.onDidChangeValue(ne=>{if(_=!1,ne=ne.trim(),(s==null?void 0:s.allowResetToSha)&&g.branch&&T(ne)){C([{label:`Reset $(git-branch) ${g.branch.name} to $(git-commit) ${ne}`,name:g.branch.name,sha:ne,type:G.Branch}]);return}u.busy=!0;const ie=d.debounce(ne?()=>S(ne):()=>y);b===void 0&&(b=ie.then(async Q=>C(Q)))}),u.onDidAccept(()=>{if(u.activeItems.length!==0){const[ne]=u.activeItems;F(ne)}}),u.onDidTriggerItemButton(ne=>{const ie=ne.item;ie instanceof ki||(ie.useIndex=!0),F(ie)})),u.title=o,u.placeholder=i,u.matchOnDescription=!0,u.ignoreFocusOut=($=s==null?void 0:s.ignoreFocusOut)!=null?$:!0,u.busy=!0,u.show(),b=d.debounce(async()=>y,0).then(ne=>C(ne))})}finally{u.dispose(),f.forEach(k=>void k.dispose())}}c(e,"show"),t.show=e})(du||(du={}));function Jf(t,e){switch(t){case q.Branch:case q.RemoteBranch:return e?"$(git-pull-request)":"$(git-branch)";case q.Tag:return"$(tag)";case q.Commit:return"$(git-commit)"}}c(Jf,"headTypeToCodicon");function AE(t){switch(t){case wt.Active:return"$(layers-active)";case wt.Match:return"$(layers-dot)";case wt.Indexed:return"$(layers)"}}c(AE,"indexTypeToCodicon");function IE(t,e){switch(t){case q.Branch:case q.RemoteBranch:return e?new h.ThemeIcon("git-pull-request"):new h.ThemeIcon("git-branch");case q.Tag:return new h.ThemeIcon("tag");case q.Commit:return new h.ThemeIcon("git-commit")}}c(IE,"headTypeToThemeIcon");const we=(0,Me.loadMessageBundle)(),TE=new TextDecoder;class my{constructor(e,r,n,i){this.providerService=e,this.changeStore=r,this.openActionsService=n,this.telemetryService=i,this._onDidCloseRepository=new h.EventEmitter,this._onDidOpenRepository=new h.EventEmitter,this._onDidChangeState=new h.EventEmitter,this._scmProviders=[],this._state="uninitialized",this.disposable=h.Disposable.from(ke.onDidChange(this.onConfigurationChanged,this),this.providerService.onDidChangeRepositories(this.onRepositoriesChanged,this),this.providerService.onDidChangeRepository(async({repository:a})=>{const s=this.getScmProvider(de.getVirtualUri(a.uri));s!==void 0&&await this.updateStatusBarCommands(s,void 0)}),this.providerService.onDidSyncRepository(async({repository:a,syncing:s})=>{const l=this.getScmProvider(de.getVirtualUri(a.uri));l!==void 0&&await this.updateStatusBarCommands(l,{syncing:s})}),this.providerService.onDidRefresh(a=>{for(const s of a)this.update(s)}),this.changeStore.onDidChange(a=>this.update(a[0].rootUri)),...this.registerCommands());const o=this.providerService.repositories;this.onRepositoriesChanged({added:o,removed:[]})}get onDidCloseRepository(){return this._onDidCloseRepository.event}get onDidOpenRepository(){return this._onDidOpenRepository.event}get onDidChangeState(){return this._onDidChangeState.event}get repositories(){return this._scmProviders.map(e=>e.repository).filter(e=>Boolean(e))}dispose(){var e;(e=this.disposable)==null||e.dispose()}get staging(){return this._staging===void 0&&(this._staging=ke.get("staging")),this._staging}get state(){return this._state}refresh(){for(const e of this._scmProviders)this.update(e.sourceControl.rootUri)}onConfigurationChanged(e){ke.changed(e,"staging")&&(this._staging=void 0,ke.changed(e,"staging.enabled")&&this.refresh()),ke.changed(e,"commitDirectlyWarning")&&this.refresh()}async onRepositoriesChanged(e){if(e.added.length)for(const r of e.added){const n=await this.update(r.uri);(n==null?void 0:n.repository)&&this._onDidOpenRepository.fire(n.repository)}if(e.removed.length)for(const r of e.removed){const n=this._scmProviders.findIndex(i=>E(i.sourceControl.rootUri)===E(r.uri));if(n!==-1){const i=this._scmProviders[n];i.repository&&this._onDidCloseRepository.fire(i.repository),i.sourceControl.dispose(),this._scmProviders.splice(n,1)}}this._state!=="initialized"&&(this._state="initialized",this._onDidChangeState.fire(this._state)),xi(Hn.HasWriteableScmProvider,this._scmProviders.some(r=>!r.isReadonly))}registerCommands(){return[h.commands.registerCommand("remoteHub.createPullRequest",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.sendEvent("command.createPullRequest"),void this.createPullRequest(e)}),h.commands.registerCommand("remoteHub.createDraftPullRequest",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.sendEvent("command.createDraftPullRequest"),void this.createPullRequest(e,{draft:!0})}),h.commands.registerCommand("remoteHub.commit",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.sendEvent("command.commit"),void this.commitChanges(e,{empty:!1})}),h.commands.registerCommand("remoteHub.commitEmpty",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.sendEvent("command.commitEmpty"),void this.commitChanges(e,{empty:!0})}),h.commands.registerCommand("remoteHub.discardAllChanges",async e=>{if(vy(e)){const o=e.resourceStates.filter(uc);if(o.length!==0){if(await tp(o))for(const a of o)await this.changeStore.discard(a.resourceUri);else this.telemetryService.sendEvent("command.discardAllChanges.abort",{reason:"aborted"});return}}const r=this.getSourceControlFrom(e);if((r==null?void 0:r.rootUri)===void 0)return;this.telemetryService.sendEvent("command.discardAllChanges");const n=await this.changeStore.getChanges(r.rootUri);await tp(n)?await this.changeStore.discardAll(r.rootUri):this.telemetryService.sendEvent("command.discardAllChanges.abort",{reason:"aborted"})}),h.commands.registerCommand("remoteHub.discardChanges",async(...e)=>{for(const r of e)!uc(r)||(this.telemetryService.sendEvent("command.discardChanges"),await tp([r])?await this.changeStore.discard(r.resourceUri):this.telemetryService.sendEvent("command.discardChanges.abort",{reason:"aborted"}))}),h.commands.registerCommand("remoteHub.stageAllChanges",async e=>{const r=this.getSourceControlFrom(e);(r==null?void 0:r.rootUri)!==void 0&&(this.telemetryService.sendEvent("command.stageAllChanges"),await this.changeStore.stageAll(r.rootUri))}),h.commands.registerCommand("remoteHub.stageChanges",async(...e)=>{for(const r of e)!uc(r)||(this.telemetryService.sendEvent("command.stageChanges"),await this.changeStore.stage(r.resourceUri))}),h.commands.registerCommand("remoteHub.unstageAllChanges",e=>{const r=this.getSourceControlFrom(e);if((r==null?void 0:r.rootUri)!==void 0)return this.telemetryService.sendEvent("command.unstageAllChanges"),void this.changeStore.unstageAll(r.rootUri)}),h.commands.registerCommand("remoteHub.unstageChanges",async(...e)=>{for(const r of e)!uc(r)||(this.telemetryService.sendEvent("command.unstageChanges"),await this.changeStore.unstage(r.resourceUri))}),h.commands.registerCommand("remoteHub.keepChanges",async(...e)=>{for(const r of e)!uc(r)||(this.telemetryService.sendEvent("command.keepChanges"),await this.changeStore.keep(r.resourceUri))}),h.commands.registerCommand("remoteHub.openChanges",e=>{var r;const{command:n}=e;if(!!n)return this.telemetryService.sendEvent("command.openChanges"),void h.commands.executeCommand(n.command,...(r=n.arguments)!=null?r:[])}),h.commands.registerCommand("remoteHub.openFile",async(...e)=>{var r;for(const n of e)if(ep(n)){const i=n,o=this.changeStore.resolveOpenCommand(i.resourceUri,{preserveFocus:!1,preview:!1,viewColumn:h.ViewColumn.Active});this.telemetryService.sendEvent("command.openFile"),await h.commands.executeCommand(o.command,...(r=o.arguments)!=null?r:[])}else if(n instanceof h.Uri){this.telemetryService.sendEvent("command.openFile");const i=n;await h.window.showTextDocument(i)}}),h.commands.registerCommand("remoteHub.createBranch",async e=>{await Bh("remoteHub.createBranchFrom",{...e,fromSha:"HEAD"})}),h.commands.registerCommand("remoteHub.createBranchFrom",async e=>{var r;const n=(r=e==null?void 0:e.uri)!=null?r:await dc(this._scmProviders,we("choose repo for create branch placeholder","Choose which repository to create a new branch on"),we("choose repo for create branch title","Create Branch"));if(n===void 0)return;this.telemetryService.sendEvent("command.createBranchFrom");const i=await this.providerService.getMetadata(n);if(i.accessLevel<z.Write){this.telemetryService.sendEvent("command.createBranchFrom.abort",{reason:"no permissions"}),h.window.showErrorMessage(we("no permissions to create branch ","You don't have access to create branches on this repository."));return}let o,a=!1;if(e==null?void 0:e.fromSha)o=e.fromSha,o==="HEAD"&&(o=i.HEAD.sha);else{const g=await du.show(this.providerService,n,we("choose branch for create placeholder","Choose which branch to create the new branch from"),we("choose branch for create title","Create Branch \u2022 {0}",i.name));if(!g){this.telemetryService.sendEvent("command.createBranchFrom.abort",{reason:"abandoned branch picker"});return}o=g.sha,a=Boolean(g.useIndex)}let s;try{s=await h.window.withProgress({location:h.ProgressLocation.SourceControl},()=>hu(this.providerService,n,o,we("create branch","Please provide a new branch name"),we("create branch placeholder","New branch name"),we("create branch title","Create Branch \u2022 {0}",i.name)))}catch(g){V.error(g),h.window.showErrorMessage(we("unable to create branch","Unable to create the new branch."));return}if(!s){this.telemetryService.sendEvent("command.createBranchFrom.abort",{reason:"abandoned branch name prompt"});return}const l=await this.providerService.switchTo(n,{type:G.Branch,id:s});if(!l)return;const u=await this.changeStore.createChangeset(n);u&&await this.openActionsService.setChangesetToApply(l.uri,u);const d=we("switch to branch prompt open","Switch to Branch"),f=we("switch to branch prompt open in new window","Open in New Window"),p=await h.window.showInformationMessage(we("switch to branch prompt",`Created new branch '{0}'.

Any uncommitted changes will be applied to the new branch.

Do you want to switch to the new branch?`,s),{modal:!0,useCustom:!0},d,f);!p||(l.location=p===f?W.NewWindow:W.CurrentWindow,a&&await ke.setMode(l.uri,xt.getIndexDefault(oe.Branch)),await sn(l,{skipChangesPrompt:!0}))}),h.commands.registerCommand("remoteHub.applyPatch",async e=>{if(e=this.getSourceControlFrom(e),(e==null?void 0:e.rootUri)===void 0)return;this.telemetryService.sendEvent("command.applyPatch");let r;const n=h.window.activeTextEditor;if((n==null?void 0:n.document.languageId)!=="diff"){const i=await h.window.showOpenDialog({openLabel:we("open patch","Open Patch"),title:we("open patch","Open Patch"),canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:{Diff:["diff"],Patch:["*","patch"]}});if(i===void 0||i.length===0)return;r=TE.decode(await h.workspace.fs.readFile(i[0]))}else r=n.document.getText();try{await this.changeStore.applyPatch(e.rootUri,r)}catch{h.window.showErrorMessage(we("invalid patch file","Invalid patch file"))}}),h.commands.registerCommand("remoteHub.exportPatch",async(...e)=>{const r=Array.isArray(e)?e:[e];for(const n of r){const i=this.getSourceControlFrom(n);if((i==null?void 0:i.rootUri)===void 0)return;let o;ep(n)&&(o=n.resourceUri),this.telemetryService.sendEvent("command.exportPatch");const a=await this.changeStore.createPatch(i.rootUri,o),s=await h.workspace.openTextDocument({language:"diff",content:a});await h.window.showTextDocument(s)}}),h.commands.registerCommand("remoteHub.switchToBranch",async e=>{var r,n;const i=(r=e==null?void 0:e.uri)!=null?r:await dc(this._scmProviders,we("choose repo for switch branch placeholder","Choose which repository to switch branches on"),we("choose repo for switch branch title","Switch to Branch or Tag"));if(i===void 0)return;this.telemetryService.sendEvent("command.switchToBranch");const o=[],a=await this.providerService.getMetadata(i);if(e==null?void 0:e.commands)switch(a.accessLevel>=z.Write&&o.push(new ki(En({command:"remoteHub.createBranch",title:we("create branch command","$(add) Create New Branch..."),arguments:[{uri:i}]})),new ki(En({command:"remoteHub.createBranchFrom",title:we("create branch from command","$(add) Create New Branch from..."),arguments:[{uri:i}]}))),a.HEAD.type){case q.Branch:o.push(new ki(En({command:"remoteHub.openOnRemote",title:we("open branch on remote command","$(globe) Open Branch on {0}...",a.provider.name),arguments:[{provider:a.provider,repo:a.repo,branch:a.HEAD.branch.name}]})));break;case q.RemoteBranch:o.push(new ki(En({command:"remoteHub.openOnRemote",title:we("open remote branch on remote command","$(globe) Open Remote Branch on {0}...",a.provider.name),arguments:[{provider:a.provider,repo:a.HEAD.branch.remote.repo,branch:a.HEAD.branch.name}]})));break;case q.Tag:o.push(new ki(En({command:"remoteHub.openOnRemote",title:we("open tag on remote command","$(globe) Open Tag on {0}...",a.provider.name),arguments:[{provider:a.provider,repo:a.repo,tag:a.HEAD.detached.name}]})));break;case q.Commit:o.push(new ki(En({command:"remoteHub.openOnRemote",title:we("open commit on remote command","$(globe) Open Commit on {0}...",a.provider.name),arguments:[{provider:a.provider,repo:a.repo,sha:a.HEAD.sha}]})));break}const s=(n=a.HEAD.branch)==null?void 0:n.name,l=Boolean(s&&!await this.changeStore.hasChanges(i)),u=await du.show(this.providerService,i,we("choose switch branch placeholder","Choose which branch to switch to"),we("choose switch branch title","Switch to Branch or Tag \u2022 {0}",a.name),o,{allowResetToSha:l,filterBranches:s?d=>d.name!==s:void 0,ignoreFocusOut:!1});if(!u){this.telemetryService.sendEvent("command.switchToBranch.abort",{reason:"abandoned branch picker"});return}return u instanceof ki?void u.execute():l&&u.type===G.Branch&&u.name===s&&u.sha?h.window.withProgress({location:h.ProgressLocation.SourceControl},async()=>{try{await this.providerService.sync(i,this.changeStore,{to:u.sha})}catch(d){V.error(d),h.window.showErrorMessage(we("reset failed","Unable to reset the repository to commit '{0}'.",P(u.sha)))}}):void h.window.withProgress({location:h.ProgressLocation.SourceControl},async()=>{const d=await this.providerService.switchTo(i,u.name?{type:u.type,id:u.name}:void 0);if(d!==void 0){if(u.useIndex){const f=await this.providerService.getModeRefType(d.uri);await ke.setMode(d.uri,xt.getIndexDefault(f))}return sn(d)}})}),h.commands.registerCommand("remoteHub.fetch",async e=>{var r;const n=(r=e==null?void 0:e.uri)!=null?r:await dc(this._scmProviders,we("choose repo for fetch placeholder","Choose which repository to fetch"),we("choose repo for fetch title","Fetch Repository"));if(n!==void 0){this.telemetryService.sendEvent("command.fetch");try{await h.window.withProgress({location:h.ProgressLocation.SourceControl},()=>this.providerService.fetch(n,{force:!0}))}catch(i){h.window.showErrorMessage(we("fetch failed","Unable to fetch repository"))}}}),h.commands.registerCommand("remoteHub.fetchAll",async e=>{const r=this.providerService.repositories;if(r.length===0)return;(e==null?void 0:e.automated)||this.telemetryService.sendEvent("command.fetchAll"),(await h.window.withProgress({location:h.ProgressLocation.SourceControl},async()=>{const i=[];for(const o of r)try{await this.providerService.fetch(o.uri)}catch(a){i.push(a)}return i})).length&&!(e==null?void 0:e.automated)&&h.window.showErrorMessage(r.length?we("fetch all failed","Unable to fetch repositories"):we("fetch failed","Unable to fetch repository"))}),h.commands.registerCommand("remoteHub.pull",async e=>{var r;const n=(r=e==null?void 0:e.uri)!=null?r:await dc(this._scmProviders,we("choose repo for pull placeholder","Choose which repository to pull"),we("choose repo for pull title","Pull Repository"));if(n!==void 0){this.telemetryService.sendEvent("command.pull");try{await this.sync(n,{pull:!0})}catch{}}}),h.commands.registerCommand("remoteHub.sync",async e=>{var r;const n=(r=e==null?void 0:e.uri)!=null?r:await dc(this._scmProviders,we("choose repo for sync placeholder","Choose which repository to sync"),we("choose repo for sync title","Synchronize Repository"));if(n!==void 0){this.telemetryService.sendEvent("command.sync");try{await this.sync(n)}catch{}}}),h.commands.registerCommand("remoteHub.disableCommitDirectlyWarning",()=>{this.telemetryService.sendEvent("command.disableCommitDirectlyWarning"),ke.updateEffective("commitDirectlyWarning",rt.Off)})]}async sync(e,{pull:r,...n}={pull:!1}){this.telemetryService.sendEvent("sync");try{await h.window.withProgress({location:h.ProgressLocation.SourceControl},()=>this.providerService.sync(e,this.changeStore,n))}catch(i){if(i instanceof je){const o={title:we("sync confirm","Continue")},a={title:we("sync cancel","Cancel"),isCloseAffordance:!0};await h.window.showWarningMessage(r?we("sync pull",`Pulling in changes may cause conflicts with your uncommitted changes as one of more of those files has changed since you started editing.

Do you want to continue pulling in changes.`):we("sync",`Syncing changes may cause conflicts with your uncommitted changes as one of more of those files has changed since you started editing.

Do you want to continue syncing changes?`),{modal:!0,useCustom:!0},o,a)===o?await h.window.withProgress({location:h.ProgressLocation.SourceControl},()=>this.providerService.sync(e,this.changeStore,{conflictResolution:he.Merge})):this.telemetryService.sendEvent("sync.abort",{reason:"abandoned"})}else throw V.error(i),this.telemetryService.sendException(i),h.window.showErrorMessage(we("sync failed","Unable to sync the repository.")),i}}async commitChanges(e,r){try{await h.window.withProgress({location:h.ProgressLocation.SourceControl},()=>this.commitChangesCore(e,r))}catch(n){if(n instanceof ni){h.window.showInformationMessage(we("no changes to commit","There are no changes to commit."));return}V.error(n),h.window.showErrorMessage(we("commit unable","Unable to commit.")),this.telemetryService.sendException(n)}}async commitChangesCore(e,r){const n=e.rootUri;this.telemetryService.sendEvent("commit",{staging:String(this.staging.enabled)});const i=new Z(`VirtualSourceControl.commitChanges(${n.toString()})`);let o;try{const a=await this.providerService.getMetadata(n);let s,l;const u=this.staging.enabled?this.staging.smart?"auto":!0:!1;for(;;){const f=e.inputBox.value;if(await this.changeStore.hasMergeConflicts(n)){e.inputBox.showValidationMessage(we("commit resolve conflicts","You must resolve any pending conflicts before committing."),h.SourceControlInputBoxValidationType.Error),this.telemetryService.sendEvent("commit.abort",{reason:"aborted conflicts"}),o=": Aborted; Unresolved conflicts";return}const p=await this.providerService.getCommitOperations(n,this.changeStore,{staged:u});if(p.length===0&&!r.empty){e.inputBox.showValidationMessage(this.staging.enabled?we("commit no staged changes","There are no staged changes to commit."):we("commit no changes","There are no changes to commit."),h.SourceControlInputBoxValidationType.Information),this.telemetryService.sendEvent("commit.abort",{reason:this.staging.enabled?"aborted no staged changes":"aborted no changes"}),o=`: Aborted; No ${this.staging.enabled?"staged ":""}changes`;return}if(!f){e.inputBox.showValidationMessage(we("specify commit message","You must specify a commit message before committing."),h.SourceControlInputBoxValidationType.Error),this.telemetryService.sendEvent("commit.abort",{reason:"aborted no message"}),o=": Aborted; No message";return}let g,S;if(a.HEAD.type===q.RemoteBranch?(S=a.HEAD.branch.remote.accessLevel<z.Write,g=S&&a.accessLevel<z.Write):(g=a.accessLevel<z.Write,S=g),l===void 0&&g&&(l=await this.providerService.getFork(n),l===void 0)){const y={title:we("fork confirm","Fork Repository")},b={title:we("cancel","Cancel"),isCloseAffordance:!0};if(await h.window.showInformationMessage(we("fork","You\u2019re trying to make changes in a project you don\u2019t have write access to. Do you want to create a fork of this project to commit your proposed changes to?"),{modal:!0,useCustom:!0},y,b)!==y){this.telemetryService.sendEvent("commit.abort",{reason:"abandoned fork prompt"}),o=": Aborted; Abandoned fork prompt";return}if(l=await h.window.withProgress({location:h.ProgressLocation.Notification,title:we("fork progress","Forking {0}...",a.name)},()=>this.providerService.fork(n)),l===void 0){h.window.showErrorMessage(we("unable to fork","Unable to fork repository.")),this.telemetryService.sendEvent("commit.abort",{reason:"aborted fork failed"}),o=": Aborted; Fork failed";return}}if(l||S){if(l===void 0){const b={title:we("remote branch create branch prompt confirm","Commit to New Branch")},_={title:we("cancel","Cancel"),isCloseAffordance:!0};if(await h.window.showErrorMessage(we("remote branch create branch prompt",`You\u2019re trying to make changes to a branch you don\u2019t have write access to.

Do you want to commit your changes to a new branch?`),{modal:!0,useCustom:!0},b,_)!==b){this.telemetryService.sendEvent("commit.abort",{reason:"abandoned remote branch prompt"}),o=": Aborted; Abandoned commit to new branch prompt";return}}let y=0;try{const b=await this.providerService.getBranches(l?this.providerService.createVirtualUri(n,l):n,{query:"patch-"});for(const _ of b.branches){const C=/^patch-(?<num>\d+)$/.exec(_.name);if(C==null?void 0:C.groups){const k=Number(C.groups.num);k>y&&(y=k)}}}catch{}if(s=await hu(this.providerService,n,a.HEAD.sha,we("create new branch prompt","Create a new branch to commit your changes to"),we("create new branch placeholder","New branch name"),we("create new branch title","Commit \u2022 Create Branch \u2022 {0}",l?l.name:a.name),l,`patch-${y+1}`),!s){this.telemetryService.sendEvent("commit.abort",{reason:"abandoned create branch prompt"}),o=": Aborted; Abandoned create branch prompt";return}}try{if(ke.getUseNewCommitApi())await this.providerService.createAndPushCommit(n,f,p,s,r,l);else{i.logStep("Creating commit");const y=await this.providerService.createCommit(n,f,p,l);i.logStep("Pushing",{message:`: Created commit ${y}`,suffix:" \u2022 Pushing..."}),await this.providerService.pushCommit(n,y,s,l)}}catch(y){if(y instanceof ye){const b={title:we("detached head prompt confirm","Commit to New Branch")},_={title:we("cancel","Cancel"),isCloseAffordance:!0};if(await h.window.showErrorMessage(we("detached head prompt",`Unable to commit your changes because you are not currently on a branch.

Do you want to commit your changes to a new branch?`),{modal:!0},b,_)!==b){this.telemetryService.sendEvent("commit.abort",{reason:"abandoned detached head prompt"}),o=": Aborted; Abandoned commit to new branch prompt (detached head)";return}if(s=await hu(this.providerService,n,a.HEAD.sha,we("create new branch prompt","Create a new branch to commit your changes to"),we("create new branch placeholder","New branch name"),we("create new branch title","Commit \u2022 Create Branch \u2022 {0}",l?l.name:a.name),l),!s){this.telemetryService.sendEvent("commit.abort",{reason:"abandoned detached head create branch prompt"}),o=": Aborted; Abandoned create branch prompt (detached head)";return}continue}else if(y instanceof ri){const b={title:we("push conflicts prompt pull","Pull")},_={title:we("push conflicts prompt sync","Sync (Pull & Push)")},C={title:we("cancel","Cancel"),isCloseAffordance:!0},k=await h.window.showErrorMessage(we("push conflicts prompt",`Changes have been committed since you started editing, so you must merge those changes before you can commit.

Do you want to pull or sync (pull and automatically push) your changes?`),{modal:!0},b,_,C);if(k!==b&&k!==_){this.telemetryService.sendEvent("commit.abort",{reason:"abandoned conflicts prompt"}),o=": Aborted; Abandoned merge changes prompt";return}if(await this.sync(n,{pull:k===b,conflictResolution:he.Merge}),k===b){o=': Aborted; Chose "pull" from merge changes prompt';return}continue}else throw V.error(y),o=`: Aborted; ${String(y)}`,y}break}if(e.inputBox.value="",l?await this.changeStore.discardAll(n,{staged:u}):await this.changeStore.acceptAll(n,{staged:u}),ap(Uo.HasCommitted,!0),!l&&!s)return;async function d(){if(l){const S={title:we("commit to fork confirm","Switch to Fork")},y={title:we("cancel","Cancel"),isCloseAffordance:!0},b=await h.window.showInformationMessage(we("commit to fork","Committed changes to your fork of {0}. Do you want to switch to your fork to continue making changes?",a.name),{modal:!0,useCustom:!0},S,y);if(this.telemetryService.sendEvent("commit.switchToFork",{confirm:String(b===S)}),b===S){let _;s!==void 0?_={type:G.Branch,id:s}:a.HEAD.branch!==void 0&&(_={type:G.Branch,id:a.HEAD.branch.name}),sn({name:l.name,uri:this.providerService.createVirtualUri(n,{repo:l.repo,ref:_}),location:W.CurrentWindow})}return}const f={title:we("commit to new branch confirm","Switch to Branch")},p={title:we("cancel","Cancel"),isCloseAffordance:!0},g=await h.window.showInformationMessage(we("commit to new branch","Committed changes to new branch '{0}'. Do you want to switch to the new branch to continue making changes?",s),{modal:!0,useCustom:!0},f,p);this.telemetryService.sendEvent("commit.switchToBranch",{confirm:String(g===f)}),g===f&&sn({name:a.name,uri:this.providerService.createVirtualUri(n,{repo:a.repo,ref:s?{type:G.Branch,id:s}:void 0}),location:W.CurrentWindow})}c(d,"showSwitchToPrompt"),d.call(this)}finally{i.stop(o?{message:o}:void 0)}}async createPullRequest(e,r){try{await h.window.withProgress({location:h.ProgressLocation.SourceControl},()=>this.createPullRequestCore(e,r))}catch(n){if(n instanceof ni){h.window.showInformationMessage(we("no changes to commit","There are no changes to commit."));return}if(n instanceof co){h.window.showErrorMessage(we("commit unable","Unable to commit."));return}V.error(n),h.window.showErrorMessage(we("unable to open pr","Unable to open a pull request.")),this.telemetryService.sendException(n)}}async createPullRequestCore(e,r){var n,i;const o=e.rootUri,a=(n=r==null?void 0:r.draft)!=null?n:!1;this.telemetryService.sendEvent("createPullRequest",{draft:String(a),staging:String(this.staging.enabled)});const s=new Z(`VirtualSourceControl.createPullRequest(${o.toString()})`);let l;try{let u=c(function(){this.telemetryService.sendEvent("createPullRequest.abort",{reason:"abandoned branch prompt"}),l=": Aborted; Abandoned commit to new branch prompt"},"handleBranchNotCreated"),d;const f=this.staging.enabled?this.staging.smart?"auto":!0:!1;if(!(r==null?void 0:r.sha)){if(await this.changeStore.hasMergeConflicts(o)){e.inputBox.showValidationMessage(we("commit resolve conflicts","You must resolve any pending conflicts before committing."),h.SourceControlInputBoxValidationType.Error),this.telemetryService.sendEvent("createPullRequest.abort",{reason:"aborted conflicts"}),l=": Aborted; Unresolved conflicts";return}if(d=await this.providerService.getCommitOperations(o,this.changeStore,{staged:this.staging.enabled?this.staging.smart?"auto":!0:!1}),d.length===0){e.inputBox.showValidationMessage(this.staging.enabled?we("commit no staged changes","There are no staged changes to commit."):we("commit no changes","There are no changes to commit."),h.SourceControlInputBoxValidationType.Information),this.telemetryService.sendEvent("createPullRequest.abort",{reason:this.staging.enabled?"aborted no staged changes":"aborted no changes"}),l=`: Aborted; No ${this.staging.enabled?"staged ":""}changes`;return}}const p=e.inputBox.value;if(!p){e.inputBox.showValidationMessage(we("specify commit message","You must specify a commit message before committing."),h.SourceControlInputBoxValidationType.Error),this.telemetryService.sendEvent("createPullRequest.abort",{reason:"aborted no message"}),l=": Aborted; No message";return}const g=await this.providerService.getMetadata(o);let S,y;g.HEAD.type===q.RemoteBranch?(y=g.HEAD.branch.remote.accessLevel<z.Write,S=y&&g.accessLevel<z.Write):(S=g.accessLevel<z.Write,y=S);let b=r==null?void 0:r.fork;if(b===void 0&&S&&(b=await this.providerService.getFork(o),b===void 0)){const ne={title:we("fork confirm","Fork Repository")},ie={title:we("cancel","Cancel"),isCloseAffordance:!0};if(await h.window.showInformationMessage(we("fork",`You\u2019re trying to make changes in a project you don\u2019t have write access to.

Do you want to create a fork of this project to commit your proposed changes to?`),{modal:!0,useCustom:!0},ne,ie)!==ne){this.telemetryService.sendEvent("createPullRequest.abort",{reason:"abandoned fork prompt"}),l=": Aborted; Abandoned fork prompt";return}if(b=await h.window.withProgress({location:h.ProgressLocation.Notification,title:we("fork progress","Forking {0}...",g.name)},()=>this.providerService.fork(o)),b===void 0){h.window.showErrorMessage(we("unable to fork","Unable to fork repository.")),this.telemetryService.sendEvent("createPullRequest.abort",{reason:"aborted fork failed"}),l=": Aborted; Fork failed";return}}const _=await h.window.showInputBox({ignoreFocusOut:!0,placeHolder:we("create pr placeholder","Pull request title"),prompt:we("create pr prompt","Enter a title for the new pull request"),title:we("create pr title","New Pull Request"),value:p});if(!_){this.telemetryService.sendEvent("createPullRequest.abort",{reason:"abandoned title prompt"}),l=": Aborted; Abandoned title prompt";return}async function C(ne){let ie=0;try{const Q=await this.providerService.getBranches(b?this.providerService.createVirtualUri(o,b):o,{query:"patch-"});for(const me of Q.branches){const se=/^patch-(?<num>\d+)$/.exec(me.name);if(se==null?void 0:se.groups){const fe=Number(se.groups.num);fe>ie&&(ie=fe)}}}catch{}return hu(this.providerService,o,ne,we("create pr branch prompt","Create a new branch for this pull request"),we("create pr branch placeholder","New branch name"),we("create pr branch title","New Pull Request \u2022 Create Branch \u2022 {0}",b?b.name:g.name),b,`patch-${ie+1}`)}c(C,"createBranch");let k;if(ke.getUseNewCommitApi()){if(k=await C.call(this,g.HEAD.sha),!k){u.call(this);return}(d==null?void 0:d.length)&&await this.providerService.createAndPushCommit(o,p,d,k,void 0,b)}else{let ne;if((d==null?void 0:d.length)?(ne=await this.providerService.createCommit(o,p,d,b),s.log({message:`: Created commit ${ne}`})):(ne=(i=r==null?void 0:r.sha)!=null?i:g.HEAD.sha,s.log({message:`: Using commit ${ne}`})),k=await C.call(this,ne),!k){u.call(this);return}}const F=await this.providerService.createPullRequest(o,k,_,{draft:a},b);e.inputBox.value="",(d==null?void 0:d.length)&&(b?await this.changeStore.discardAll(o,{staged:f}):await this.changeStore.acceptAll(o,{staged:f}));async function $(){const ne={title:we("created pr notification confirm","Switch to Pull Request")},ie={title:we("cancel","Cancel"),isCloseAffordance:!0},Q=await h.window.showInformationMessage(we("created pr notification",'Created [Pull Request #{0}]({1} "Open Pull Request #{0} on {2}") for {3}. Do you want to switch to the new pull request?',F.id,F.uri.toString(!0),g.provider.name,g.name),{modal:!0,useCustom:!0},ne,ie);this.telemetryService.sendEvent("createPullRequest.switchToPullRequest",{confirm:String(Q===ne)}),Q===ne&&sn({name:g.name,uri:this.providerService.createVirtualUri(o,{repo:g.repo,ref:{type:G.PullRequest,id:F.id}}),location:W.CurrentWindow})}c($,"showSwitchToPrompt"),$.call(this)}finally{s.stop(l?{message:l}:void 0)}}async update(e){const r=h.workspace.getWorkspaceFolder(e);if(r===void 0)return;const n=await this.createOrUpdateScmProvider(e,r.name),i=await this.changeStore.getGroupedChanges(e,{predicate:l=>l.fileType===h.FileType.File}),o=await Promise.all(i.conflicts.map(async l=>({type:l.type,resourceUri:l.uri,command:await this.changeStore.resolveDiffCommand(l.uri,l.conflicts.incomingUri,we("diff title with conflicts","{0} (Incoming Changes \u2194 Current Changes)",K(l.uri)))}))),a=await Promise.all(i.staged.map(async l=>({type:l.type,resourceUri:l.uri,command:await this.changeStore.resolveDiffCommand(l.uri,de.getProviderUri(l.uri),we("diff title index","{0} (Index)",K(l.uri)))}))),s=await Promise.all(i.working.map(async l=>({type:l.type,resourceUri:l.uri,decorations:{strikeThrough:l.type===I.Deleted},command:await this.changeStore.resolveDiffCommand(l.uri,de.getProviderUri(l.uri),we("diff title working","{0} (Working Tree)",K(l.uri)))})));return this.ensureMergeConflictsGroup(n).resourceStates=o,this.ensureStagedChangesGroup(n).resourceStates=this.staging.enabled?a:[],this.ensureWorkingChangesGroup(n).resourceStates=this.staging.enabled?s:[...a,...s],n}async createOrUpdateScmProvider(e,r){const n=await this.providerService.getMetadata(e),i=this.providerService.isReadonly(e);let o;const a=n.HEAD.branch?n.HEAD.name:void 0;let s=this.getScmProvider(e);if(s===void 0){r=n.name,o=h.scm.createSourceControl(`remoteHub:${n.provider.id}`,r,e),o.quickDiffProvider={provideOriginalResource:u=>de.getProviderUri(u)};const l=this.providerService.createIGitRepository(e,o,n,this.changeStore);s={id:n.provider.id,name:n.provider.name,sourceControl:o,groups:[],repository:l,isReadonly:i},this.ensureMergeConflictsGroup(s),this.ensureStagedChangesGroup(s),this.ensureWorkingChangesGroup(s),this._scmProviders.push(s)}else o=s.sourceControl;return n.accessLevel>=z.Write?(o.acceptInputCommand={command:"remoteHub.commit",title:we("scm input accept command title commit","Commit"),arguments:[o]},a?o.inputBox.placeholder=we("scm input placeholder commit","Message (Ctrl+Enter to commit directly to '{0}' on {1})",a,n.provider.name):o.inputBox.placeholder=we("scm input placeholder commit","Message (Ctrl+Enter to commit directly to {0})",n.provider.name),ke.get("commitDirectlyWarning")===rt.Off?o.inputBox.validateInput=void 0:o.inputBox.validateInput=l=>{if(ke.get("commitDirectlyWarning")===rt.Auto&&Dy(Uo.HasCommitted))return;const u=new h.MarkdownString(a?we("scm input validation commit branch directly","Your changes will be committed directly to the '{0}' branch on {1}.",a,n.provider.name):we("scm input validation commit directly","Your changes will be committed directly to {0}.",n.provider.name));return u.isTrusted=!0,u.appendMarkdown(`&nbsp; [${we("scm input validation action","Don't show again")}](command:remoteHub.disableCommitDirectlyWarning '${we("scm input validation action tip","Hide")}')`),{message:u,type:h.SourceControlInputBoxValidationType.Information}}):i?(o.acceptInputCommand=void 0,o.inputBox.placeholder=we("scm input readonly placeholder","Committing is not available for readonly repositories.")):(o.acceptInputCommand={command:"remoteHub.createPullRequest",title:we("scm input accept command title pr","Create a Pull Request"),arguments:[o]},o.inputBox.placeholder=we("scm input placeholder pr","Message (Ctrl+Enter to create a pull request for '{0}'",r)),await this.updateStatusBarCommands(s,{syncing:!1},n),s}async updateStatusBarCommands(e,r,n){var i,o,a;const s=e.sourceControl.rootUri;n=n!=null?n:await this.providerService.getMetadata(s);const{HEAD:l}=n,u=await this.providerService.getIndexMetadata(s),d=(u==null?void 0:u.type)===wt.Active,f=(u==null?void 0:u.type)===wt.Active,p=wt.hasIndex(u==null?void 0:u.type),g=await this.changeStore.hasChanges(s),S=Jf(l.type),y=[];if(y.push(En({command:"remoteHub.switchToBranch",title:`${S} ${l.name}${g?"*":""}`,tooltip:`${P(l.sha)}`,arguments:[{uri:s,commands:!0}]})),l.detached||((r==null?void 0:r.syncing)?y.push(En({command:"",title:"$(sync~spin)",tooltip:we("sync command syncing","Syncing Changes..."),arguments:[]})):y.push(En({command:"remoteHub.sync",title:`$(sync)${((o=(i=n.state)==null?void 0:i.behind)!=null?o:0)>0?` ${(a=n.state)==null?void 0:a.behind}\u2193`:""}`,tooltip:d||f?we("sync index","Sync to latest indexed commit"):we("sync command","Sync (Pull & Push)"),arguments:[{uri:s}]}))),n.pullRequest&&y.push(En({command:"remoteHub.openOnRemote",title:`$(git-pull-request) ${n.pullRequest.id}`,tooltip:we("scm statusbar command open pr",`Open Pull Request #{0} on {1}

{2}`,n.pullRequest.id,n.provider.name,n.pullRequest.title),arguments:[{provider:n.provider,repo:n.repo,pullRequest:{id:n.pullRequest.id}}]})),p){const b=this.providerService.getIndexProvider(s);b&&y.push(...await b.getStatusBarContributions(s))}e.sourceControl.statusBarCommands=y}ensureMergeConflictsGroup(e){const r="conflicts";let n=e.groups.find(i=>i.id===r);return n===void 0&&(n=e.sourceControl.createResourceGroup(r,we("scm group conflicts","Merge Conflicts")),n.hideWhenEmpty=!0,e.groups.push(n)),n}ensureStagedChangesGroup(e){const r="staged";let n=e.groups.find(i=>i.id===r);return n===void 0&&(n=e.sourceControl.createResourceGroup(r,we("scm group staged","Staged Changes")),n.hideWhenEmpty=!0,e.groups.push(n)),n}ensureWorkingChangesGroup(e){const r="changes";let n=e.groups.find(i=>i.id===r);return n===void 0&&(n=e.sourceControl.createResourceGroup(r,we("scm group changes","Changes")),e.groups.push(n)),n}getScmProvider(e){const r=E(e);return this._scmProviders.find(n=>E(n.sourceControl.rootUri)===r)}getSourceControlFrom(e){if(e===void 0){if(this._scmProviders.length!==1)return;e=this._scmProviders[0].sourceControl}let r;if(kE(e))r=e;else if(vy(e)){const n=e,i=this._scmProviders.find(o=>o.groups.includes(n));r=i==null?void 0:i.sourceControl}else if(ep(e)){const n=e,i=this._scmProviders.find(o=>o.groups.some(a=>a.resourceStates.includes(n)));r=i==null?void 0:i.sourceControl}else{if(this._scmProviders.length!==1)return;r=this._scmProviders[0].sourceControl}return r}}c(my,"VirtualSourceControl");function kE(t){return"rootUri"in t&&"inputBox"in t}c(kE,"isSourceControl");function vy(t){return t!==void 0&&"id"in t&&"label"in t&&"resourceStates"in t&&Array.isArray(t.resourceStates)}c(vy,"isSourceControlResourceGroup");function ep(t){return t!==void 0&&"resourceUri"in t&&t.resourceUri instanceof h.Uri}c(ep,"isSourceControlResourceState");function uc(t){return"type"in t}c(uc,"isTrackedChange");async function tp(t){var e,r,n;if(t.length===0)return!0;let i,o=we("discard","Discard Changes");if(t.length===1){const s=t[0];s.type===I.Created?(i=we("confirm delete",`Are you sure you want to DELETE {0}?
This is IRREVERSIBLE!
This file will be FOREVER LOST.`,K((e=s.resourceUri)!=null?e:s.uri)),o=we("delete file","Delete file")):s.type===I.Deleted?(o=we("restore file","Restore file"),i=we("confirm restore","Are you sure you want to restore {0}?",K((r=s.resourceUri)!=null?r:s.uri))):i=we("confirm discard","Are you sure you want to discard changes in {0}?",K((n=s.resourceUri)!=null?n:s.uri))}else t.every(s=>s.type===I.Created)?i=we("confirm delete multiple",`Are you sure you want to DELETE {0} files?
This is IRREVERSIBLE!
These files will be FOREVER LOST.`,t.length):t.every(s=>s.type===I.Deleted)?(o=we("restore files","Restore files"),i=we("confirm restore multiple","Are you sure you want to restore {0} files?",t.length)):i=we("confirm discard multiple","Are you sure you want to discard changes in {0} files?",t.length);return await h.window.showWarningMessage(i,{modal:!0,useCustom:!0},o)===o}c(tp,"confirmDiscard");async function dc(t,e,r){if(t.length===0)return;if(t.length===1)return t[0].sourceControl.rootUri;const n=await h.window.showQuickPick(t.map(({sourceControl:i})=>({label:i.label,uri:i.rootUri})),{placeHolder:e,title:r});if(!!n)return n.uri}c(dc,"getOrPickRootUri");async function hu(t,e,r,n,i,o,a,s){const l=new Set;let u;const d=h.window.createInputBox();d.ignoreFocusOut=!0;try{return await new Promise((f,p)=>{u=h.Disposable.from(d.onDidHide(()=>f(void 0)),d.onDidChangeValue(g=>{if(g=g.trim(),!g){d.validationMessage=we("scm create branch prompt validation missing name","Please enter a valid branch name");return}if(l.has(g)){d.validationMessage=we("scm create branch prompt validation already exists","Branch '{0}' already exists",g);return}if(!v(g)){d.validationMessage=we("scm create branch prompt validation invalid name","'{0}' isn't a valid branch name",g);return}d.validationMessage=void 0}),d.onDidAccept(async()=>{const g=d.value;try{d.enabled=!1,d.busy=!0;const S=await t.createBranch(e,g,r,a);f(S)}catch(S){if(S instanceof gt){d.enabled=!0,d.busy=!1,d.validationMessage=S.duplicate?we("scm create branch prompt validation already exists","Branch '{0}' already exists",g):we("scm create branch prompt validation invalid","Invalid branch name '{0}'",g),l.add(g);return}p(S)}})),d.prompt=n,d.placeholder=i,d.title=o,s&&(d.value=s),d.show()})}finally{d.dispose(),u==null||u.dispose()}}c(hu,"createBranchWithPrompt");class fu{constructor(e,r){this.memento=e,this.scope=r,this._onDidChange=new h.EventEmitter}get onDidChange(){return this._onDidChange.event}async get(e){const r=this.getScoped(e),n=new Z(`MementoStorage.get(${e}): scopedKey=${r}`,{logLevel:ze.Debug});try{return await Promise.resolve(this.memento.get(r))}finally{n.stop()}}async getKeys(e){const r=this.getScoped(e),n=new Z(`MementoStorage.getKeys(${e}): scopedPrefix=${r}`,{logLevel:ze.Debug});try{let i=this.getKeysCore(e);if(this.scope!==void 0){const o=this.scope.length+1;i=i.map(a=>a.substr(o))}return await Promise.resolve(i)}finally{n.stop()}}getKeysCore(e){let r=this.memento.keys();return e&&(r=r.filter(n=>n.startsWith(e))),r}async store(e,r){const n=this.getScoped(e),i=new Z(`MementoStorage.store(${e}): scopedKey=${n}`,{logLevel:ze.Debug});try{return await this.storeCore(e,n,r)}finally{i.stop()}}async storeCore(e,r,n){await this.memento.update(r,n),this._onDidChange.fire({key:e})}async delete(e){const r=this.getScoped(e),n=new Z(`MementoStorage.delete(${e}): scopedKey=${r}`,{logLevel:ze.Debug});try{return await this.storeCore(e,r,void 0)}finally{n.stop()}}async deleteKeys(e){const r=this.getScoped(e),n=new Z(`MementoStorage.deleteKeys(${e}): scopedPrefix=${r}`,{logLevel:ze.Debug});try{const i=[],o=this.scope!==void 0?this.scope.length+1:0,a=this.getKeysCore(r);for(const s of a){const l=o!==0?s.substr(o):s;V.debug(`MementoStorage.deleteKeys(${e}): Deleting key=${l}, scopedKey=${s}`);try{await this.storeCore(l,s,void 0)}catch(u){V.debug(`MementoStorage.deleteKeys(${e}): Failed to delete key=${l}, scopedKey=${s}`),i.push(l)}}if(i.length)throw new Error(`Failed to delete keys: ${i.join(", ")}`)}finally{n.stop()}}with(e){return new fu(this.memento,e)}getScoped(e){return`${this.scope!==void 0?`${this.scope}/`:""}${e!=null?e:""}`}}c(fu,"MementoStorageService");class pu{constructor(e,r){this.storageUri=e,this.scope=r,this._onDidChange=new h.EventEmitter}get onDidChange(){return this._onDidChange.event}async get(e){const r=this.getScoped(e),n=new Z(`ExtFileStorageService.get(${e}): scopedKey=${r}`,{logLevel:ze.Debug});try{return await h.workspace.fs.readFile(h.Uri.joinPath(this.storageUri,r))}catch(i){return}finally{n.stop()}}async store(e,r){const n=this.getScoped(e),i=new Z(`ExtFileStorageService.store(${e}): scopedKey=${n}`,{logLevel:ze.Debug});try{return await this.storeCore(e,n,r)}finally{i.stop()}}async storeCore(e,r,n){await h.workspace.fs.writeFile(h.Uri.joinPath(this.storageUri,r),n),this._onDidChange.fire({key:e})}async delete(e){const r=this.getScoped(e),n=new Z(`ExtFileStorageService.delete(${e}): scopedKey=${r}`,{logLevel:ze.Debug});try{return await h.workspace.fs.delete(h.Uri.joinPath(this.storageUri,r))}finally{n.stop()}}with(e){return new pu(this.storageUri,e)}getScoped(e){return`${this.scope!==void 0?`${this.scope}/`:""}${e}`}}c(pu,"ExtFileStorageService");const Qt=(0,Me.loadMessageBundle)();class ti extends h.TimelineItem{static is(e){return e instanceof ti}constructor(e,r,n,i,{dateType:o,showAuthor:a,dateFormatter:s}){var l;const u=n.message.indexOf(`
`),d=u!==-1?`${n.message.substring(0,u)} \u2026`:n.message,f=o==="authored"?n.authorDate:n.commitDate;super(d,(l=f==null?void 0:f.getTime())!=null?l:0);this.id=n.hash,this.contextValue=`vscode-vfs:${r}:file:commit`,this.command=i,a&&(this.description=n.authorName),this.detail=Qt("timeline item detail",`{0} ({1}) \u2014 {2}
{3}

{4}`,n.authorName,n.authorEmail,P(n.hash),s.format(f),n.message),this.iconPath=new h.ThemeIcon("git-commit"),this.rootUri=e,this.providerId=r,this.hash=n.hash,this.parents=n.parents,this.message=n.message}}c(ti,"CommitTimelineItem");class Bo extends h.TimelineItem{static is(e){return e instanceof Bo}constructor(e,r,n,i,o,{dateFormatter:a,staged:s}){const l=s?Qt("timeline staged changes","Staged Changes"):Qt("timeline uncommitted changes","Uncommitted Changes");super(l,n.timestamp);this.id=s?"index":"working",this.contextValue=`vscode-vfs:${r}:file:${this.id}`,this.command=o,this.iconPath=new h.ThemeIcon("git-commit"),s?this.detail=Qt("timeline index detail",`{0}  \u2014 {1}
{2}

{3}`,Qt("timeline you","You"),Qt("timeline index","Index"),a.format(new Date(n.timestamp)),Ip(n.type)):this.detail=Qt("timeline working detail",`{0}  \u2014 {1}
{2}

{3}`,Qt("timeline you","You"),Qt("timeline working","Working Tree"),a.format(new Date(n.timestamp)),Ip(n.type)),this.rootUri=e,this.providerId=r,this.hash=s?"~":"",this.parents=i,this.message=l}}c(Bo,"ChangeOperationTimelineItem");class wy{constructor(e,r){this.providerService=e,this.changeStore=r,this._onDidChange=new h.EventEmitter,this.id="github-file-history",this.label=Qt("timeline.source","GitHub File History"),this.debouncer=new Rl(500),this.disposable=h.Disposable.from(this.debouncer,e.onDidChangeProviders(this.onProvidersChanged,this),e.onDidChangeRepositories(this.onRepositoriesChanged,this),e.onDidChangeRepository(this.onRepositoryChanged,this),e.onDidRefresh(this.onRefresh,this),r.onDidChange(this.onUrisChanged,this),ke.onDidChangeAny(this.onConfigurationChanged,this),...this.registerCommands()),e.hasProviders&&this.ensureProviderRegistration()}get onDidChange(){return this._onDidChange.event}dispose(){var e;(e=this.providerDisposable)==null||e.dispose(),this.disposable.dispose()}onConfigurationChanged(e){(e.affectsConfiguration("git.timeline.date")||e.affectsConfiguration("git.timeline.showAuthor"))&&this.fireChanged()}onProvidersChanged(e){this.ensureProviderRegistration(),this.fireChanged()}onRefresh(e){if(this.rootUri===void 0)return;const r=E(this.rootUri);!e.some(n=>E(n)===r)||this.fireChanged()}onRepositoriesChanged(e){if(this.rootUri===void 0)return;const r=E(this.rootUri);(e.added.some(n=>E(n.uri)===r)||e.removed.some(n=>E(n.uri)===r))&&this.fireChanged()}onRepositoryChanged(e){this.rootUri===void 0||E(this.rootUri)!==E(e.repository.uri)||this.fireChanged()}onUrisChanged(e){if(this.rootUri===void 0)return;const r=E(this.rootUri);e.some(n=>E(n.rootUri)===r)&&this.fireChanged()}async provideTimeline(e,r,n){var i;try{this.rootUri=this.providerService.getVirtualRootUri(e);for(const S of this.providerService.repositories)if(S.uri.path===this.rootUri.path){this.rootUri=S.uri;break}const o=this.providerService.getRelativeFilePath(this.rootUri,e),a=await this.providerService.getMetadata(this.rootUri);if(!a||n.isCancellationRequested)return{items:[]};const s=await this.providerService.getCommits(this.rootUri,{ref:a.HEAD.sha,path:o||void 0,cursor:r.cursor,limit:typeof r.limit=="number"?r.limit:void 0});if(s===void 0||s.commits.length===0||n.isCancellationRequested)return{items:[]};const l=((i=s.paging)==null?void 0:i.more)?{cursor:s.paging.cursor}:void 0,u=new Intl.DateTimeFormat(h.env.language,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}),d=ke.getAny("git.timeline.date",void 0,"committed"),f=ke.getAny("git.timeline.showAuthor",void 0,!0),p=s.commits.map(S=>new ti(this.rootUri,a.provider.id,S,this.resolveDiffCommand(S,a,e,o),{dateType:d,showAuthor:f,dateFormatter:u})),g=r.cursor===void 0?await this.changeStore.getChange(e):void 0;if(g){const S=Boolean(g.staged&&ke.get("staging.enabled")),y=new Bo(this.rootUri,a.provider.id,g,[s.commits[0].hash],await this.changeStore.resolveDiffCommand(g.uri,de.getProviderUri(g.uri),S?Qt("diff title index","{0} (Index)",K(g.uri)):Qt("diff title working","{0} (Working Tree)",K(g.uri))),{dateFormatter:u,staged:S});p.splice(0,0,y)}return{items:p,paging:l}}catch(o){return V.error(o),{items:[]}}}ensureProviderRegistration(){this.providerDisposable===void 0&&(this.providerDisposable=h.workspace.registerTimelineProvider([Xt.scheme,...this.providerService.registeredProviders.map(e=>e.id)],this))}fireChanged(){this.debouncer.debounce(()=>this._onDidChange.fire(void 0))}registerCommands(){let e;return[h.commands.registerCommand("remoteHub.timeline.copyCommitId",(r,n,i)=>{!ti.is(r)||h.env.clipboard.writeText(r.hash)}),h.commands.registerCommand("remoteHub.timeline.copyCommitMessage",(r,n,i)=>{!ti.is(r)||h.env.clipboard.writeText(r.message)}),h.commands.registerCommand("remoteHub.timeline.openDiff",async(r,n,i)=>{var o;!ti.is(r)&&!Bo.is(r)||r.command!==void 0&&await h.commands.executeCommand(r.command.command,...(o=r.command.arguments)!=null?o:[])}),h.commands.registerCommand("remoteHub.timeline.openOnGitHub",async r=>{await this.openOnRemote(r)}),h.commands.registerCommand("remoteHub.timeline.openOnAzureRepos",async r=>{await this.openOnRemote(r)}),h.commands.registerCommand("remoteHub.timeline.selectForCompare",async(r,n,i)=>{!n||!ti.is(r)&&!Bo.is(r)||(e={uri:n,left:r},await h.commands.executeCommand("setContext","remoteHub.timeline.selectedForCompare",!0))}),h.commands.registerCommand("remoteHub.timeline.compareWithSelected",async(r,n,i)=>{if(!n||!e||!ti.is(r)&&!Bo.is(r)||E(n)!==E(e.uri))return;const{left:o}=e,a=this.providerService.getRelativeFilePath(r.rootUri,n),s=await this.providerService.getMetadata(r.rootUri),l=K(n),u=o.parents[0];let d;u===void 0?d=Qt("timeline diff title ref","{0} ({1})",l,P(r.hash)):o.hash===""?d=Qt("timeline diff title working","{0} (Working Tree)",l):o.hash==="~"?d=Qt("timeline diff title index","{0} (Index)",l):d=Qt("timeline diff title ref","{0} ({1})",l,P(o.hash));let f=o.hash===""||o.hash==="~"?n:this.providerService.createProviderUri(n,{repo:s.repo,ref:{type:G.Commit,id:u!=null?u:"0000000000000000000000000000000000000000"}},a);u===void 0&&(f=f.with({query:"~"}));const p=r.parents[0];let g;p===void 0?g=Qt("timeline diff title ref","{0} ({1})",l,P(r.hash)):p==="~"&&r.hash===""?g=Qt("timeline diff title working","{0} (Working Tree)",l):r.hash==="~"?g=Qt("timeline diff title index","{0} (Index)",l):g=Qt("timeline diff title ref","{0} ({1})",l,P(r.hash));const S=Qt("timeline diff title","{0} \u27F7 {1}",d,g),y=r.hash===""||r.hash==="~"?n:this.providerService.createProviderUri(n,{repo:s.repo,ref:{type:G.Commit,id:r.hash}},a);await h.commands.executeCommand("vscode.diff",f,y,S)})]}resolveDiffCommand(e,r,n,i,o){const a=K(n),s=e.parents[0];let l;s===void 0?l=Qt("timeline diff title ref","{0} ({1})",a,P(e.hash)):e.hash===""?l=Qt("timeline diff title working","{0} (Working Tree)",a):e.hash==="~"?l=Qt("timeline diff title index","{0} (Index)",a):l=Qt("timeline diff title refs","{0} ({1}) \u27F7  {0} ({2})",a,P(s),P(e.hash));let u=this.providerService.createProviderUri(n,{repo:r.repo,ref:{type:G.Commit,id:s!=null?s:"0000000000000000000000000000000000000000"}},i);s===void 0&&(u=u.with({query:"~"}));const d=e.hash===""||e.hash==="~"?n:this.providerService.createProviderUri(n,{repo:r.repo,ref:{type:G.Commit,id:e.hash}},i);return{command:"vscode.diff",title:"Open Comparison",arguments:[u,d,l,o]}}async openOnRemote(e){if(!ti.is(e))return;const r=await this.providerService.getMetadata(e.rootUri);await Bh("remoteHub.openOnRemote",{provider:r.provider,repo:r.repo,sha:e.hash})}}c(wy,"VirtualTimelineProvider");class yy{constructor(e,r){this.providerService=e,this.telemetryService=r,this.disposable=h.window.registerUriHandler(this)}dispose(){this.disposable.dispose()}async handleUri(e){var r;const n=new Z(`RemoteUriHandler.handleUri(${e.path}, ${e.toString()})`);try{switch(e.path){case"/open":{this.telemetryService.sendEvent("handleUri.open");let i,o;for(const s of e.query.split("&")){const[l,u]=s.split("=");switch(l){case"url":i=decodeURIComponent(u);break;case"location":o=u===W.CurrentWindow?W.CurrentWindow:W.NewWindow;break}}if(!i){n.log({message:": Unable to find url parameter"}),this.telemetryService.sendEvent("handleUri.open.abort",{reason:"aborted url not found"});return}i=i.trim(),o=o!=null?o:W.NewWindow;const a=await this.providerService.createWorkspaceForRemoteUrl(i,void 0,o);if(!a){n.log({message:`: Unable to open workspace for ${i}`}),this.telemetryService.sendEvent("handleUri.open.abort",{reason:"aborted invalid url"});return}n.log({message:`: Opening ${i} in ${o}`}),sn(a);break}case"/open-files":{let i;for(const a of e.query.split("&")){const[s,l]=a.split("=");if(s==="url"){i=decodeURIComponent(l);break}}if(!i){n.log({message:": Unable to find url parameter"});return}i=i.trim();const o=await this.providerService.createWorkspaceForRemoteUrl(i);if(!o){n.log({message:`: Unable to open files/folders for ${i}`});return}o.filesToOpen?(n.log({message:`: Opening files/folders for ${i}`}),await((r=vu())==null?void 0:r.openPendingFiles(o.uri,o.filesToOpen))):n.log({message:`: No files/folders found to open for ${i}`});break}default:{n.log({message:`: Unknown Uri ${e.toString()}`});break}}}finally{n.stop()}}}c(yy,"RemoteUriHandler");const Qr=(0,Me.loadMessageBundle)(),hc=c(class{constructor(t,e,r,n){this.providerService=t,this.storageService=e,this.changeStore=r,this.workspaceId=n,this._onDidChange=new h.EventEmitter,this.cache=new Map,this.lock=new Ja("WorkspaceRepositories"),this.disposable=h.Disposable.from(this.providerService.onDidChangeRepositories(this.onRepositoriesChanged,this),this.providerService.onDidChangeRepository(this.onRepositoryChanged,this),this.changeStore.onDidChange(this.onChangeStoreChanged,this))}get onDidChange(){return this._onDidChange.event}dispose(){this.disposable.dispose()}async exportDebugInfo(){const t=await h.workspace.openTextDocument({language:"json",content:`Remote Repositories

${this.toStorage(await this.getCore())}`});return void h.window.showTextDocument(t)}onChangeStoreChanged(t){const e=zf(t.map(r=>r.rootUri),r=>E(r)).map(r=>this.providerService.getRepository(r)).filter(r=>Boolean(r));this.addOrUpdate(e)}onRepositoriesChanged(t){this.addOrUpdate(t.added)}onRepositoryChanged(t){this.addOrUpdate([t.repository])}async get(t){let e=await this.lock.synchronizeRead(async()=>{let r=this.cache.get("workspaceRepositories");return r===void 0&&(r=[...(await this.getCore()).values()].sort((n,i)=>i.timestamp-n.timestamp),this.cache.set("workspaceRepositories",r)),r},"WorkspaceRepositories.get");if(t){const r=E(t);e=e.filter(n=>E(n.canonicalUri)===r)}return e}async getCore(){return this.fromStorage(await this.storageService.get(hc.storageKey))}async getByCanonicalUri(){let t=this.cache.get("groupedWorkspaceRepositories");return t===void 0&&(t=hE(await this.get(),e=>E(e.canonicalUri)),this.cache.set("groupedWorkspaceRepositories",t)),t}async getRecents(t=10){return(await this.get()).slice(0,t)}async getRemoteWorkspaceSourceProvider(){const t=await this.getRecents();if(t.length!==0)return{name:"Recents",label:"Open Recent Repository",icon:"$(history)",placeholder:Qr("pick","Choose a recent repository"),provideSources:function(e,r,n,i){return t.map(o=>({providerId:o.provider.id,name:o.name,icon:"$(repo)",description:Fs(o.timestamp,{ago:!0}),detail:`${o.provider.name}${o.pullRequest?`\xA0\xA0\u2022\xA0\xA0$(git-pull-request) Pull Request #${o.pullRequest.id}`:""}${Xt.isCanonicalUri(o.uri)?"":`\xA0\xA0\u2022\xA0\xA0${Jf(o.ref.type)} ${o.ref.name}`}\xA0\xA0\u2022\xA0\xA0${_y(o.changes)}${o.idx?`\xA0\xA0\u2022\xA0\xA0${AE(o.idx.type)}`:""}`,workspace:{uri:o.uri,name:o.name,location:W.CurrentWindow}}))}}}refresh(){this.cache.clear()}async remove(t){await this.lock.synchronizeWrite(async()=>{const e=await this.getCore(),r=`${t.workspaceId}/${E(t.uri)}`,n=e.get(r);if(n===void 0)return;const i=this.changeStore.getScopedChangeStore(n),o=await i.getChanges(n.uri);if(o.length!==0){const a={title:Qr("remove remote repo prompt confirm","Yes")},s={title:Qr("remove remote repo prompt cancel","No"),isCloseAffordance:!0};if(await h.window.showWarningMessage(o.length===1?Qr("remove remote repo prompt file changed",`This repository contains 1 file with uncommitted changes.

Removing it will cause those changes to be FOREVER LOST.
This is IRREVERSIBLE!

Are you sure you still want to remove it?`):Qr("remove remote repo prompt files changes",`This repository contains {0} files with uncommitted changes.

Removing it will cause those changes to be FOREVER LOST.
This is IRREVERSIBLE!

Are you sure you still want to remove it?`,o.length),{modal:!0,useCustom:!0},a,s)!==a)return;await i.discardAll(n.uri)}this.cache.clear(),e.delete(r);try{await this.storageService.store(hc.storageKey,this.toStorage(e))}catch(a){throw V.error(a,"Failed to save workspace repositories"),a}},"WorkspaceRepositories.remove"),this._onDidChange.fire()}async addOrUpdate(t){await this.lock.synchronizeWrite(async()=>{this.cache.clear();const e=await this.getCore();for(const r of t){const[{HEAD:n,pullRequest:i},o]=await Promise.all([r.getMetadata(),r.getIndexMetadata()]),a=await this.changeStore.getChanges(r.uri);e.set(`${this.workspaceId}/${E(r.uri)}`,{workspaceId:this.workspaceId,uri:r.uri,canonicalUri:r.canonicalUri,name:r.name,provider:r.provider,ref:{type:n.type,name:n.name},idx:(o==null?void 0:o.type)&&wt.hasIndex(o.type)?{type:o.type}:void 0,pullRequest:i?{id:i.id}:void 0,changes:FE(a),timestamp:Date.now()})}try{await this.storageService.store(hc.storageKey,this.toStorage(e)),xi(Hn.HasRecentRepositories,e.size>0)}catch(r){throw V.error(r,"Failed to save workspace repositories"),r}},"WorkspaceRepositories.addOrUpdate"),this._onDidChange.fire()}fromStorage(t){if(!t)return new Map;try{const e=JSON.parse(t,(r,n)=>(r==="uri"||r.endsWith("Uri"))&&x(n)?h.Uri.from(n):n);return new Map(e.workspaceRepositories)}catch(e){return V.error(e,"Failed to deserialize workspace repositories"),new Map}}toStorage(t){const e={schemaVersion:hc.storageSchemaVersion,workspaceRepositories:[...t]};return JSON.stringify(e)}},"_WorkspaceRepositories");let rp=hc;rp.storageKey="workspaceRepositories",rp.storageSchemaVersion=1;function by(t){return t!==void 0&&(t.added!==0||t.changed!==0||t.deleted!==0)}c(by,"hasChanges");function DE(t){return by(t.changes)}c(DE,"hasUncommittedChanges");function FE(t){let e=0,r=0,n=0;for(const i of t)switch(i.type){case I.Created:e++;break;case I.Changed:r++;break;case I.Deleted:n++;break}return e||r||n?{added:e,changed:r,deleted:n,timestamp:Date.now()}:void 0}c(FE,"toChangesSummary");function _y(t,{compact:e=!0,preamble:r,separator:n=", ",short:i=!1,single:o=!1}={}){if(!by(t))return Qr("no changes","Everything up to date");const{added:a,changed:s,deleted:l}=t;if(o){const d=a+s+l;return d===1?Qr("summary change","{0} change",d):Qr("changes changes","{0} changes",d)}let u=`${r!=null?r:""}`;return(a||!e)&&(u+=i?`+${a}`:a===1?Qr("file added","{0} file added",a):Qr("files added","{0} files added",a),(s||l||!e)&&(u+=n)),(s||!e)&&(u+=i?`~${s}`:s===1?Qr("file changed","{0} file changed",s):Qr("files changed","{0} files changed",s),(l||!e)&&(u+=n)),(l||!e)&&(u+=i?`-${l}`:l===1?Qr("file deleted","{0} file deleted",l):Qr("files deleted","{0} files deleted",l)),u}c(_y,"formatChangesSummary");var PE=Object.defineProperty,NE=Object.getOwnPropertyDescriptor,ME=c((t,e,r,n)=>{for(var i=n>1?void 0:n?NE(e,r):e,o=t.length-1,a;o>=0;o--)(a=t[o])&&(i=(n?a(e,r,i):a(i))||i);return n&&i&&PE(e,r,i),i},"view_decorateClass"),qa;(function(t){t.Change="remoteHub:viewItem:change",t.WorkspaceRepository="remoteHub:viewItem:workspaceRepository",t.WorkspaceRepositories="remoteHub:viewItem:workspaceRepositories",t.Message="remoteHub:viewItem:message"})(qa||(qa={}));const xy=c(class{constructor(t,e){this.view=t,this.parent=e,this.splatted=!1}static is(t){return t instanceof xy}get id(){}toString(){return`${V.toLoggableName(this)}${this.id!==void 0?`(${this.id})`:""}`}getParent(){var t,e;return((t=this.parent)==null?void 0:t.splatted)?(e=this.parent)==null?void 0:e.getParent():this.parent}triggerChange(t=!1,e=!1,r){return this.splatted&&this.parent!==void 0&&this.parent!==r?this.parent.triggerChange(t,e):this.view.refreshNode(this,t,e)}},"_ViewNode");let za=xy;ME([ft((t=!1,e=!1,r)=>JSON.stringify([t,e,r==null?void 0:r.toString()]))],za.prototype,"triggerChange",1);class Sy{constructor(e,r,n,i){this.id=e,this.name=r,this.providerService=n,this.telemetryService=i,this._onDidChangeTreeData=new h.EventEmitter,this.disposables=[];const o=!1;if(V.isDebugging&&o){const a=this.getTreeItem;this.getTreeItem=async function(s){var l;const u=await a.apply(this,[s]),d=s.getParent();return u.tooltip===void 0&&(u.tooltip=new h.MarkdownString(u.label!==void 0&&typeof u.label!="string"?u.label.label:(l=u.label)!=null?l:"")),typeof u.tooltip=="string"?u.tooltip=`${u.tooltip}

---
context: ${u.contextValue}
node: ${s.toString()}${d!==void 0?`
parent: ${d.toString()}`:""}`:u.tooltip.appendMarkdown(`

---

context: \`${u.contextValue}\`\\
node: \`${s.toString()}\`${d!==void 0?`\\
parent: \`${d.toString()}\``:""}`),u}}this.disposables.push(...this.registerCommands()),this.initialize({showCollapseAll:this.showCollapseAll}),setTimeout(()=>this.onConfigurationChanged(),0)}get onDidChangeTreeData(){return this._onDidChangeTreeData.event}get showCollapseAll(){return!0}filterConfigurationChanged(e){return!!ke.changed(e,`views.${this.configKey}`)}dispose(){h.Disposable.from(...this.disposables).dispose()}get title(){return this._title}set title(e){this._title=e,this.tree!==void 0&&(this.tree.title=e)}get description(){return this._description}set description(e){this._description=e,this.tree!==void 0&&(this.tree.description=e)}get message(){return this._message}set message(e){this._message=e,this.tree!==void 0&&(this.tree.message=e)}getQualifiedCommand(e){return`${this.id}.${e}`}onConfigurationChanged(e){e!==void 0&&this.root!==void 0&&this.refresh(!0)}initialize(e={}){this.tree=h.window.createTreeView(this.id,{...e,treeDataProvider:this}),this.disposables.push(ke.onDidChange(r=>{!this.filterConfigurationChanged(r)||(this._config=void 0,this.onConfigurationChanged(r))},this),this.tree),this._title=this.tree.title}ensureRoot(e=!1){return(this.root===void 0||e)&&(this.telemetryService.sendEvent("view.open",{view:this.id}),this.root=this.getRoot()),this.root}getChildren(e){return e!==void 0?e.getChildren():this.ensureRoot().getChildren()}getParent(e){return e.getParent()}getTreeItem(e){return e.getTreeItem()}get selection(){return this.tree===void 0||this.root===void 0?[]:[...this.tree.selection]}get visible(){return this.tree!==void 0?this.tree.visible:!1}async refresh(e=!1){var r,n;await((n=(r=this.root)==null?void 0:r.refresh)==null?void 0:n.call(r,e)),this.triggerNodeChange()}async refreshNode(e,r=!1,n=!1){var i;const o=await((i=e.refresh)==null?void 0:i.call(e,r));!n&&o===!0||this.triggerNodeChange(e)}async reveal(e,r){if(this.tree!==void 0)try{await this.tree.reveal(e,r)}catch(n){V.error(n)}}async show(){try{await h.commands.executeCommand(`${this.id}.focus`)}catch(e){V.error(e)}}triggerNodeChange(e){this._onDidChangeTreeData.fire(e!==void 0&&e!==this.root?e:void 0)}get config(){return this._config===void 0&&(this._config=ke.get("views")[this.configKey]),this._config}}c(Sy,"View");class Cy extends za{constructor(e,r,n,i,o,a,s){super(e,r);this._message=n,this._description=i,this._tooltip=o,this._iconPath=a,this._contextValue=s}getChildren(){return[]}getTreeItem(){var e;const r=new h.TreeItem(this._message,h.TreeItemCollapsibleState.None);return r.contextValue=(e=this._contextValue)!=null?e:qa.Message,r.description=this._description,r.tooltip=this._tooltip,r.iconPath=this._iconPath,r}}c(Cy,"MessageNode");var $E=Object.defineProperty,LE=Object.getOwnPropertyDescriptor,np=c((t,e,r,n)=>{for(var i=n>1?void 0:n?LE(e,r):e,o=t.length-1,a;o>=0;o--)(a=t[o])&&(i=(n?a(e,r,i):a(i))||i);return n&&i&&$E(e,r,i),i},"workspaceRepositoriesView_decorateClass");const mr=(0,Me.loadMessageBundle)(),Ey=c(class extends za{constructor(t,e,r,n,i,o,a){super(t,e);this.changeStore=r,this.canonical=n,this.workspaceRepository=i,this.operation=o,this.canApplyChanges=a}static getId(t,e,r){return`${fc.getId(t,e)}:${this.key}(${r.uri.toString()})`}get id(){return Ey.getId(this.canonical.uri,this.workspaceRepository,this.operation)}getChildren(){return[]}async getTreeItem(){const t=this.view.providerService.getRelativeFilePath(this.workspaceRepository.uri,this.operation.uri),e=new h.TreeItem(t,h.TreeItemCollapsibleState.None);return e.id=this.id,e.contextValue=`${qa.Change}${this.canApplyChanges?"+apply":""}`,e.resourceUri=this.view.changeStore.getScopedUri(this.operation.uri,this.workspaceRepository),e.command=await this.getDiffCommand(t,!0),e}async getDiffCommand(t,e=!1){if(e||this._command===void 0){const r=Boolean(this.operation.staged&&ke.get("staging.enabled"));if(this.workspaceRepository.workspaceId===this.view.workspaceId){const n=de.getProviderUri(this.operation.uri);this._command=await this.changeStore.resolveDiffCommand(this.operation.uri,n,r?mr("diff title index","{0} (Index)",K(this.operation.uri),this.workspaceRepository.ref.name):mr("diff title working","{0} (Working Tree)",K(this.operation.uri),this.workspaceRepository.ref.name))}else{const{repo:n}=this.view.providerService.getVirtualUriMetadata(this.workspaceRepository.uri),i=this.view.providerService.createProviderUri(this.operation.uri,{repo:n,ref:{type:G.Commit,id:this.operation.revision}},t);this._command=await this.changeStore.resolveDiffCommand(this.operation.uri,i,r?mr("diff title changeset index","{0} (Index of {1})",K(this.operation.uri),this.workspaceRepository.ref.name):mr("diff title changeset working","{0} (Working Tree of {1})",K(this.operation.uri),this.workspaceRepository.ref.name))}}return this._command}async openChanges(){var t;const e=await this.getDiffCommand(this.view.providerService.getRelativeFilePath(this.workspaceRepository.uri,this.operation.uri));await h.commands.executeCommand(e.command,...(t=e.arguments)!=null?t:[])}async openFile(){const t=this.view.changeStore.getScopedUri(this.operation.uri,this.workspaceRepository.workspaceId);await h.window.showTextDocument(t)}async applyChanges(){const t=await this.view.getRepositoryToApplyChangesetTo(this.workspaceRepository);if(t!==void 0)try{await this.view.changeStore.applyChangeset(t.uri,this.workspaceRepository,this.operation)}catch(e){h.window.showErrorMessage(String(e))}}},"_FileChangeNode");let Ry=Ey;Ry.key=":changes";const Ay=c(class extends za{constructor(t,e,r,n,i){super(t,e);this.canonical=r,this.workspaceRepository=n,this.root=i}static getId(t,e){return`${gu.getId(t)}:${this.key}(${e.workspaceId}/${e.uri.toString()})`}get id(){return Ay.getId(this.canonical.uri,this.workspaceRepository)}get name(){return this.workspaceRepository.name}get uri(){return this.workspaceRepository.uri}canApplyChanges(){if(!this.canonical.hasActive||h.workspace.getWorkspaceFolder(this.workspaceRepository.uri)!==void 0)return!1;const{changes:e}=this.workspaceRepository;return e!==void 0&&(e.added!==0||e.changed!==0||e.deleted!==0)}async getChildren(){if(this._children===void 0){const t=this.view.changeStore.getScopedChangeStore(this.workspaceRepository),e=await t.getChanges(this.workspaceRepository.uri);this._children=e.map(r=>new Ry(this.view,this,t,this.canonical,this.workspaceRepository,r,this.canApplyChanges()))}return this._children}getTreeItem(){const t=this.workspaceRepository.workspaceId===this.view.workspaceId,e=DE(this.workspaceRepository),r=Xt.isCanonicalUri(this.workspaceRepository.uri)?mr("repositories view repository default ref","{0} (default)",this.workspaceRepository.ref.name):this.workspaceRepository.ref.name,n=new h.TreeItem(this.root?this.canonical.name:r,e?h.TreeItemCollapsibleState.Collapsed:h.TreeItemCollapsibleState.None);return n.id=this.id,n.contextValue=`${qa.WorkspaceRepository}${t?"+active":""}${this.canApplyChanges()?"+apply":""}`,n.description=`${this.root?`${this.workspaceRepository.ref.name}\xA0\xA0\u2022\xA0\xA0`:""}${Fs(this.workspaceRepository.timestamp,{ago:!0})}`,n.iconPath=t?new h.ThemeIcon("check"):this.root?ky(this.canonical.provider.id):IE(this.workspaceRepository.ref.type,this.workspaceRepository.pullRequest),n.tooltip=new h.MarkdownString(void 0,!0).appendMarkdown(mr("repositories view repository tooltip",`{0}{1}\\
{2} {3} {4}{5}\\
Last accessed {6}

{7}
`,this.canonical.name,this.workspaceRepository.pullRequest?mr("pull request",`\\
Pull request {0} #{1}`,"$(git-pull-request)",this.workspaceRepository.pullRequest.id):"",BE(this.workspaceRepository.ref.type),Jf(this.workspaceRepository.ref.type),r,t?` \u2014 _${mr("repositories view repository tooltip active","Active")}_ `:"",Fs(this.workspaceRepository.timestamp,{ago:!0}),_y(this.workspaceRepository.changes,{preamble:`${mr("repositories view has changes","Has Uncommitted Changes")}\\
`}))),e&&(n.resourceUri=h.Uri.parse("remotehub-view://wsrepo/changes")),n}refresh(t=!1){t&&(this._children=void 0)}async applyAllChanges(){const t=await this.view.getRepositoryToApplyChangesetTo(this.workspaceRepository);if(t!==void 0)try{await this.view.changeStore.applyChangeset(t.uri,this.workspaceRepository)}catch(e){h.window.showErrorMessage(String(e))}}remove(){return this.view.workspaceRepositories.remove(this.workspaceRepository)}},"_WorkspaceRepositoryNode");let fc=Ay;fc.key=":wsrepo",np([ft()],fc.prototype,"refresh",1);const Iy=c(class extends za{constructor(t,e,r,n){super(t,e);this.canonical=r,this.workspaceRepositories=n}static getId(t){return`remoteHub${this.key}(${t.toString()})`}get id(){return Iy.getId(this.canonical.uri)}get name(){return this.canonical.name}get uri(){return this.canonical.uri}getChildren(){if(this.children===void 0){const t=this.workspaceRepositories;if(t.length===0)return this.view.message=void 0,[new Cy(this.view,this,mr("repositories view message empty","No GitHub repositories could be found."))];this.view.message=void 0,this.children=t.map(e=>new fc(this.view,this,this.canonical,e,!1))}return this.children}getTreeItem(){const t=this.workspaceRepositories.some(r=>r.workspaceId===this.view.workspaceId),e=new h.TreeItem(this.canonical.name,t?h.TreeItemCollapsibleState.Expanded:h.TreeItemCollapsibleState.Collapsed);return e.contextValue=qa.WorkspaceRepositories,e.iconPath=ky(this.canonical.provider.id),e}refresh(t=!1){t&&(this.children=void 0)}},"_CanonicalWorkspaceRepositoryNode");let gu=Iy;gu.key=":wsrepos",np([ft()],gu.prototype,"refresh",1);class ip extends za{constructor(e){super(e);this.splatted=!0}async getChildren(){if(this.children===void 0){const e=await this.view.workspaceRepositories.getByCanonicalUri();if(e.size===0)return[];this.view.message=void 0;const r=[];for(const[n,i]of e){const o=h.Uri.parse(n);try{const{name:a,provider:s}=this.view.providerService.getVirtualUriMetadata(o),l={uri:o,name:a,provider:s,hasActive:i.some(u=>u.workspaceId===this.view.workspaceId)};i.length===1?r.push(new fc(this.view,this,l,i[0],!0)):r.push(new gu(this.view,this,l,i))}catch(a){if(a instanceof Br)continue;V.error(a)}}this.children=r}return this.children}getTreeItem(){return new h.TreeItem("Repositories",h.TreeItemCollapsibleState.Expanded)}refresh(e=!1){e&&(this.children=void 0)}}c(ip,"WorkspaceRepositoriesViewNode"),np([ft()],ip.prototype,"refresh",1);class Ty extends Sy{constructor(e,r,n,i,o){super("remoteHub.views.workspaceRepositories",mr("remote view title","GitHub Repositories"),e,o);this.workspaceRepositories=r,this.changeStore=n,this.workspaceId=i,this.configKey="workspaceRepositories",this.disposables.push(this.workspaceRepositories.onDidChange(this.onRepositoriesChanged,this),h.window.registerFileDecorationProvider({provideFileDecoration:(a,s)=>{if(!(a.scheme!=="remotehub-view"||a.authority!=="wsrepo"||!a.path.includes("/changes")))return{badge:"\u25CF",color:new h.ThemeColor("remoteHub.decorations.workspaceRepositoriesView.hasUncommittedChangesForegroundColor"),tooltip:mr("repositories view decoration has changes","Has Uncommitted Changes")}}}))}getRoot(){return new ip(this)}onRepositoriesChanged(){this.refresh(!0)}registerCommands(){return[h.commands.registerCommand(this.getQualifiedCommand("refresh"),()=>(this.telemetryService.sendEvent("command.views.workspaceRepositories.refresh"),this.workspaceRepositories.refresh(),void this.refresh(!0)),this),h.commands.registerCommand(this.getQualifiedCommand("open"),e=>(this.telemetryService.sendEvent("command.views.workspaceRepositories.open"),sn({name:e.name,uri:e.uri,location:W.CurrentWindow})),this),h.commands.registerCommand(this.getQualifiedCommand("openInNewWindow"),e=>(this.telemetryService.sendEvent("command.views.workspaceRepositories.openInNewWindow"),sn({name:e.name,uri:e.uri,location:W.NewWindow})),this),h.commands.registerCommand(this.getQualifiedCommand("applyAllChanges"),e=>(this.telemetryService.sendEvent("command.views.workspaceRepositories.applyAllChanges"),e.applyAllChanges()),this),h.commands.registerCommand(this.getQualifiedCommand("remove"),e=>(this.telemetryService.sendEvent("command.views.workspaceRepositories.remove"),e.remove()),this),h.commands.registerCommand(this.getQualifiedCommand("openChanges"),e=>(this.telemetryService.sendEvent("command.views.workspaceRepositories.openChanges"),e.openChanges()),this),h.commands.registerCommand(this.getQualifiedCommand("openFile"),e=>(this.telemetryService.sendEvent("command.views.workspaceRepositories.openFile"),e.openFile()),this),h.commands.registerCommand(this.getQualifiedCommand("applyChanges"),e=>(this.telemetryService.sendEvent("command.views.workspaceRepositories.applyChanges"),e.applyChanges()),this)]}async getRepositoryToApplyChangesetTo(e){const r=E(this.providerService.getVirtualCanonicalRootUri(e.uri)),n=this.providerService.repositories.filter(o=>E(o.canonicalUri)===r);return await UE(n,mr("apply changeset pick repository placeholder","Choose a repository to apply the changeset to"))}}c(Ty,"WorkspaceRepositoriesView");function BE(t,e){switch(t){case q.Branch:return e?mr("type pr branch","Pull Request #{0}",e.id):mr("type branch","Branch");case q.RemoteBranch:return e?mr("type pr remote branch","Pull Request #{0}",e.id):mr("type remote branch","Remote Branch");case q.Tag:return mr("type tag","Tag");case q.Commit:return mr("type commit","Commit")}}c(BE,"headTypeToString");function ky(t){switch(t){case"github":return new h.ThemeIcon("github");case"azurerepos":return new h.ThemeIcon("azure-devops");default:return new h.ThemeIcon("vm")}}c(ky,"providerToIconPath");async function UE(t,e){if(t.length!==0){if(t.length>1){const r=await h.window.showQuickPick(t.map(n=>({label:n.name,description:n.provider.name,repository:n})),{placeHolder:e});return r?r.repository:void 0}return t[0]}}c(UE,"getRepository");let mu;function vu(){return mu}c(vu,"getOpenActionsService");var Uo;(function(t){t.HasCommitted="has:committed",t.Version="version"})(Uo||(Uo={}));let op;function Dy(t){return op.globalState.get(t)}c(Dy,"getState");async function ap(t,e){return op.globalState.update(t,e)}c(ap,"updateState");async function OE(t){op=t,Be.configure(t),V.configure(t,ke.get("logLevel")),Z.start("Time to root directory",{log:!1});const e=Ph.configure(t),r=new Ts(t),n=t.extension.packageJSON.version;await ap(Uo.Version,n),await t.workspaceState.update(Uo.Version,n);try{const i=new fu(t.globalState),o=i.with(e),a=new pu(t.globalStorageUri,e),s=new su(o),l=new Xt(s,r),u=new rs(l,o,a,r,e);u.getWorkspacesWithChanges(),mu=new py(l,i,u);const d=new my(l,u,mu,r),f=new zw(t.globalStorageUri,l),p=new mv(l,f),g=new rp(l,i,u,e);return t.subscriptions.push(ke.onDidChange(S=>{!ke.changed(S,"logLevel")||(V.logLevel=ke.get("logLevel"))}),l.onDidChangeRepositories(async S=>{for(const y of S.added)try{const b=await y.getMetadata(),{HEAD:_,defaultBranch:C,name:k,provider:F,pullRequest:$}=b,ne=_.name.replace(/\//g,"\u2009\u2215\u2009");let ie=" ";if($!==void 0)ie=` (PR ${$.id}) `;else if(_.type===q.Tag)ie=` (${ne}) `;else if(_.type===q.Commit)ie=` (${ne}) `;else if(_.type===q.Branch||_.type===q.RemoteBranch){const me=_.branch.name.replace(/\//g,"\u2009\u2215\u2009");_.branch.name!==C.name&&(ie=` (${me})`)}const Q={uri:y.uri,type:"folder",label:`${k}${ie}[${F.name}]`};h.commands.executeCommand("_workbench.addToRecentlyOpened",Q)}catch(b){V.error(b,"Failed to add repository to recently opened")}}),new gy(l,u),new w0,new Os(l,u),new yy(l,r),...lx(l,u,g,t.extension.id,r),...zE(l,u,r),...await HE(l,u,d,f,t,r),new wy(l,u),new Ty(l,g,u,e,r),f,g,d,mu,u,l,r),r.sendEvent("activate"),Promise.resolve(p)}catch(i){throw V.error(i),i}}c(OE,"activate");async function HE(t,e,r,n,i,o){const a=[];if(Fy()){const s=new hv(t,o);t.registerVirtualIndexProvider("github",s),t.registerVirtualIndexProvider("azurerepos",s),a.push(s)}return a.push(WE(t,e,r,n)),await qE(t),a}c(HE,"registerProviders");function WE(t,e,r,n){const i=new uu(t,n),o=new oc(t,i,e,n);async function a(){var l;try{let u=(l=h.extensions.getExtension("GitHub.vscode-pull-request-github"))!=null?l:h.extensions.getExtension("GitHub.vscode-pull-request-github-insiders");u||(V.log("[ GHPR] Not currently installed or enabled; waiting..."),await new Promise(y=>{const b=h.extensions.onDidChange(()=>{var _;u=(_=h.extensions.getExtension("GitHub.vscode-pull-request-github"))!=null?_:h.extensions.getExtension("GitHub.vscode-pull-request-github-insiders"),u&&(b.dispose(),y())})})),V.log("[ GHPR] Registering..."),xi(Hn.HasPullRequestExtension,!0);const d=await u.activate();if(!d)throw new Error("Unable to get registration api");const f=d.registerGitProvider(r),p=t.onDidChangeRepositories(y=>g(y));async function g(y){const b=y.added.filter(_=>_.provider.id==="github");if(b.length!==0){V.log("[ GHPR] Checking for opened PRs...");for(const _ of b){const C=await t.getBestRemoteUri(_.uri,xr.PullRequest);if(!!C){p.dispose(),V.log("[ GHPR] Opened PR found; preloading"),h.commands.executeCommand("github.api.preloadPullRequest",C.toString());return}}V.log("[ GHPR] No opened PRs found")}}c(g,"onRepositoriesChanged"),V.log("[ GHPR] Registration complete");const S=t.repositories;return S.length&&g({added:S,removed:[]}),h.Disposable.from(f,p)}catch(u){return V.error(u,"[ GHPR] Registration failed;"),{dispose:()=>{}}}}c(a,"registerWithGHPR");const s=a();return h.Disposable.from(t.register("github","GitHub",i,o),i,o,{dispose:async()=>{var l;return void((l=await s)==null?void 0:l.dispose())}})}c(WE,"registerGitHub");async function qE(t){async function e(i){V.log("[ AzureRepos] Registering...");const o=await i.activate();if(!o)throw new Error("Unable to get registration api");return o.registerVirtualProviderService(t)}c(e,"activate2");async function r(){try{let i=h.extensions.getExtension("ms-vscode.azure-repos");if(!i){V.log("[ AzureRepos] Not currently installed or enabled.");const o=h.extensions.onDidChange(async()=>{if(i=h.extensions.getExtension("ms-vscode.azure-repos"),i)return o.dispose(),e(i)});return}return e(i)}catch(i){return V.error(i,"[ AzureRepos] Registration failed;"),{dispose:()=>{}}}}c(r,"registerWithAzureRepos");const n=await r();return{dispose:async()=>void(n==null?void 0:n.dispose())}}c(qE,"registerAzDO");function zE(t,e,r){if(!Fy())return[];r.publicLog2("codex.enableRichNav",{});const n=new y0(t,e);return[n,n.register(new ef(r)),...ef.createStatus()]}c(zE,"registerNavigationServiceProviders");function Fy(){return h.env.uiKind===h.UIKind.Desktop||ke.get("richNavigation.enabled")===!0}c(Fy,"isRichNavEnabled")})(),module.exports=__webpack_exports__})();
